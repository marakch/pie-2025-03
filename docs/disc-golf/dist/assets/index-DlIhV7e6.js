(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var nR=Object.defineProperty,rR=(n,e,t)=>e in n?nR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tn=(n,e,t)=>rR(n,typeof e!="symbol"?e+"":e,t);function iR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();function YM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $M={exports:{}},Jp={},KM={exports:{}},Lt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ed=Symbol.for("react.element"),aR=Symbol.for("react.portal"),sR=Symbol.for("react.fragment"),oR=Symbol.for("react.strict_mode"),lR=Symbol.for("react.profiler"),cR=Symbol.for("react.provider"),uR=Symbol.for("react.context"),dR=Symbol.for("react.forward_ref"),hR=Symbol.for("react.suspense"),fR=Symbol.for("react.memo"),pR=Symbol.for("react.lazy"),j1=Symbol.iterator;function mR(n){return n===null||typeof n!="object"?null:(n=j1&&n[j1]||n["@@iterator"],typeof n=="function"?n:null)}var ZM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QM=Object.assign,JM={};function yc(n,e,t){this.props=n,this.context=e,this.refs=JM,this.updater=t||ZM}yc.prototype.isReactComponent={};yc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function eT(){}eT.prototype=yc.prototype;function cy(n,e,t){this.props=n,this.context=e,this.refs=JM,this.updater=t||ZM}var uy=cy.prototype=new eT;uy.constructor=cy;QM(uy,yc.prototype);uy.isPureReactComponent=!0;var F1=Array.isArray,tT=Object.prototype.hasOwnProperty,dy={current:null},nT={key:!0,ref:!0,__self:!0,__source:!0};function rT(n,e,t){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)tT.call(e,r)&&!nT.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var u=Array(o),d=0;d<o;d++)u[d]=arguments[d+2];i.children=u}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Ed,type:n,key:a,ref:s,props:i,_owner:dy.current}}function gR(n,e){return{$$typeof:Ed,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function hy(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ed}function vR(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var z1=/\/+/g;function Jg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?vR(""+n.key):e.toString(36)}function ep(n,e,t,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Ed:case aR:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+Jg(s,0):r,F1(i)?(t="",n!=null&&(t=n.replace(z1,"$&/")+"/"),ep(i,e,t,"",function(d){return d})):i!=null&&(hy(i)&&(i=gR(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(z1,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",F1(n))for(var o=0;o<n.length;o++){a=n[o];var u=r+Jg(a,o);s+=ep(a,e,t,u,i)}else if(u=mR(n),typeof u=="function")for(n=u.call(n),o=0;!(a=n.next()).done;)a=a.value,u=r+Jg(a,o++),s+=ep(a,e,t,u,i);else if(a==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function zh(n,e,t){if(n==null)return n;var r=[],i=0;return ep(n,r,"","",function(a){return e.call(t,a,i++)}),r}function xR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Rr={current:null},tp={transition:null},yR={ReactCurrentDispatcher:Rr,ReactCurrentBatchConfig:tp,ReactCurrentOwner:dy};function iT(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:zh,forEach:function(n,e,t){zh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return zh(n,function(){e++}),e},toArray:function(n){return zh(n,function(e){return e})||[]},only:function(n){if(!hy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Lt.Component=yc;Lt.Fragment=sR;Lt.Profiler=lR;Lt.PureComponent=cy;Lt.StrictMode=oR;Lt.Suspense=hR;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yR;Lt.act=iT;Lt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=QM({},n.props),i=n.key,a=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=dy.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(u in e)tT.call(e,u)&&!nT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){o=Array(u);for(var d=0;d<u;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Ed,type:n.type,key:i,ref:a,props:r,_owner:s}};Lt.createContext=function(n){return n={$$typeof:uR,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cR,_context:n},n.Consumer=n};Lt.createElement=rT;Lt.createFactory=function(n){var e=rT.bind(null,n);return e.type=n,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(n){return{$$typeof:dR,render:n}};Lt.isValidElement=hy;Lt.lazy=function(n){return{$$typeof:pR,_payload:{_status:-1,_result:n},_init:xR}};Lt.memo=function(n,e){return{$$typeof:fR,type:n,compare:e===void 0?null:e}};Lt.startTransition=function(n){var e=tp.transition;tp.transition={};try{n()}finally{tp.transition=e}};Lt.unstable_act=iT;Lt.useCallback=function(n,e){return Rr.current.useCallback(n,e)};Lt.useContext=function(n){return Rr.current.useContext(n)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(n){return Rr.current.useDeferredValue(n)};Lt.useEffect=function(n,e){return Rr.current.useEffect(n,e)};Lt.useId=function(){return Rr.current.useId()};Lt.useImperativeHandle=function(n,e,t){return Rr.current.useImperativeHandle(n,e,t)};Lt.useInsertionEffect=function(n,e){return Rr.current.useInsertionEffect(n,e)};Lt.useLayoutEffect=function(n,e){return Rr.current.useLayoutEffect(n,e)};Lt.useMemo=function(n,e){return Rr.current.useMemo(n,e)};Lt.useReducer=function(n,e,t){return Rr.current.useReducer(n,e,t)};Lt.useRef=function(n){return Rr.current.useRef(n)};Lt.useState=function(n){return Rr.current.useState(n)};Lt.useSyncExternalStore=function(n,e,t){return Rr.current.useSyncExternalStore(n,e,t)};Lt.useTransition=function(){return Rr.current.useTransition()};Lt.version="18.3.1";KM.exports=Lt;var te=KM.exports;const aT=YM(te),bR=iR({__proto__:null,default:aT},[te]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var _R=te,wR=Symbol.for("react.element"),SR=Symbol.for("react.fragment"),MR=Object.prototype.hasOwnProperty,TR=_R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ER={key:!0,ref:!0,__self:!0,__source:!0};function sT(n,e,t){var r,i={},a=null,s=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)MR.call(e,r)&&!ER.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wR,type:n,key:a,ref:s,props:i,_owner:TR.current}}Jp.Fragment=SR;Jp.jsx=sT;Jp.jsxs=sT;$M.exports=Jp;var m=$M.exports,yv={},oT={exports:{}},ui={},lT={exports:{}},cT={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(n){function e(H,q){var K=H.length;H.push(q);e:for(;0<K;){var se=K-1>>>1,me=H[se];if(0<i(me,q))H[se]=q,H[K]=me,K=se;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var q=H[0],K=H.pop();if(K!==q){H[0]=K;e:for(var se=0,me=H.length,ie=me>>>1;se<ie;){var xe=2*(se+1)-1,ze=H[xe],De=xe+1,Ve=H[De];if(0>i(ze,K))De<me&&0>i(Ve,ze)?(H[se]=Ve,H[De]=K,se=De):(H[se]=ze,H[xe]=K,se=xe);else if(De<me&&0>i(Ve,K))H[se]=Ve,H[De]=K,se=De;else break e}}return q}function i(H,q){var K=H.sortIndex-q.sortIndex;return K!==0?K:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var u=[],d=[],h=1,f=null,p=3,x=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var q=t(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=H)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(d)}}function E(H){if(M=!1,w(H),!y)if(t(u)!==null)y=!0,de(N);else{var q=t(d);q!==null&&ge(E,q.startTime-H)}}function N(H,q){y=!1,M&&(M=!1,g(U),U=-1),x=!0;var K=p;try{for(w(q),f=t(u);f!==null&&(!(f.expirationTime>q)||H&&!G());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var me=se(f.expirationTime<=q);q=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(u)&&r(u),w(q)}else r(u);f=t(u)}if(f!==null)var ie=!0;else{var xe=t(d);xe!==null&&ge(E,xe.startTime-q),ie=!1}return ie}finally{f=null,p=K,x=!1}}var P=!1,L=null,U=-1,R=5,I=-1;function G(){return!(n.unstable_now()-I<R)}function Z(){if(L!==null){var H=n.unstable_now();I=H;var q=!0;try{q=L(!0,H)}finally{q?pe():(P=!1,L=null)}}else P=!1}var pe;if(typeof S=="function")pe=function(){S(Z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=Z,pe=function(){J.postMessage(null)}}else pe=function(){_(Z,0)};function de(H){L=H,P||(P=!0,pe())}function ge(H,q){U=_(function(){H(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){y||x||(y=!0,de(N))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var K=p;p=q;try{return H()}finally{p=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return q()}finally{p=K}},n.unstable_scheduleCallback=function(H,q,K){var se=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?se+K:se):K=se,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=K+me,H={id:h++,callback:q,priorityLevel:H,startTime:K,expirationTime:me,sortIndex:-1},K>se?(H.sortIndex=K,e(d,H),t(u)===null&&H===t(d)&&(M?(g(U),U=-1):M=!0,ge(E,K-se))):(H.sortIndex=me,e(u,H),y||x||(y=!0,de(N))),H},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(H){var q=p;return function(){var K=p;p=q;try{return H.apply(this,arguments)}finally{p=K}}}})(cT);lT.exports=cT;var AR=lT.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var CR=te,si=AR;function Ie(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uT=new Set,ju={};function zo(n,e){ic(n,e),ic(n+"Capture",e)}function ic(n,e){for(ju[n]=e,n=0;n<e.length;n++)uT.add(e[n])}var Da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bv=Object.prototype.hasOwnProperty,RR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B1={},H1={};function PR(n){return bv.call(H1,n)?!0:bv.call(B1,n)?!1:RR.test(n)?H1[n]=!0:(B1[n]=!0,!1)}function NR(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function LR(n,e,t,r){if(e===null||typeof e>"u"||NR(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pr(n,e,t,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){rr[n]=new Pr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];rr[e]=new Pr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){rr[n]=new Pr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){rr[n]=new Pr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){rr[n]=new Pr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){rr[n]=new Pr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){rr[n]=new Pr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){rr[n]=new Pr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){rr[n]=new Pr(n,5,!1,n.toLowerCase(),null,!1,!1)});var fy=/[\-:]([a-z])/g;function py(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(fy,py);rr[e]=new Pr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(fy,py);rr[e]=new Pr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(fy,py);rr[e]=new Pr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){rr[n]=new Pr(n,1,!1,n.toLowerCase(),null,!1,!1)});rr.xlinkHref=new Pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){rr[n]=new Pr(n,1,!1,n.toLowerCase(),null,!0,!0)});function my(n,e,t,r){var i=rr.hasOwnProperty(e)?rr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LR(e,t,i,r)&&(t=null),r||i===null?PR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var za=CR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bh=Symbol.for("react.element"),Ll=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),gy=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),dT=Symbol.for("react.provider"),hT=Symbol.for("react.context"),vy=Symbol.for("react.forward_ref"),wv=Symbol.for("react.suspense"),Sv=Symbol.for("react.suspense_list"),xy=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),fT=Symbol.for("react.offscreen"),V1=Symbol.iterator;function Yc(n){return n===null||typeof n!="object"?null:(n=V1&&n[V1]||n["@@iterator"],typeof n=="function"?n:null)}var pn=Object.assign,e0;function vu(n){if(e0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);e0=e&&e[1]||""}return`
`+e0+n}var t0=!1;function n0(n,e){if(!n||t0)return"";t0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){r=d}n.call(e.prototype)}else{try{throw Error()}catch(d){r=d}n()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var u=`
`+i[s].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=s&&0<=o);break}}}finally{t0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?vu(n):""}function IR(n){switch(n.tag){case 5:return vu(n.type);case 16:return vu("Lazy");case 13:return vu("Suspense");case 19:return vu("SuspenseList");case 0:case 2:case 15:return n=n0(n.type,!1),n;case 11:return n=n0(n.type.render,!1),n;case 1:return n=n0(n.type,!0),n;default:return""}}function Mv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Il:return"Fragment";case Ll:return"Portal";case _v:return"Profiler";case gy:return"StrictMode";case wv:return"Suspense";case Sv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hT:return(n.displayName||"Context")+".Consumer";case dT:return(n._context.displayName||"Context")+".Provider";case vy:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xy:return e=n.displayName||null,e!==null?e:Mv(n.type)||"Memo";case ls:e=n._payload,n=n._init;try{return Mv(n(e))}catch{}}return null}function kR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mv(e);case 8:return e===gy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ns(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pT(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DR(n){var e=pT(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Hh(n){n._valueTracker||(n._valueTracker=DR(n))}function mT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=pT(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function bp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Tv(n,e){var t=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function G1(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ns(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gT(n,e){e=e.checked,e!=null&&my(n,"checked",e,!1)}function Ev(n,e){gT(n,e);var t=Ns(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Av(n,e.type,t):e.hasOwnProperty("defaultValue")&&Av(n,e.type,Ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function W1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Av(n,e,t){(e!=="number"||bp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var xu=Array.isArray;function Kl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ns(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Cv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function X1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ie(92));if(xu(t)){if(1<t.length)throw Error(Ie(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ns(t)}}function vT(n,e){var t=Ns(e.value),r=Ns(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function q1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function xT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?xT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vh,yT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vh=Vh||document.createElement("div"),Vh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Fu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OR=["Webkit","ms","Moz","O"];Object.keys(wu).forEach(function(n){OR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),wu[e]=wu[n]})});function bT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||wu.hasOwnProperty(n)&&wu[n]?(""+e).trim():e+"px"}function _T(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=bT(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var UR=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pv(n,e){if(e){if(UR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function Nv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lv=null;function yy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Iv=null,Zl=null,Ql=null;function Y1(n){if(n=Rd(n)){if(typeof Iv!="function")throw Error(Ie(280));var e=n.stateNode;e&&(e=im(e),Iv(n.stateNode,n.type,e))}}function wT(n){Zl?Ql?Ql.push(n):Ql=[n]:Zl=n}function ST(){if(Zl){var n=Zl,e=Ql;if(Ql=Zl=null,Y1(n),e)for(n=0;n<e.length;n++)Y1(e[n])}}function MT(n,e){return n(e)}function TT(){}var r0=!1;function ET(n,e,t){if(r0)return n(e,t);r0=!0;try{return MT(n,e,t)}finally{r0=!1,(Zl!==null||Ql!==null)&&(TT(),ST())}}function zu(n,e){var t=n.stateNode;if(t===null)return null;var r=im(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ie(231,e,typeof t));return t}var kv=!1;if(Da)try{var $c={};Object.defineProperty($c,"passive",{get:function(){kv=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{kv=!1}function jR(n,e,t,r,i,a,s,o,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var Su=!1,_p=null,wp=!1,Dv=null,FR={onError:function(n){Su=!0,_p=n}};function zR(n,e,t,r,i,a,s,o,u){Su=!1,_p=null,jR.apply(FR,arguments)}function BR(n,e,t,r,i,a,s,o,u){if(zR.apply(this,arguments),Su){if(Su){var d=_p;Su=!1,_p=null}else throw Error(Ie(198));wp||(wp=!0,Dv=d)}}function Bo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function AT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $1(n){if(Bo(n)!==n)throw Error(Ie(188))}function HR(n){var e=n.alternate;if(!e){if(e=Bo(n),e===null)throw Error(Ie(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return $1(i),n;if(a===r)return $1(i),e;a=a.sibling}throw Error(Ie(188))}if(t.return!==r.return)t=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===t){s=!0,t=i,r=a;break}if(o===r){s=!0,r=i,t=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===t){s=!0,t=a,r=i;break}if(o===r){s=!0,r=a,t=i;break}o=o.sibling}if(!s)throw Error(Ie(189))}}if(t.alternate!==r)throw Error(Ie(190))}if(t.tag!==3)throw Error(Ie(188));return t.stateNode.current===t?n:e}function CT(n){return n=HR(n),n!==null?RT(n):null}function RT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=RT(n);if(e!==null)return e;n=n.sibling}return null}var PT=si.unstable_scheduleCallback,K1=si.unstable_cancelCallback,VR=si.unstable_shouldYield,GR=si.unstable_requestPaint,An=si.unstable_now,WR=si.unstable_getCurrentPriorityLevel,by=si.unstable_ImmediatePriority,NT=si.unstable_UserBlockingPriority,Sp=si.unstable_NormalPriority,XR=si.unstable_LowPriority,LT=si.unstable_IdlePriority,em=null,la=null;function qR(n){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(em,n,void 0,(n.current.flags&128)===128)}catch{}}var Hi=Math.clz32?Math.clz32:KR,YR=Math.log,$R=Math.LN2;function KR(n){return n>>>=0,n===0?32:31-(YR(n)/$R|0)|0}var Gh=64,Wh=4194304;function yu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Mp(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,a=n.pingedLanes,s=t&268435455;if(s!==0){var o=s&~i;o!==0?r=yu(o):(a&=s,a!==0&&(r=yu(a)))}else s=t&~i,s!==0?r=yu(s):a!==0&&(r=yu(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Hi(e),i=1<<t,r|=n[t],e&=~i;return r}function ZR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QR(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes;0<a;){var s=31-Hi(a),o=1<<s,u=i[s];u===-1?(!(o&t)||o&r)&&(i[s]=ZR(o,e)):u<=e&&(n.expiredLanes|=o),a&=~o}}function Ov(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function IT(){var n=Gh;return Gh<<=1,!(Gh&4194240)&&(Gh=64),n}function i0(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ad(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Hi(e),n[e]=t}function JR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Hi(t),a=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~a}}function _y(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Hi(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Yt=0;function kT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var DT,wy,OT,UT,jT,Uv=!1,Xh=[],xs=null,ys=null,bs=null,Bu=new Map,Hu=new Map,hs=[],eP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Z1(n,e){switch(n){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hu.delete(e.pointerId)}}function Kc(n,e,t,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Rd(e),e!==null&&wy(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function tP(n,e,t,r,i){switch(e){case"focusin":return xs=Kc(xs,n,e,t,r,i),!0;case"dragenter":return ys=Kc(ys,n,e,t,r,i),!0;case"mouseover":return bs=Kc(bs,n,e,t,r,i),!0;case"pointerover":var a=i.pointerId;return Bu.set(a,Kc(Bu.get(a)||null,n,e,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Hu.set(a,Kc(Hu.get(a)||null,n,e,t,r,i)),!0}return!1}function FT(n){var e=go(n.target);if(e!==null){var t=Bo(e);if(t!==null){if(e=t.tag,e===13){if(e=AT(t),e!==null){n.blockedOn=e,jT(n.priority,function(){OT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function np(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=jv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Lv=r,t.target.dispatchEvent(r),Lv=null}else return e=Rd(t),e!==null&&wy(e),n.blockedOn=t,!1;e.shift()}return!0}function Q1(n,e,t){np(n)&&t.delete(e)}function nP(){Uv=!1,xs!==null&&np(xs)&&(xs=null),ys!==null&&np(ys)&&(ys=null),bs!==null&&np(bs)&&(bs=null),Bu.forEach(Q1),Hu.forEach(Q1)}function Zc(n,e){n.blockedOn===e&&(n.blockedOn=null,Uv||(Uv=!0,si.unstable_scheduleCallback(si.unstable_NormalPriority,nP)))}function Vu(n){function e(i){return Zc(i,n)}if(0<Xh.length){Zc(Xh[0],n);for(var t=1;t<Xh.length;t++){var r=Xh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(xs!==null&&Zc(xs,n),ys!==null&&Zc(ys,n),bs!==null&&Zc(bs,n),Bu.forEach(e),Hu.forEach(e),t=0;t<hs.length;t++)r=hs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<hs.length&&(t=hs[0],t.blockedOn===null);)FT(t),t.blockedOn===null&&hs.shift()}var Jl=za.ReactCurrentBatchConfig,Tp=!0;function rP(n,e,t,r){var i=Yt,a=Jl.transition;Jl.transition=null;try{Yt=1,Sy(n,e,t,r)}finally{Yt=i,Jl.transition=a}}function iP(n,e,t,r){var i=Yt,a=Jl.transition;Jl.transition=null;try{Yt=4,Sy(n,e,t,r)}finally{Yt=i,Jl.transition=a}}function Sy(n,e,t,r){if(Tp){var i=jv(n,e,t,r);if(i===null)p0(n,e,r,Ep,t),Z1(n,r);else if(tP(i,n,e,t,r))r.stopPropagation();else if(Z1(n,r),e&4&&-1<eP.indexOf(n)){for(;i!==null;){var a=Rd(i);if(a!==null&&DT(a),a=jv(n,e,t,r),a===null&&p0(n,e,r,Ep,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else p0(n,e,r,null,t)}}var Ep=null;function jv(n,e,t,r){if(Ep=null,n=yy(r),n=go(n),n!==null)if(e=Bo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=AT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ep=n,null}function zT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WR()){case by:return 1;case NT:return 4;case Sp:case XR:return 16;case LT:return 536870912;default:return 16}default:return 16}}var ms=null,My=null,rp=null;function BT(){if(rp)return rp;var n,e=My,t=e.length,r,i="value"in ms?ms.value:ms.textContent,a=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[a-r];r++);return rp=i.slice(n,1<r?1-r:void 0)}function ip(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function qh(){return!0}function J1(){return!1}function di(n){function e(t,r,i,a,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qh:J1,this.isPropagationStopped=J1,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=qh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=qh)},persist:function(){},isPersistent:qh}),e}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ty=di(bc),Cd=pn({},bc,{view:0,detail:0}),aP=di(Cd),a0,s0,Qc,tm=pn({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ey,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qc&&(Qc&&n.type==="mousemove"?(a0=n.screenX-Qc.screenX,s0=n.screenY-Qc.screenY):s0=a0=0,Qc=n),a0)},movementY:function(n){return"movementY"in n?n.movementY:s0}}),ew=di(tm),sP=pn({},tm,{dataTransfer:0}),oP=di(sP),lP=pn({},Cd,{relatedTarget:0}),o0=di(lP),cP=pn({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),uP=di(cP),dP=pn({},bc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),hP=di(dP),fP=pn({},bc,{data:0}),tw=di(fP),pP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vP(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=gP[n])?!!e[n]:!1}function Ey(){return vP}var xP=pn({},Cd,{key:function(n){if(n.key){var e=pP[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ip(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mP[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ey,charCode:function(n){return n.type==="keypress"?ip(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ip(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),yP=di(xP),bP=pn({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nw=di(bP),_P=pn({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ey}),wP=di(_P),SP=pn({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),MP=di(SP),TP=pn({},tm,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),EP=di(TP),AP=[9,13,27,32],Ay=Da&&"CompositionEvent"in window,Mu=null;Da&&"documentMode"in document&&(Mu=document.documentMode);var CP=Da&&"TextEvent"in window&&!Mu,HT=Da&&(!Ay||Mu&&8<Mu&&11>=Mu),rw=" ",iw=!1;function VT(n,e){switch(n){case"keyup":return AP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var kl=!1;function RP(n,e){switch(n){case"compositionend":return GT(e);case"keypress":return e.which!==32?null:(iw=!0,rw);case"textInput":return n=e.data,n===rw&&iw?null:n;default:return null}}function PP(n,e){if(kl)return n==="compositionend"||!Ay&&VT(n,e)?(n=BT(),rp=My=ms=null,kl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HT&&e.locale!=="ko"?null:e.data;default:return null}}var NP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!NP[n.type]:e==="textarea"}function WT(n,e,t,r){wT(r),e=Ap(e,"onChange"),0<e.length&&(t=new Ty("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Tu=null,Gu=null;function LP(n){nE(n,0)}function nm(n){var e=Ul(n);if(mT(e))return n}function IP(n,e){if(n==="change")return e}var XT=!1;if(Da){var l0;if(Da){var c0="oninput"in document;if(!c0){var sw=document.createElement("div");sw.setAttribute("oninput","return;"),c0=typeof sw.oninput=="function"}l0=c0}else l0=!1;XT=l0&&(!document.documentMode||9<document.documentMode)}function ow(){Tu&&(Tu.detachEvent("onpropertychange",qT),Gu=Tu=null)}function qT(n){if(n.propertyName==="value"&&nm(Gu)){var e=[];WT(e,Gu,n,yy(n)),ET(LP,e)}}function kP(n,e,t){n==="focusin"?(ow(),Tu=e,Gu=t,Tu.attachEvent("onpropertychange",qT)):n==="focusout"&&ow()}function DP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nm(Gu)}function OP(n,e){if(n==="click")return nm(e)}function UP(n,e){if(n==="input"||n==="change")return nm(e)}function jP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gi=typeof Object.is=="function"?Object.is:jP;function Wu(n,e){if(Gi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!bv.call(e,i)||!Gi(n[i],e[i]))return!1}return!0}function lw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cw(n,e){var t=lw(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=lw(t)}}function YT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?YT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function $T(){for(var n=window,e=bp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=bp(n.document)}return e}function Cy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function FP(n){var e=$T(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&YT(t.ownerDocument.documentElement,t)){if(r!==null&&Cy(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=cw(t,a);var s=cw(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var zP=Da&&"documentMode"in document&&11>=document.documentMode,Dl=null,Fv=null,Eu=null,zv=!1;function uw(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;zv||Dl==null||Dl!==bp(r)||(r=Dl,"selectionStart"in r&&Cy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eu&&Wu(Eu,r)||(Eu=r,r=Ap(Fv,"onSelect"),0<r.length&&(e=new Ty("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Dl)))}function Yh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ol={animationend:Yh("Animation","AnimationEnd"),animationiteration:Yh("Animation","AnimationIteration"),animationstart:Yh("Animation","AnimationStart"),transitionend:Yh("Transition","TransitionEnd")},u0={},KT={};Da&&(KT=document.createElement("div").style,"AnimationEvent"in window||(delete Ol.animationend.animation,delete Ol.animationiteration.animation,delete Ol.animationstart.animation),"TransitionEvent"in window||delete Ol.transitionend.transition);function rm(n){if(u0[n])return u0[n];if(!Ol[n])return n;var e=Ol[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in KT)return u0[n]=e[t];return n}var ZT=rm("animationend"),QT=rm("animationiteration"),JT=rm("animationstart"),eE=rm("transitionend"),tE=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(n,e){tE.set(n,e),zo(e,[n])}for(var d0=0;d0<dw.length;d0++){var h0=dw[d0],BP=h0.toLowerCase(),HP=h0[0].toUpperCase()+h0.slice(1);Us(BP,"on"+HP)}Us(ZT,"onAnimationEnd");Us(QT,"onAnimationIteration");Us(JT,"onAnimationStart");Us("dblclick","onDoubleClick");Us("focusin","onFocus");Us("focusout","onBlur");Us(eE,"onTransitionEnd");ic("onMouseEnter",["mouseout","mouseover"]);ic("onMouseLeave",["mouseout","mouseover"]);ic("onPointerEnter",["pointerout","pointerover"]);ic("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VP=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function hw(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,BR(r,e,void 0,n),n.currentTarget=null}function nE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,d=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break e;hw(i,o,d),a=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,d=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break e;hw(i,o,d),a=u}}}if(wp)throw n=Dv,wp=!1,Dv=null,n}function nn(n,e){var t=e[Wv];t===void 0&&(t=e[Wv]=new Set);var r=n+"__bubble";t.has(r)||(rE(e,n,2,!1),t.add(r))}function f0(n,e,t){var r=0;e&&(r|=4),rE(t,n,r,e)}var $h="_reactListening"+Math.random().toString(36).slice(2);function Xu(n){if(!n[$h]){n[$h]=!0,uT.forEach(function(t){t!=="selectionchange"&&(VP.has(t)||f0(t,!1,n),f0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[$h]||(e[$h]=!0,f0("selectionchange",!1,e))}}function rE(n,e,t,r){switch(zT(e)){case 1:var i=rP;break;case 4:i=iP;break;default:i=Sy}t=i.bind(null,e,t,n),i=void 0,!kv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function p0(n,e,t,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;o!==null;){if(s=go(o),s===null)return;if(u=s.tag,u===5||u===6){r=a=s;continue e}o=o.parentNode}}r=r.return}ET(function(){var d=a,h=yy(t),f=[];e:{var p=tE.get(n);if(p!==void 0){var x=Ty,y=n;switch(n){case"keypress":if(ip(t)===0)break e;case"keydown":case"keyup":x=yP;break;case"focusin":y="focus",x=o0;break;case"focusout":y="blur",x=o0;break;case"beforeblur":case"afterblur":x=o0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=oP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=wP;break;case ZT:case QT:case JT:x=uP;break;case eE:x=MP;break;case"scroll":x=aP;break;case"wheel":x=EP;break;case"copy":case"cut":case"paste":x=hP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=nw}var M=(e&4)!==0,_=!M&&n==="scroll",g=M?p!==null?p+"Capture":null:p;M=[];for(var S=d,w;S!==null;){w=S;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,g!==null&&(E=zu(S,g),E!=null&&M.push(qu(S,E,w)))),_)break;S=S.return}0<M.length&&(p=new x(p,y,null,t,h),f.push({event:p,listeners:M}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",x=n==="mouseout"||n==="pointerout",p&&t!==Lv&&(y=t.relatedTarget||t.fromElement)&&(go(y)||y[Oa]))break e;if((x||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,x?(y=t.relatedTarget||t.toElement,x=d,y=y?go(y):null,y!==null&&(_=Bo(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=d),x!==y)){if(M=ew,E="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(M=nw,E="onPointerLeave",g="onPointerEnter",S="pointer"),_=x==null?p:Ul(x),w=y==null?p:Ul(y),p=new M(E,S+"leave",x,t,h),p.target=_,p.relatedTarget=w,E=null,go(h)===d&&(M=new M(g,S+"enter",y,t,h),M.target=w,M.relatedTarget=_,E=M),_=E,x&&y)t:{for(M=x,g=y,S=0,w=M;w;w=ol(w))S++;for(w=0,E=g;E;E=ol(E))w++;for(;0<S-w;)M=ol(M),S--;for(;0<w-S;)g=ol(g),w--;for(;S--;){if(M===g||g!==null&&M===g.alternate)break t;M=ol(M),g=ol(g)}M=null}else M=null;x!==null&&fw(f,p,x,M,!1),y!==null&&_!==null&&fw(f,_,y,M,!0)}}e:{if(p=d?Ul(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var N=IP;else if(aw(p))if(XT)N=UP;else{N=DP;var P=kP}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=OP);if(N&&(N=N(n,d))){WT(f,N,t,h);break e}P&&P(n,p,d),n==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Av(p,"number",p.value)}switch(P=d?Ul(d):window,n){case"focusin":(aw(P)||P.contentEditable==="true")&&(Dl=P,Fv=d,Eu=null);break;case"focusout":Eu=Fv=Dl=null;break;case"mousedown":zv=!0;break;case"contextmenu":case"mouseup":case"dragend":zv=!1,uw(f,t,h);break;case"selectionchange":if(zP)break;case"keydown":case"keyup":uw(f,t,h)}var L;if(Ay)e:{switch(n){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else kl?VT(n,t)&&(U="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&(HT&&t.locale!=="ko"&&(kl||U!=="onCompositionStart"?U==="onCompositionEnd"&&kl&&(L=BT()):(ms=h,My="value"in ms?ms.value:ms.textContent,kl=!0)),P=Ap(d,U),0<P.length&&(U=new tw(U,n,null,t,h),f.push({event:U,listeners:P}),L?U.data=L:(L=GT(t),L!==null&&(U.data=L)))),(L=CP?RP(n,t):PP(n,t))&&(d=Ap(d,"onBeforeInput"),0<d.length&&(h=new tw("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=L))}nE(f,e)})}function qu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ap(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=zu(n,t),a!=null&&r.unshift(qu(n,a,i)),a=zu(n,e),a!=null&&r.push(qu(n,a,i))),n=n.return}return r}function ol(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function fw(n,e,t,r,i){for(var a=e._reactName,s=[];t!==null&&t!==r;){var o=t,u=o.alternate,d=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&d!==null&&(o=d,i?(u=zu(t,a),u!=null&&s.unshift(qu(t,u,o))):i||(u=zu(t,a),u!=null&&s.push(qu(t,u,o)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var GP=/\r\n?/g,WP=/\u0000|\uFFFD/g;function pw(n){return(typeof n=="string"?n:""+n).replace(GP,`
`).replace(WP,"")}function Kh(n,e,t){if(e=pw(e),pw(n)!==e&&t)throw Error(Ie(425))}function Cp(){}var Bv=null,Hv=null;function Vv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gv=typeof setTimeout=="function"?setTimeout:void 0,XP=typeof clearTimeout=="function"?clearTimeout:void 0,mw=typeof Promise=="function"?Promise:void 0,qP=typeof queueMicrotask=="function"?queueMicrotask:typeof mw<"u"?function(n){return mw.resolve(null).then(n).catch(YP)}:Gv;function YP(n){setTimeout(function(){throw n})}function m0(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Vu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Vu(e)}function _s(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function gw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var _c=Math.random().toString(36).slice(2),sa="__reactFiber$"+_c,Yu="__reactProps$"+_c,Oa="__reactContainer$"+_c,Wv="__reactEvents$"+_c,$P="__reactListeners$"+_c,KP="__reactHandles$"+_c;function go(n){var e=n[sa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Oa]||t[sa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=gw(n);n!==null;){if(t=n[sa])return t;n=gw(n)}return e}n=t,t=n.parentNode}return null}function Rd(n){return n=n[sa]||n[Oa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ul(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ie(33))}function im(n){return n[Yu]||null}var Xv=[],jl=-1;function js(n){return{current:n}}function an(n){0>jl||(n.current=Xv[jl],Xv[jl]=null,jl--)}function tn(n,e){jl++,Xv[jl]=n.current,n.current=e}var Ls={},mr=js(Ls),Br=js(!1),Lo=Ls;function ac(n,e){var t=n.type.contextTypes;if(!t)return Ls;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Hr(n){return n=n.childContextTypes,n!=null}function Rp(){an(Br),an(mr)}function vw(n,e,t){if(mr.current!==Ls)throw Error(Ie(168));tn(mr,e),tn(Br,t)}function iE(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ie(108,kR(n)||"Unknown",i));return pn({},t,r)}function Pp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ls,Lo=mr.current,tn(mr,n),tn(Br,Br.current),!0}function xw(n,e,t){var r=n.stateNode;if(!r)throw Error(Ie(169));t?(n=iE(n,e,Lo),r.__reactInternalMemoizedMergedChildContext=n,an(Br),an(mr),tn(mr,n)):an(Br),tn(Br,t)}var Ra=null,am=!1,g0=!1;function aE(n){Ra===null?Ra=[n]:Ra.push(n)}function ZP(n){am=!0,aE(n)}function Fs(){if(!g0&&Ra!==null){g0=!0;var n=0,e=Yt;try{var t=Ra;for(Yt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ra=null,am=!1}catch(i){throw Ra!==null&&(Ra=Ra.slice(n+1)),PT(by,Fs),i}finally{Yt=e,g0=!1}}return null}var Fl=[],zl=0,Np=null,Lp=0,_i=[],wi=0,Io=null,Na=1,La="";function uo(n,e){Fl[zl++]=Lp,Fl[zl++]=Np,Np=n,Lp=e}function sE(n,e,t){_i[wi++]=Na,_i[wi++]=La,_i[wi++]=Io,Io=n;var r=Na;n=La;var i=32-Hi(r)-1;r&=~(1<<i),t+=1;var a=32-Hi(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Na=1<<32-Hi(e)+i|t<<i|r,La=a+n}else Na=1<<a|t<<i|r,La=n}function Ry(n){n.return!==null&&(uo(n,1),sE(n,1,0))}function Py(n){for(;n===Np;)Np=Fl[--zl],Fl[zl]=null,Lp=Fl[--zl],Fl[zl]=null;for(;n===Io;)Io=_i[--wi],_i[wi]=null,La=_i[--wi],_i[wi]=null,Na=_i[--wi],_i[wi]=null}var ti=null,ei=null,on=!1,ji=null;function oE(n,e){var t=Mi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function yw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ti=n,ei=_s(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ti=n,ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Io!==null?{id:Na,overflow:La}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Mi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ti=n,ei=null,!0):!1;default:return!1}}function qv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Yv(n){if(on){var e=ei;if(e){var t=e;if(!yw(n,e)){if(qv(n))throw Error(Ie(418));e=_s(t.nextSibling);var r=ti;e&&yw(n,e)?oE(r,t):(n.flags=n.flags&-4097|2,on=!1,ti=n)}}else{if(qv(n))throw Error(Ie(418));n.flags=n.flags&-4097|2,on=!1,ti=n}}}function bw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ti=n}function Zh(n){if(n!==ti)return!1;if(!on)return bw(n),on=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Vv(n.type,n.memoizedProps)),e&&(e=ei)){if(qv(n))throw lE(),Error(Ie(418));for(;e;)oE(n,e),e=_s(e.nextSibling)}if(bw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ie(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ei=_s(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ei=null}}else ei=ti?_s(n.stateNode.nextSibling):null;return!0}function lE(){for(var n=ei;n;)n=_s(n.nextSibling)}function sc(){ei=ti=null,on=!1}function Ny(n){ji===null?ji=[n]:ji.push(n)}var QP=za.ReactCurrentBatchConfig;function Jc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ie(309));var r=t.stateNode}if(!r)throw Error(Ie(147,n));var i=r,a=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof n!="string")throw Error(Ie(284));if(!t._owner)throw Error(Ie(290,n))}return n}function Qh(n,e){throw n=Object.prototype.toString.call(e),Error(Ie(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _w(n){var e=n._init;return e(n._payload)}function cE(n){function e(g,S){if(n){var w=g.deletions;w===null?(g.deletions=[S],g.flags|=16):w.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function r(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function i(g,S){return g=Ts(g,S),g.index=0,g.sibling=null,g}function a(g,S,w){return g.index=w,n?(w=g.alternate,w!==null?(w=w.index,w<S?(g.flags|=2,S):w):(g.flags|=2,S)):(g.flags|=1048576,S)}function s(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,S,w,E){return S===null||S.tag!==6?(S=S0(w,g.mode,E),S.return=g,S):(S=i(S,w),S.return=g,S)}function u(g,S,w,E){var N=w.type;return N===Il?h(g,S,w.props.children,E,w.key):S!==null&&(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&_w(N)===S.type)?(E=i(S,w.props),E.ref=Jc(g,S,w),E.return=g,E):(E=dp(w.type,w.key,w.props,null,g.mode,E),E.ref=Jc(g,S,w),E.return=g,E)}function d(g,S,w,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=M0(w,g.mode,E),S.return=g,S):(S=i(S,w.children||[]),S.return=g,S)}function h(g,S,w,E,N){return S===null||S.tag!==7?(S=Eo(w,g.mode,E,N),S.return=g,S):(S=i(S,w),S.return=g,S)}function f(g,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=S0(""+S,g.mode,w),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bh:return w=dp(S.type,S.key,S.props,null,g.mode,w),w.ref=Jc(g,null,S),w.return=g,w;case Ll:return S=M0(S,g.mode,w),S.return=g,S;case ls:var E=S._init;return f(g,E(S._payload),w)}if(xu(S)||Yc(S))return S=Eo(S,g.mode,w,null),S.return=g,S;Qh(g,S)}return null}function p(g,S,w,E){var N=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:o(g,S,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bh:return w.key===N?u(g,S,w,E):null;case Ll:return w.key===N?d(g,S,w,E):null;case ls:return N=w._init,p(g,S,N(w._payload),E)}if(xu(w)||Yc(w))return N!==null?null:h(g,S,w,E,null);Qh(g,w)}return null}function x(g,S,w,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(w)||null,o(S,g,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bh:return g=g.get(E.key===null?w:E.key)||null,u(S,g,E,N);case Ll:return g=g.get(E.key===null?w:E.key)||null,d(S,g,E,N);case ls:var P=E._init;return x(g,S,w,P(E._payload),N)}if(xu(E)||Yc(E))return g=g.get(w)||null,h(S,g,E,N,null);Qh(S,E)}return null}function y(g,S,w,E){for(var N=null,P=null,L=S,U=S=0,R=null;L!==null&&U<w.length;U++){L.index>U?(R=L,L=null):R=L.sibling;var I=p(g,L,w[U],E);if(I===null){L===null&&(L=R);break}n&&L&&I.alternate===null&&e(g,L),S=a(I,S,U),P===null?N=I:P.sibling=I,P=I,L=R}if(U===w.length)return t(g,L),on&&uo(g,U),N;if(L===null){for(;U<w.length;U++)L=f(g,w[U],E),L!==null&&(S=a(L,S,U),P===null?N=L:P.sibling=L,P=L);return on&&uo(g,U),N}for(L=r(g,L);U<w.length;U++)R=x(L,g,U,w[U],E),R!==null&&(n&&R.alternate!==null&&L.delete(R.key===null?U:R.key),S=a(R,S,U),P===null?N=R:P.sibling=R,P=R);return n&&L.forEach(function(G){return e(g,G)}),on&&uo(g,U),N}function M(g,S,w,E){var N=Yc(w);if(typeof N!="function")throw Error(Ie(150));if(w=N.call(w),w==null)throw Error(Ie(151));for(var P=N=null,L=S,U=S=0,R=null,I=w.next();L!==null&&!I.done;U++,I=w.next()){L.index>U?(R=L,L=null):R=L.sibling;var G=p(g,L,I.value,E);if(G===null){L===null&&(L=R);break}n&&L&&G.alternate===null&&e(g,L),S=a(G,S,U),P===null?N=G:P.sibling=G,P=G,L=R}if(I.done)return t(g,L),on&&uo(g,U),N;if(L===null){for(;!I.done;U++,I=w.next())I=f(g,I.value,E),I!==null&&(S=a(I,S,U),P===null?N=I:P.sibling=I,P=I);return on&&uo(g,U),N}for(L=r(g,L);!I.done;U++,I=w.next())I=x(L,g,U,I.value,E),I!==null&&(n&&I.alternate!==null&&L.delete(I.key===null?U:I.key),S=a(I,S,U),P===null?N=I:P.sibling=I,P=I);return n&&L.forEach(function(Z){return e(g,Z)}),on&&uo(g,U),N}function _(g,S,w,E){if(typeof w=="object"&&w!==null&&w.type===Il&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Bh:e:{for(var N=w.key,P=S;P!==null;){if(P.key===N){if(N=w.type,N===Il){if(P.tag===7){t(g,P.sibling),S=i(P,w.props.children),S.return=g,g=S;break e}}else if(P.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&_w(N)===P.type){t(g,P.sibling),S=i(P,w.props),S.ref=Jc(g,P,w),S.return=g,g=S;break e}t(g,P);break}else e(g,P);P=P.sibling}w.type===Il?(S=Eo(w.props.children,g.mode,E,w.key),S.return=g,g=S):(E=dp(w.type,w.key,w.props,null,g.mode,E),E.ref=Jc(g,S,w),E.return=g,g=E)}return s(g);case Ll:e:{for(P=w.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){t(g,S.sibling),S=i(S,w.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=M0(w,g.mode,E),S.return=g,g=S}return s(g);case ls:return P=w._init,_(g,S,P(w._payload),E)}if(xu(w))return y(g,S,w,E);if(Yc(w))return M(g,S,w,E);Qh(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(t(g,S.sibling),S=i(S,w),S.return=g,g=S):(t(g,S),S=S0(w,g.mode,E),S.return=g,g=S),s(g)):t(g,S)}return _}var oc=cE(!0),uE=cE(!1),Ip=js(null),kp=null,Bl=null,Ly=null;function Iy(){Ly=Bl=kp=null}function ky(n){var e=Ip.current;an(Ip),n._currentValue=e}function $v(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ec(n,e){kp=n,Ly=Bl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zr=!0),n.firstContext=null)}function Ei(n){var e=n._currentValue;if(Ly!==n)if(n={context:n,memoizedValue:e,next:null},Bl===null){if(kp===null)throw Error(Ie(308));Bl=n,kp.dependencies={lanes:0,firstContext:n}}else Bl=Bl.next=n;return e}var vo=null;function Dy(n){vo===null?vo=[n]:vo.push(n)}function dE(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Dy(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ua(n,r)}function Ua(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var cs=!1;function Oy(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ka(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ua(n,t)}return i=r.interleaved,i===null?(e.next=e,Dy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ua(n,t)}function ap(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,_y(n,t)}}function ww(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=s:a=a.next=s,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Dp(n,e,t,r){var i=n.updateQueue;cs=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,d=u.next;u.next=null,s===null?a=d:s.next=d,s=u;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;s=0,h=d=u=null,o=a;do{var p=o.lane,x=o.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,M=o;switch(p=e,x=t,M.tag){case 1:if(y=M.payload,typeof y=="function"){f=y.call(x,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=M.payload,p=typeof y=="function"?y.call(x,f,p):y,p==null)break e;f=pn({},f,p);break e;case 2:cs=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else x={eventTime:x,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=x,u=f):h=h.next=x,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Do|=s,n.lanes=s,n.memoizedState=f}}function Sw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ie(191,i));i.call(r)}}}var Pd={},ca=js(Pd),$u=js(Pd),Ku=js(Pd);function xo(n){if(n===Pd)throw Error(Ie(174));return n}function Uy(n,e){switch(tn(Ku,e),tn($u,n),tn(ca,Pd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Rv(e,n)}an(ca),tn(ca,e)}function lc(){an(ca),an($u),an(Ku)}function fE(n){xo(Ku.current);var e=xo(ca.current),t=Rv(e,n.type);e!==t&&(tn($u,n),tn(ca,t))}function jy(n){$u.current===n&&(an(ca),an($u))}var dn=js(0);function Op(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v0=[];function Fy(){for(var n=0;n<v0.length;n++)v0[n]._workInProgressVersionPrimary=null;v0.length=0}var sp=za.ReactCurrentDispatcher,x0=za.ReactCurrentBatchConfig,ko=0,fn=null,Bn=null,Kn=null,Up=!1,Au=!1,Zu=0,JP=0;function lr(){throw Error(Ie(321))}function zy(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Gi(n[t],e[t]))return!1;return!0}function By(n,e,t,r,i,a){if(ko=a,fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sp.current=n===null||n.memoizedState===null?rN:iN,n=t(r,i),Au){a=0;do{if(Au=!1,Zu=0,25<=a)throw Error(Ie(301));a+=1,Kn=Bn=null,e.updateQueue=null,sp.current=aN,n=t(r,i)}while(Au)}if(sp.current=jp,e=Bn!==null&&Bn.next!==null,ko=0,Kn=Bn=fn=null,Up=!1,e)throw Error(Ie(300));return n}function Hy(){var n=Zu!==0;return Zu=0,n}function aa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?fn.memoizedState=Kn=n:Kn=Kn.next=n,Kn}function Ai(){if(Bn===null){var n=fn.alternate;n=n!==null?n.memoizedState:null}else n=Bn.next;var e=Kn===null?fn.memoizedState:Kn.next;if(e!==null)Kn=e,Bn=n;else{if(n===null)throw Error(Ie(310));Bn=n,n={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Kn===null?fn.memoizedState=Kn=n:Kn=Kn.next=n}return Kn}function Qu(n,e){return typeof e=="function"?e(n):e}function y0(n){var e=Ai(),t=e.queue;if(t===null)throw Error(Ie(311));t.lastRenderedReducer=n;var r=Bn,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,u=null,d=a;do{var h=d.lane;if((ko&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:n(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(o=u=f,s=r):u=u.next=f,fn.lanes|=h,Do|=h}d=d.next}while(d!==null&&d!==a);u===null?s=r:u.next=o,Gi(r,e.memoizedState)||(zr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do a=i.lane,fn.lanes|=a,Do|=a,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function b0(n){var e=Ai(),t=e.queue;if(t===null)throw Error(Ie(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do a=n(a,s.action),s=s.next;while(s!==i);Gi(a,e.memoizedState)||(zr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function pE(){}function mE(n,e){var t=fn,r=Ai(),i=e(),a=!Gi(r.memoizedState,i);if(a&&(r.memoizedState=i,zr=!0),r=r.queue,Vy(xE.bind(null,t,r,n),[n]),r.getSnapshot!==e||a||Kn!==null&&Kn.memoizedState.tag&1){if(t.flags|=2048,Ju(9,vE.bind(null,t,r,i,e),void 0,null),Jn===null)throw Error(Ie(349));ko&30||gE(t,e,i)}return i}function gE(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function vE(n,e,t,r){e.value=t,e.getSnapshot=r,yE(e)&&bE(n)}function xE(n,e,t){return t(function(){yE(e)&&bE(n)})}function yE(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Gi(n,t)}catch{return!0}}function bE(n){var e=Ua(n,1);e!==null&&Vi(e,n,1,-1)}function Mw(n){var e=aa();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:n},e.queue=n,n=n.dispatch=nN.bind(null,fn,n),[e.memoizedState,n]}function Ju(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function _E(){return Ai().memoizedState}function op(n,e,t,r){var i=aa();fn.flags|=n,i.memoizedState=Ju(1|e,t,void 0,r===void 0?null:r)}function sm(n,e,t,r){var i=Ai();r=r===void 0?null:r;var a=void 0;if(Bn!==null){var s=Bn.memoizedState;if(a=s.destroy,r!==null&&zy(r,s.deps)){i.memoizedState=Ju(e,t,a,r);return}}fn.flags|=n,i.memoizedState=Ju(1|e,t,a,r)}function Tw(n,e){return op(8390656,8,n,e)}function Vy(n,e){return sm(2048,8,n,e)}function wE(n,e){return sm(4,2,n,e)}function SE(n,e){return sm(4,4,n,e)}function ME(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function TE(n,e,t){return t=t!=null?t.concat([n]):null,sm(4,4,ME.bind(null,e,n),t)}function Gy(){}function EE(n,e){var t=Ai();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zy(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function AE(n,e){var t=Ai();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zy(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function CE(n,e,t){return ko&21?(Gi(t,e)||(t=IT(),fn.lanes|=t,Do|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zr=!0),n.memoizedState=t)}function eN(n,e){var t=Yt;Yt=t!==0&&4>t?t:4,n(!0);var r=x0.transition;x0.transition={};try{n(!1),e()}finally{Yt=t,x0.transition=r}}function RE(){return Ai().memoizedState}function tN(n,e,t){var r=Ms(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},PE(n))NE(e,t);else if(t=dE(n,e,t,r),t!==null){var i=Er();Vi(t,n,r,i),LE(t,e,r)}}function nN(n,e,t){var r=Ms(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(PE(n))NE(e,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,t);if(i.hasEagerState=!0,i.eagerState=o,Gi(o,s)){var u=e.interleaved;u===null?(i.next=i,Dy(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=dE(n,e,i,r),t!==null&&(i=Er(),Vi(t,n,r,i),LE(t,e,r))}}function PE(n){var e=n.alternate;return n===fn||e!==null&&e===fn}function NE(n,e){Au=Up=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function LE(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,_y(n,t)}}var jp={readContext:Ei,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},rN={readContext:Ei,useCallback:function(n,e){return aa().memoizedState=[n,e===void 0?null:e],n},useContext:Ei,useEffect:Tw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,op(4194308,4,ME.bind(null,e,n),t)},useLayoutEffect:function(n,e){return op(4194308,4,n,e)},useInsertionEffect:function(n,e){return op(4,2,n,e)},useMemo:function(n,e){var t=aa();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=aa();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=tN.bind(null,fn,n),[r.memoizedState,n]},useRef:function(n){var e=aa();return n={current:n},e.memoizedState=n},useState:Mw,useDebugValue:Gy,useDeferredValue:function(n){return aa().memoizedState=n},useTransition:function(){var n=Mw(!1),e=n[0];return n=eN.bind(null,n[1]),aa().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=fn,i=aa();if(on){if(t===void 0)throw Error(Ie(407));t=t()}else{if(t=e(),Jn===null)throw Error(Ie(349));ko&30||gE(r,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,Tw(xE.bind(null,r,a,n),[n]),r.flags|=2048,Ju(9,vE.bind(null,r,a,t,e),void 0,null),t},useId:function(){var n=aa(),e=Jn.identifierPrefix;if(on){var t=La,r=Na;t=(r&~(1<<32-Hi(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Zu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=JP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},iN={readContext:Ei,useCallback:EE,useContext:Ei,useEffect:Vy,useImperativeHandle:TE,useInsertionEffect:wE,useLayoutEffect:SE,useMemo:AE,useReducer:y0,useRef:_E,useState:function(){return y0(Qu)},useDebugValue:Gy,useDeferredValue:function(n){var e=Ai();return CE(e,Bn.memoizedState,n)},useTransition:function(){var n=y0(Qu)[0],e=Ai().memoizedState;return[n,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:RE,unstable_isNewReconciler:!1},aN={readContext:Ei,useCallback:EE,useContext:Ei,useEffect:Vy,useImperativeHandle:TE,useInsertionEffect:wE,useLayoutEffect:SE,useMemo:AE,useReducer:b0,useRef:_E,useState:function(){return b0(Qu)},useDebugValue:Gy,useDeferredValue:function(n){var e=Ai();return Bn===null?e.memoizedState=n:CE(e,Bn.memoizedState,n)},useTransition:function(){var n=b0(Qu)[0],e=Ai().memoizedState;return[n,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:RE,unstable_isNewReconciler:!1};function Di(n,e){if(n&&n.defaultProps){e=pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Kv(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var om={isMounted:function(n){return(n=n._reactInternals)?Bo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Er(),i=Ms(n),a=ka(r,i);a.payload=e,t!=null&&(a.callback=t),e=ws(n,a,i),e!==null&&(Vi(e,n,i,r),ap(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Er(),i=Ms(n),a=ka(r,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=ws(n,a,i),e!==null&&(Vi(e,n,i,r),ap(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Er(),r=Ms(n),i=ka(t,r);i.tag=2,e!=null&&(i.callback=e),e=ws(n,i,r),e!==null&&(Vi(e,n,r,t),ap(e,n,r))}};function Ew(n,e,t,r,i,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Wu(t,r)||!Wu(i,a):!0}function IE(n,e,t){var r=!1,i=Ls,a=e.contextType;return typeof a=="object"&&a!==null?a=Ei(a):(i=Hr(e)?Lo:mr.current,r=e.contextTypes,a=(r=r!=null)?ac(n,i):Ls),e=new e(t,a),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=om,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=a),e}function Aw(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&om.enqueueReplaceState(e,e.state,null)}function Zv(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Oy(n);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ei(a):(a=Hr(e)?Lo:mr.current,i.context=ac(n,a)),i.state=n.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Kv(n,e,a,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&om.enqueueReplaceState(i,i.state,null),Dp(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function cc(n,e){try{var t="",r=e;do t+=IR(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:n,source:e,stack:i,digest:null}}function _0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Qv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var sN=typeof WeakMap=="function"?WeakMap:Map;function kE(n,e,t){t=ka(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){zp||(zp=!0,ox=r),Qv(n,e)},t}function DE(n,e,t){t=ka(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Qv(n,e)}}var a=n.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Qv(n,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function Cw(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new sN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=bN.bind(null,n,e,t),e.then(n,n))}function Rw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Pw(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ka(-1,1),e.tag=2,ws(t,e,1))),t.lanes|=1),n)}var oN=za.ReactCurrentOwner,zr=!1;function Tr(n,e,t,r){e.child=n===null?uE(e,null,t,r):oc(e,n.child,t,r)}function Nw(n,e,t,r,i){t=t.render;var a=e.ref;return ec(e,i),r=By(n,e,t,r,a,i),t=Hy(),n!==null&&!zr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ja(n,e,i)):(on&&t&&Ry(e),e.flags|=1,Tr(n,e,r,i),e.child)}function Lw(n,e,t,r,i){if(n===null){var a=t.type;return typeof a=="function"&&!Qy(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,OE(n,e,a,r,i)):(n=dp(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(a=n.child,!(n.lanes&i)){var s=a.memoizedProps;if(t=t.compare,t=t!==null?t:Wu,t(s,r)&&n.ref===e.ref)return ja(n,e,i)}return e.flags|=1,n=Ts(a,r),n.ref=e.ref,n.return=e,e.child=n}function OE(n,e,t,r,i){if(n!==null){var a=n.memoizedProps;if(Wu(a,r)&&n.ref===e.ref)if(zr=!1,e.pendingProps=r=a,(n.lanes&i)!==0)n.flags&131072&&(zr=!0);else return e.lanes=n.lanes,ja(n,e,i)}return Jv(n,e,t,r,i)}function UE(n,e,t){var r=e.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tn(Vl,Qr),Qr|=t;else{if(!(t&1073741824))return n=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,tn(Vl,Qr),Qr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,tn(Vl,Qr),Qr|=r}else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,tn(Vl,Qr),Qr|=r;return Tr(n,e,i,t),e.child}function jE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Jv(n,e,t,r,i){var a=Hr(t)?Lo:mr.current;return a=ac(e,a),ec(e,i),t=By(n,e,t,r,a,i),r=Hy(),n!==null&&!zr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ja(n,e,i)):(on&&r&&Ry(e),e.flags|=1,Tr(n,e,t,i),e.child)}function Iw(n,e,t,r,i){if(Hr(t)){var a=!0;Pp(e)}else a=!1;if(ec(e,i),e.stateNode===null)lp(n,e),IE(e,t,r),Zv(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,d=t.contextType;typeof d=="object"&&d!==null?d=Ei(d):(d=Hr(t)?Lo:mr.current,d=ac(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||u!==d)&&Aw(e,s,r,d),cs=!1;var p=e.memoizedState;s.state=p,Dp(e,r,s,i),u=e.memoizedState,o!==r||p!==u||Br.current||cs?(typeof h=="function"&&(Kv(e,t,h,r),u=e.memoizedState),(o=cs||Ew(e,t,o,r,p,u,d))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=d,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,hE(n,e),o=e.memoizedProps,d=e.type===e.elementType?o:Di(e.type,o),s.props=d,f=e.pendingProps,p=s.context,u=t.contextType,typeof u=="object"&&u!==null?u=Ei(u):(u=Hr(t)?Lo:mr.current,u=ac(e,u));var x=t.getDerivedStateFromProps;(h=typeof x=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==u)&&Aw(e,s,r,u),cs=!1,p=e.memoizedState,s.state=p,Dp(e,r,s,i);var y=e.memoizedState;o!==f||p!==y||Br.current||cs?(typeof x=="function"&&(Kv(e,t,x,r),y=e.memoizedState),(d=cs||Ew(e,t,d,r,p,y,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return ex(n,e,t,r,a,i)}function ex(n,e,t,r,i,a){jE(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&xw(e,t,!1),ja(n,e,a);r=e.stateNode,oN.current=e;var o=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=oc(e,n.child,null,a),e.child=oc(e,null,o,a)):Tr(n,e,o,a),e.memoizedState=r.state,i&&xw(e,t,!0),e.child}function FE(n){var e=n.stateNode;e.pendingContext?vw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&vw(n,e.context,!1),Uy(n,e.containerInfo)}function kw(n,e,t,r,i){return sc(),Ny(i),e.flags|=256,Tr(n,e,t,r),e.child}var tx={dehydrated:null,treeContext:null,retryLane:0};function nx(n){return{baseLanes:n,cachePool:null,transitions:null}}function zE(n,e,t){var r=e.pendingProps,i=dn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),tn(dn,i&1),n===null)return Yv(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=um(s,r,0,null),n=Eo(n,r,t,null),a.return=e,n.return=e,a.sibling=n,e.child=a,e.child.memoizedState=nx(t),e.memoizedState=tx,n):Wy(e,s));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return lN(n,e,s,r,o,i,t);if(a){a=r.fallback,s=e.mode,i=n.child,o=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ts(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Ts(o,a):(a=Eo(a,s,t,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=n.child.memoizedState,s=s===null?nx(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=n.childLanes&~t,e.memoizedState=tx,r}return a=n.child,n=a.sibling,r=Ts(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Wy(n,e){return e=um({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Jh(n,e,t,r){return r!==null&&Ny(r),oc(e,n.child,null,t),n=Wy(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function lN(n,e,t,r,i,a,s){if(t)return e.flags&256?(e.flags&=-257,r=_0(Error(Ie(422))),Jh(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=um({mode:"visible",children:r.children},i,0,null),a=Eo(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&oc(e,n.child,null,s),e.child.memoizedState=nx(s),e.memoizedState=tx,a);if(!(e.mode&1))return Jh(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Ie(419)),r=_0(a,r,void 0),Jh(n,e,s,r)}if(o=(s&n.childLanes)!==0,zr||o){if(r=Jn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ua(n,i),Vi(r,n,i,-1))}return Zy(),r=_0(Error(Ie(421))),Jh(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=_N.bind(null,n),i._reactRetry=e,null):(n=a.treeContext,ei=_s(i.nextSibling),ti=e,on=!0,ji=null,n!==null&&(_i[wi++]=Na,_i[wi++]=La,_i[wi++]=Io,Na=n.id,La=n.overflow,Io=e),e=Wy(e,r.children),e.flags|=4096,e)}function Dw(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),$v(n.return,e,t)}function w0(n,e,t,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function BE(n,e,t){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Tr(n,e,r.children,t),r=dn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dw(n,t,e);else if(n.tag===19)Dw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(tn(dn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Op(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),w0(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Op(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}w0(e,!0,t,null,a);break;case"together":w0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ja(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Do|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ie(153));if(e.child!==null){for(n=e.child,t=Ts(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ts(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function cN(n,e,t){switch(e.tag){case 3:FE(e),sc();break;case 5:fE(e);break;case 1:Hr(e.type)&&Pp(e);break;case 4:Uy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;tn(Ip,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tn(dn,dn.current&1),e.flags|=128,null):t&e.child.childLanes?zE(n,e,t):(tn(dn,dn.current&1),n=ja(n,e,t),n!==null?n.sibling:null);tn(dn,dn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return BE(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tn(dn,dn.current),r)break;return null;case 22:case 23:return e.lanes=0,UE(n,e,t)}return ja(n,e,t)}var HE,rx,VE,GE;HE=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};rx=function(){};VE=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,xo(ca.current);var a=null;switch(t){case"input":i=Tv(n,i),r=Tv(n,r),a=[];break;case"select":i=pn({},i,{value:void 0}),r=pn({},r,{value:void 0}),a=[];break;case"textarea":i=Cv(n,i),r=Cv(n,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Cp)}Pv(t,r);var s;t=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(s in o)o.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ju.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(o=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==o&&(u!=null||o!=null))if(d==="style")if(o){for(s in o)!o.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in u)u.hasOwnProperty(s)&&o[s]!==u[s]&&(t||(t={}),t[s]=u[s])}else t||(a||(a=[]),a.push(d,t)),t=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ju.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&nn("scroll",n),a||o===u||(a=[])):(a=a||[]).push(d,u))}t&&(a=a||[]).push("style",t);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};GE=function(n,e,t,r){t!==r&&(e.flags|=4)};function eu(n,e){if(!on)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function cr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function uN(n,e,t){var r=e.pendingProps;switch(Py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(e),null;case 1:return Hr(e.type)&&Rp(),cr(e),null;case 3:return r=e.stateNode,lc(),an(Br),an(mr),Fy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Zh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ji!==null&&(ux(ji),ji=null))),rx(n,e),cr(e),null;case 5:jy(e);var i=xo(Ku.current);if(t=e.type,n!==null&&e.stateNode!=null)VE(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return cr(e),null}if(n=xo(ca.current),Zh(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[sa]=e,r[Yu]=a,n=(e.mode&1)!==0,t){case"dialog":nn("cancel",r),nn("close",r);break;case"iframe":case"object":case"embed":nn("load",r);break;case"video":case"audio":for(i=0;i<bu.length;i++)nn(bu[i],r);break;case"source":nn("error",r);break;case"img":case"image":case"link":nn("error",r),nn("load",r);break;case"details":nn("toggle",r);break;case"input":G1(r,a),nn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},nn("invalid",r);break;case"textarea":X1(r,a),nn("invalid",r)}Pv(t,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Kh(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Kh(r.textContent,o,n),i=["children",""+o]):ju.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&nn("scroll",r)}switch(t){case"input":Hh(r),W1(r,a,!0);break;case"textarea":Hh(r),q1(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Cp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=xT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[sa]=e,n[Yu]=r,HE(n,e,!1,!1),e.stateNode=n;e:{switch(s=Nv(t,r),t){case"dialog":nn("cancel",n),nn("close",n),i=r;break;case"iframe":case"object":case"embed":nn("load",n),i=r;break;case"video":case"audio":for(i=0;i<bu.length;i++)nn(bu[i],n);i=r;break;case"source":nn("error",n),i=r;break;case"img":case"image":case"link":nn("error",n),nn("load",n),i=r;break;case"details":nn("toggle",n),i=r;break;case"input":G1(n,r),i=Tv(n,r),nn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=pn({},r,{value:void 0}),nn("invalid",n);break;case"textarea":X1(n,r),i=Cv(n,r),nn("invalid",n);break;default:i=r}Pv(t,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?_T(n,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&yT(n,u)):a==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Fu(n,u):typeof u=="number"&&Fu(n,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ju.hasOwnProperty(a)?u!=null&&a==="onScroll"&&nn("scroll",n):u!=null&&my(n,a,u,s))}switch(t){case"input":Hh(n),W1(n,r,!1);break;case"textarea":Hh(n),q1(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ns(r.value));break;case"select":n.multiple=!!r.multiple,a=r.value,a!=null?Kl(n,!!r.multiple,a,!1):r.defaultValue!=null&&Kl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Cp)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cr(e),null;case 6:if(n&&e.stateNode!=null)GE(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(t=xo(Ku.current),xo(ca.current),Zh(e)){if(r=e.stateNode,t=e.memoizedProps,r[sa]=e,(a=r.nodeValue!==t)&&(n=ti,n!==null))switch(n.tag){case 3:Kh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kh(r.nodeValue,t,(n.mode&1)!==0)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[sa]=e,e.stateNode=r}return cr(e),null;case 13:if(an(dn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(on&&ei!==null&&e.mode&1&&!(e.flags&128))lE(),sc(),e.flags|=98560,a=!1;else if(a=Zh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!a)throw Error(Ie(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ie(317));a[sa]=e}else sc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cr(e),a=!1}else ji!==null&&(ux(ji),ji=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||dn.current&1?Hn===0&&(Hn=3):Zy())),e.updateQueue!==null&&(e.flags|=4),cr(e),null);case 4:return lc(),rx(n,e),n===null&&Xu(e.stateNode.containerInfo),cr(e),null;case 10:return ky(e.type._context),cr(e),null;case 17:return Hr(e.type)&&Rp(),cr(e),null;case 19:if(an(dn),a=e.memoizedState,a===null)return cr(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)eu(a,!1);else{if(Hn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Op(n),s!==null){for(e.flags|=128,eu(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,n=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,n=s.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return tn(dn,dn.current&1|2),e.child}n=n.sibling}a.tail!==null&&An()>uc&&(e.flags|=128,r=!0,eu(a,!1),e.lanes=4194304)}else{if(!r)if(n=Op(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),eu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!on)return cr(e),null}else 2*An()-a.renderingStartTime>uc&&t!==1073741824&&(e.flags|=128,r=!0,eu(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(t=a.last,t!==null?t.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=An(),e.sibling=null,t=dn.current,tn(dn,r?t&1|2:t&1),e):(cr(e),null);case 22:case 23:return Ky(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qr&1073741824&&(cr(e),e.subtreeFlags&6&&(e.flags|=8192)):cr(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function dN(n,e){switch(Py(e),e.tag){case 1:return Hr(e.type)&&Rp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return lc(),an(Br),an(mr),Fy(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return jy(e),null;case 13:if(an(dn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));sc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return an(dn),null;case 4:return lc(),null;case 10:return ky(e.type._context),null;case 22:case 23:return Ky(),null;case 24:return null;default:return null}}var ef=!1,fr=!1,hN=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Hl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){xn(n,e,r)}else t.current=null}function WE(n,e,t){try{t()}catch(r){xn(n,e,r)}}var Ow=!1;function fN(n,e){if(Bv=Tp,n=$T(),Cy(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var s=0,o=-1,u=-1,d=0,h=0,f=n,p=null;t:for(;;){for(var x;f!==t||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(x=f.firstChild)!==null;)p=f,f=x;for(;;){if(f===n)break t;if(p===t&&++d===i&&(o=s),p===a&&++h===r&&(u=s),(x=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=x}t=o===-1||u===-1?null:{start:o,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Hv={focusedElem:n,selectionRange:t},Tp=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,_=y.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?M:Di(e.type,M),_);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(E){xn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return y=Ow,Ow=!1,y}function Cu(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var a=i.destroy;i.destroy=void 0,a!==void 0&&WE(e,t,a)}i=i.next}while(i!==r)}}function lm(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ix(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function XE(n){var e=n.alternate;e!==null&&(n.alternate=null,XE(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[sa],delete e[Yu],delete e[Wv],delete e[$P],delete e[KP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function qE(n){return n.tag===5||n.tag===3||n.tag===4}function Uw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ax(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Cp));else if(r!==4&&(n=n.child,n!==null))for(ax(n,e,t),n=n.sibling;n!==null;)ax(n,e,t),n=n.sibling}function sx(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(sx(n,e,t),n=n.sibling;n!==null;)sx(n,e,t),n=n.sibling}var tr=null,Ui=!1;function Ja(n,e,t){for(t=t.child;t!==null;)YE(n,e,t),t=t.sibling}function YE(n,e,t){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(em,t)}catch{}switch(t.tag){case 5:fr||Hl(t,e);case 6:var r=tr,i=Ui;tr=null,Ja(n,e,t),tr=r,Ui=i,tr!==null&&(Ui?(n=tr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):tr.removeChild(t.stateNode));break;case 18:tr!==null&&(Ui?(n=tr,t=t.stateNode,n.nodeType===8?m0(n.parentNode,t):n.nodeType===1&&m0(n,t),Vu(n)):m0(tr,t.stateNode));break;case 4:r=tr,i=Ui,tr=t.stateNode.containerInfo,Ui=!0,Ja(n,e,t),tr=r,Ui=i;break;case 0:case 11:case 14:case 15:if(!fr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&WE(t,e,s),i=i.next}while(i!==r)}Ja(n,e,t);break;case 1:if(!fr&&(Hl(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){xn(t,e,o)}Ja(n,e,t);break;case 21:Ja(n,e,t);break;case 22:t.mode&1?(fr=(r=fr)||t.memoizedState!==null,Ja(n,e,t),fr=r):Ja(n,e,t);break;default:Ja(n,e,t)}}function jw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new hN),e.forEach(function(r){var i=wN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Pi(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=n,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:tr=o.stateNode,Ui=!1;break e;case 3:tr=o.stateNode.containerInfo,Ui=!0;break e;case 4:tr=o.stateNode.containerInfo,Ui=!0;break e}o=o.return}if(tr===null)throw Error(Ie(160));YE(a,s,i),tr=null,Ui=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){xn(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$E(e,n),e=e.sibling}function $E(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pi(e,n),ta(n),r&4){try{Cu(3,n,n.return),lm(3,n)}catch(M){xn(n,n.return,M)}try{Cu(5,n,n.return)}catch(M){xn(n,n.return,M)}}break;case 1:Pi(e,n),ta(n),r&512&&t!==null&&Hl(t,t.return);break;case 5:if(Pi(e,n),ta(n),r&512&&t!==null&&Hl(t,t.return),n.flags&32){var i=n.stateNode;try{Fu(i,"")}catch(M){xn(n,n.return,M)}}if(r&4&&(i=n.stateNode,i!=null)){var a=n.memoizedProps,s=t!==null?t.memoizedProps:a,o=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&gT(i,a),Nv(o,s);var d=Nv(o,a);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];h==="style"?_T(i,f):h==="dangerouslySetInnerHTML"?yT(i,f):h==="children"?Fu(i,f):my(i,h,f,d)}switch(o){case"input":Ev(i,a);break;case"textarea":vT(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Kl(i,!!a.multiple,x,!1):p!==!!a.multiple&&(a.defaultValue!=null?Kl(i,!!a.multiple,a.defaultValue,!0):Kl(i,!!a.multiple,a.multiple?[]:"",!1))}i[Yu]=a}catch(M){xn(n,n.return,M)}}break;case 6:if(Pi(e,n),ta(n),r&4){if(n.stateNode===null)throw Error(Ie(162));i=n.stateNode,a=n.memoizedProps;try{i.nodeValue=a}catch(M){xn(n,n.return,M)}}break;case 3:if(Pi(e,n),ta(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Vu(e.containerInfo)}catch(M){xn(n,n.return,M)}break;case 4:Pi(e,n),ta(n);break;case 13:Pi(e,n),ta(n),i=n.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Yy=An())),r&4&&jw(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(fr=(d=fr)||h,Pi(e,n),fr=d):Pi(e,n),ta(n),r&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!h&&n.mode&1)for(Je=n,h=n.child;h!==null;){for(f=Je=h;Je!==null;){switch(p=Je,x=p.child,p.tag){case 0:case 11:case 14:case 15:Cu(4,p,p.return);break;case 1:Hl(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(M){xn(r,t,M)}}break;case 5:Hl(p,p.return);break;case 22:if(p.memoizedState!==null){zw(f);continue}}x!==null?(x.return=p,Je=x):zw(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=bT("display",s))}catch(M){xn(n,n.return,M)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(M){xn(n,n.return,M)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pi(e,n),ta(n),r&4&&jw(n);break;case 21:break;default:Pi(e,n),ta(n)}}function ta(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(qE(t)){var r=t;break e}t=t.return}throw Error(Ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fu(i,""),r.flags&=-33);var a=Uw(n);sx(n,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=Uw(n);ax(n,o,s);break;default:throw Error(Ie(161))}}catch(u){xn(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function pN(n,e,t){Je=n,KE(n)}function KE(n,e,t){for(var r=(n.mode&1)!==0;Je!==null;){var i=Je,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ef;if(!s){var o=i.alternate,u=o!==null&&o.memoizedState!==null||fr;o=ef;var d=fr;if(ef=s,(fr=u)&&!d)for(Je=i;Je!==null;)s=Je,u=s.child,s.tag===22&&s.memoizedState!==null?Bw(i):u!==null?(u.return=s,Je=u):Bw(i);for(;a!==null;)Je=a,KE(a),a=a.sibling;Je=i,ef=o,fr=d}Fw(n)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Je=a):Fw(n)}}function Fw(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fr||lm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Di(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Sw(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Sw(e,s,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Vu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}fr||e.flags&512&&ix(e)}catch(p){xn(e,e.return,p)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function zw(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function Bw(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{lm(4,e)}catch(u){xn(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){xn(e,i,u)}}var a=e.return;try{ix(e)}catch(u){xn(e,a,u)}break;case 5:var s=e.return;try{ix(e)}catch(u){xn(e,s,u)}}}catch(u){xn(e,e.return,u)}if(e===n){Je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Je=o;break}Je=e.return}}var mN=Math.ceil,Fp=za.ReactCurrentDispatcher,Xy=za.ReactCurrentOwner,Ti=za.ReactCurrentBatchConfig,Dt=0,Jn=null,Dn=null,nr=0,Qr=0,Vl=js(0),Hn=0,ed=null,Do=0,cm=0,qy=0,Ru=null,Ur=null,Yy=0,uc=1/0,Ca=null,zp=!1,ox=null,Ss=null,tf=!1,gs=null,Bp=0,Pu=0,lx=null,cp=-1,up=0;function Er(){return Dt&6?An():cp!==-1?cp:cp=An()}function Ms(n){return n.mode&1?Dt&2&&nr!==0?nr&-nr:QP.transition!==null?(up===0&&(up=IT()),up):(n=Yt,n!==0||(n=window.event,n=n===void 0?16:zT(n.type)),n):1}function Vi(n,e,t,r){if(50<Pu)throw Pu=0,lx=null,Error(Ie(185));Ad(n,t,r),(!(Dt&2)||n!==Jn)&&(n===Jn&&(!(Dt&2)&&(cm|=t),Hn===4&&fs(n,nr)),Vr(n,r),t===1&&Dt===0&&!(e.mode&1)&&(uc=An()+500,am&&Fs()))}function Vr(n,e){var t=n.callbackNode;QR(n,e);var r=Mp(n,n===Jn?nr:0);if(r===0)t!==null&&K1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&K1(t),e===1)n.tag===0?ZP(Hw.bind(null,n)):aE(Hw.bind(null,n)),qP(function(){!(Dt&6)&&Fs()}),t=null;else{switch(kT(r)){case 1:t=by;break;case 4:t=NT;break;case 16:t=Sp;break;case 536870912:t=LT;break;default:t=Sp}t=i2(t,ZE.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function ZE(n,e){if(cp=-1,up=0,Dt&6)throw Error(Ie(327));var t=n.callbackNode;if(tc()&&n.callbackNode!==t)return null;var r=Mp(n,n===Jn?nr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Hp(n,r);else{e=r;var i=Dt;Dt|=2;var a=JE();(Jn!==n||nr!==e)&&(Ca=null,uc=An()+500,To(n,e));do try{xN();break}catch(o){QE(n,o)}while(!0);Iy(),Fp.current=a,Dt=i,Dn!==null?e=0:(Jn=null,nr=0,e=Hn)}if(e!==0){if(e===2&&(i=Ov(n),i!==0&&(r=i,e=cx(n,i))),e===1)throw t=ed,To(n,0),fs(n,r),Vr(n,An()),t;if(e===6)fs(n,r);else{if(i=n.current.alternate,!(r&30)&&!gN(i)&&(e=Hp(n,r),e===2&&(a=Ov(n),a!==0&&(r=a,e=cx(n,a))),e===1))throw t=ed,To(n,0),fs(n,r),Vr(n,An()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:ho(n,Ur,Ca);break;case 3:if(fs(n,r),(r&130023424)===r&&(e=Yy+500-An(),10<e)){if(Mp(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Er(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Gv(ho.bind(null,n,Ur,Ca),e);break}ho(n,Ur,Ca);break;case 4:if(fs(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-Hi(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=An()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mN(r/1960))-r,10<r){n.timeoutHandle=Gv(ho.bind(null,n,Ur,Ca),r);break}ho(n,Ur,Ca);break;case 5:ho(n,Ur,Ca);break;default:throw Error(Ie(329))}}}return Vr(n,An()),n.callbackNode===t?ZE.bind(null,n):null}function cx(n,e){var t=Ru;return n.current.memoizedState.isDehydrated&&(To(n,e).flags|=256),n=Hp(n,e),n!==2&&(e=Ur,Ur=t,e!==null&&ux(e)),n}function ux(n){Ur===null?Ur=n:Ur.push.apply(Ur,n)}function gN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!Gi(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fs(n,e){for(e&=~qy,e&=~cm,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Hi(e),r=1<<t;n[t]=-1,e&=~r}}function Hw(n){if(Dt&6)throw Error(Ie(327));tc();var e=Mp(n,0);if(!(e&1))return Vr(n,An()),null;var t=Hp(n,e);if(n.tag!==0&&t===2){var r=Ov(n);r!==0&&(e=r,t=cx(n,r))}if(t===1)throw t=ed,To(n,0),fs(n,e),Vr(n,An()),t;if(t===6)throw Error(Ie(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ho(n,Ur,Ca),Vr(n,An()),null}function $y(n,e){var t=Dt;Dt|=1;try{return n(e)}finally{Dt=t,Dt===0&&(uc=An()+500,am&&Fs())}}function Oo(n){gs!==null&&gs.tag===0&&!(Dt&6)&&tc();var e=Dt;Dt|=1;var t=Ti.transition,r=Yt;try{if(Ti.transition=null,Yt=1,n)return n()}finally{Yt=r,Ti.transition=t,Dt=e,!(Dt&6)&&Fs()}}function Ky(){Qr=Vl.current,an(Vl)}function To(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,XP(t)),Dn!==null)for(t=Dn.return;t!==null;){var r=t;switch(Py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rp();break;case 3:lc(),an(Br),an(mr),Fy();break;case 5:jy(r);break;case 4:lc();break;case 13:an(dn);break;case 19:an(dn);break;case 10:ky(r.type._context);break;case 22:case 23:Ky()}t=t.return}if(Jn=n,Dn=n=Ts(n.current,null),nr=Qr=e,Hn=0,ed=null,qy=cm=Do=0,Ur=Ru=null,vo!==null){for(e=0;e<vo.length;e++)if(t=vo[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}t.pending=r}vo=null}return n}function QE(n,e){do{var t=Dn;try{if(Iy(),sp.current=jp,Up){for(var r=fn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Up=!1}if(ko=0,Kn=Bn=fn=null,Au=!1,Zu=0,Xy.current=null,t===null||t.return===null){Hn=1,ed=e,Dn=null;break}e:{var a=n,s=t.return,o=t,u=e;if(e=nr,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Rw(s);if(x!==null){x.flags&=-257,Pw(x,s,o,a,e),x.mode&1&&Cw(a,d,e),e=x,u=d;var y=e.updateQueue;if(y===null){var M=new Set;M.add(u),e.updateQueue=M}else y.add(u);break e}else{if(!(e&1)){Cw(a,d,e),Zy();break e}u=Error(Ie(426))}}else if(on&&o.mode&1){var _=Rw(s);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Pw(_,s,o,a,e),Ny(cc(u,o));break e}}a=u=cc(u,o),Hn!==4&&(Hn=2),Ru===null?Ru=[a]:Ru.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=kE(a,u,e);ww(a,g);break e;case 1:o=u;var S=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ss===null||!Ss.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=DE(a,o,e);ww(a,E);break e}}a=a.return}while(a!==null)}t2(t)}catch(N){e=N,Dn===t&&t!==null&&(Dn=t=t.return);continue}break}while(!0)}function JE(){var n=Fp.current;return Fp.current=jp,n===null?jp:n}function Zy(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Jn===null||!(Do&268435455)&&!(cm&268435455)||fs(Jn,nr)}function Hp(n,e){var t=Dt;Dt|=2;var r=JE();(Jn!==n||nr!==e)&&(Ca=null,To(n,e));do try{vN();break}catch(i){QE(n,i)}while(!0);if(Iy(),Dt=t,Fp.current=r,Dn!==null)throw Error(Ie(261));return Jn=null,nr=0,Hn}function vN(){for(;Dn!==null;)e2(Dn)}function xN(){for(;Dn!==null&&!VR();)e2(Dn)}function e2(n){var e=r2(n.alternate,n,Qr);n.memoizedProps=n.pendingProps,e===null?t2(n):Dn=e,Xy.current=null}function t2(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=dN(t,e),t!==null){t.flags&=32767,Dn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Hn=6,Dn=null;return}}else if(t=uN(t,e,Qr),t!==null){Dn=t;return}if(e=e.sibling,e!==null){Dn=e;return}Dn=e=n}while(e!==null);Hn===0&&(Hn=5)}function ho(n,e,t){var r=Yt,i=Ti.transition;try{Ti.transition=null,Yt=1,yN(n,e,t,r)}finally{Ti.transition=i,Yt=r}return null}function yN(n,e,t,r){do tc();while(gs!==null);if(Dt&6)throw Error(Ie(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ie(177));n.callbackNode=null,n.callbackPriority=0;var a=t.lanes|t.childLanes;if(JR(n,a),n===Jn&&(Dn=Jn=null,nr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||tf||(tf=!0,i2(Sp,function(){return tc(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=Ti.transition,Ti.transition=null;var s=Yt;Yt=1;var o=Dt;Dt|=4,Xy.current=null,fN(n,t),$E(t,n),FP(Hv),Tp=!!Bv,Hv=Bv=null,n.current=t,pN(t),GR(),Dt=o,Yt=s,Ti.transition=a}else n.current=t;if(tf&&(tf=!1,gs=n,Bp=i),a=n.pendingLanes,a===0&&(Ss=null),qR(t.stateNode),Vr(n,An()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(zp)throw zp=!1,n=ox,ox=null,n;return Bp&1&&n.tag!==0&&tc(),a=n.pendingLanes,a&1?n===lx?Pu++:(Pu=0,lx=n):Pu=0,Fs(),null}function tc(){if(gs!==null){var n=kT(Bp),e=Ti.transition,t=Yt;try{if(Ti.transition=null,Yt=16>n?16:n,gs===null)var r=!1;else{if(n=gs,gs=null,Bp=0,Dt&6)throw Error(Ie(331));var i=Dt;for(Dt|=4,Je=n.current;Je!==null;){var a=Je,s=a.child;if(Je.flags&16){var o=a.deletions;if(o!==null){for(var u=0;u<o.length;u++){var d=o[u];for(Je=d;Je!==null;){var h=Je;switch(h.tag){case 0:case 11:case 15:Cu(8,h,a)}var f=h.child;if(f!==null)f.return=h,Je=f;else for(;Je!==null;){h=Je;var p=h.sibling,x=h.return;if(XE(h),h===d){Je=null;break}if(p!==null){p.return=x,Je=p;break}Je=x}}}var y=a.alternate;if(y!==null){var M=y.child;if(M!==null){y.child=null;do{var _=M.sibling;M.sibling=null,M=_}while(M!==null)}}Je=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Je=s;else e:for(;Je!==null;){if(a=Je,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Cu(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Je=g;break e}Je=a.return}}var S=n.current;for(Je=S;Je!==null;){s=Je;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,Je=w;else e:for(s=S;Je!==null;){if(o=Je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lm(9,o)}}catch(N){xn(o,o.return,N)}if(o===s){Je=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,Je=E;break e}Je=o.return}}if(Dt=i,Fs(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(em,n)}catch{}r=!0}return r}finally{Yt=t,Ti.transition=e}}return!1}function Vw(n,e,t){e=cc(t,e),e=kE(n,e,1),n=ws(n,e,1),e=Er(),n!==null&&(Ad(n,1,e),Vr(n,e))}function xn(n,e,t){if(n.tag===3)Vw(n,n,t);else for(;e!==null;){if(e.tag===3){Vw(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){n=cc(t,n),n=DE(e,n,1),e=ws(e,n,1),n=Er(),e!==null&&(Ad(e,1,n),Vr(e,n));break}}e=e.return}}function bN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Er(),n.pingedLanes|=n.suspendedLanes&t,Jn===n&&(nr&t)===t&&(Hn===4||Hn===3&&(nr&130023424)===nr&&500>An()-Yy?To(n,0):qy|=t),Vr(n,e)}function n2(n,e){e===0&&(n.mode&1?(e=Wh,Wh<<=1,!(Wh&130023424)&&(Wh=4194304)):e=1);var t=Er();n=Ua(n,e),n!==null&&(Ad(n,e,t),Vr(n,t))}function _N(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),n2(n,t)}function wN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),n2(n,t)}var r2;r2=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Br.current)zr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zr=!1,cN(n,e,t);zr=!!(n.flags&131072)}else zr=!1,on&&e.flags&1048576&&sE(e,Lp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lp(n,e),n=e.pendingProps;var i=ac(e,mr.current);ec(e,t),i=By(null,e,r,n,i,t);var a=Hy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hr(r)?(a=!0,Pp(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Oy(e),i.updater=om,e.stateNode=i,i._reactInternals=e,Zv(e,r,n,t),e=ex(null,e,r,!0,a,t)):(e.tag=0,on&&a&&Ry(e),Tr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(lp(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MN(r),n=Di(r,n),i){case 0:e=Jv(null,e,r,n,t);break e;case 1:e=Iw(null,e,r,n,t);break e;case 11:e=Nw(null,e,r,n,t);break e;case 14:e=Lw(null,e,r,Di(r.type,n),t);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),Jv(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),Iw(n,e,r,i,t);case 3:e:{if(FE(e),n===null)throw Error(Ie(387));r=e.pendingProps,a=e.memoizedState,i=a.element,hE(n,e),Dp(e,r,null,t);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=cc(Error(Ie(423)),e),e=kw(n,e,r,t,i);break e}else if(r!==i){i=cc(Error(Ie(424)),e),e=kw(n,e,r,t,i);break e}else for(ei=_s(e.stateNode.containerInfo.firstChild),ti=e,on=!0,ji=null,t=uE(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(sc(),r===i){e=ja(n,e,t);break e}Tr(n,e,r,t)}e=e.child}return e;case 5:return fE(e),n===null&&Yv(e),r=e.type,i=e.pendingProps,a=n!==null?n.memoizedProps:null,s=i.children,Vv(r,i)?s=null:a!==null&&Vv(r,a)&&(e.flags|=32),jE(n,e),Tr(n,e,s,t),e.child;case 6:return n===null&&Yv(e),null;case 13:return zE(n,e,t);case 4:return Uy(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=oc(e,null,r,t):Tr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),Nw(n,e,r,i,t);case 7:return Tr(n,e,e.pendingProps,t),e.child;case 8:return Tr(n,e,e.pendingProps.children,t),e.child;case 12:return Tr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,tn(Ip,r._currentValue),r._currentValue=s,a!==null)if(Gi(a.value,s)){if(a.children===i.children&&!Br.current){e=ja(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=ka(-1,t&-t),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=t,u=a.alternate,u!==null&&(u.lanes|=t),$v(a.return,t,e),o.lanes|=t;break}u=u.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Ie(341));s.lanes|=t,o=s.alternate,o!==null&&(o.lanes|=t),$v(s,t,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Tr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ec(e,t),i=Ei(i),r=r(i),e.flags|=1,Tr(n,e,r,t),e.child;case 14:return r=e.type,i=Di(r,e.pendingProps),i=Di(r.type,i),Lw(n,e,r,i,t);case 15:return OE(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),lp(n,e),e.tag=1,Hr(r)?(n=!0,Pp(e)):n=!1,ec(e,t),IE(e,r,i),Zv(e,r,i,t),ex(null,e,r,!0,n,t);case 19:return BE(n,e,t);case 22:return UE(n,e,t)}throw Error(Ie(156,e.tag))};function i2(n,e){return PT(n,e)}function SN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(n,e,t,r){return new SN(n,e,t,r)}function Qy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function MN(n){if(typeof n=="function")return Qy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===vy)return 11;if(n===xy)return 14}return 2}function Ts(n,e){var t=n.alternate;return t===null?(t=Mi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function dp(n,e,t,r,i,a){var s=2;if(r=n,typeof n=="function")Qy(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case Il:return Eo(t.children,i,a,e);case gy:s=8,i|=8;break;case _v:return n=Mi(12,t,e,i|2),n.elementType=_v,n.lanes=a,n;case wv:return n=Mi(13,t,e,i),n.elementType=wv,n.lanes=a,n;case Sv:return n=Mi(19,t,e,i),n.elementType=Sv,n.lanes=a,n;case fT:return um(t,i,a,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case dT:s=10;break e;case hT:s=9;break e;case vy:s=11;break e;case xy:s=14;break e;case ls:s=16,r=null;break e}throw Error(Ie(130,n==null?n:typeof n,""))}return e=Mi(s,t,e,i),e.elementType=n,e.type=r,e.lanes=a,e}function Eo(n,e,t,r){return n=Mi(7,n,r,e),n.lanes=t,n}function um(n,e,t,r){return n=Mi(22,n,r,e),n.elementType=fT,n.lanes=t,n.stateNode={isHidden:!1},n}function S0(n,e,t){return n=Mi(6,n,null,e),n.lanes=t,n}function M0(n,e,t){return e=Mi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function TN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i0(0),this.expirationTimes=i0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jy(n,e,t,r,i,a,s,o,u){return n=new TN(n,e,t,o,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Mi(3,null,null,e),n.current=a,a.stateNode=n,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oy(a),n}function EN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ll,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function a2(n){if(!n)return Ls;n=n._reactInternals;e:{if(Bo(n)!==n||n.tag!==1)throw Error(Ie(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(n.tag===1){var t=n.type;if(Hr(t))return iE(n,t,e)}return e}function s2(n,e,t,r,i,a,s,o,u){return n=Jy(t,r,!0,n,i,a,s,o,u),n.context=a2(null),t=n.current,r=Er(),i=Ms(t),a=ka(r,i),a.callback=e??null,ws(t,a,i),n.current.lanes=i,Ad(n,i,r),Vr(n,r),n}function dm(n,e,t,r){var i=e.current,a=Er(),s=Ms(i);return t=a2(t),e.context===null?e.context=t:e.pendingContext=t,e=ka(a,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ws(i,e,s),n!==null&&(Vi(n,i,s,a),ap(n,i,s)),s}function Vp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Gw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function eb(n,e){Gw(n,e),(n=n.alternate)&&Gw(n,e)}function AN(){return null}var o2=typeof reportError=="function"?reportError:function(n){console.error(n)};function tb(n){this._internalRoot=n}hm.prototype.render=tb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ie(409));dm(n,e,null,null)};hm.prototype.unmount=tb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Oo(function(){dm(null,n,null,null)}),e[Oa]=null}};function hm(n){this._internalRoot=n}hm.prototype.unstable_scheduleHydration=function(n){if(n){var e=UT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hs.length&&e!==0&&e<hs[t].priority;t++);hs.splice(t,0,n),t===0&&FT(n)}};function nb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ww(){}function CN(n,e,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=Vp(s);a.call(d)}}var s=s2(e,r,n,0,null,!1,!1,"",Ww);return n._reactRootContainer=s,n[Oa]=s.current,Xu(n.nodeType===8?n.parentNode:n),Oo(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var d=Vp(u);o.call(d)}}var u=Jy(n,0,!1,null,null,!1,!1,"",Ww);return n._reactRootContainer=u,n[Oa]=u.current,Xu(n.nodeType===8?n.parentNode:n),Oo(function(){dm(e,u,t,r)}),u}function pm(n,e,t,r,i){var a=t._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var u=Vp(s);o.call(u)}}dm(e,s,n,i)}else s=CN(t,e,n,i,r);return Vp(s)}DT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yu(e.pendingLanes);t!==0&&(_y(e,t|1),Vr(e,An()),!(Dt&6)&&(uc=An()+500,Fs()))}break;case 13:Oo(function(){var r=Ua(n,1);if(r!==null){var i=Er();Vi(r,n,1,i)}}),eb(n,1)}};wy=function(n){if(n.tag===13){var e=Ua(n,134217728);if(e!==null){var t=Er();Vi(e,n,134217728,t)}eb(n,134217728)}};OT=function(n){if(n.tag===13){var e=Ms(n),t=Ua(n,e);if(t!==null){var r=Er();Vi(t,n,e,r)}eb(n,e)}};UT=function(){return Yt};jT=function(n,e){var t=Yt;try{return Yt=n,e()}finally{Yt=t}};Iv=function(n,e,t){switch(e){case"input":if(Ev(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=im(r);if(!i)throw Error(Ie(90));mT(r),Ev(r,i)}}}break;case"textarea":vT(n,t);break;case"select":e=t.value,e!=null&&Kl(n,!!t.multiple,e,!1)}};MT=$y;TT=Oo;var RN={usingClientEntryPoint:!1,Events:[Rd,Ul,im,wT,ST,$y]},tu={findFiberByHostInstance:go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PN={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:za.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=CT(n),n===null?null:n.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||AN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{em=nf.inject(PN),la=nf}catch{}}ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RN;ui.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nb(e))throw Error(Ie(200));return EN(n,e,null,t)};ui.createRoot=function(n,e){if(!nb(n))throw Error(Ie(299));var t=!1,r="",i=o2;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jy(n,1,!1,null,null,t,!1,r,i),n[Oa]=e.current,Xu(n.nodeType===8?n.parentNode:n),new tb(e)};ui.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ie(188)):(n=Object.keys(n).join(","),Error(Ie(268,n)));return n=CT(e),n=n===null?null:n.stateNode,n};ui.flushSync=function(n){return Oo(n)};ui.hydrate=function(n,e,t){if(!fm(e))throw Error(Ie(200));return pm(null,n,e,!0,t)};ui.hydrateRoot=function(n,e,t){if(!nb(n))throw Error(Ie(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",s=o2;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=s2(e,null,n,1,t??null,i,!1,a,s),n[Oa]=e.current,Xu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new hm(e)};ui.render=function(n,e,t){if(!fm(e))throw Error(Ie(200));return pm(null,n,e,!1,t)};ui.unmountComponentAtNode=function(n){if(!fm(n))throw Error(Ie(40));return n._reactRootContainer?(Oo(function(){pm(null,null,n,!1,function(){n._reactRootContainer=null,n[Oa]=null})}),!0):!1};ui.unstable_batchedUpdates=$y;ui.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!fm(t))throw Error(Ie(200));if(n==null||n._reactInternals===void 0)throw Error(Ie(38));return pm(n,e,t,!1,r)};ui.version="18.3.1-next-f1338f8080-20240426";function l2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l2)}catch(n){console.error(n)}}l2(),oT.exports=ui;var NN=oT.exports,Xw=NN;yv.createRoot=Xw.createRoot,yv.hydrateRoot=Xw.hydrateRoot;/**
* @remix-run/router v1.23.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function td(){return td=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},td.apply(this,arguments)}var vs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(vs||(vs={}));const qw="popstate";function LN(n){n===void 0&&(n={});function e(i,a){let{pathname:s="/",search:o="",hash:u=""}=Ho(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),dx("",{pathname:s,search:o,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");o=d===-1?u:u.slice(0,d)}return o+"#"+(typeof a=="string"?a:Gp(a))}function r(i,a){mm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return kN(e,t,r,n)}function _n(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IN(){return Math.random().toString(36).substr(2,8)}function Yw(n,e){return{usr:n.state,key:n.key,idx:e}}function dx(n,e,t,r){return t===void 0&&(t=null),td({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ho(e):e,{state:t,key:e&&e.key||r||IN()})}function Gp(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ho(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function kN(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=vs.Pop,u=null,d=h();d==null&&(d=0,s.replaceState(td({},s.state,{idx:d}),""));function h(){return(s.state||{idx:null}).idx}function f(){o=vs.Pop;let _=h(),g=_==null?null:_-d;d=_,u&&u({action:o,location:M.location,delta:g})}function p(_,g){o=vs.Push;let S=dx(M.location,_,g);t&&t(S,_),d=h()+1;let w=Yw(S,d),E=M.createHref(S);try{s.pushState(w,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(E)}a&&u&&u({action:o,location:M.location,delta:1})}function x(_,g){o=vs.Replace;let S=dx(M.location,_,g);t&&t(S,_),d=h();let w=Yw(S,d),E=M.createHref(S);s.replaceState(w,"",E),a&&u&&u({action:o,location:M.location,delta:0})}function y(_){let g=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof _=="string"?_:Gp(_);return S=S.replace(/ $/,"%20"),_n(g,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,g)}let M={get action(){return o},get location(){return n(i,s)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qw,f),u=_,()=>{i.removeEventListener(qw,f),u=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let g=y(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:x,go(_){return s.go(_)}};return M}var $w;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})($w||($w={}));function DN(n,e,t){return t===void 0&&(t="/"),ON(n,e,t)}function ON(n,e,t,r){let i=typeof e=="string"?Ho(e):e,a=dc(i.pathname||"/",t);if(a==null)return null;let s=c2(n);UN(s);let o=null;for(let u=0;o==null&&u<s.length;++u){let d=YN(a);o=XN(s[u],d)}return o}function c2(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,s,o)=>{let u={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};u.relativePath.startsWith("/")&&(_n(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Es([r,u.relativePath]),h=t.concat(u);a.children&&a.children.length>0&&(_n(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),c2(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:GN(d,a.index),routesMeta:h})};return n.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let u of u2(a.path))i(a,s,u)}),e}function u2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=u2(r.join("/")),o=[];return o.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&o.push(...s),o.map(u=>n.startsWith("/")&&u===""?"/":u)}function UN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:WN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const jN=/^:[\w-]+$/,FN=3,zN=2,BN=1,HN=10,VN=-2,Kw=n=>n==="*";function GN(n,e){let t=n.split("/"),r=t.length;return t.some(Kw)&&(r+=VN),e&&(r+=zN),t.filter(i=>!Kw(i)).reduce((i,a)=>i+(jN.test(a)?FN:a===""?BN:HN),r)}function WN(n,e){return n.length===e.length&&n.slice(0,-1).every((t,r)=>t===e[r])?n[n.length-1]-e[e.length-1]:0}function XN(n,e,t){let{routesMeta:r}=n,i={},a="/",s=[];for(let o=0;o<r.length;++o){let u=r[o],d=o===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=hx({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Es([a,f.pathname]),pathnameBase:JN(Es([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Es([a,f.pathnameBase]))}return s}function hx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=qN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=o[h]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[h];return p&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:n}}function qN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,o)=>(r.push({paramName:s,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function YN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function dc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const $N=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KN=n=>$N.test(n);function ZN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ho(n):n,a;if(t)if(KN(t))a=t;else{if(t.includes("//")){let s=t;t=t.replace(/\/\/+/g,"/"),mm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+t))}t.startsWith("/")?a=Zw(t.substring(1),"/"):a=Zw(t,e)}else a=e;return{pathname:a,search:eL(r),hash:tL(i)}}function Zw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function T0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function d2(n,e){let t=QN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function h2(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Ho(n):(i=td({},n),_n(!i.pathname||!i.pathname.includes("?"),T0("?","pathname","search",i)),_n(!i.pathname||!i.pathname.includes("#"),T0("#","pathname","hash",i)),_n(!i.search||!i.search.includes("#"),T0("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let f=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?e[f]:"/"}let u=ZN(i,o),d=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Es=n=>n.join("/").replace(/\/\/+/g,"/"),JN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),eL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function nL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const f2=["post","put","patch","delete"];new Set(f2);const rL=["get",...f2];new Set(rL);/**
* React Router v6.30.2
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function nd(){return nd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nd.apply(this,arguments)}const gm=te.createContext(null),p2=te.createContext(null),zs=te.createContext(null),vm=te.createContext(null),Vo=te.createContext({outlet:null,matches:[],isDataRoute:!1}),m2=te.createContext(null);function iL(n,e){let{relative:t}=e===void 0?{}:e;Nd()||_n(!1);let{basename:r,navigator:i}=te.useContext(zs),{hash:a,pathname:s,search:o}=xm(n,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:Es([r,s])),i.createHref({pathname:u,search:o,hash:a})}function Nd(){return te.useContext(vm)!=null}function wc(){return Nd()||_n(!1),te.useContext(vm).location}function g2(n){te.useContext(zs).static||te.useLayoutEffect(n)}function aL(){let{isDataRoute:n}=te.useContext(Vo);return n?xL():sL()}function sL(){Nd()||_n(!1);let n=te.useContext(gm),{basename:e,future:t,navigator:r}=te.useContext(zs),{matches:i}=te.useContext(Vo),{pathname:a}=wc(),s=JSON.stringify(d2(i,t.v7_relativeSplatPath)),o=te.useRef(!1);return g2(()=>{o.current=!0}),te.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=h2(u,JSON.parse(s),a,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Es([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,s,a,n])}function xm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=te.useContext(zs),{matches:i}=te.useContext(Vo),{pathname:a}=wc(),s=JSON.stringify(d2(i,r.v7_relativeSplatPath));return te.useMemo(()=>h2(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function oL(n,e){return lL(n,e)}function lL(n,e,t,r){Nd()||_n(!1);let{navigator:i}=te.useContext(zs),{matches:a}=te.useContext(Vo),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=wc(),h;if(e){var f;let _=typeof e=="string"?Ho(e):e;u==="/"||(f=_.pathname)!=null&&f.startsWith(u)||_n(!1),h=_}else h=d;let p=h.pathname||"/",x=p;if(u!=="/"){let _=u.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=DN(n,{pathname:x}),M=fL(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Es([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Es([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,t,r);return e&&M?te.createElement(vm.Provider,{value:{location:nd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:vs.Pop}},M):M}function cL(){let n=vL(),e=nL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},e),t?te.createElement("pre",{style:r},t):null,null)}const uL=te.createElement(cL,null);class dL extends te.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?te.createElement(Vo.Provider,{value:this.props.routeContext},te.createElement(m2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hL(n){let{routeContext:e,match:t,children:r}=n,i=te.useContext(gm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),te.createElement(Vo.Provider,{value:e},r)}function fL(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||_n(!1),s=s.slice(0,Math.min(s.length,h+1))}let u=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:x}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,f,p)=>{let x,y=!1,M=null,_=null;t&&(x=o&&f.route.id?o[f.route.id]:void 0,M=f.route.errorElement||uL,u&&(d<0&&p===0?(yL("route-fallback"),y=!0,_=null):d===p&&(y=!0,_=f.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,p+1)),S=()=>{let w;return x?w=M:y?w=_:f.route.Component?w=te.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,te.createElement(hL,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:w})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?te.createElement(dL,{location:t.location,revalidation:t.revalidation,component:M,error:x,children:S(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):S()},null)}var v2=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(v2||{}),x2=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(x2||{});function pL(n){let e=te.useContext(gm);return e||_n(!1),e}function mL(n){let e=te.useContext(p2);return e||_n(!1),e}function gL(n){let e=te.useContext(Vo);return e||_n(!1),e}function y2(n){let e=gL(),t=e.matches[e.matches.length-1];return t.route.id||_n(!1),t.route.id}function vL(){var n;let e=te.useContext(m2),t=mL(),r=y2();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function xL(){let{router:n}=pL(v2.UseNavigateStable),e=y2(x2.UseNavigateStable),t=te.useRef(!1);return g2(()=>{t.current=!0}),te.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,nd({fromRouteId:e},i)))},[n,e])}const Qw={};function yL(n,e,t){Qw[n]||(Qw[n]=!0)}function bL(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ia(n){_n(!1)}function _L(n){let{basename:e="/",children:t=null,location:r,navigationType:i=vs.Pop,navigator:a,static:s=!1,future:o}=n;Nd()&&_n(!1);let u=e.replace(/^\/*/,"/"),d=te.useMemo(()=>({basename:u,navigator:a,static:s,future:nd({v7_relativeSplatPath:!1},o)}),[u,o,a,s]);typeof r=="string"&&(r=Ho(r));let{pathname:h="/",search:f="",hash:p="",state:x=null,key:y="default"}=r,M=te.useMemo(()=>{let _=dc(h,u);return _==null?null:{location:{pathname:_,search:f,hash:p,state:x,key:y},navigationType:i}},[u,h,f,p,x,y,i]);return M==null?null:te.createElement(zs.Provider,{value:d},te.createElement(vm.Provider,{children:t,value:M}))}function wL(n){let{children:e,location:t}=n;return oL(fx(e),t)}new Promise(()=>{});function fx(n,e){e===void 0&&(e=[]);let t=[];return te.Children.forEach(n,(r,i)=>{if(!te.isValidElement(r))return;let a=[...e,i];if(r.type===te.Fragment){t.push.apply(t,fx(r.props.children,a));return}r.type!==ia&&_n(!1),!r.props.index||!r.props.children||_n(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=fx(r.props.children,a)),t.push(s)}),t}/**
* React Router DOM v6.30.2
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Wp(){return Wp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wp.apply(this,arguments)}function b2(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function SL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ML(n,e){return n.button===0&&(!e||e==="_self")&&!SL(n)}const TL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],EL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],AL="6";try{window.__reactRouterVersion=AL}catch{}const CL=te.createContext({isTransitioning:!1}),RL="startTransition",Jw=bR[RL];function PL(n){let{basename:e,children:t,future:r,window:i}=n,a=te.useRef();a.current==null&&(a.current=LN({window:i,v5Compat:!0}));let s=a.current,[o,u]=te.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},h=te.useCallback(f=>{d&&Jw?Jw(()=>u(f)):u(f)},[u,d]);return te.useLayoutEffect(()=>s.listen(h),[s,h]),te.useEffect(()=>bL(r),[r]),te.createElement(_L,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s,future:r})}const NL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ni=te.forwardRef(function(n,e){let{onClick:t,relative:r,reloadDocument:i,replace:a,state:s,target:o,to:u,preventScrollReset:d,viewTransition:h}=n,f=b2(n,TL),{basename:p}=te.useContext(zs),x,y=!1;if(typeof u=="string"&&LL.test(u)&&(x=u,NL))try{let S=new URL(window.location.href),w=u.startsWith("//")?new URL(S.protocol+u):new URL(u),E=dc(w.pathname,p);w.origin===S.origin&&E!=null?u=E+w.search+w.hash:y=!0}catch{}let M=iL(u,{relative:r}),_=kL(u,{replace:a,state:s,target:o,preventScrollReset:d,relative:r,viewTransition:h});function g(S){t&&t(S),S.defaultPrevented||_(S)}return te.createElement("a",Wp({},f,{href:x||M,onClick:y||i?t:g,ref:e,target:o}))}),Js=te.forwardRef(function(n,e){let{"aria-current":t="page",caseSensitive:r=!1,className:i="",end:a=!1,style:s,to:o,viewTransition:u,children:d}=n,h=b2(n,EL),f=xm(o,{relative:h.relative}),p=wc(),x=te.useContext(p2),{navigator:y,basename:M}=te.useContext(zs),_=x!=null&&DL(f)&&u===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=p.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(S=S.toLowerCase(),w=w?w.toLowerCase():null,g=g.toLowerCase()),w&&M&&(w=dc(w,M)||w);const E=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let N=S===g||!a&&S.startsWith(g)&&S.charAt(E)==="/",P=w!=null&&(w===g||!a&&w.startsWith(g)&&w.charAt(g.length)==="/"),L={isActive:N,isPending:P,isTransitioning:_},U=N?t:void 0,R;typeof i=="function"?R=i(L):R=[i,N?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(L):s;return te.createElement(ni,Wp({},h,{"aria-current":U,className:R,ref:e,style:I,to:o,viewTransition:u}),typeof d=="function"?d(L):d)});var px;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(px||(px={}));var eS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(eS||(eS={}));function IL(n){let e=te.useContext(gm);return e||_n(!1),e}function kL(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,u=aL(),d=wc(),h=xm(n,{relative:s});return te.useCallback(f=>{if(ML(f,t)){f.preventDefault();let p=r!==void 0?r:Gp(d)===Gp(h);u(n,{replace:p,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[d,u,h,r,i,t,n,a,s,o])}function DL(n,e){e===void 0&&(e={});let t=te.useContext(CL);t==null&&_n(!1);let{basename:r}=IL(px.useViewTransitionState),i=xm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=dc(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=dc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return hx(i.pathname,s)!=null||hx(i.pathname,a)!=null}function OL(){const{pathname:n}=wc();return te.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[n]),null}function UL(){const[n,e]=te.useState(!1);te.useEffect(()=>{const r=()=>e(window.scrollY>50);return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const t=({isActive:r})=>r?"text-nobel-gold transition-colors cursor-pointer uppercase text-sm font-medium tracking-wide":"text-stone-600 hover:text-nobel-gold transition-colors cursor-pointer uppercase text-sm font-medium tracking-wide";return m.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n?"bg-[#F9F8F4]/95 backdrop-blur-md shadow-sm py-4":"bg-transparent py-6"}`,children:m.jsxs("div",{className:"container mx-auto px-6 flex justify-between items-center",children:[m.jsx(Js,{to:"/",className:"cursor-pointer group",children:m.jsx("span",{className:"font-serif font-bold text-lg tracking-wide",children:"DISC CLEANER"})}),m.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[m.jsx(Js,{to:"/",className:t,children:"Home"}),m.jsx(Js,{to:"/team",className:t,children:"Team"}),m.jsx(Js,{to:"/design",className:t,children:"Design"}),m.jsx(Js,{to:"/process",className:t,children:"Process"}),m.jsx(Js,{to:"/budget",className:t,children:"Budget"}),m.jsx(Js,{to:"/code",className:t,children:"Docs"})]}),m.jsx("div",{className:"md:hidden",children:m.jsx("button",{className:"text-stone-900 p-2",children:m.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})}function jL(){return m.jsxs("footer",{className:"bg-stone-900 text-stone-400 py-16",children:[m.jsxs("div",{className:"container mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-8",children:[m.jsxs("div",{className:"text-center md:text-left",children:[m.jsx("div",{className:"text-white font-serif font-bold text-2xl mb-2",children:"Disc Golf Disc Cleaner"}),m.jsx("p",{className:"text-sm",children:"Automated cleaning station for disc golf discs"})]}),m.jsxs("div",{className:"text-center md:text-right",children:[m.jsx("p",{className:"text-sm",children:"Olin College of Engineering"}),m.jsx("p",{className:"text-sm",children:"Principles of Engineering  2025"})]})]}),m.jsx("div",{className:"text-center mt-12 text-xs text-stone-600",children:" 2025 Disc Golf Disc Cleaner Team"})]})}/**
* @license
* Copyright 2010-2023 Three.js Authors
* SPDX-License-Identifier: MIT
*/const Ld="160",FL={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zL={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_2=0,mx=1,w2=2,BL=3,S2=0,ym=1,Nu=2,Oi=3,Fa=0,Ar=1,zi=2,HL=2,ua=0,Ao=1,gx=2,vx=3,xx=4,M2=5,ps=100,T2=101,E2=102,yx=103,bx=104,A2=200,C2=201,R2=202,P2=203,Xp=204,qp=205,N2=206,L2=207,I2=208,k2=209,D2=210,O2=211,U2=212,j2=213,F2=214,z2=0,B2=1,H2=2,rd=3,V2=4,G2=5,W2=6,X2=7,Id=0,q2=1,Y2=2,da=0,$2=1,K2=2,Z2=3,rb=4,Q2=5,J2=6,_x="attached",e3="detached",Is=300,fa=301,ks=302,hc=303,id=304,Sc=306,ad=1e3,ln=1001,sd=1002,En=1003,Yp=1004,VL=1004,Lu=1005,GL=1005,Wt=1006,ib=1007,WL=1007,Ds=1008,wx=1008,ri=1009,ab=1010,sb=1011,bm=1012,_m=1013,oa=1014,Un=1015,Qn=1016,ob=1017,lb=1018,As=1020,t3=1021,On=1023,n3=1024,r3=1025,Cs=1026,Uo=1027,cb=1028,ub=1029,i3=1030,db=1031,hb=1033,hp=33776,fp=33777,pp=33778,mp=33779,Sx=35840,Mx=35841,Tx=35842,Ex=35843,fb=36196,Ax=37492,Cx=37496,Rx=37808,Px=37809,Nx=37810,Lx=37811,Ix=37812,kx=37813,Dx=37814,Ox=37815,Ux=37816,jx=37817,Fx=37818,zx=37819,Bx=37820,Hx=37821,gp=36492,Vx=36494,Gx=36495,a3=36283,Wx=36284,Xx=36285,qx=36286,s3=2200,o3=2201,l3=2202,od=2300,ld=2301,vp=2302,yo=2400,bo=2401,cd=2402,wm=2500,pb=2501,XL=0,qL=1,YL=2,mb=3e3,Rs=3001,c3=3200,u3=3201,Bs=0,d3=1,Jr="",kn="srgb",oi="srgb-linear",Sm="display-p3",kd="display-p3-linear",ud="linear",Jt="srgb",dd="rec709",hd="p3",$L=0,fo=7680,KL=7681,ZL=7682,QL=7683,JL=34055,eI=34056,tI=5386,nI=512,rI=513,iI=514,aI=515,sI=516,oI=517,lI=518,Yx=519,h3=512,f3=513,p3=514,gb=515,m3=516,g3=517,v3=518,x3=519,fd=35044,cI=35048,uI=35040,dI=35045,hI=35049,fI=35041,pI=35046,mI=35050,gI=35042,vI="100",$x="300 es",$p=1035,Bi=2e3,fc=2001;class Ba{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let i=0,a=r.length;i<a;i++)r[i].call(this,e);e.target=null}}}const ur=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let tS=1234567;const Co=Math.PI/180,pc=180/Math.PI;function ii(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ur[n&255]+ur[n>>8&255]+ur[n>>16&255]+ur[n>>24&255]+"-"+ur[e&255]+ur[e>>8&255]+"-"+ur[e>>16&15|64]+ur[e>>24&255]+"-"+ur[t&63|128]+ur[t>>8&255]+"-"+ur[t>>16&255]+ur[t>>24&255]+ur[r&255]+ur[r>>8&255]+ur[r>>16&255]+ur[r>>24&255]).toLowerCase()}function yn(n,e,t){return Math.max(e,Math.min(t,n))}function vb(n,e){return(n%e+e)%e}function xI(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function yI(n,e,t){return n!==e?(t-n)/(e-n):0}function Iu(n,e,t){return(1-t)*n+t*e}function bI(n,e,t,r){return Iu(n,e,1-Math.exp(-t*r))}function _I(n,e=1){return e-Math.abs(vb(n,e*2)-e)}function wI(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function SI(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function MI(n,e){return n+Math.floor(Math.random()*(e-n+1))}function TI(n,e){return n+Math.random()*(e-n)}function EI(n){return n*(.5-Math.random())}function AI(n){n!==void 0&&(tS=n);let e=tS+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function CI(n){return n*Co}function RI(n){return n*pc}function Kx(n){return(n&n-1)===0&&n!==0}function PI(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Kp(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function NI(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),u=s(t/2),d=a((e+r)/2),h=s((e+r)/2),f=a((e-r)/2),p=s((e-r)/2),x=a((r-e)/2),y=s((r-e)/2);switch(i){case"XYX":n.set(o*h,u*f,u*p,o*d);break;case"YZY":n.set(u*p,o*h,u*f,o*d);break;case"ZXZ":n.set(u*f,u*p,o*h,o*d);break;case"XZX":n.set(o*h,u*y,u*x,o*d);break;case"YXY":n.set(u*x,o*h,u*y,o*d);break;case"ZYZ":n.set(u*y,u*x,o*h,o*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Fr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const y3={DEG2RAD:Co,RAD2DEG:pc,generateUUID:ii,clamp:yn,euclideanModulo:vb,mapLinear:xI,inverseLerp:yI,lerp:Iu,damp:bI,pingpong:_I,smoothstep:wI,smootherstep:SI,randInt:MI,randFloat:TI,randFloatSpread:EI,seededRandom:AI,degToRad:CI,radToDeg:RI,isPowerOfTwo:Kx,ceilPowerOfTwo:PI,floorPowerOfTwo:Kp,setQuaternionFromProperEuler:NI,normalize:At,denormalize:Fr};class Te{constructor(e=0,t=0){Te.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(yn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,t,r,i,a,s,o,u,d){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,u,d)}set(e,t,r,i,a,s,o,u,d){const h=this.elements;return h[0]=e,h[1]=i,h[2]=o,h[3]=t,h[4]=a,h[5]=u,h[6]=r,h[7]=s,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],u=r[6],d=r[1],h=r[4],f=r[7],p=r[2],x=r[5],y=r[8],M=i[0],_=i[3],g=i[6],S=i[1],w=i[4],E=i[7],N=i[2],P=i[5],L=i[8];return a[0]=s*M+o*S+u*N,a[3]=s*_+o*w+u*P,a[6]=s*g+o*E+u*L,a[1]=d*M+h*S+f*N,a[4]=d*_+h*w+f*P,a[7]=d*g+h*E+f*L,a[2]=p*M+x*S+y*N,a[5]=p*_+x*w+y*P,a[8]=p*g+x*E+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],d=e[7],h=e[8];return t*s*h-t*o*d-r*a*h+r*o*u+i*a*d-i*s*u}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],d=e[7],h=e[8],f=h*s-o*d,p=o*u-h*a,x=d*a-s*u,y=t*f+r*p+i*x;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/y;return e[0]=f*M,e[1]=(i*d-h*r)*M,e[2]=(o*r-i*s)*M,e[3]=p*M,e[4]=(h*t-i*u)*M,e[5]=(i*a-o*t)*M,e[6]=x*M,e[7]=(r*u-d*t)*M,e[8]=(s*t-r*a)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const u=Math.cos(a),d=Math.sin(a);return this.set(r*u,r*d,-r*(u*s+d*o)+s+e,-i*d,i*u,-i*(-d*s+u*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(E0.makeScale(e,t)),this}rotate(e){return this.premultiply(E0.makeRotation(-e)),this}translate(e,t){return this.premultiply(E0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const E0=new Rt;function b3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const LI={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Gl(n,e){return new LI[n](e)}function pd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function _3(){const n=pd("canvas");return n.style.display="block",n}const nS={};function ku(n){n in nS||(nS[n]=!0,console.warn(n))}const rS=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),iS=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),rf={[oi]:{transfer:ud,primaries:dd,toReference:n=>n,fromReference:n=>n},[kn]:{transfer:Jt,primaries:dd,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[kd]:{transfer:ud,primaries:hd,toReference:n=>n.applyMatrix3(iS),fromReference:n=>n.applyMatrix3(rS)},[Sm]:{transfer:Jt,primaries:hd,toReference:n=>n.convertSRGBToLinear().applyMatrix3(iS),fromReference:n=>n.applyMatrix3(rS).convertLinearToSRGB()}},II=new Set([oi,kd]),Xt={enabled:!0,_workingColorSpace:oi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!II.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=rf[e].toReference,i=rf[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return rf[n].primaries},getTransfer:function(n){return n===Jr?ud:rf[n].transfer}};function nc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function A0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ll;class xb{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ll===void 0&&(ll=pd("canvas")),ll.width=e.width,ll.height=e.height;const r=ll.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ll}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=pd("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=nc(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(nc(t[r]/255)*255):t[r]=nc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let kI=0;class _o{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:kI++}),this.uuid=ii(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(C0(i[s].image)):a.push(C0(i[s]))}else a=C0(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function C0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?xb.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let DI=0;class Zt extends Ba{constructor(e=Zt.DEFAULT_IMAGE,t=Zt.DEFAULT_MAPPING,r=ln,i=ln,a=Wt,s=Ds,o=On,u=ri,d=Zt.DEFAULT_ANISOTROPY,h=Jr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:DI++}),this.uuid=ii(),this.name="",this.source=new _o(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=d,this.format=o,this.internalFormat=null,this.type=u,this.offset=new Te(0,0),this.repeat=new Te(1,1),this.center=new Te(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(ku("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Rs?kn:Jr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Is)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ad:e.x=e.x-Math.floor(e.x);break;case ln:e.x=e.x<0?0:1;break;case sd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ad:e.y=e.y-Math.floor(e.y);break;case ln:e.y=e.y<0?0:1;break;case sd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ku("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kn?Rs:mb}set encoding(e){ku("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Rs?kn:Jr}}Zt.DEFAULT_IMAGE=null;Zt.DEFAULT_MAPPING=Is;Zt.DEFAULT_ANISOTROPY=1;class qt{constructor(e=0,t=0,r=0,i=1){qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const s=e.elements,o=s[0],u=s[4],d=s[8],h=s[1],f=s[5],p=s[9],x=s[2],y=s[6],M=s[10];if(Math.abs(u-h)<.01&&Math.abs(d-x)<.01&&Math.abs(p-y)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+x)<.1&&Math.abs(p+y)<.1&&Math.abs(o+f+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const g=(o+1)/2,S=(f+1)/2,w=(M+1)/2,E=(u+h)/4,N=(d+x)/4,P=(p+y)/4;return g>S&&g>w?g<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(g),i=E/r,a=N/r):S>w?S<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(S),r=E/i,a=P/i):w<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(w),r=N/a,i=P/a),this.set(r,i,a,t),this}let _=Math.sqrt((y-p)*(y-p)+(d-x)*(d-x)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(y-p)/_,this.y=(d-x)/_,this.z=(h-u)/_,this.w=Math.acos((o+f+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class w3 extends Ba{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(ku("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Rs?kn:Jr),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wt,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Zt(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new _o(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class li extends w3{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Mm extends Zt{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=En,this.minFilter=En,this.wrapR=ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class OI extends li{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Mm(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class yb extends Zt{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=En,this.minFilter=En,this.wrapR=ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class UI extends li{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new yb(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class jI extends li{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=a.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Gr{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let u=r[i+0],d=r[i+1],h=r[i+2],f=r[i+3];const p=a[s+0],x=a[s+1],y=a[s+2],M=a[s+3];if(o===0){e[t+0]=u,e[t+1]=d,e[t+2]=h,e[t+3]=f;return}if(o===1){e[t+0]=p,e[t+1]=x,e[t+2]=y,e[t+3]=M;return}if(f!==M||u!==p||d!==x||h!==y){let _=1-o;const g=u*p+d*x+h*y+f*M,S=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const N=Math.sqrt(w),P=Math.atan2(N,g*S);_=Math.sin(_*P)/N,o=Math.sin(o*P)/N}const E=o*S;if(u=u*_+p*E,d=d*_+x*E,h=h*_+y*E,f=f*_+M*E,_===1-o){const N=1/Math.sqrt(u*u+d*d+h*h+f*f);u*=N,d*=N,h*=N,f*=N}}e[t]=u,e[t+1]=d,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],u=r[i+1],d=r[i+2],h=r[i+3],f=a[s],p=a[s+1],x=a[s+2],y=a[s+3];return e[t]=o*y+h*f+u*x-d*p,e[t+1]=u*y+h*p+d*f-o*x,e[t+2]=d*y+h*x+o*p-u*f,e[t+3]=h*y-o*f-u*p-d*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,u=Math.sin,d=o(r/2),h=o(i/2),f=o(a/2),p=u(r/2),x=u(i/2),y=u(a/2);switch(s){case"XYZ":this._x=p*h*f+d*x*y,this._y=d*x*f-p*h*y,this._z=d*h*y+p*x*f,this._w=d*h*f-p*x*y;break;case"YXZ":this._x=p*h*f+d*x*y,this._y=d*x*f-p*h*y,this._z=d*h*y-p*x*f,this._w=d*h*f+p*x*y;break;case"ZXY":this._x=p*h*f-d*x*y,this._y=d*x*f+p*h*y,this._z=d*h*y+p*x*f,this._w=d*h*f-p*x*y;break;case"ZYX":this._x=p*h*f-d*x*y,this._y=d*x*f+p*h*y,this._z=d*h*y-p*x*f,this._w=d*h*f+p*x*y;break;case"YZX":this._x=p*h*f+d*x*y,this._y=d*x*f+p*h*y,this._z=d*h*y-p*x*f,this._w=d*h*f-p*x*y;break;case"XZY":this._x=p*h*f-d*x*y,this._y=d*x*f-p*h*y,this._z=d*h*y+p*x*f,this._w=d*h*f+p*x*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],u=t[9],d=t[2],h=t[6],f=t[10],p=r+o+f;if(p>0){const x=.5/Math.sqrt(p+1);this._w=.25/x,this._x=(h-u)*x,this._y=(a-d)*x,this._z=(s-i)*x}else if(r>o&&r>f){const x=2*Math.sqrt(1+r-o-f);this._w=(h-u)/x,this._x=.25*x,this._y=(i+s)/x,this._z=(a+d)/x}else if(o>f){const x=2*Math.sqrt(1+o-r-f);this._w=(a-d)/x,this._x=(i+s)/x,this._y=.25*x,this._z=(u+h)/x}else{const x=2*Math.sqrt(1+f-r-o);this._w=(s-i)/x,this._x=(a+d)/x,this._y=(u+h)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,u=t._y,d=t._z,h=t._w;return this._x=r*h+s*o+i*d-a*u,this._y=i*h+s*u+a*o-r*d,this._z=a*h+s*d+r*u-i*o,this._w=s*h-r*o-i*u-a*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const u=1-o*o;if(u<=Number.EPSILON){const x=1-t;return this._w=x*s+t*this._w,this._x=x*r+t*this._x,this._y=x*i+t*this._y,this._z=x*a+t*this._z,this.normalize(),this}const d=Math.sqrt(u),h=Math.atan2(d,o),f=Math.sin((1-t)*h)/d,p=Math.sin(t*h)/d;return this._w=s*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=a*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,r=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(aS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(aS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,u=e.w,d=2*(s*i-o*r),h=2*(o*t-a*i),f=2*(a*r-s*t);return this.x=t+u*d+s*f-o*h,this.y=r+u*h+o*d-a*f,this.z=i+u*f+a*h-s*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,u=t.z;return this.x=i*u-a*o,this.y=a*s-r*u,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return R0.copy(this).projectOnVector(e),this.sub(R0)}reflect(e){return this.sub(R0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(yn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const R0=new z,aS=new Gr;class Cr{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Ni.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Ni.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ni.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Ni):Ni.fromBufferAttribute(a,s),Ni.applyMatrix4(e.matrixWorld),this.expandByPoint(Ni);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),af.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),af.copy(r.boundingBox)),af.applyMatrix4(e.matrixWorld),this.union(af)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ni),Ni.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(nu),sf.subVectors(this.max,nu),cl.subVectors(e.a,nu),ul.subVectors(e.b,nu),dl.subVectors(e.c,nu),es.subVectors(ul,cl),ts.subVectors(dl,ul),eo.subVectors(cl,dl);let t=[0,-es.z,es.y,0,-ts.z,ts.y,0,-eo.z,eo.y,es.z,0,-es.x,ts.z,0,-ts.x,eo.z,0,-eo.x,-es.y,es.x,0,-ts.y,ts.x,0,-eo.y,eo.x,0];return!P0(t,cl,ul,dl,sf)||(t=[1,0,0,0,1,0,0,0,1],!P0(t,cl,ul,dl,sf))?!1:(of.crossVectors(es,ts),t=[of.x,of.y,of.z],P0(t,cl,ul,dl,sf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ni).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ni).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wa=[new z,new z,new z,new z,new z,new z,new z,new z],Ni=new z,af=new Cr,cl=new z,ul=new z,dl=new z,es=new z,ts=new z,eo=new z,nu=new z,sf=new z,of=new z,to=new z;function P0(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){to.fromArray(n,a);const o=i.x*Math.abs(to.x)+i.y*Math.abs(to.y)+i.z*Math.abs(to.z),u=e.dot(to),d=t.dot(to),h=r.dot(to);if(Math.max(-Math.max(u,d,h),Math.min(u,d,h))>o)return!1}return!0}const FI=new Cr,ru=new z,N0=new z;class pr{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):FI.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ru.subVectors(e,this.center);const t=ru.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(ru,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(N0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ru.copy(e.center).add(N0)),this.expandByPoint(ru.copy(e.center).sub(N0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Sa=new z,L0=new z,lf=new z,ns=new z,I0=new z,cf=new z,k0=new z;class Mc{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Sa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Sa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Sa.copy(this.origin).addScaledVector(this.direction,t),Sa.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){L0.copy(e).add(t).multiplyScalar(.5),lf.copy(t).sub(e).normalize(),ns.copy(this.origin).sub(L0);const a=e.distanceTo(t)*.5,s=-this.direction.dot(lf),o=ns.dot(this.direction),u=-ns.dot(lf),d=ns.lengthSq(),h=Math.abs(1-s*s);let f,p,x,y;if(h>0)if(f=s*u-o,p=s*o-u,y=a*h,f>=0)if(p>=-y)if(p<=y){const M=1/h;f*=M,p*=M,x=f*(f+s*p+2*o)+p*(s*f+p+2*u)+d}else p=a,f=Math.max(0,-(s*p+o)),x=-f*f+p*(p+2*u)+d;else p=-a,f=Math.max(0,-(s*p+o)),x=-f*f+p*(p+2*u)+d;else p<=-y?(f=Math.max(0,-(-s*a+o)),p=f>0?-a:Math.min(Math.max(-a,-u),a),x=-f*f+p*(p+2*u)+d):p<=y?(f=0,p=Math.min(Math.max(-a,-u),a),x=p*(p+2*u)+d):(f=Math.max(0,-(s*a+o)),p=f>0?a:Math.min(Math.max(-a,-u),a),x=-f*f+p*(p+2*u)+d);else p=s>0?-a:a,f=Math.max(0,-(s*p+o)),x=-f*f+p*(p+2*u)+d;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(L0).addScaledVector(lf,p),x}intersectSphere(e,t){Sa.subVectors(e.center,this.origin);const r=Sa.dot(this.direction),i=Sa.dot(Sa)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,u=r+s;return u<0?null:o<0?this.at(u,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,u;const d=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return d>=0?(r=(e.min.x-p.x)*d,i=(e.max.x-p.x)*d):(r=(e.max.x-p.x)*d,i=(e.min.x-p.x)*d),h>=0?(a=(e.min.y-p.y)*h,s=(e.max.y-p.y)*h):(a=(e.max.y-p.y)*h,s=(e.min.y-p.y)*h),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),f>=0?(o=(e.min.z-p.z)*f,u=(e.max.z-p.z)*f):(o=(e.max.z-p.z)*f,u=(e.min.z-p.z)*f),r>u||o>i)||((o>r||r!==r)&&(r=o),(u<i||i!==i)&&(i=u),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Sa)!==null}intersectTriangle(e,t,r,i,a){I0.subVectors(t,e),cf.subVectors(r,e),k0.crossVectors(I0,cf);let s=this.direction.dot(k0),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;ns.subVectors(this.origin,e);const u=o*this.direction.dot(cf.crossVectors(ns,cf));if(u<0)return null;const d=o*this.direction.dot(I0.cross(ns));if(d<0||u+d>s)return null;const h=-o*ns.dot(k0);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gt{constructor(e,t,r,i,a,s,o,u,d,h,f,p,x,y,M,_){gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,u,d,h,f,p,x,y,M,_)}set(e,t,r,i,a,s,o,u,d,h,f,p,x,y,M,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=a,g[5]=s,g[9]=o,g[13]=u,g[2]=d,g[6]=h,g[10]=f,g[14]=p,g[3]=x,g[7]=y,g[11]=M,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/hl.setFromMatrixColumn(e,0).length(),a=1/hl.setFromMatrixColumn(e,1).length(),s=1/hl.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),u=Math.cos(i),d=Math.sin(i),h=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const p=s*h,x=s*f,y=o*h,M=o*f;t[0]=u*h,t[4]=-u*f,t[8]=d,t[1]=x+y*d,t[5]=p-M*d,t[9]=-o*u,t[2]=M-p*d,t[6]=y+x*d,t[10]=s*u}else if(e.order==="YXZ"){const p=u*h,x=u*f,y=d*h,M=d*f;t[0]=p+M*o,t[4]=y*o-x,t[8]=s*d,t[1]=s*f,t[5]=s*h,t[9]=-o,t[2]=x*o-y,t[6]=M+p*o,t[10]=s*u}else if(e.order==="ZXY"){const p=u*h,x=u*f,y=d*h,M=d*f;t[0]=p-M*o,t[4]=-s*f,t[8]=y+x*o,t[1]=x+y*o,t[5]=s*h,t[9]=M-p*o,t[2]=-s*d,t[6]=o,t[10]=s*u}else if(e.order==="ZYX"){const p=s*h,x=s*f,y=o*h,M=o*f;t[0]=u*h,t[4]=y*d-x,t[8]=p*d+M,t[1]=u*f,t[5]=M*d+p,t[9]=x*d-y,t[2]=-d,t[6]=o*u,t[10]=s*u}else if(e.order==="YZX"){const p=s*u,x=s*d,y=o*u,M=o*d;t[0]=u*h,t[4]=M-p*f,t[8]=y*f+x,t[1]=f,t[5]=s*h,t[9]=-o*h,t[2]=-d*h,t[6]=x*f+y,t[10]=p-M*f}else if(e.order==="XZY"){const p=s*u,x=s*d,y=o*u,M=o*d;t[0]=u*h,t[4]=-f,t[8]=d*h,t[1]=p*f+M,t[5]=s*h,t[9]=x*f-y,t[2]=y*f-x,t[6]=o*h,t[10]=M*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(zI,e,BI)}lookAt(e,t,r){const i=this.elements;return Kr.subVectors(e,t),Kr.lengthSq()===0&&(Kr.z=1),Kr.normalize(),rs.crossVectors(r,Kr),rs.lengthSq()===0&&(Math.abs(r.z)===1?Kr.x+=1e-4:Kr.z+=1e-4,Kr.normalize(),rs.crossVectors(r,Kr)),rs.normalize(),uf.crossVectors(Kr,rs),i[0]=rs.x,i[4]=uf.x,i[8]=Kr.x,i[1]=rs.y,i[5]=uf.y,i[9]=Kr.y,i[2]=rs.z,i[6]=uf.z,i[10]=Kr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],u=r[8],d=r[12],h=r[1],f=r[5],p=r[9],x=r[13],y=r[2],M=r[6],_=r[10],g=r[14],S=r[3],w=r[7],E=r[11],N=r[15],P=i[0],L=i[4],U=i[8],R=i[12],I=i[1],G=i[5],Z=i[9],pe=i[13],Y=i[2],J=i[6],de=i[10],ge=i[14],H=i[3],q=i[7],K=i[11],se=i[15];return a[0]=s*P+o*I+u*Y+d*H,a[4]=s*L+o*G+u*J+d*q,a[8]=s*U+o*Z+u*de+d*K,a[12]=s*R+o*pe+u*ge+d*se,a[1]=h*P+f*I+p*Y+x*H,a[5]=h*L+f*G+p*J+x*q,a[9]=h*U+f*Z+p*de+x*K,a[13]=h*R+f*pe+p*ge+x*se,a[2]=y*P+M*I+_*Y+g*H,a[6]=y*L+M*G+_*J+g*q,a[10]=y*U+M*Z+_*de+g*K,a[14]=y*R+M*pe+_*ge+g*se,a[3]=S*P+w*I+E*Y+N*H,a[7]=S*L+w*G+E*J+N*q,a[11]=S*U+w*Z+E*de+N*K,a[15]=S*R+w*pe+E*ge+N*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],u=e[9],d=e[13],h=e[2],f=e[6],p=e[10],x=e[14],y=e[3],M=e[7],_=e[11],g=e[15];return y*(+a*u*f-i*d*f-a*o*p+r*d*p+i*o*x-r*u*x)+M*(+t*u*x-t*d*p+a*s*p-i*s*x+i*d*h-a*u*h)+_*(+t*d*f-t*o*x-a*s*f+r*s*x+a*o*h-r*d*h)+g*(-i*o*h-t*u*f+t*o*p+i*s*f-r*s*p+r*u*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],d=e[7],h=e[8],f=e[9],p=e[10],x=e[11],y=e[12],M=e[13],_=e[14],g=e[15],S=f*_*d-M*p*d+M*u*x-o*_*x-f*u*g+o*p*g,w=y*p*d-h*_*d-y*u*x+s*_*x+h*u*g-s*p*g,E=h*M*d-y*f*d+y*o*x-s*M*x-h*o*g+s*f*g,N=y*f*u-h*M*u-y*o*p+s*M*p+h*o*_-s*f*_,P=t*S+r*w+i*E+a*N;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/P;return e[0]=S*L,e[1]=(M*p*a-f*_*a-M*i*x+r*_*x+f*i*g-r*p*g)*L,e[2]=(o*_*a-M*u*a+M*i*d-r*_*d-o*i*g+r*u*g)*L,e[3]=(f*u*a-o*p*a-f*i*d+r*p*d+o*i*x-r*u*x)*L,e[4]=w*L,e[5]=(h*_*a-y*p*a+y*i*x-t*_*x-h*i*g+t*p*g)*L,e[6]=(y*u*a-s*_*a-y*i*d+t*_*d+s*i*g-t*u*g)*L,e[7]=(s*p*a-h*u*a+h*i*d-t*p*d-s*i*x+t*u*x)*L,e[8]=E*L,e[9]=(y*f*a-h*M*a-y*r*x+t*M*x+h*r*g-t*f*g)*L,e[10]=(s*M*a-y*o*a+y*r*d-t*M*d-s*r*g+t*o*g)*L,e[11]=(h*o*a-s*f*a-h*r*d+t*f*d+s*r*x-t*o*x)*L,e[12]=N*L,e[13]=(h*M*i-y*f*i+y*r*p-t*M*p-h*r*_+t*f*_)*L,e[14]=(y*o*i-s*M*i-y*r*u+t*M*u+s*r*_-t*o*_)*L,e[15]=(s*f*i-h*o*i+h*r*u-t*f*u-s*r*p+t*o*p)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,u=e.z,d=a*s,h=a*o;return this.set(d*s+r,d*o-i*u,d*u+i*o,0,d*o+i*u,h*o+r,h*u-i*s,0,d*u-i*o,h*u+i*s,a*u*u+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,u=t._w,d=a+a,h=s+s,f=o+o,p=a*d,x=a*h,y=a*f,M=s*h,_=s*f,g=o*f,S=u*d,w=u*h,E=u*f,N=r.x,P=r.y,L=r.z;return i[0]=(1-(M+g))*N,i[1]=(x+E)*N,i[2]=(y-w)*N,i[3]=0,i[4]=(x-E)*P,i[5]=(1-(p+g))*P,i[6]=(_+S)*P,i[7]=0,i[8]=(y+w)*L,i[9]=(_-S)*L,i[10]=(1-(p+M))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=hl.set(i[0],i[1],i[2]).length();const s=hl.set(i[4],i[5],i[6]).length(),o=hl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Li.copy(this);const u=1/a,d=1/s,h=1/o;return Li.elements[0]*=u,Li.elements[1]*=u,Li.elements[2]*=u,Li.elements[4]*=d,Li.elements[5]*=d,Li.elements[6]*=d,Li.elements[8]*=h,Li.elements[9]*=h,Li.elements[10]*=h,t.setFromRotationMatrix(Li),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=Bi){const u=this.elements,d=2*a/(t-e),h=2*a/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let x,y;if(o===Bi)x=-(s+a)/(s-a),y=-2*s*a/(s-a);else if(o===fc)x=-s/(s-a),y=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=d,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=h,u[9]=p,u[13]=0,u[2]=0,u[6]=0,u[10]=x,u[14]=y,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=Bi){const u=this.elements,d=1/(t-e),h=1/(r-i),f=1/(s-a),p=(t+e)*d,x=(r+i)*h;let y,M;if(o===Bi)y=(s+a)*f,M=-2*f;else if(o===fc)y=a*f,M=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-p,u[1]=0,u[5]=2*h,u[9]=0,u[13]=-x,u[2]=0,u[6]=0,u[10]=M,u[14]=-y,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const hl=new z,Li=new gt,zI=new z(0,0,0),BI=new z(1,1,1),rs=new z,uf=new z,Kr=new z,sS=new gt,oS=new Gr;class Dd{constructor(e=0,t=0,r=0,i=Dd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],u=i[1],d=i[5],h=i[9],f=i[2],p=i[6],x=i[10];switch(t){case"XYZ":this._y=Math.asin(yn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,x),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(p,d),this._z=0);break;case"YXZ":this._x=Math.asin(-yn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,x),this._z=Math.atan2(u,d)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(yn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,x),this._z=Math.atan2(-s,d)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-yn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,x),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-s,d));break;case"YZX":this._z=Math.asin(yn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,x));break;case"XZY":this._z=Math.asin(-yn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,d),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return sS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sS,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oS.setFromEuler(this),this.setFromQuaternion(oS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Dd.DEFAULT_ORDER="XYZ";class Ro{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let HI=0;const lS=new z,fl=new Gr,Ma=new gt,df=new z,iu=new z,VI=new z,GI=new Gr,cS=new z(1,0,0),uS=new z(0,1,0),dS=new z(0,0,1),WI={type:"added"},XI={type:"removed"};class Bt extends Ba{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:HI++}),this.uuid=ii(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bt.DEFAULT_UP.clone();const e=new z,t=new Dd,r=new Gr,i=new z(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new gt},normalMatrix:{value:new Rt}}),this.matrix=new gt,this.matrixWorld=new gt,this.matrixAutoUpdate=Bt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ro,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fl.setFromAxisAngle(e,t),this.quaternion.multiply(fl),this}rotateOnWorldAxis(e,t){return fl.setFromAxisAngle(e,t),this.quaternion.premultiply(fl),this}rotateX(e){return this.rotateOnAxis(cS,e)}rotateY(e){return this.rotateOnAxis(uS,e)}rotateZ(e){return this.rotateOnAxis(dS,e)}translateOnAxis(e,t){return lS.copy(e).applyQuaternion(this.quaternion),this.position.add(lS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cS,e)}translateY(e){return this.translateOnAxis(uS,e)}translateZ(e){return this.translateOnAxis(dS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ma.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?df.copy(e):df.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),iu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ma.lookAt(iu,df,this.up):Ma.lookAt(df,iu,this.up),this.quaternion.setFromRotationMatrix(Ma),i&&(Ma.extractRotation(i.matrixWorld),fl.setFromRotationMatrix(Ma),this.quaternion.premultiply(fl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(WI)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(XI)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ma.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ma.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ma),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iu,e,VI),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iu,GI,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const a=t[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++){const o=i[a];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,u){return o[u.uuid]===void 0&&(o[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const u=o.shapes;if(Array.isArray(u))for(let d=0,h=u.length;d<h;d++){const f=u[d];a(e.shapes,f)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let u=0,d=this.material.length;u<d;u++)o.push(a(e.materials,this.material[u]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const u=this.animations[o];i.animations.push(a(e.animations,u))}}if(t){const o=s(e.geometries),u=s(e.materials),d=s(e.textures),h=s(e.images),f=s(e.shapes),p=s(e.skeletons),x=s(e.animations),y=s(e.nodes);o.length>0&&(r.geometries=o),u.length>0&&(r.materials=u),d.length>0&&(r.textures=d),h.length>0&&(r.images=h),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),x.length>0&&(r.animations=x),y.length>0&&(r.nodes=y)}return r.object=i,r;function s(o){const u=[];for(const d in o){const h=o[d];delete h.metadata,u.push(h)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Bt.DEFAULT_UP=new z(0,1,0);Bt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ii=new z,Ta=new z,D0=new z,Ea=new z,pl=new z,ml=new z,hS=new z,O0=new z,U0=new z,j0=new z;let hf=!1;class jr{constructor(e=new z,t=new z,r=new z){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ii.subVectors(e,t),i.cross(Ii);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){Ii.subVectors(i,t),Ta.subVectors(r,t),D0.subVectors(e,t);const s=Ii.dot(Ii),o=Ii.dot(Ta),u=Ii.dot(D0),d=Ta.dot(Ta),h=Ta.dot(D0),f=s*d-o*o;if(f===0)return a.set(0,0,0),null;const p=1/f,x=(d*u-o*h)*p,y=(s*h-o*u)*p;return a.set(1-x-y,y,x)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ea)===null?!1:Ea.x>=0&&Ea.y>=0&&Ea.x+Ea.y<=1}static getUV(e,t,r,i,a,s,o,u){return hf===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),hf=!0),this.getInterpolation(e,t,r,i,a,s,o,u)}static getInterpolation(e,t,r,i,a,s,o,u){return this.getBarycoord(e,t,r,i,Ea)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,Ea.x),u.addScaledVector(s,Ea.y),u.addScaledVector(o,Ea.z),u)}static isFrontFacing(e,t,r,i){return Ii.subVectors(r,t),Ta.subVectors(e,t),Ii.cross(Ta).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ii.subVectors(this.c,this.b),Ta.subVectors(this.a,this.b),Ii.cross(Ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return jr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return jr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,a){return hf===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),hf=!0),jr.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}getInterpolation(e,t,r,i,a){return jr.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return jr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return jr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;pl.subVectors(i,r),ml.subVectors(a,r),O0.subVectors(e,r);const u=pl.dot(O0),d=ml.dot(O0);if(u<=0&&d<=0)return t.copy(r);U0.subVectors(e,i);const h=pl.dot(U0),f=ml.dot(U0);if(h>=0&&f<=h)return t.copy(i);const p=u*f-h*d;if(p<=0&&u>=0&&h<=0)return s=u/(u-h),t.copy(r).addScaledVector(pl,s);j0.subVectors(e,a);const x=pl.dot(j0),y=ml.dot(j0);if(y>=0&&x<=y)return t.copy(a);const M=x*d-u*y;if(M<=0&&d>=0&&y<=0)return o=d/(d-y),t.copy(r).addScaledVector(ml,o);const _=h*y-x*f;if(_<=0&&f-h>=0&&x-y>=0)return hS.subVectors(a,i),o=(f-h)/(f-h+(x-y)),t.copy(i).addScaledVector(hS,o);const g=1/(_+M+p);return s=M*g,o=p*g,t.copy(r).addScaledVector(pl,s).addScaledVector(ml,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const S3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},is={h:0,s:0,l:0},ff={h:0,s:0,l:0};function F0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class $e{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xt.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Xt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Xt.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Xt.workingColorSpace){if(e=vb(e,1),t=yn(t,0,1),r=yn(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=F0(s,a,e+1/3),this.g=F0(s,a,e),this.b=F0(s,a,e-1/3)}return Xt.toWorkingColorSpace(this,i),this}setStyle(e,t=kn){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kn){const r=S3[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nc(e.r),this.g=nc(e.g),this.b=nc(e.b),this}copyLinearToSRGB(e){return this.r=A0(e.r),this.g=A0(e.g),this.b=A0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kn){return Xt.fromWorkingColorSpace(dr.copy(this),e),Math.round(yn(dr.r*255,0,255))*65536+Math.round(yn(dr.g*255,0,255))*256+Math.round(yn(dr.b*255,0,255))}getHexString(e=kn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xt.workingColorSpace){Xt.fromWorkingColorSpace(dr.copy(this),t);const r=dr.r,i=dr.g,a=dr.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let u,d;const h=(o+s)/2;if(o===s)u=0,d=0;else{const f=s-o;switch(d=h<=.5?f/(s+o):f/(2-s-o),s){case r:u=(i-a)/f+(i<a?6:0);break;case i:u=(a-r)/f+2;break;case a:u=(r-i)/f+4;break}u/=6}return e.h=u,e.s=d,e.l=h,e}getRGB(e,t=Xt.workingColorSpace){return Xt.fromWorkingColorSpace(dr.copy(this),t),e.r=dr.r,e.g=dr.g,e.b=dr.b,e}getStyle(e=kn){Xt.fromWorkingColorSpace(dr.copy(this),e);const t=dr.r,r=dr.g,i=dr.b;return e!==kn?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(is),this.setHSL(is.h+e,is.s+t,is.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(is),e.getHSL(ff);const r=Iu(is.h,ff.h,t),i=Iu(is.s,ff.s,t),a=Iu(is.l,ff.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const dr=new $e;$e.NAMES=S3;let qI=0;class gr extends Ba{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:qI++}),this.uuid=ii(),this.name="",this.type="Material",this.blending=Ao,this.side=Fa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Xp,this.blendDst=qp,this.blendEquation=ps,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $e(0,0,0),this.blendAlpha=0,this.depthFunc=rd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yx,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fo,this.stencilZFail=fo,this.stencilZPass=fo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ao&&(r.blending=this.blending),this.side!==Fa&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Xp&&(r.blendSrc=this.blendSrc),this.blendDst!==qp&&(r.blendDst=this.blendDst),this.blendEquation!==ps&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==rd&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Yx&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==fo&&(r.stencilFail=this.stencilFail),this.stencilZFail!==fo&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==fo&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const u=a[o];delete u.metadata,s.push(u)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ha extends gr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Id,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pa=YI();function YI(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let u=0;u<256;++u){const d=u-127;d<-27?(r[u]=0,r[u|256]=32768,i[u]=24,i[u|256]=24):d<-14?(r[u]=1024>>-d-14,r[u|256]=1024>>-d-14|32768,i[u]=-d-1,i[u|256]=-d-1):d<=15?(r[u]=d+15<<10,r[u|256]=d+15<<10|32768,i[u]=13,i[u|256]=13):d<128?(r[u]=31744,r[u|256]=64512,i[u]=24,i[u|256]=24):(r[u]=31744,r[u|256]=64512,i[u]=13,i[u|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let u=1;u<1024;++u){let d=u<<13,h=0;for(;!(d&8388608);)d<<=1,h-=8388608;d&=-8388609,h+=947912704,a[u]=d|h}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)s[u]=u<<23;s[31]=1199570944,s[32]=2147483648;for(let u=33;u<63;++u)s[u]=2147483648+(u-32<<23);s[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(o[u]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function Or(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=yn(n,-65504,65504),Pa.floatView[0]=n;const e=Pa.uint32View[0],t=e>>23&511;return Pa.baseTable[t]+((e&8388607)>>Pa.shiftTable[t])}function _u(n){const e=n>>10;return Pa.uint32View[0]=Pa.mantissaTable[Pa.offsetTable[e]+(n&1023)]+Pa.exponentTable[e],Pa.floatView[0]}const wo={toHalfFloat:Or,fromHalfFloat:_u},In=new z,pf=new Te;class $t{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=fd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Un,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)pf.fromBufferAttribute(this,t),pf.applyMatrix3(e),this.setXY(t,pf.x,pf.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)In.fromBufferAttribute(this,t),In.applyMatrix3(e),this.setXYZ(t,In.x,In.y,In.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)In.fromBufferAttribute(this,t),In.applyMatrix4(e),this.setXYZ(t,In.x,In.y,In.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)In.fromBufferAttribute(this,t),In.applyNormalMatrix(e),this.setXYZ(t,In.x,In.y,In.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)In.fromBufferAttribute(this,t),In.transformDirection(e),this.setXYZ(t,In.x,In.y,In.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Fr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=At(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fr(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fr(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fr(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),a=At(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fd&&(e.usage=this.usage),e}}class $I extends $t{constructor(e,t,r){super(new Int8Array(e),t,r)}}class KI extends $t{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class ZI extends $t{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class QI extends $t{constructor(e,t,r){super(new Int16Array(e),t,r)}}class bb extends $t{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class JI extends $t{constructor(e,t,r){super(new Int32Array(e),t,r)}}class _b extends $t{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class e4 extends $t{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=_u(this.array[e*this.itemSize]);return this.normalized&&(t=Fr(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=Or(t),this}getY(e){let t=_u(this.array[e*this.itemSize+1]);return this.normalized&&(t=Fr(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=Or(t),this}getZ(e){let t=_u(this.array[e*this.itemSize+2]);return this.normalized&&(t=Fr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=Or(t),this}getW(e){let t=_u(this.array[e*this.itemSize+3]);return this.normalized&&(t=Fr(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=Or(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.array[e+0]=Or(t),this.array[e+1]=Or(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=Or(t),this.array[e+1]=Or(r),this.array[e+2]=Or(i),this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),a=At(a,this.array)),this.array[e+0]=Or(t),this.array[e+1]=Or(r),this.array[e+2]=Or(i),this.array[e+3]=Or(a),this}}class rt extends $t{constructor(e,t,r){super(new Float32Array(e),t,r)}}class t4 extends $t{constructor(e,t,r){super(new Float64Array(e),t,r)}}let n4=0;const bi=new gt,z0=new Bt,gl=new z,Zr=new Cr,au=new Cr,$n=new z;class Pt extends Ba{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:n4++}),this.uuid=ii(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(b3(e)?_b:bb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Rt().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return bi.makeRotationFromQuaternion(e),this.applyMatrix4(bi),this}rotateX(e){return bi.makeRotationX(e),this.applyMatrix4(bi),this}rotateY(e){return bi.makeRotationY(e),this.applyMatrix4(bi),this}rotateZ(e){return bi.makeRotationZ(e),this.applyMatrix4(bi),this}translate(e,t,r){return bi.makeTranslation(e,t,r),this.applyMatrix4(bi),this}scale(e,t,r){return bi.makeScale(e,t,r),this.applyMatrix4(bi),this}lookAt(e){return z0.lookAt(e),z0.updateMatrix(),this.applyMatrix4(z0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gl).negate(),this.translate(gl.x,gl.y,gl.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];Zr.setFromBufferAttribute(a),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,Zr.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,Zr.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint(Zr.min),this.boundingBox.expandByPoint(Zr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new z,1/0);return}if(e){const r=this.boundingSphere.center;if(Zr.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];au.setFromBufferAttribute(o),this.morphTargetsRelative?($n.addVectors(Zr.min,au.min),Zr.expandByPoint($n),$n.addVectors(Zr.max,au.max),Zr.expandByPoint($n)):(Zr.expandByPoint(au.min),Zr.expandByPoint(au.max))}Zr.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)$n.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared($n));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],u=this.morphTargetsRelative;for(let d=0,h=o.count;d<h;d++)$n.fromBufferAttribute(o,d),u&&(gl.fromBufferAttribute(e,d),$n.add(gl)),i=Math.max(i,r.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,s=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $t(new Float32Array(4*o),4));const u=this.getAttribute("tangent").array,d=[],h=[];for(let I=0;I<o;I++)d[I]=new z,h[I]=new z;const f=new z,p=new z,x=new z,y=new Te,M=new Te,_=new Te,g=new z,S=new z;function w(I,G,Z){f.fromArray(i,I*3),p.fromArray(i,G*3),x.fromArray(i,Z*3),y.fromArray(s,I*2),M.fromArray(s,G*2),_.fromArray(s,Z*2),p.sub(f),x.sub(f),M.sub(y),_.sub(y);const pe=1/(M.x*_.y-_.x*M.y);isFinite(pe)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(x,-M.y).multiplyScalar(pe),S.copy(x).multiplyScalar(M.x).addScaledVector(p,-_.x).multiplyScalar(pe),d[I].add(g),d[G].add(g),d[Z].add(g),h[I].add(S),h[G].add(S),h[Z].add(S))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let I=0,G=E.length;I<G;++I){const Z=E[I],pe=Z.start,Y=Z.count;for(let J=pe,de=pe+Y;J<de;J+=3)w(r[J+0],r[J+1],r[J+2])}const N=new z,P=new z,L=new z,U=new z;function R(I){L.fromArray(a,I*3),U.copy(L);const G=d[I];N.copy(G),N.sub(L.multiplyScalar(L.dot(G))).normalize(),P.crossVectors(U,G);const Z=P.dot(h[I])<0?-1:1;u[I*4]=N.x,u[I*4+1]=N.y,u[I*4+2]=N.z,u[I*4+3]=Z}for(let I=0,G=E.length;I<G;++I){const Z=E[I],pe=Z.start,Y=Z.count;for(let J=pe,de=pe+Y;J<de;J+=3)R(r[J+0]),R(r[J+1]),R(r[J+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new $t(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,x=r.count;p<x;p++)r.setXYZ(p,0,0,0);const i=new z,a=new z,s=new z,o=new z,u=new z,d=new z,h=new z,f=new z;if(e)for(let p=0,x=e.count;p<x;p+=3){const y=e.getX(p+0),M=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,y),a.fromBufferAttribute(t,M),s.fromBufferAttribute(t,_),h.subVectors(s,a),f.subVectors(i,a),h.cross(f),o.fromBufferAttribute(r,y),u.fromBufferAttribute(r,M),d.fromBufferAttribute(r,_),o.add(h),u.add(h),d.add(h),r.setXYZ(y,o.x,o.y,o.z),r.setXYZ(M,u.x,u.y,u.z),r.setXYZ(_,d.x,d.y,d.z)}else for(let p=0,x=t.count;p<x;p+=3)i.fromBufferAttribute(t,p+0),a.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),h.subVectors(s,a),f.subVectors(i,a),h.cross(f),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)$n.fromBufferAttribute(e,t),$n.normalize(),e.setXYZ(t,$n.x,$n.y,$n.z)}toNonIndexed(){function e(o,u){const d=o.array,h=o.itemSize,f=o.normalized,p=new d.constructor(u.length*h);let x=0,y=0;for(let M=0,_=u.length;M<_;M++){o.isInterleavedBufferAttribute?x=u[M]*o.data.stride+o.offset:x=u[M]*h;for(let g=0;g<h;g++)p[y++]=d[x++]}return new $t(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Pt,r=this.index.array,i=this.attributes;for(const o in i){const u=i[o],d=e(u,r);t.setAttribute(o,d)}const a=this.morphAttributes;for(const o in a){const u=[],d=a[o];for(let h=0,f=d.length;h<f;h++){const p=d[h],x=e(p,r);u.push(x)}t.morphAttributes[o]=u}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,u=s.length;o<u;o++){const d=s[o];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const d in u)u[d]!==void 0&&(e[d]=u[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const u in r){const d=r[u];e.data.attributes[u]=d.toJSON(e.data)}const i={};let a=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],h=[];for(let f=0,p=d.length;f<p;f++){const x=d[f];h.push(x.toJSON(e.data))}h.length>0&&(i[u]=h,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const d in i){const h=i[d];this.setAttribute(d,h.clone(t))}const a=e.morphAttributes;for(const d in a){const h=[],f=a[d];for(let p=0,x=f.length;p<x;p++)h.push(f[p].clone(t));this.morphAttributes[d]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let d=0,h=s.length;d<h;d++){const f=s[d];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fS=new gt,no=new Mc,mf=new pr,pS=new z,vl=new z,xl=new z,yl=new z,B0=new z,gf=new z,vf=new Te,xf=new Te,yf=new Te,mS=new z,gS=new z,vS=new z,bf=new z,_f=new z;class bn extends Bt{constructor(e=new Pt,t=new Ha){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=r.length;i<a;i++){const s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){gf.set(0,0,0);for(let u=0,d=a.length;u<d;u++){const h=o[u],f=a[u];h!==0&&(B0.fromBufferAttribute(f,e),s?gf.addScaledVector(B0,h):gf.addScaledVector(B0.sub(t),h))}t.add(gf)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),mf.copy(r.boundingSphere),mf.applyMatrix4(a),no.copy(e.ray).recast(e.near),!(mf.containsPoint(no.origin)===!1&&(no.intersectSphere(mf,pS)===null||no.origin.distanceToSquared(pS)>(e.far-e.near)**2))&&(fS.copy(a).invert(),no.copy(e.ray).applyMatrix4(fS),!(r.boundingBox!==null&&no.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,no)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,u=a.attributes.position,d=a.attributes.uv,h=a.attributes.uv1,f=a.attributes.normal,p=a.groups,x=a.drawRange;if(o!==null)if(Array.isArray(s))for(let y=0,M=p.length;y<M;y++){const _=p[y],g=s[_.materialIndex],S=Math.max(_.start,x.start),w=Math.min(o.count,Math.min(_.start+_.count,x.start+x.count));for(let E=S,N=w;E<N;E+=3){const P=o.getX(E),L=o.getX(E+1),U=o.getX(E+2);i=wf(this,g,e,r,d,h,f,P,L,U),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const y=Math.max(0,x.start),M=Math.min(o.count,x.start+x.count);for(let _=y,g=M;_<g;_+=3){const S=o.getX(_),w=o.getX(_+1),E=o.getX(_+2);i=wf(this,s,e,r,d,h,f,S,w,E),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(u!==void 0)if(Array.isArray(s))for(let y=0,M=p.length;y<M;y++){const _=p[y],g=s[_.materialIndex],S=Math.max(_.start,x.start),w=Math.min(u.count,Math.min(_.start+_.count,x.start+x.count));for(let E=S,N=w;E<N;E+=3){const P=E,L=E+1,U=E+2;i=wf(this,g,e,r,d,h,f,P,L,U),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const y=Math.max(0,x.start),M=Math.min(u.count,x.start+x.count);for(let _=y,g=M;_<g;_+=3){const S=_,w=_+1,E=_+2;i=wf(this,s,e,r,d,h,f,S,w,E),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function r4(n,e,t,r,i,a,s,o){let u;if(e.side===Ar?u=r.intersectTriangle(s,a,i,!0,o):u=r.intersectTriangle(i,a,s,e.side===Fa,o),u===null)return null;_f.copy(o),_f.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(_f);return d<t.near||d>t.far?null:{distance:d,point:_f.clone(),object:n}}function wf(n,e,t,r,i,a,s,o,u,d){n.getVertexPosition(o,vl),n.getVertexPosition(u,xl),n.getVertexPosition(d,yl);const h=r4(n,e,t,r,vl,xl,yl,bf);if(h){i&&(vf.fromBufferAttribute(i,o),xf.fromBufferAttribute(i,u),yf.fromBufferAttribute(i,d),h.uv=jr.getInterpolation(bf,vl,xl,yl,vf,xf,yf,new Te)),a&&(vf.fromBufferAttribute(a,o),xf.fromBufferAttribute(a,u),yf.fromBufferAttribute(a,d),h.uv1=jr.getInterpolation(bf,vl,xl,yl,vf,xf,yf,new Te),h.uv2=h.uv1),s&&(mS.fromBufferAttribute(s,o),gS.fromBufferAttribute(s,u),vS.fromBufferAttribute(s,d),h.normal=jr.getInterpolation(bf,vl,xl,yl,mS,gS,vS,new z),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const f={a:o,b:u,c:d,normal:new z,materialIndex:0};jr.getNormal(vl,xl,yl,f.normal),h.face=f}return h}class Go extends Pt{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const u=[],d=[],h=[],f=[];let p=0,x=0;y("z","y","x",-1,-1,r,t,e,s,a,0),y("z","y","x",1,-1,r,t,-e,s,a,1),y("x","z","y",1,1,e,r,t,i,s,2),y("x","z","y",1,-1,e,r,-t,i,s,3),y("x","y","z",1,-1,e,t,r,i,a,4),y("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(u),this.setAttribute("position",new rt(d,3)),this.setAttribute("normal",new rt(h,3)),this.setAttribute("uv",new rt(f,2));function y(M,_,g,S,w,E,N,P,L,U,R){const I=E/L,G=N/U,Z=E/2,pe=N/2,Y=P/2,J=L+1,de=U+1;let ge=0,H=0;const q=new z;for(let K=0;K<de;K++){const se=K*G-pe;for(let me=0;me<J;me++){const ie=me*I-Z;q[M]=ie*S,q[_]=se*w,q[g]=Y,d.push(q.x,q.y,q.z),q[M]=0,q[_]=0,q[g]=P>0?1:-1,h.push(q.x,q.y,q.z),f.push(me/L),f.push(1-K/U),ge+=1}}for(let K=0;K<U;K++)for(let se=0;se<L;se++){const me=p+se+J*K,ie=p+se+J*(K+1),xe=p+(se+1)+J*(K+1),ze=p+(se+1)+J*K;u.push(me,ie,ze),u.push(ie,xe,ze),H+=6}o.addGroup(x,H,R),x+=H,p+=ge}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Go(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mc(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Mr(n){const e={};for(let t=0;t<n.length;t++){const r=mc(n[t]);for(const i in r)e[i]=r[i]}return e}function i4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function M3(n){return n.getRenderTarget()===null?n.outputColorSpace:Xt.workingColorSpace}const T3={clone:mc,merge:Mr};var a4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,s4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ci extends gr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=a4,this.fragmentShader=s4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mc(e.uniforms),this.uniformsGroups=i4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Od extends Bt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gt,this.projectionMatrix=new gt,this.projectionMatrixInverse=new gt,this.coordinateSystem=Bi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Zn extends Od{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=pc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Co*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return pc*2*Math.atan(Math.tan(Co*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Co*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const u=s.fullWidth,d=s.fullHeight;a+=s.offsetX*i/u,t-=s.offsetY*r/d,i*=s.width/u,r*=s.height/d}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const bl=-90,_l=1;class E3 extends Bt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Zn(bl,_l,e,t);i.layers=this.layers,this.add(i);const a=new Zn(bl,_l,e,t);a.layers=this.layers,this.add(a);const s=new Zn(bl,_l,e,t);s.layers=this.layers,this.add(s);const o=new Zn(bl,_l,e,t);o.layers=this.layers,this.add(o);const u=new Zn(bl,_l,e,t);u.layers=this.layers,this.add(u);const d=new Zn(bl,_l,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,u]=t;for(const d of t)this.remove(d);if(e===Bi)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===fc)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,u,d,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const M=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,u),e.setRenderTarget(r,4,i),e.render(t,d),r.texture.generateMipmaps=M,e.setRenderTarget(r,5,i),e.render(t,h),e.setRenderTarget(f,p,x),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class Ud extends Zt{constructor(e,t,r,i,a,s,o,u,d,h){e=e!==void 0?e:[],t=t!==void 0?t:fa,super(e,t,r,i,a,s,o,u,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wb extends li{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(ku("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Rs?kn:Jr),this.texture=new Ud(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Wt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Go(5,5,5),a=new ci({name:"CubemapFromEquirect",uniforms:mc(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ar,blending:ua});a.uniforms.tEquirect.value=t;const s=new bn(i,a),o=t.minFilter;return t.minFilter===Ds&&(t.minFilter=Wt),new E3(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}const H0=new z,o4=new z,l4=new Rt;class us{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=H0.subVectors(r,t).cross(o4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(H0),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||l4.getNormalMatrix(e),i=this.coplanarPoint(H0).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ro=new pr,Sf=new z;class jd{constructor(e=new us,t=new us,r=new us,i=new us,a=new us,s=new us){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Bi){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],u=i[3],d=i[4],h=i[5],f=i[6],p=i[7],x=i[8],y=i[9],M=i[10],_=i[11],g=i[12],S=i[13],w=i[14],E=i[15];if(r[0].setComponents(u-a,p-d,_-x,E-g).normalize(),r[1].setComponents(u+a,p+d,_+x,E+g).normalize(),r[2].setComponents(u+s,p+h,_+y,E+S).normalize(),r[3].setComponents(u-s,p-h,_-y,E-S).normalize(),r[4].setComponents(u-o,p-f,_-M,E-w).normalize(),t===Bi)r[5].setComponents(u+o,p+f,_+M,E+w).normalize();else if(t===fc)r[5].setComponents(o,f,M,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ro.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ro.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ro)}intersectsSprite(e){return ro.center.set(0,0,0),ro.radius=.7071067811865476,ro.applyMatrix4(e.matrixWorld),this.intersectsSphere(ro)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Sf.x=i.normal.x>0?e.max.x:e.min.x,Sf.y=i.normal.y>0?e.max.y:e.min.y,Sf.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Sf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function A3(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function c4(n,e){const t=e.isWebGL2,r=new WeakMap;function i(d,h){const f=d.array,p=d.usage,x=f.byteLength,y=n.createBuffer();n.bindBuffer(h,y),n.bufferData(h,f,p),d.onUploadCallback();let M;if(f instanceof Float32Array)M=n.FLOAT;else if(f instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)M=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)M=n.SHORT;else if(f instanceof Uint32Array)M=n.UNSIGNED_INT;else if(f instanceof Int32Array)M=n.INT;else if(f instanceof Int8Array)M=n.BYTE;else if(f instanceof Uint8Array)M=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)M=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:M,bytesPerElement:f.BYTES_PER_ELEMENT,version:d.version,size:x}}function a(d,h,f){const p=h.array,x=h._updateRange,y=h.updateRanges;if(n.bindBuffer(f,d),x.count===-1&&y.length===0&&n.bufferSubData(f,0,p),y.length!==0){for(let M=0,_=y.length;M<_;M++){const g=y[M];t?n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}h.clearUpdateRanges()}x.count!==-1&&(t?n.bufferSubData(f,x.offset*p.BYTES_PER_ELEMENT,p,x.offset,x.count):n.bufferSubData(f,x.offset*p.BYTES_PER_ELEMENT,p.subarray(x.offset,x.offset+x.count)),x.count=-1),h.onUploadCallback()}function s(d){return d.isInterleavedBufferAttribute&&(d=d.data),r.get(d)}function o(d){d.isInterleavedBufferAttribute&&(d=d.data);const h=r.get(d);h&&(n.deleteBuffer(h.buffer),r.delete(d))}function u(d,h){if(d.isGLBufferAttribute){const p=r.get(d);(!p||p.version<d.version)&&r.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const f=r.get(d);if(f===void 0)r.set(d,i(d,h));else if(f.version<d.version){if(f.size!==d.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(f.buffer,d,h),f.version=d.version}}return{get:s,remove:o,update:u}}class Wo extends Pt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),u=Math.floor(i),d=o+1,h=u+1,f=e/o,p=t/u,x=[],y=[],M=[],_=[];for(let g=0;g<h;g++){const S=g*p-s;for(let w=0;w<d;w++){const E=w*f-a;y.push(E,-S,0),M.push(0,0,1),_.push(w/o),_.push(1-g/u)}}for(let g=0;g<u;g++)for(let S=0;S<o;S++){const w=S+d*g,E=S+d*(g+1),N=S+1+d*(g+1),P=S+1+d*g;x.push(w,E,P),x.push(E,N,P)}this.setIndex(x),this.setAttribute("position",new rt(y,3)),this.setAttribute("normal",new rt(M,3)),this.setAttribute("uv",new rt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wo(e.width,e.height,e.widthSegments,e.heightSegments)}}var u4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,d4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,h4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,f4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,p4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,m4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,g4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,v4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,x4=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,y4=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,b4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,w4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,S4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,M4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,T4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,E4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,A4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,C4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,R4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,P4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,N4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,L4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,I4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,k4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,D4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,O4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,U4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,j4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,F4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,z4="gl_FragColor = linearToOutputTexel( gl_FragColor );",B4=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,H4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,V4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,G4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,W4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,X4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,q4=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Y4=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$4=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,K4=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Z4=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Q4=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,J4=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ek=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tk=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ik=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ak=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,sk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ok=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ck=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,uk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dk=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,fk=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pk=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mk=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,gk=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,vk=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,xk=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yk=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bk=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_k=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,wk=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Sk=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Mk=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Tk=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Ek=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Ak=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ck=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Rk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Pk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Lk=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ik=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,kk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Dk=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Ok=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Uk=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,jk=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fk=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Bk=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Hk=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Vk=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Gk=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Wk=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Xk=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qk=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Yk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$k=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Kk=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Zk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Qk=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Jk=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,eD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rD=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,aD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uD=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hD=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pD=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,gD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_D=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,MD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TD=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ED=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AD=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,CD=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RD=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,PD=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ND=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LD=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ID=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,kD=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DD=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OD=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UD=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,jD=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FD=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zD=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BD=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HD=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Et={alphahash_fragment:u4,alphahash_pars_fragment:d4,alphamap_fragment:h4,alphamap_pars_fragment:f4,alphatest_fragment:p4,alphatest_pars_fragment:m4,aomap_fragment:g4,aomap_pars_fragment:v4,batching_pars_vertex:x4,batching_vertex:y4,begin_vertex:b4,beginnormal_vertex:_4,bsdfs:w4,iridescence_fragment:S4,bumpmap_pars_fragment:M4,clipping_planes_fragment:T4,clipping_planes_pars_fragment:E4,clipping_planes_pars_vertex:A4,clipping_planes_vertex:C4,color_fragment:R4,color_pars_fragment:P4,color_pars_vertex:N4,color_vertex:L4,common:I4,cube_uv_reflection_fragment:k4,defaultnormal_vertex:D4,displacementmap_pars_vertex:O4,displacementmap_vertex:U4,emissivemap_fragment:j4,emissivemap_pars_fragment:F4,colorspace_fragment:z4,colorspace_pars_fragment:B4,envmap_fragment:H4,envmap_common_pars_fragment:V4,envmap_pars_fragment:G4,envmap_pars_vertex:W4,envmap_physical_pars_fragment:rk,envmap_vertex:X4,fog_vertex:q4,fog_pars_vertex:Y4,fog_fragment:$4,fog_pars_fragment:K4,gradientmap_pars_fragment:Z4,lightmap_fragment:Q4,lightmap_pars_fragment:J4,lights_lambert_fragment:ek,lights_lambert_pars_fragment:tk,lights_pars_begin:nk,lights_toon_fragment:ik,lights_toon_pars_fragment:ak,lights_phong_fragment:sk,lights_phong_pars_fragment:ok,lights_physical_fragment:lk,lights_physical_pars_fragment:ck,lights_fragment_begin:uk,lights_fragment_maps:dk,lights_fragment_end:hk,logdepthbuf_fragment:fk,logdepthbuf_pars_fragment:pk,logdepthbuf_pars_vertex:mk,logdepthbuf_vertex:gk,map_fragment:vk,map_pars_fragment:xk,map_particle_fragment:yk,map_particle_pars_fragment:bk,metalnessmap_fragment:_k,metalnessmap_pars_fragment:wk,morphcolor_vertex:Sk,morphnormal_vertex:Mk,morphtarget_pars_vertex:Tk,morphtarget_vertex:Ek,normal_fragment_begin:Ak,normal_fragment_maps:Ck,normal_pars_fragment:Rk,normal_pars_vertex:Pk,normal_vertex:Nk,normalmap_pars_fragment:Lk,clearcoat_normal_fragment_begin:Ik,clearcoat_normal_fragment_maps:kk,clearcoat_pars_fragment:Dk,iridescence_pars_fragment:Ok,opaque_fragment:Uk,packing:jk,premultiplied_alpha_fragment:Fk,project_vertex:zk,dithering_fragment:Bk,dithering_pars_fragment:Hk,roughnessmap_fragment:Vk,roughnessmap_pars_fragment:Gk,shadowmap_pars_fragment:Wk,shadowmap_pars_vertex:Xk,shadowmap_vertex:qk,shadowmask_pars_fragment:Yk,skinbase_vertex:$k,skinning_pars_vertex:Kk,skinning_vertex:Zk,skinnormal_vertex:Qk,specularmap_fragment:Jk,specularmap_pars_fragment:eD,tonemapping_fragment:tD,tonemapping_pars_fragment:nD,transmission_fragment:rD,transmission_pars_fragment:iD,uv_pars_fragment:aD,uv_pars_vertex:sD,uv_vertex:oD,worldpos_vertex:lD,background_vert:cD,background_frag:uD,backgroundCube_vert:dD,backgroundCube_frag:hD,cube_vert:fD,cube_frag:pD,depth_vert:mD,depth_frag:gD,distanceRGBA_vert:vD,distanceRGBA_frag:xD,equirect_vert:yD,equirect_frag:bD,linedashed_vert:_D,linedashed_frag:wD,meshbasic_vert:SD,meshbasic_frag:MD,meshlambert_vert:TD,meshlambert_frag:ED,meshmatcap_vert:AD,meshmatcap_frag:CD,meshnormal_vert:RD,meshnormal_frag:PD,meshphong_vert:ND,meshphong_frag:LD,meshphysical_vert:ID,meshphysical_frag:kD,meshtoon_vert:DD,meshtoon_frag:OD,points_vert:UD,points_frag:jD,shadow_vert:FD,shadow_frag:zD,sprite_vert:BD,sprite_frag:HD},Be={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new Te(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Te(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},Fi={basic:{uniforms:Mr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:Mr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new $e(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:Mr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:Mr([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:Mr([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new $e(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:Mr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:Mr([Be.points,Be.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:Mr([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:Mr([Be.common,Be.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:Mr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:Mr([Be.sprite,Be.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:Mr([Be.common,Be.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:Mr([Be.lights,Be.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};Fi.physical={uniforms:Mr([Fi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new Te(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new Te},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new Te},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};const Mf={r:0,b:0,g:0};function VD(n,e,t,r,i,a,s){const o=new $e(0);let u=a===!0?0:1,d,h,f=null,p=0,x=null;function y(_,g){let S=!1,w=g.isScene===!0?g.background:null;w&&w.isTexture&&(w=(g.backgroundBlurriness>0?t:e).get(w)),w===null?M(o,u):w&&w.isColor&&(M(w,1),S=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,s):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===Sc)?(h===void 0&&(h=new bn(new Go(1,1,1),new ci({name:"BackgroundCubeMaterial",uniforms:mc(Fi.backgroundCube.uniforms),vertexShader:Fi.backgroundCube.vertexShader,fragmentShader:Fi.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(N,P,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=Xt.getTransfer(w.colorSpace)!==Jt,(f!==w||p!==w.version||x!==n.toneMapping)&&(h.material.needsUpdate=!0,f=w,p=w.version,x=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(d===void 0&&(d=new bn(new Wo(2,2),new ci({name:"BackgroundMaterial",uniforms:mc(Fi.background.uniforms),vertexShader:Fi.background.vertexShader,fragmentShader:Fi.background.fragmentShader,side:Fa,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=w,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=Xt.getTransfer(w.colorSpace)!==Jt,w.matrixAutoUpdate===!0&&w.updateMatrix(),d.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||x!==n.toneMapping)&&(d.material.needsUpdate=!0,f=w,p=w.version,x=n.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null))}function M(_,g){_.getRGB(Mf,M3(n)),r.buffers.color.setClear(Mf.r,Mf.g,Mf.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(_,g=1){o.set(_),u=g,M(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(_){u=_,M(o,u)},render:y}}function GD(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},u=_(null);let d=u,h=!1;function f(Y,J,de,ge,H){let q=!1;if(s){const K=M(ge,de,J);d!==K&&(d=K,x(d.object)),q=g(Y,ge,de,H),q&&S(Y,ge,de,H)}else{const K=J.wireframe===!0;(d.geometry!==ge.id||d.program!==de.id||d.wireframe!==K)&&(d.geometry=ge.id,d.program=de.id,d.wireframe=K,q=!0)}H!==null&&t.update(H,n.ELEMENT_ARRAY_BUFFER),(q||h)&&(h=!1,U(Y,J,de,ge),H!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))}function p(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function x(Y){return r.isWebGL2?n.bindVertexArray(Y):a.bindVertexArrayOES(Y)}function y(Y){return r.isWebGL2?n.deleteVertexArray(Y):a.deleteVertexArrayOES(Y)}function M(Y,J,de){const ge=de.wireframe===!0;let H=o[Y.id];H===void 0&&(H={},o[Y.id]=H);let q=H[J.id];q===void 0&&(q={},H[J.id]=q);let K=q[ge];return K===void 0&&(K=_(p()),q[ge]=K),K}function _(Y){const J=[],de=[],ge=[];for(let H=0;H<i;H++)J[H]=0,de[H]=0,ge[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:de,attributeDivisors:ge,object:Y,attributes:{},index:null}}function g(Y,J,de,ge){const H=d.attributes,q=J.attributes;let K=0;const se=de.getAttributes();for(const me in se)if(se[me].location>=0){const ie=H[me];let xe=q[me];if(xe===void 0&&(me==="instanceMatrix"&&Y.instanceMatrix&&(xe=Y.instanceMatrix),me==="instanceColor"&&Y.instanceColor&&(xe=Y.instanceColor)),ie===void 0||ie.attribute!==xe||xe&&ie.data!==xe.data)return!0;K++}return d.attributesNum!==K||d.index!==ge}function S(Y,J,de,ge){const H={},q=J.attributes;let K=0;const se=de.getAttributes();for(const me in se)if(se[me].location>=0){let ie=q[me];ie===void 0&&(me==="instanceMatrix"&&Y.instanceMatrix&&(ie=Y.instanceMatrix),me==="instanceColor"&&Y.instanceColor&&(ie=Y.instanceColor));const xe={};xe.attribute=ie,ie&&ie.data&&(xe.data=ie.data),H[me]=xe,K++}d.attributes=H,d.attributesNum=K,d.index=ge}function w(){const Y=d.newAttributes;for(let J=0,de=Y.length;J<de;J++)Y[J]=0}function E(Y){N(Y,0)}function N(Y,J){const de=d.newAttributes,ge=d.enabledAttributes,H=d.attributeDivisors;de[Y]=1,ge[Y]===0&&(n.enableVertexAttribArray(Y),ge[Y]=1),H[Y]!==J&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,J),H[Y]=J)}function P(){const Y=d.newAttributes,J=d.enabledAttributes;for(let de=0,ge=J.length;de<ge;de++)J[de]!==Y[de]&&(n.disableVertexAttribArray(de),J[de]=0)}function L(Y,J,de,ge,H,q,K){K===!0?n.vertexAttribIPointer(Y,J,de,H,q):n.vertexAttribPointer(Y,J,de,ge,H,q)}function U(Y,J,de,ge){if(r.isWebGL2===!1&&(Y.isInstancedMesh||ge.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const H=ge.attributes,q=de.getAttributes(),K=J.defaultAttributeValues;for(const se in q){const me=q[se];if(me.location>=0){let ie=H[se];if(ie===void 0&&(se==="instanceMatrix"&&Y.instanceMatrix&&(ie=Y.instanceMatrix),se==="instanceColor"&&Y.instanceColor&&(ie=Y.instanceColor)),ie!==void 0){const xe=ie.normalized,ze=ie.itemSize,De=t.get(ie);if(De===void 0)continue;const Ve=De.buffer,ut=De.type,at=De.bytesPerElement,Ge=r.isWebGL2===!0&&(ut===n.INT||ut===n.UNSIGNED_INT||ie.gpuType===_m);if(ie.isInterleavedBufferAttribute){const ye=ie.data,X=ye.stride,Ue=ie.offset;if(ye.isInstancedInterleavedBuffer){for(let Me=0;Me<me.locationSize;Me++)N(me.location+Me,ye.meshPerAttribute);Y.isInstancedMesh!==!0&&ge._maxInstanceCount===void 0&&(ge._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Me=0;Me<me.locationSize;Me++)E(me.location+Me);n.bindBuffer(n.ARRAY_BUFFER,Ve);for(let Me=0;Me<me.locationSize;Me++)L(me.location+Me,ze/me.locationSize,ut,xe,X*at,(Ue+ze/me.locationSize*Me)*at,Ge)}else{if(ie.isInstancedBufferAttribute){for(let ye=0;ye<me.locationSize;ye++)N(me.location+ye,ie.meshPerAttribute);Y.isInstancedMesh!==!0&&ge._maxInstanceCount===void 0&&(ge._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let ye=0;ye<me.locationSize;ye++)E(me.location+ye);n.bindBuffer(n.ARRAY_BUFFER,Ve);for(let ye=0;ye<me.locationSize;ye++)L(me.location+ye,ze/me.locationSize,ut,xe,ze*at,ze/me.locationSize*ye*at,Ge)}}else if(K!==void 0){const xe=K[se];if(xe!==void 0)switch(xe.length){case 2:n.vertexAttrib2fv(me.location,xe);break;case 3:n.vertexAttrib3fv(me.location,xe);break;case 4:n.vertexAttrib4fv(me.location,xe);break;default:n.vertexAttrib1fv(me.location,xe)}}}}P()}function R(){Z();for(const Y in o){const J=o[Y];for(const de in J){const ge=J[de];for(const H in ge)y(ge[H].object),delete ge[H];delete J[de]}delete o[Y]}}function I(Y){if(o[Y.id]===void 0)return;const J=o[Y.id];for(const de in J){const ge=J[de];for(const H in ge)y(ge[H].object),delete ge[H];delete J[de]}delete o[Y.id]}function G(Y){for(const J in o){const de=o[J];if(de[Y.id]===void 0)continue;const ge=de[Y.id];for(const H in ge)y(ge[H].object),delete ge[H];delete de[Y.id]}}function Z(){pe(),h=!0,d!==u&&(d=u,x(d.object))}function pe(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:f,reset:Z,resetDefaultState:pe,dispose:R,releaseStatesOfGeometry:I,releaseStatesOfProgram:G,initAttributes:w,enableAttribute:E,disableUnusedAttributes:P}}function WD(n,e,t,r){const i=r.isWebGL2;let a;function s(h){a=h}function o(h,f){n.drawArrays(a,h,f),t.update(f,a,1)}function u(h,f,p){if(p===0)return;let x,y;if(i)x=n,y="drawArraysInstanced";else if(x=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",x===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[y](a,h,f,p),t.update(f,a,p)}function d(h,f,p){if(p===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let y=0;y<p;y++)this.render(h[y],f[y]);else{x.multiDrawArraysWEBGL(a,h,0,f,0,p);let y=0;for(let M=0;M<p;M++)y+=f[M];t.update(y,a,1)}}this.setMode=s,this.render=o,this.renderInstances=u,this.renderMultiDraw=d}function XD(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const u=a(o);u!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",u,"instead."),o=u);const d=s||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=p>0,E=s||e.has("OES_texture_float"),N=w&&E,P=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:d,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:x,maxCubemapSize:y,maxAttributes:M,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:S,vertexTextures:w,floatFragmentTextures:E,floatVertexTextures:N,maxSamples:P}}function qD(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new us,o=new Rt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const x=f.length!==0||p||r!==0||i;return i=p,r=f.length,x},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,x){const y=f.clippingPlanes,M=f.clipIntersection,_=f.clipShadows,g=n.get(f);if(!i||y===null||y.length===0||a&&!_)a?h(null):d();else{const S=a?0:r,w=S*4;let E=g.clippingState||null;u.value=E,E=h(y,p,w,x);for(let N=0;N!==w;++N)E[N]=t[N];g.clippingState=E,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=S}};function d(){u.value!==t&&(u.value=t,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(f,p,x,y){const M=f!==null?f.length:0;let _=null;if(M!==0){if(_=u.value,y!==!0||_===null){const g=x+M*4,S=p.matrixWorldInverse;o.getNormalMatrix(S),(_===null||_.length<g)&&(_=new Float32Array(g));for(let w=0,E=x;w!==M;++w,E+=4)s.copy(f[w]).applyMatrix4(S,o),s.normal.toArray(_,E),_[E+3]=s.constant}u.value=_,u.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,_}}function YD(n){let e=new WeakMap;function t(s,o){return o===hc?s.mapping=fa:o===id&&(s.mapping=ks),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===hc||o===id)if(e.has(s)){const u=e.get(s).texture;return t(u,s.mapping)}else{const u=s.image;if(u&&u.height>0){const d=new wb(u.height/2);return d.fromEquirectangularTexture(n,s),e.set(s,d),s.addEventListener("dispose",i),t(d.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const u=e.get(o);u!==void 0&&(e.delete(o),u.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class Tc extends Od{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,u=i-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=d*this.view.offsetX,s=a+d*this.view.width,o-=h*this.view.offsetY,u=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Wl=4,xS=[.125,.215,.35,.446,.526,.582],mo=20,V0=new Tc,yS=new $e;let G0=null,W0=0,X0=0;const po=(1+Math.sqrt(5))/2,wl=1/po,bS=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,po,wl),new z(0,po,-wl),new z(wl,0,po),new z(-wl,0,po),new z(po,wl,0),new z(-po,wl,0)];class Zx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){G0=this._renderer.getRenderTarget(),W0=this._renderer.getActiveCubeFace(),X0=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=SS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(G0,W0,X0),e.scissorTest=!1,Tf(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fa||e.mapping===ks?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),G0=this._renderer.getRenderTarget(),W0=this._renderer.getActiveCubeFace(),X0=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Wt,minFilter:Wt,generateMipmaps:!1,type:Qn,format:On,colorSpace:oi,depthBuffer:!1},i=_S(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_S(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$D(a)),this._blurMaterial=KD(a,e,t)}return i}_compileMaterial(e){const t=new bn(this._lodPlanes[0],e);this._renderer.compile(t,V0)}_sceneToCubeUV(e,t,r,i){const a=new Zn(90,1,t,r),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(yS),u.toneMapping=da,u.autoClear=!1;const f=new Ha({name:"PMREM.Background",side:Ar,depthWrite:!1,depthTest:!1}),p=new bn(new Go,f);let x=!1;const y=e.background;y?y.isColor&&(f.color.copy(y),e.background=null,x=!0):(f.color.copy(yS),x=!0);for(let M=0;M<6;M++){const _=M%3;_===0?(a.up.set(0,s[M],0),a.lookAt(o[M],0,0)):_===1?(a.up.set(0,0,s[M]),a.lookAt(0,o[M],0)):(a.up.set(0,s[M],0),a.lookAt(0,0,o[M]));const g=this._cubeSize;Tf(i,_*g,M>2?g:0,g,g),u.setRenderTarget(i),x&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===fa||e.mapping===ks;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=SS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=wS());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new bn(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const u=this._cubeSize;Tf(t,0,0,3*u,2*u),r.setRenderTarget(t),r.render(s,V0)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=bS[(i-1)%bS.length];this._blur(e,i-1,i,a,s)}t.autoClear=r}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const u=this._renderer,d=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new bn(this._lodPlanes[i],d),p=d.uniforms,x=this._sizeLods[r]-1,y=isFinite(a)?Math.PI/(2*x):2*Math.PI/(2*mo-1),M=a/y,_=isFinite(a)?1+Math.floor(h*M):mo;_>mo&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${mo}`);const g=[];let S=0;for(let L=0;L<mo;++L){const U=L/M,R=Math.exp(-U*U/2);g.push(R),L===0?S+=R:L<_&&(S+=2*R)}for(let L=0;L<g.length;L++)g[L]=g[L]/S;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=s==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:w}=this;p.dTheta.value=y,p.mipInt.value=w-r;const E=this._sizeLods[i],N=3*E*(i>w-Wl?i-w+Wl:0),P=4*(this._cubeSize-E);Tf(t,N,P,3*E,2*E),u.setRenderTarget(t),u.render(f,V0)}}function $D(n){const e=[],t=[],r=[];let i=n;const a=n-Wl+1+xS.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let u=1/o;s>n-Wl?u=xS[s-n+Wl-1]:s===0&&(u=0),r.push(u);const d=1/(o-2),h=-d,f=1+d,p=[h,h,f,h,f,f,h,h,f,f,h,f],x=6,y=6,M=3,_=2,g=1,S=new Float32Array(M*y*x),w=new Float32Array(_*y*x),E=new Float32Array(g*y*x);for(let P=0;P<x;P++){const L=P%3*2/3-1,U=P>2?0:-1,R=[L,U,0,L+2/3,U,0,L+2/3,U+1,0,L,U,0,L+2/3,U+1,0,L,U+1,0];S.set(R,M*y*P),w.set(p,_*y*P);const I=[P,P,P,P,P,P];E.set(I,g*y*P)}const N=new Pt;N.setAttribute("position",new $t(S,M)),N.setAttribute("uv",new $t(w,_)),N.setAttribute("faceIndex",new $t(E,g)),e.push(N),i>Wl&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function _S(n,e,t){const r=new li(n,e,t);return r.texture.mapping=Sc,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Tf(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function KD(n,e,t){const r=new Float32Array(mo),i=new z(0,1,0);return new ci({name:"SphericalGaussianBlur",defines:{n:mo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Sb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ua,depthTest:!1,depthWrite:!1})}function wS(){return new ci({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Sb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ua,depthTest:!1,depthWrite:!1})}function SS(){return new ci({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Sb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ua,depthTest:!1,depthWrite:!1})}function Sb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ZD(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const u=o.mapping,d=u===hc||u===id,h=u===fa||u===ks;if(d||h)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let f=e.get(o);return t===null&&(t=new Zx(n)),f=d?t.fromEquirectangular(o,f):t.fromCubemap(o,f),e.set(o,f),f.texture}else{if(e.has(o))return e.get(o).texture;{const f=o.image;if(d&&f&&f.height>0||h&&f&&i(f)){t===null&&(t=new Zx(n));const p=d?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,p),o.addEventListener("dispose",a),p.texture}else return null}}}return o}function i(o){let u=0;const d=6;for(let h=0;h<d;h++)o[h]!==void 0&&u++;return u===d}function a(o){const u=o.target;u.removeEventListener("dispose",a);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function QD(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function JD(n,e,t,r){const i={},a=new WeakMap;function s(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const M=p.morphAttributes[y];for(let _=0,g=M.length;_<g;_++)e.remove(M[_])}p.removeEventListener("dispose",s),delete i[p.id];const x=a.get(p);x&&(e.remove(x),a.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function o(f,p){return i[p.id]===!0||(p.addEventListener("dispose",s),i[p.id]=!0,t.memory.geometries++),p}function u(f){const p=f.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const x=f.morphAttributes;for(const y in x){const M=x[y];for(let _=0,g=M.length;_<g;_++)e.update(M[_],n.ARRAY_BUFFER)}}function d(f){const p=[],x=f.index,y=f.attributes.position;let M=0;if(x!==null){const S=x.array;M=x.version;for(let w=0,E=S.length;w<E;w+=3){const N=S[w+0],P=S[w+1],L=S[w+2];p.push(N,P,P,L,L,N)}}else if(y!==void 0){const S=y.array;M=y.version;for(let w=0,E=S.length/3-1;w<E;w+=3){const N=w+0,P=w+1,L=w+2;p.push(N,P,P,L,L,N)}}else return;const _=new(b3(p)?_b:bb)(p,1);_.version=M;const g=a.get(f);g&&e.remove(g),a.set(f,_)}function h(f){const p=a.get(f);if(p){const x=f.index;x!==null&&p.version<x.version&&d(f)}else d(f);return a.get(f)}return{get:o,update:u,getWireframeAttribute:h}}function eO(n,e,t,r){const i=r.isWebGL2;let a;function s(x){a=x}let o,u;function d(x){o=x.type,u=x.bytesPerElement}function h(x,y){n.drawElements(a,y,o,x*u),t.update(y,a,1)}function f(x,y,M){if(M===0)return;let _,g;if(i)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](a,y,o,x*u,M),t.update(y,a,M)}function p(x,y,M){if(M===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<M;g++)this.render(x[g]/u,y[g]);else{_.multiDrawElementsWEBGL(a,y,0,o,x,0,M);let g=0;for(let S=0;S<M;S++)g+=y[S];t.update(g,a,1)}}this.setMode=s,this.setIndex=d,this.render=h,this.renderInstances=f,this.renderMultiDraw=p}function tO(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function nO(n,e){return n[0]-e[0]}function rO(n,e){return Math.abs(e[1])-Math.abs(n[1])}function iO(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,s=new qt,o=[];for(let d=0;d<8;d++)o[d]=[d,0];function u(d,h,f){const p=d.morphTargetInfluences;if(e.isWebGL2===!0){const x=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,y=x!==void 0?x.length:0;let M=a.get(h);if(M===void 0||M.count!==y){let S=function(){pe.dispose(),a.delete(h),h.removeEventListener("dispose",S)};M!==void 0&&M.texture.dispose();const w=h.morphAttributes.position!==void 0,E=h.morphAttributes.normal!==void 0,N=h.morphAttributes.color!==void 0,P=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],U=h.morphAttributes.color||[];let R=0;w===!0&&(R=1),E===!0&&(R=2),N===!0&&(R=3);let I=h.attributes.position.count*R,G=1;I>e.maxTextureSize&&(G=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const Z=new Float32Array(I*G*4*y),pe=new Mm(Z,I,G,y);pe.type=Un,pe.needsUpdate=!0;const Y=R*4;for(let J=0;J<y;J++){const de=P[J],ge=L[J],H=U[J],q=I*G*4*J;for(let K=0;K<de.count;K++){const se=K*Y;w===!0&&(s.fromBufferAttribute(de,K),Z[q+se+0]=s.x,Z[q+se+1]=s.y,Z[q+se+2]=s.z,Z[q+se+3]=0),E===!0&&(s.fromBufferAttribute(ge,K),Z[q+se+4]=s.x,Z[q+se+5]=s.y,Z[q+se+6]=s.z,Z[q+se+7]=0),N===!0&&(s.fromBufferAttribute(H,K),Z[q+se+8]=s.x,Z[q+se+9]=s.y,Z[q+se+10]=s.z,Z[q+se+11]=H.itemSize===4?s.w:1)}}M={count:y,texture:pe,size:new Te(I,G)},a.set(h,M),h.addEventListener("dispose",S)}let _=0;for(let S=0;S<p.length;S++)_+=p[S];const g=h.morphTargetsRelative?1:1-_;f.getUniforms().setValue(n,"morphTargetBaseInfluence",g),f.getUniforms().setValue(n,"morphTargetInfluences",p),f.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const x=p===void 0?0:p.length;let y=r[h.id];if(y===void 0||y.length!==x){y=[];for(let w=0;w<x;w++)y[w]=[w,0];r[h.id]=y}for(let w=0;w<x;w++){const E=y[w];E[0]=w,E[1]=p[w]}y.sort(rO);for(let w=0;w<8;w++)w<x&&y[w][1]?(o[w][0]=y[w][0],o[w][1]=y[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(nO);const M=h.morphAttributes.position,_=h.morphAttributes.normal;let g=0;for(let w=0;w<8;w++){const E=o[w],N=E[0],P=E[1];N!==Number.MAX_SAFE_INTEGER&&P?(M&&h.getAttribute("morphTarget"+w)!==M[N]&&h.setAttribute("morphTarget"+w,M[N]),_&&h.getAttribute("morphNormal"+w)!==_[N]&&h.setAttribute("morphNormal"+w,_[N]),i[w]=P,g+=P):(M&&h.hasAttribute("morphTarget"+w)===!0&&h.deleteAttribute("morphTarget"+w),_&&h.hasAttribute("morphNormal"+w)===!0&&h.deleteAttribute("morphNormal"+w),i[w]=0)}const S=h.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",S),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:u}}function aO(n,e,t,r){let i=new WeakMap;function a(u){const d=r.render.frame,h=u.geometry,f=e.get(u,h);if(i.get(f)!==d&&(e.update(f),i.set(f,d)),u.isInstancedMesh&&(u.hasEventListener("dispose",o)===!1&&u.addEventListener("dispose",o),i.get(u)!==d&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),i.set(u,d))),u.isSkinnedMesh){const p=u.skeleton;i.get(p)!==d&&(p.update(),i.set(p,d))}return f}function s(){i=new WeakMap}function o(u){const d=u.target;d.removeEventListener("dispose",o),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:a,dispose:s}}class Mb extends Zt{constructor(e,t,r,i,a,s,o,u,d,h){if(h=h!==void 0?h:Cs,h!==Cs&&h!==Uo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Cs&&(r=oa),r===void 0&&h===Uo&&(r=As),super(null,i,a,s,o,u,h,r,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:En,this.minFilter=u!==void 0?u:En,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const C3=new Zt,R3=new Mb(1,1);R3.compareFunction=gb;const P3=new Mm,N3=new yb,L3=new Ud,MS=[],TS=[],ES=new Float32Array(16),AS=new Float32Array(9),CS=new Float32Array(4);function Ec(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=MS[i];if(a===void 0&&(a=new Float32Array(i),MS[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function Vn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Gn(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Tm(n,e){let t=TS[e];t===void 0&&(t=new Int32Array(e),TS[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function sO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function oO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vn(t,e))return;n.uniform2fv(this.addr,e),Gn(t,e)}}function lO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Vn(t,e))return;n.uniform3fv(this.addr,e),Gn(t,e)}}function cO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vn(t,e))return;n.uniform4fv(this.addr,e),Gn(t,e)}}function uO(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Gn(t,e)}else{if(Vn(t,r))return;CS.set(r),n.uniformMatrix2fv(this.addr,!1,CS),Gn(t,r)}}function dO(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Gn(t,e)}else{if(Vn(t,r))return;AS.set(r),n.uniformMatrix3fv(this.addr,!1,AS),Gn(t,r)}}function hO(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Gn(t,e)}else{if(Vn(t,r))return;ES.set(r),n.uniformMatrix4fv(this.addr,!1,ES),Gn(t,r)}}function fO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function pO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vn(t,e))return;n.uniform2iv(this.addr,e),Gn(t,e)}}function mO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vn(t,e))return;n.uniform3iv(this.addr,e),Gn(t,e)}}function gO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vn(t,e))return;n.uniform4iv(this.addr,e),Gn(t,e)}}function vO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function xO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vn(t,e))return;n.uniform2uiv(this.addr,e),Gn(t,e)}}function yO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vn(t,e))return;n.uniform3uiv(this.addr,e),Gn(t,e)}}function bO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vn(t,e))return;n.uniform4uiv(this.addr,e),Gn(t,e)}}function _O(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const a=this.type===n.SAMPLER_2D_SHADOW?R3:C3;t.setTexture2D(e||a,i)}function wO(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||N3,i)}function SO(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||L3,i)}function MO(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||P3,i)}function TO(n){switch(n){case 5126:return sO;case 35664:return oO;case 35665:return lO;case 35666:return cO;case 35674:return uO;case 35675:return dO;case 35676:return hO;case 5124:case 35670:return fO;case 35667:case 35671:return pO;case 35668:case 35672:return mO;case 35669:case 35673:return gO;case 5125:return vO;case 36294:return xO;case 36295:return yO;case 36296:return bO;case 35678:case 36198:case 36298:case 36306:case 35682:return _O;case 35679:case 36299:case 36307:return wO;case 35680:case 36300:case 36308:case 36293:return SO;case 36289:case 36303:case 36311:case 36292:return MO}}function EO(n,e){n.uniform1fv(this.addr,e)}function AO(n,e){const t=Ec(e,this.size,2);n.uniform2fv(this.addr,t)}function CO(n,e){const t=Ec(e,this.size,3);n.uniform3fv(this.addr,t)}function RO(n,e){const t=Ec(e,this.size,4);n.uniform4fv(this.addr,t)}function PO(n,e){const t=Ec(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function NO(n,e){const t=Ec(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function LO(n,e){const t=Ec(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function IO(n,e){n.uniform1iv(this.addr,e)}function kO(n,e){n.uniform2iv(this.addr,e)}function DO(n,e){n.uniform3iv(this.addr,e)}function OO(n,e){n.uniform4iv(this.addr,e)}function UO(n,e){n.uniform1uiv(this.addr,e)}function jO(n,e){n.uniform2uiv(this.addr,e)}function FO(n,e){n.uniform3uiv(this.addr,e)}function zO(n,e){n.uniform4uiv(this.addr,e)}function BO(n,e,t){const r=this.cache,i=e.length,a=Tm(t,i);Vn(r,a)||(n.uniform1iv(this.addr,a),Gn(r,a));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||C3,a[s])}function HO(n,e,t){const r=this.cache,i=e.length,a=Tm(t,i);Vn(r,a)||(n.uniform1iv(this.addr,a),Gn(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||N3,a[s])}function VO(n,e,t){const r=this.cache,i=e.length,a=Tm(t,i);Vn(r,a)||(n.uniform1iv(this.addr,a),Gn(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||L3,a[s])}function GO(n,e,t){const r=this.cache,i=e.length,a=Tm(t,i);Vn(r,a)||(n.uniform1iv(this.addr,a),Gn(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||P3,a[s])}function WO(n){switch(n){case 5126:return EO;case 35664:return AO;case 35665:return CO;case 35666:return RO;case 35674:return PO;case 35675:return NO;case 35676:return LO;case 5124:case 35670:return IO;case 35667:case 35671:return kO;case 35668:case 35672:return DO;case 35669:case 35673:return OO;case 5125:return UO;case 36294:return jO;case 36295:return FO;case 36296:return zO;case 35678:case 36198:case 36298:case 36306:case 35682:return BO;case 35679:case 36299:case 36307:return HO;case 35680:case 36300:case 36308:case 36293:return VO;case 36289:case 36303:case 36311:case 36292:return GO}}class XO{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=TO(t.type)}}class qO{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=WO(t.type)}}class YO{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const q0=/(\w+)(\])?(\[|\.)?/g;function RS(n,e){n.seq.push(e),n.map[e.id]=e}function $O(n,e,t){const r=n.name,i=r.length;for(q0.lastIndex=0;;){const a=q0.exec(r),s=q0.lastIndex;let o=a[1];const u=a[2]==="]",d=a[3];if(u&&(o=o|0),d===void 0||d==="["&&s+2===i){RS(t,d===void 0?new XO(o,n,e):new qO(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new YO(o),RS(t,h)),t=h}}}class xp{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);$O(a,s,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],u=r[o.id];u.needsUpdate!==!1&&o.setValue(e,u.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function PS(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const KO=37297;let ZO=0;function QO(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}function JO(n){const e=Xt.getPrimaries(Xt.workingColorSpace),t=Xt.getPrimaries(n);let r;switch(e===t?r="":e===hd&&t===dd?r="LinearDisplayP3ToLinearSRGB":e===dd&&t===hd&&(r="LinearSRGBToLinearDisplayP3"),n){case oi:case kd:return[r,"LinearTransferOETF"];case kn:case Sm:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function NS(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+QO(n.getShaderSource(e),s)}else return i}function eU(n,e){const t=JO(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function tU(n,e){let t;switch(e){case $2:t="Linear";break;case K2:t="Reinhard";break;case Z2:t="OptimizedCineon";break;case rb:t="ACESFilmic";break;case J2:t="AgX";break;case Q2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function nU(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xl).join(`
`)}function rU(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Xl).join(`
`)}function iU(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function aU(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function Xl(n){return n!==""}function LS(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const sU=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qx(n){return n.replace(sU,lU)}const oU=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function lU(n,e){let t=Et[e];if(t===void 0){const r=oU.get(e);if(r!==void 0)t=Et[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Qx(t)}const cU=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function kS(n){return n.replace(cU,uU)}function uU(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function DS(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dU(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ym?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Nu?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Oi&&(e="SHADOWMAP_TYPE_VSM"),e}function hU(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case fa:case ks:e="ENVMAP_TYPE_CUBE";break;case Sc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function fU(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ks:e="ENVMAP_MODE_REFRACTION";break}return e}function pU(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Id:e="ENVMAP_BLENDING_MULTIPLY";break;case q2:e="ENVMAP_BLENDING_MIX";break;case Y2:e="ENVMAP_BLENDING_ADD";break}return e}function mU(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function gU(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const u=dU(t),d=hU(t),h=fU(t),f=pU(t),p=mU(t),x=t.isWebGL2?"":nU(t),y=rU(t),M=iU(a),_=i.createProgram();let g,S,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Xl).join(`
`),g.length>0&&(g+=`
`),S=[x,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Xl).join(`
`),S.length>0&&(S+=`
`)):(g=[DS(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xl).join(`
`),S=[x,DS(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==da?"#define TONE_MAPPING":"",t.toneMapping!==da?Et.tonemapping_pars_fragment:"",t.toneMapping!==da?tU("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Et.colorspace_pars_fragment,eU("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xl).join(`
`)),s=Qx(s),s=LS(s,t),s=IS(s,t),o=Qx(o),o=LS(o,t),o=IS(o,t),s=kS(s),o=kS(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,g=[y,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===$x?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$x?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const E=w+g+s,N=w+S+o,P=PS(i,i.VERTEX_SHADER,E),L=PS(i,i.FRAGMENT_SHADER,N);i.attachShader(_,P),i.attachShader(_,L),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function U(Z){if(n.debug.checkShaderErrors){const pe=i.getProgramInfoLog(_).trim(),Y=i.getShaderInfoLog(P).trim(),J=i.getShaderInfoLog(L).trim();let de=!0,ge=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(de=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,P,L);else{const H=NS(i,P,"vertex"),q=NS(i,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Program Info Log: `+pe+`
`+H+`
`+q)}else pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(Y===""||J==="")&&(ge=!1);ge&&(Z.diagnostics={runnable:de,programLog:pe,vertexShader:{log:Y,prefix:g},fragmentShader:{log:J,prefix:S}})}i.deleteShader(P),i.deleteShader(L),R=new xp(i,_),I=aU(i,_)}let R;this.getUniforms=function(){return R===void 0&&U(this),R};let I;this.getAttributes=function(){return I===void 0&&U(this),I};let G=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return G===!1&&(G=i.getProgramParameter(_,KO)),G},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ZO++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=L,this}let vU=0;class xU{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new yU(e),t.set(e,r)),r}}class yU{constructor(e){this.id=vU++,this.code=e,this.usedTimes=0}}function bU(n,e,t,r,i,a,s){const o=new Ro,u=new xU,d=[],h=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let x=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(R){return R===0?"uv":`uv${R}`}function _(R,I,G,Z,pe){const Y=Z.fog,J=pe.geometry,de=R.isMeshStandardMaterial?Z.environment:null,ge=(R.isMeshStandardMaterial?t:e).get(R.envMap||de),H=ge&&ge.mapping===Sc?ge.image.height:null,q=y[R.type];R.precision!==null&&(x=i.getMaxPrecision(R.precision),x!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",x,"instead."));const K=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,se=K!==void 0?K.length:0;let me=0;J.morphAttributes.position!==void 0&&(me=1),J.morphAttributes.normal!==void 0&&(me=2),J.morphAttributes.color!==void 0&&(me=3);let ie,xe,ze,De;if(q){const Ae=Fi[q];ie=Ae.vertexShader,xe=Ae.fragmentShader}else ie=R.vertexShader,xe=R.fragmentShader,u.update(R),ze=u.getVertexShaderID(R),De=u.getFragmentShaderID(R);const Ve=n.getRenderTarget(),ut=pe.isInstancedMesh===!0,at=pe.isBatchedMesh===!0,Ge=!!R.map,ye=!!R.matcap,X=!!ge,Ue=!!R.aoMap,Me=!!R.lightMap,we=!!R.bumpMap,ke=!!R.normalMap,be=!!R.displacementMap,Ye=!!R.emissiveMap,F=!!R.metalnessMap,k=!!R.roughnessMap,ce=R.anisotropy>0,Ne=R.clearcoat>0,Ee=R.iridescence>0,Le=R.sheen>0,nt=R.transmission>0,He=ce&&!!R.anisotropyMap,Ke=Ne&&!!R.clearcoatMap,lt=Ne&&!!R.clearcoatNormalMap,vt=Ne&&!!R.clearcoatRoughnessMap,Pe=Ee&&!!R.iridescenceMap,Ot=Ee&&!!R.iridescenceThicknessMap,xt=Le&&!!R.sheenColorMap,dt=Le&&!!R.sheenRoughnessMap,Oe=!!R.specularMap,Qe=!!R.specularColorMap,yt=!!R.specularIntensityMap,C=nt&&!!R.transmissionMap,D=nt&&!!R.thicknessMap,V=!!R.gradientMap,W=!!R.alphaMap,O=R.alphaTest>0,$=!!R.alphaHash,oe=!!R.extensions,he=!!J.attributes.uv1,_e=!!J.attributes.uv2,Se=!!J.attributes.uv3;let Re=da;return R.toneMapped&&(Ve===null||Ve.isXRRenderTarget===!0)&&(Re=n.toneMapping),{isWebGL2:h,shaderID:q,shaderType:R.type,shaderName:R.name,vertexShader:ie,fragmentShader:xe,defines:R.defines,customVertexShaderID:ze,customFragmentShaderID:De,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:x,batching:at,instancing:ut,instancingColor:ut&&pe.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Ve===null?n.outputColorSpace:Ve.isXRRenderTarget===!0?Ve.texture.colorSpace:oi,map:Ge,matcap:ye,envMap:X,envMapMode:X&&ge.mapping,envMapCubeUVHeight:H,aoMap:Ue,lightMap:Me,bumpMap:we,normalMap:ke,displacementMap:p&&be,emissiveMap:Ye,normalMapObjectSpace:ke&&R.normalMapType===d3,normalMapTangentSpace:ke&&R.normalMapType===Bs,metalnessMap:F,roughnessMap:k,anisotropy:ce,anisotropyMap:He,clearcoat:Ne,clearcoatMap:Ke,clearcoatNormalMap:lt,clearcoatRoughnessMap:vt,iridescence:Ee,iridescenceMap:Pe,iridescenceThicknessMap:Ot,sheen:Le,sheenColorMap:xt,sheenRoughnessMap:dt,specularMap:Oe,specularColorMap:Qe,specularIntensityMap:yt,transmission:nt,transmissionMap:C,thicknessMap:D,gradientMap:V,opaque:R.transparent===!1&&R.blending===Ao,alphaMap:W,alphaTest:O,alphaHash:$,combine:R.combine,mapUv:Ge&&M(R.map.channel),aoMapUv:Ue&&M(R.aoMap.channel),lightMapUv:Me&&M(R.lightMap.channel),bumpMapUv:we&&M(R.bumpMap.channel),normalMapUv:ke&&M(R.normalMap.channel),displacementMapUv:be&&M(R.displacementMap.channel),emissiveMapUv:Ye&&M(R.emissiveMap.channel),metalnessMapUv:F&&M(R.metalnessMap.channel),roughnessMapUv:k&&M(R.roughnessMap.channel),anisotropyMapUv:He&&M(R.anisotropyMap.channel),clearcoatMapUv:Ke&&M(R.clearcoatMap.channel),clearcoatNormalMapUv:lt&&M(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:vt&&M(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Pe&&M(R.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&M(R.iridescenceThicknessMap.channel),sheenColorMapUv:xt&&M(R.sheenColorMap.channel),sheenRoughnessMapUv:dt&&M(R.sheenRoughnessMap.channel),specularMapUv:Oe&&M(R.specularMap.channel),specularColorMapUv:Qe&&M(R.specularColorMap.channel),specularIntensityMapUv:yt&&M(R.specularIntensityMap.channel),transmissionMapUv:C&&M(R.transmissionMap.channel),thicknessMapUv:D&&M(R.thicknessMap.channel),alphaMapUv:W&&M(R.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(ke||ce),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUv1s:he,vertexUv2s:_e,vertexUv3s:Se,pointsUvs:pe.isPoints===!0&&!!J.attributes.uv&&(Ge||W),fog:!!Y,useFog:R.fog===!0,fogExp2:Y&&Y.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:pe.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:me,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:Re,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ge&&R.map.isVideoTexture===!0&&Xt.getTransfer(R.map.colorSpace)===Jt,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===zi,flipSided:R.side===Ar,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:oe&&R.extensions.derivatives===!0,extensionFragDepth:oe&&R.extensions.fragDepth===!0,extensionDrawBuffers:oe&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:oe&&R.extensions.shaderTextureLOD===!0,extensionClipCullDistance:oe&&R.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const I=[];if(R.shaderID?I.push(R.shaderID):(I.push(R.customVertexShaderID),I.push(R.customFragmentShaderID)),R.defines!==void 0)for(const G in R.defines)I.push(G),I.push(R.defines[G]);return R.isRawShaderMaterial===!1&&(S(I,R),w(I,R),I.push(n.outputColorSpace)),I.push(R.customProgramCacheKey),I.join()}function S(R,I){R.push(I.precision),R.push(I.outputColorSpace),R.push(I.envMapMode),R.push(I.envMapCubeUVHeight),R.push(I.mapUv),R.push(I.alphaMapUv),R.push(I.lightMapUv),R.push(I.aoMapUv),R.push(I.bumpMapUv),R.push(I.normalMapUv),R.push(I.displacementMapUv),R.push(I.emissiveMapUv),R.push(I.metalnessMapUv),R.push(I.roughnessMapUv),R.push(I.anisotropyMapUv),R.push(I.clearcoatMapUv),R.push(I.clearcoatNormalMapUv),R.push(I.clearcoatRoughnessMapUv),R.push(I.iridescenceMapUv),R.push(I.iridescenceThicknessMapUv),R.push(I.sheenColorMapUv),R.push(I.sheenRoughnessMapUv),R.push(I.specularMapUv),R.push(I.specularColorMapUv),R.push(I.specularIntensityMapUv),R.push(I.transmissionMapUv),R.push(I.thicknessMapUv),R.push(I.combine),R.push(I.fogExp2),R.push(I.sizeAttenuation),R.push(I.morphTargetsCount),R.push(I.morphAttributeCount),R.push(I.numDirLights),R.push(I.numPointLights),R.push(I.numSpotLights),R.push(I.numSpotLightMaps),R.push(I.numHemiLights),R.push(I.numRectAreaLights),R.push(I.numDirLightShadows),R.push(I.numPointLightShadows),R.push(I.numSpotLightShadows),R.push(I.numSpotLightShadowsWithMaps),R.push(I.numLightProbes),R.push(I.shadowMapType),R.push(I.toneMapping),R.push(I.numClippingPlanes),R.push(I.numClipIntersection),R.push(I.depthPacking)}function w(R,I){o.disableAll(),I.isWebGL2&&o.enable(0),I.supportsVertexTextures&&o.enable(1),I.instancing&&o.enable(2),I.instancingColor&&o.enable(3),I.matcap&&o.enable(4),I.envMap&&o.enable(5),I.normalMapObjectSpace&&o.enable(6),I.normalMapTangentSpace&&o.enable(7),I.clearcoat&&o.enable(8),I.iridescence&&o.enable(9),I.alphaTest&&o.enable(10),I.vertexColors&&o.enable(11),I.vertexAlphas&&o.enable(12),I.vertexUv1s&&o.enable(13),I.vertexUv2s&&o.enable(14),I.vertexUv3s&&o.enable(15),I.vertexTangents&&o.enable(16),I.anisotropy&&o.enable(17),I.alphaHash&&o.enable(18),I.batching&&o.enable(19),R.push(o.mask),o.disableAll(),I.fog&&o.enable(0),I.useFog&&o.enable(1),I.flatShading&&o.enable(2),I.logarithmicDepthBuffer&&o.enable(3),I.skinning&&o.enable(4),I.morphTargets&&o.enable(5),I.morphNormals&&o.enable(6),I.morphColors&&o.enable(7),I.premultipliedAlpha&&o.enable(8),I.shadowMapEnabled&&o.enable(9),I.useLegacyLights&&o.enable(10),I.doubleSided&&o.enable(11),I.flipSided&&o.enable(12),I.useDepthPacking&&o.enable(13),I.dithering&&o.enable(14),I.transmission&&o.enable(15),I.sheen&&o.enable(16),I.opaque&&o.enable(17),I.pointsUvs&&o.enable(18),I.decodeVideoTexture&&o.enable(19),R.push(o.mask)}function E(R){const I=y[R.type];let G;if(I){const Z=Fi[I];G=T3.clone(Z.uniforms)}else G=R.uniforms;return G}function N(R,I){let G;for(let Z=0,pe=d.length;Z<pe;Z++){const Y=d[Z];if(Y.cacheKey===I){G=Y,++G.usedTimes;break}}return G===void 0&&(G=new gU(n,I,R,a),d.push(G)),G}function P(R){if(--R.usedTimes===0){const I=d.indexOf(R);d[I]=d[d.length-1],d.pop(),R.destroy()}}function L(R){u.remove(R)}function U(){u.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:E,acquireProgram:N,releaseProgram:P,releaseShaderCache:L,programs:d,dispose:U}}function _U(){let n=new WeakMap;function e(a){let s=n.get(a);return s===void 0&&(s={},n.set(a,s)),s}function t(a){n.delete(a)}function r(a,s,o){n.get(a)[s]=o}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function wU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function OS(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function US(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(f,p,x,y,M,_){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:x,groupOrder:y,renderOrder:f.renderOrder,z:M,group:_},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=x,g.groupOrder=y,g.renderOrder=f.renderOrder,g.z=M,g.group=_),e++,g}function o(f,p,x,y,M,_){const g=s(f,p,x,y,M,_);x.transmission>0?r.push(g):x.transparent===!0?i.push(g):t.push(g)}function u(f,p,x,y,M,_){const g=s(f,p,x,y,M,_);x.transmission>0?r.unshift(g):x.transparent===!0?i.unshift(g):t.unshift(g)}function d(f,p){t.length>1&&t.sort(f||wU),r.length>1&&r.sort(p||OS),i.length>1&&i.sort(p||OS)}function h(){for(let f=e,p=n.length;f<p;f++){const x=n[f];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:u,finish:h,sort:d}}function SU(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new US,n.set(r,[s])):i>=a.length?(s=new US,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function MU(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new $e};break;case"SpotLight":t={position:new z,direction:new z,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new $e,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new $e,groundColor:new $e};break;case"RectAreaLight":t={color:new $e,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function TU(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let EU=0;function AU(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function CU(n,e){const t=new MU,r=TU(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new z);const a=new z,s=new gt,o=new gt;function u(h,f){let p=0,x=0,y=0;for(let Z=0;Z<9;Z++)i.probe[Z].set(0,0,0);let M=0,_=0,g=0,S=0,w=0,E=0,N=0,P=0,L=0,U=0,R=0;h.sort(AU);const I=f===!0?Math.PI:1;for(let Z=0,pe=h.length;Z<pe;Z++){const Y=h[Z],J=Y.color,de=Y.intensity,ge=Y.distance,H=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)p+=J.r*de*I,x+=J.g*de*I,y+=J.b*de*I;else if(Y.isLightProbe){for(let q=0;q<9;q++)i.probe[q].addScaledVector(Y.sh.coefficients[q],de);R++}else if(Y.isDirectionalLight){const q=t.get(Y);if(q.color.copy(Y.color).multiplyScalar(Y.intensity*I),Y.castShadow){const K=Y.shadow,se=r.get(Y);se.shadowBias=K.bias,se.shadowNormalBias=K.normalBias,se.shadowRadius=K.radius,se.shadowMapSize=K.mapSize,i.directionalShadow[M]=se,i.directionalShadowMap[M]=H,i.directionalShadowMatrix[M]=Y.shadow.matrix,E++}i.directional[M]=q,M++}else if(Y.isSpotLight){const q=t.get(Y);q.position.setFromMatrixPosition(Y.matrixWorld),q.color.copy(J).multiplyScalar(de*I),q.distance=ge,q.coneCos=Math.cos(Y.angle),q.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),q.decay=Y.decay,i.spot[g]=q;const K=Y.shadow;if(Y.map&&(i.spotLightMap[L]=Y.map,L++,K.updateMatrices(Y),Y.castShadow&&U++),i.spotLightMatrix[g]=K.matrix,Y.castShadow){const se=r.get(Y);se.shadowBias=K.bias,se.shadowNormalBias=K.normalBias,se.shadowRadius=K.radius,se.shadowMapSize=K.mapSize,i.spotShadow[g]=se,i.spotShadowMap[g]=H,P++}g++}else if(Y.isRectAreaLight){const q=t.get(Y);q.color.copy(J).multiplyScalar(de),q.halfWidth.set(Y.width*.5,0,0),q.halfHeight.set(0,Y.height*.5,0),i.rectArea[S]=q,S++}else if(Y.isPointLight){const q=t.get(Y);if(q.color.copy(Y.color).multiplyScalar(Y.intensity*I),q.distance=Y.distance,q.decay=Y.decay,Y.castShadow){const K=Y.shadow,se=r.get(Y);se.shadowBias=K.bias,se.shadowNormalBias=K.normalBias,se.shadowRadius=K.radius,se.shadowMapSize=K.mapSize,se.shadowCameraNear=K.camera.near,se.shadowCameraFar=K.camera.far,i.pointShadow[_]=se,i.pointShadowMap[_]=H,i.pointShadowMatrix[_]=Y.shadow.matrix,N++}i.point[_]=q,_++}else if(Y.isHemisphereLight){const q=t.get(Y);q.skyColor.copy(Y.color).multiplyScalar(de*I),q.groundColor.copy(Y.groundColor).multiplyScalar(de*I),i.hemi[w]=q,w++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Be.LTC_FLOAT_1,i.rectAreaLTC2=Be.LTC_FLOAT_2):(i.rectAreaLTC1=Be.LTC_HALF_1,i.rectAreaLTC2=Be.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Be.LTC_FLOAT_1,i.rectAreaLTC2=Be.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Be.LTC_HALF_1,i.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=x,i.ambient[2]=y;const G=i.hash;(G.directionalLength!==M||G.pointLength!==_||G.spotLength!==g||G.rectAreaLength!==S||G.hemiLength!==w||G.numDirectionalShadows!==E||G.numPointShadows!==N||G.numSpotShadows!==P||G.numSpotMaps!==L||G.numLightProbes!==R)&&(i.directional.length=M,i.spot.length=g,i.rectArea.length=S,i.point.length=_,i.hemi.length=w,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=N,i.pointShadowMap.length=N,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=N,i.spotLightMatrix.length=P+L-U,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=R,G.directionalLength=M,G.pointLength=_,G.spotLength=g,G.rectAreaLength=S,G.hemiLength=w,G.numDirectionalShadows=E,G.numPointShadows=N,G.numSpotShadows=P,G.numSpotMaps=L,G.numLightProbes=R,i.version=EU++)}function d(h,f){let p=0,x=0,y=0,M=0,_=0;const g=f.matrixWorldInverse;for(let S=0,w=h.length;S<w;S++){const E=h[S];if(E.isDirectionalLight){const N=i.directional[p];N.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),N.direction.sub(a),N.direction.transformDirection(g),p++}else if(E.isSpotLight){const N=i.spot[y];N.position.setFromMatrixPosition(E.matrixWorld),N.position.applyMatrix4(g),N.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),N.direction.sub(a),N.direction.transformDirection(g),y++}else if(E.isRectAreaLight){const N=i.rectArea[M];N.position.setFromMatrixPosition(E.matrixWorld),N.position.applyMatrix4(g),o.identity(),s.copy(E.matrixWorld),s.premultiply(g),o.extractRotation(s),N.halfWidth.set(E.width*.5,0,0),N.halfHeight.set(0,E.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),M++}else if(E.isPointLight){const N=i.point[x];N.position.setFromMatrixPosition(E.matrixWorld),N.position.applyMatrix4(g),x++}else if(E.isHemisphereLight){const N=i.hemi[_];N.direction.setFromMatrixPosition(E.matrixWorld),N.direction.transformDirection(g),_++}}}return{setup:u,setupView:d,state:i}}function jS(n,e){const t=new CU(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function s(h){r.push(h)}function o(h){i.push(h)}function u(h){t.setup(r,h)}function d(h){t.setupView(r,h)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:u,setupLightsView:d,pushLight:s,pushShadow:o}}function RU(n,e){let t=new WeakMap;function r(a,s=0){const o=t.get(a);let u;return o===void 0?(u=new jS(n,e),t.set(a,[u])):s>=o.length?(u=new jS(n,e),o.push(u)):u=o[s],u}function i(){t=new WeakMap}return{get:r,dispose:i}}class Tb extends gr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=c3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Eb extends gr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const PU=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,NU=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function LU(n,e,t){let r=new jd;const i=new Te,a=new Te,s=new qt,o=new Tb({depthPacking:u3}),u=new Eb,d={},h=t.maxTextureSize,f={[Fa]:Ar,[Ar]:Fa,[zi]:zi},p=new ci({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Te},radius:{value:4}},vertexShader:PU,fragmentShader:NU}),x=p.clone();x.defines.HORIZONTAL_PASS=1;const y=new Pt;y.setAttribute("position",new $t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new bn(y,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ym;let g=this.type;this.render=function(P,L,U){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||P.length===0)return;const R=n.getRenderTarget(),I=n.getActiveCubeFace(),G=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(ua),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const pe=g!==Oi&&this.type===Oi,Y=g===Oi&&this.type!==Oi;for(let J=0,de=P.length;J<de;J++){const ge=P[J],H=ge.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",ge,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;i.copy(H.mapSize);const q=H.getFrameExtents();if(i.multiply(q),a.copy(H.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(a.x=Math.floor(h/q.x),i.x=a.x*q.x,H.mapSize.x=a.x),i.y>h&&(a.y=Math.floor(h/q.y),i.y=a.y*q.y,H.mapSize.y=a.y)),H.map===null||pe===!0||Y===!0){const se=this.type!==Oi?{minFilter:En,magFilter:En}:{};H.map!==null&&H.map.dispose(),H.map=new li(i.x,i.y,se),H.map.texture.name=ge.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const K=H.getViewportCount();for(let se=0;se<K;se++){const me=H.getViewport(se);s.set(a.x*me.x,a.y*me.y,a.x*me.z,a.y*me.w),Z.viewport(s),H.updateMatrices(ge,se),r=H.getFrustum(),E(L,U,H.camera,ge,this.type)}H.isPointLightShadow!==!0&&this.type===Oi&&S(H,U),H.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(R,I,G)};function S(P,L){const U=e.update(M);p.defines.VSM_SAMPLES!==P.blurSamples&&(p.defines.VSM_SAMPLES=P.blurSamples,x.defines.VSM_SAMPLES=P.blurSamples,p.needsUpdate=!0,x.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new li(i.x,i.y)),p.uniforms.shadow_pass.value=P.map.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(L,null,U,p,M,null),x.uniforms.shadow_pass.value=P.mapPass.texture,x.uniforms.resolution.value=P.mapSize,x.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(L,null,U,x,M,null)}function w(P,L,U,R){let I=null;const G=U.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(G!==void 0)I=G;else if(I=U.isPointLight===!0?u:o,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const Z=I.uuid,pe=L.uuid;let Y=d[Z];Y===void 0&&(Y={},d[Z]=Y);let J=Y[pe];J===void 0&&(J=I.clone(),Y[pe]=J,L.addEventListener("dispose",N)),I=J}if(I.visible=L.visible,I.wireframe=L.wireframe,R===Oi?I.side=L.shadowSide!==null?L.shadowSide:L.side:I.side=L.shadowSide!==null?L.shadowSide:f[L.side],I.alphaMap=L.alphaMap,I.alphaTest=L.alphaTest,I.map=L.map,I.clipShadows=L.clipShadows,I.clippingPlanes=L.clippingPlanes,I.clipIntersection=L.clipIntersection,I.displacementMap=L.displacementMap,I.displacementScale=L.displacementScale,I.displacementBias=L.displacementBias,I.wireframeLinewidth=L.wireframeLinewidth,I.linewidth=L.linewidth,U.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const Z=n.properties.get(I);Z.light=U}return I}function E(P,L,U,R,I){if(P.visible===!1)return;if(P.layers.test(L.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&I===Oi)&&(!P.frustumCulled||r.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,P.matrixWorld);const Z=e.update(P),pe=P.material;if(Array.isArray(pe)){const Y=Z.groups;for(let J=0,de=Y.length;J<de;J++){const ge=Y[J],H=pe[ge.materialIndex];if(H&&H.visible){const q=w(P,H,R,I);P.onBeforeShadow(n,P,L,U,Z,q,ge),n.renderBufferDirect(U,null,Z,q,P,ge),P.onAfterShadow(n,P,L,U,Z,q,ge)}}}else if(pe.visible){const Y=w(P,pe,R,I);P.onBeforeShadow(n,P,L,U,Z,Y,null),n.renderBufferDirect(U,null,Z,Y,P,null),P.onAfterShadow(n,P,L,U,Z,Y,null)}}const G=P.children;for(let Z=0,pe=G.length;Z<pe;Z++)E(G[Z],L,U,R,I)}function N(P){P.target.removeEventListener("dispose",N);for(const L in d){const U=d[L],R=P.target.uuid;R in U&&(U[R].dispose(),delete U[R])}}}function IU(n,e,t){const r=t.isWebGL2;function i(){let O=!1;const $=new qt;let oe=null;const he=new qt(0,0,0,0);return{setMask:function(_e){oe!==_e&&!O&&(n.colorMask(_e,_e,_e,_e),oe=_e)},setLocked:function(_e){O=_e},setClear:function(_e,Se,Re,Ae,Mt){Mt===!0&&(_e*=Ae,Se*=Ae,Re*=Ae),$.set(_e,Se,Re,Ae),he.equals($)===!1&&(n.clearColor(_e,Se,Re,Ae),he.copy($))},reset:function(){O=!1,oe=null,he.set(-1,0,0,0)}}}function a(){let O=!1,$=null,oe=null,he=null;return{setTest:function(_e){_e?at(n.DEPTH_TEST):Ge(n.DEPTH_TEST)},setMask:function(_e){$!==_e&&!O&&(n.depthMask(_e),$=_e)},setFunc:function(_e){if(oe!==_e){switch(_e){case z2:n.depthFunc(n.NEVER);break;case B2:n.depthFunc(n.ALWAYS);break;case H2:n.depthFunc(n.LESS);break;case rd:n.depthFunc(n.LEQUAL);break;case V2:n.depthFunc(n.EQUAL);break;case G2:n.depthFunc(n.GEQUAL);break;case W2:n.depthFunc(n.GREATER);break;case X2:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}oe=_e}},setLocked:function(_e){O=_e},setClear:function(_e){he!==_e&&(n.clearDepth(_e),he=_e)},reset:function(){O=!1,$=null,oe=null,he=null}}}function s(){let O=!1,$=null,oe=null,he=null,_e=null,Se=null,Re=null,Ae=null,Mt=null;return{setTest:function(Fe){O||(Fe?at(n.STENCIL_TEST):Ge(n.STENCIL_TEST))},setMask:function(Fe){$!==Fe&&!O&&(n.stencilMask(Fe),$=Fe)},setFunc:function(Fe,qe,ct){(oe!==Fe||he!==qe||_e!==ct)&&(n.stencilFunc(Fe,qe,ct),oe=Fe,he=qe,_e=ct)},setOp:function(Fe,qe,ct){(Se!==Fe||Re!==qe||Ae!==ct)&&(n.stencilOp(Fe,qe,ct),Se=Fe,Re=qe,Ae=ct)},setLocked:function(Fe){O=Fe},setClear:function(Fe){Mt!==Fe&&(n.clearStencil(Fe),Mt=Fe)},reset:function(){O=!1,$=null,oe=null,he=null,_e=null,Se=null,Re=null,Ae=null,Mt=null}}}const o=new i,u=new a,d=new s,h=new WeakMap,f=new WeakMap;let p={},x={},y=new WeakMap,M=[],_=null,g=!1,S=null,w=null,E=null,N=null,P=null,L=null,U=null,R=new $e(0,0,0),I=0,G=!1,Z=null,pe=null,Y=null,J=null,de=null;const ge=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,q=0;const K=n.getParameter(n.VERSION);K.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(K)[1]),H=q>=1):K.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),H=q>=2);let se=null,me={};const ie=n.getParameter(n.SCISSOR_BOX),xe=n.getParameter(n.VIEWPORT),ze=new qt().fromArray(ie),De=new qt().fromArray(xe);function Ve(O,$,oe,he){const _e=new Uint8Array(4),Se=n.createTexture();n.bindTexture(O,Se),n.texParameteri(O,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(O,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Re=0;Re<oe;Re++)r&&(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)?n.texImage3D($,0,n.RGBA,1,1,he,0,n.RGBA,n.UNSIGNED_BYTE,_e):n.texImage2D($+Re,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,_e);return Se}const ut={};ut[n.TEXTURE_2D]=Ve(n.TEXTURE_2D,n.TEXTURE_2D,1),ut[n.TEXTURE_CUBE_MAP]=Ve(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ut[n.TEXTURE_2D_ARRAY]=Ve(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ut[n.TEXTURE_3D]=Ve(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),u.setClear(1),d.setClear(0),at(n.DEPTH_TEST),u.setFunc(rd),Ye(!1),F(mx),at(n.CULL_FACE),ke(ua);function at(O){p[O]!==!0&&(n.enable(O),p[O]=!0)}function Ge(O){p[O]!==!1&&(n.disable(O),p[O]=!1)}function ye(O,$){return x[O]!==$?(n.bindFramebuffer(O,$),x[O]=$,r&&(O===n.DRAW_FRAMEBUFFER&&(x[n.FRAMEBUFFER]=$),O===n.FRAMEBUFFER&&(x[n.DRAW_FRAMEBUFFER]=$)),!0):!1}function X(O,$){let oe=M,he=!1;if(O)if(oe=y.get($),oe===void 0&&(oe=[],y.set($,oe)),O.isWebGLMultipleRenderTargets){const _e=O.texture;if(oe.length!==_e.length||oe[0]!==n.COLOR_ATTACHMENT0){for(let Se=0,Re=_e.length;Se<Re;Se++)oe[Se]=n.COLOR_ATTACHMENT0+Se;oe.length=_e.length,he=!0}}else oe[0]!==n.COLOR_ATTACHMENT0&&(oe[0]=n.COLOR_ATTACHMENT0,he=!0);else oe[0]!==n.BACK&&(oe[0]=n.BACK,he=!0);he&&(t.isWebGL2?n.drawBuffers(oe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(oe))}function Ue(O){return _!==O?(n.useProgram(O),_=O,!0):!1}const Me={[ps]:n.FUNC_ADD,[T2]:n.FUNC_SUBTRACT,[E2]:n.FUNC_REVERSE_SUBTRACT};if(r)Me[yx]=n.MIN,Me[bx]=n.MAX;else{const O=e.get("EXT_blend_minmax");O!==null&&(Me[yx]=O.MIN_EXT,Me[bx]=O.MAX_EXT)}const we={[A2]:n.ZERO,[C2]:n.ONE,[R2]:n.SRC_COLOR,[Xp]:n.SRC_ALPHA,[D2]:n.SRC_ALPHA_SATURATE,[I2]:n.DST_COLOR,[N2]:n.DST_ALPHA,[P2]:n.ONE_MINUS_SRC_COLOR,[qp]:n.ONE_MINUS_SRC_ALPHA,[k2]:n.ONE_MINUS_DST_COLOR,[L2]:n.ONE_MINUS_DST_ALPHA,[O2]:n.CONSTANT_COLOR,[U2]:n.ONE_MINUS_CONSTANT_COLOR,[j2]:n.CONSTANT_ALPHA,[F2]:n.ONE_MINUS_CONSTANT_ALPHA};function ke(O,$,oe,he,_e,Se,Re,Ae,Mt,Fe){if(O===ua){g===!0&&(Ge(n.BLEND),g=!1);return}if(g===!1&&(at(n.BLEND),g=!0),O!==M2){if(O!==S||Fe!==G){if((w!==ps||P!==ps)&&(n.blendEquation(n.FUNC_ADD),w=ps,P=ps),Fe)switch(O){case Ao:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gx:n.blendFunc(n.ONE,n.ONE);break;case vx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case xx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}else switch(O){case Ao:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case vx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case xx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}E=null,N=null,L=null,U=null,R.set(0,0,0),I=0,S=O,G=Fe}return}_e=_e||$,Se=Se||oe,Re=Re||he,($!==w||_e!==P)&&(n.blendEquationSeparate(Me[$],Me[_e]),w=$,P=_e),(oe!==E||he!==N||Se!==L||Re!==U)&&(n.blendFuncSeparate(we[oe],we[he],we[Se],we[Re]),E=oe,N=he,L=Se,U=Re),(Ae.equals(R)===!1||Mt!==I)&&(n.blendColor(Ae.r,Ae.g,Ae.b,Mt),R.copy(Ae),I=Mt),S=O,G=!1}function be(O,$){O.side===zi?Ge(n.CULL_FACE):at(n.CULL_FACE);let oe=O.side===Ar;$&&(oe=!oe),Ye(oe),O.blending===Ao&&O.transparent===!1?ke(ua):ke(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),u.setFunc(O.depthFunc),u.setTest(O.depthTest),u.setMask(O.depthWrite),o.setMask(O.colorWrite);const he=O.stencilWrite;d.setTest(he),he&&(d.setMask(O.stencilWriteMask),d.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),d.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),ce(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),O.alphaToCoverage===!0?at(n.SAMPLE_ALPHA_TO_COVERAGE):Ge(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ye(O){Z!==O&&(O?n.frontFace(n.CW):n.frontFace(n.CCW),Z=O)}function F(O){O!==_2?(at(n.CULL_FACE),O!==pe&&(O===mx?n.cullFace(n.BACK):O===w2?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ge(n.CULL_FACE),pe=O}function k(O){O!==Y&&(H&&n.lineWidth(O),Y=O)}function ce(O,$,oe){O?(at(n.POLYGON_OFFSET_FILL),(J!==$||de!==oe)&&(n.polygonOffset($,oe),J=$,de=oe)):Ge(n.POLYGON_OFFSET_FILL)}function Ne(O){O?at(n.SCISSOR_TEST):Ge(n.SCISSOR_TEST)}function Ee(O){O===void 0&&(O=n.TEXTURE0+ge-1),se!==O&&(n.activeTexture(O),se=O)}function Le(O,$,oe){oe===void 0&&(se===null?oe=n.TEXTURE0+ge-1:oe=se);let he=me[oe];he===void 0&&(he={type:void 0,texture:void 0},me[oe]=he),(he.type!==O||he.texture!==$)&&(se!==oe&&(n.activeTexture(oe),se=oe),n.bindTexture(O,$||ut[O]),he.type=O,he.texture=$)}function nt(){const O=me[se];O!==void 0&&O.type!==void 0&&(n.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)}function He(){try{n.compressedTexImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ke(){try{n.compressedTexImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function lt(){try{n.texSubImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function vt(){try{n.texSubImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Pe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ot(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function xt(){try{n.texStorage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function dt(){try{n.texStorage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Oe(){try{n.texImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Qe(){try{n.texImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function yt(O){ze.equals(O)===!1&&(n.scissor(O.x,O.y,O.z,O.w),ze.copy(O))}function C(O){De.equals(O)===!1&&(n.viewport(O.x,O.y,O.z,O.w),De.copy(O))}function D(O,$){let oe=f.get($);oe===void 0&&(oe=new WeakMap,f.set($,oe));let he=oe.get(O);he===void 0&&(he=n.getUniformBlockIndex($,O.name),oe.set(O,he))}function V(O,$){const oe=f.get($).get(O);h.get($)!==oe&&(n.uniformBlockBinding($,oe,O.__bindingPointIndex),h.set($,oe))}function W(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},se=null,me={},x={},y=new WeakMap,M=[],_=null,g=!1,S=null,w=null,E=null,N=null,P=null,L=null,U=null,R=new $e(0,0,0),I=0,G=!1,Z=null,pe=null,Y=null,J=null,de=null,ze.set(0,0,n.canvas.width,n.canvas.height),De.set(0,0,n.canvas.width,n.canvas.height),o.reset(),u.reset(),d.reset()}return{buffers:{color:o,depth:u,stencil:d},enable:at,disable:Ge,bindFramebuffer:ye,drawBuffers:X,useProgram:Ue,setBlending:ke,setMaterial:be,setFlipSided:Ye,setCullFace:F,setLineWidth:k,setPolygonOffset:ce,setScissorTest:Ne,activeTexture:Ee,bindTexture:Le,unbindTexture:nt,compressedTexImage2D:He,compressedTexImage3D:Ke,texImage2D:Oe,texImage3D:Qe,updateUBOMapping:D,uniformBlockBinding:V,texStorage2D:xt,texStorage3D:dt,texSubImage2D:lt,texSubImage3D:vt,compressedTexSubImage2D:Pe,compressedTexSubImage3D:Ot,scissor:yt,viewport:C,reset:W}}function kU(n,e,t,r,i,a,s){const o=i.isWebGL2,u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let f;const p=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(F,k){return x?new OffscreenCanvas(F,k):pd("canvas")}function M(F,k,ce,Ne){let Ee=1;if((F.width>Ne||F.height>Ne)&&(Ee=Ne/Math.max(F.width,F.height)),Ee<1||k===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const Le=k?Kp:Math.floor,nt=Le(Ee*F.width),He=Le(Ee*F.height);f===void 0&&(f=y(nt,He));const Ke=ce?y(nt,He):f;return Ke.width=nt,Ke.height=He,Ke.getContext("2d").drawImage(F,0,0,nt,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+nt+"x"+He+")."),Ke}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function _(F){return Kx(F.width)&&Kx(F.height)}function g(F){return o?!1:F.wrapS!==ln||F.wrapT!==ln||F.minFilter!==En&&F.minFilter!==Wt}function S(F,k){return F.generateMipmaps&&k&&F.minFilter!==En&&F.minFilter!==Wt}function w(F){n.generateMipmap(F)}function E(F,k,ce,Ne,Ee=!1){if(o===!1)return k;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Le=k;if(k===n.RED&&(ce===n.FLOAT&&(Le=n.R32F),ce===n.HALF_FLOAT&&(Le=n.R16F),ce===n.UNSIGNED_BYTE&&(Le=n.R8)),k===n.RED_INTEGER&&(ce===n.UNSIGNED_BYTE&&(Le=n.R8UI),ce===n.UNSIGNED_SHORT&&(Le=n.R16UI),ce===n.UNSIGNED_INT&&(Le=n.R32UI),ce===n.BYTE&&(Le=n.R8I),ce===n.SHORT&&(Le=n.R16I),ce===n.INT&&(Le=n.R32I)),k===n.RG&&(ce===n.FLOAT&&(Le=n.RG32F),ce===n.HALF_FLOAT&&(Le=n.RG16F),ce===n.UNSIGNED_BYTE&&(Le=n.RG8)),k===n.RGBA){const nt=Ee?ud:Xt.getTransfer(Ne);ce===n.FLOAT&&(Le=n.RGBA32F),ce===n.HALF_FLOAT&&(Le=n.RGBA16F),ce===n.UNSIGNED_BYTE&&(Le=nt===Jt?n.SRGB8_ALPHA8:n.RGBA8),ce===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),ce===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function N(F,k,ce){return S(F,ce)===!0||F.isFramebufferTexture&&F.minFilter!==En&&F.minFilter!==Wt?Math.log2(Math.max(k.width,k.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?k.mipmaps.length:1}function P(F){return F===En||F===Yp||F===Lu?n.NEAREST:n.LINEAR}function L(F){const k=F.target;k.removeEventListener("dispose",L),R(k),k.isVideoTexture&&h.delete(k)}function U(F){const k=F.target;k.removeEventListener("dispose",U),G(k)}function R(F){const k=r.get(F);if(k.__webglInit===void 0)return;const ce=F.source,Ne=p.get(ce);if(Ne){const Ee=Ne[k.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&I(F),Object.keys(Ne).length===0&&p.delete(ce)}r.remove(F)}function I(F){const k=r.get(F);n.deleteTexture(k.__webglTexture);const ce=F.source,Ne=p.get(ce);delete Ne[k.__cacheKey],s.memory.textures--}function G(F){const k=F.texture,ce=r.get(F),Ne=r.get(k);if(Ne.__webglTexture!==void 0&&(n.deleteTexture(Ne.__webglTexture),s.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(ce.__webglFramebuffer[Ee]))for(let Le=0;Le<ce.__webglFramebuffer[Ee].length;Le++)n.deleteFramebuffer(ce.__webglFramebuffer[Ee][Le]);else n.deleteFramebuffer(ce.__webglFramebuffer[Ee]);ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer[Ee])}else{if(Array.isArray(ce.__webglFramebuffer))for(let Ee=0;Ee<ce.__webglFramebuffer.length;Ee++)n.deleteFramebuffer(ce.__webglFramebuffer[Ee]);else n.deleteFramebuffer(ce.__webglFramebuffer);if(ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let Ee=0;Ee<ce.__webglColorRenderbuffer.length;Ee++)ce.__webglColorRenderbuffer[Ee]&&n.deleteRenderbuffer(ce.__webglColorRenderbuffer[Ee]);ce.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Ee=0,Le=k.length;Ee<Le;Ee++){const nt=r.get(k[Ee]);nt.__webglTexture&&(n.deleteTexture(nt.__webglTexture),s.memory.textures--),r.remove(k[Ee])}r.remove(k),r.remove(F)}let Z=0;function pe(){Z=0}function Y(){const F=Z;return F>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+i.maxTextures),Z+=1,F}function J(F){const k=[];return k.push(F.wrapS),k.push(F.wrapT),k.push(F.wrapR||0),k.push(F.magFilter),k.push(F.minFilter),k.push(F.anisotropy),k.push(F.internalFormat),k.push(F.format),k.push(F.type),k.push(F.generateMipmaps),k.push(F.premultiplyAlpha),k.push(F.flipY),k.push(F.unpackAlignment),k.push(F.colorSpace),k.join()}function de(F,k){const ce=r.get(F);if(F.isVideoTexture&&be(F),F.isRenderTargetTexture===!1&&F.version>0&&ce.__version!==F.version){const Ne=F.image;if(Ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ze(ce,F,k);return}}t.bindTexture(n.TEXTURE_2D,ce.__webglTexture,n.TEXTURE0+k)}function ge(F,k){const ce=r.get(F);if(F.version>0&&ce.__version!==F.version){ze(ce,F,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ce.__webglTexture,n.TEXTURE0+k)}function H(F,k){const ce=r.get(F);if(F.version>0&&ce.__version!==F.version){ze(ce,F,k);return}t.bindTexture(n.TEXTURE_3D,ce.__webglTexture,n.TEXTURE0+k)}function q(F,k){const ce=r.get(F);if(F.version>0&&ce.__version!==F.version){De(ce,F,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+k)}const K={[ad]:n.REPEAT,[ln]:n.CLAMP_TO_EDGE,[sd]:n.MIRRORED_REPEAT},se={[En]:n.NEAREST,[Yp]:n.NEAREST_MIPMAP_NEAREST,[Lu]:n.NEAREST_MIPMAP_LINEAR,[Wt]:n.LINEAR,[ib]:n.LINEAR_MIPMAP_NEAREST,[Ds]:n.LINEAR_MIPMAP_LINEAR},me={[h3]:n.NEVER,[x3]:n.ALWAYS,[f3]:n.LESS,[gb]:n.LEQUAL,[p3]:n.EQUAL,[v3]:n.GEQUAL,[m3]:n.GREATER,[g3]:n.NOTEQUAL};function ie(F,k,ce){if(ce?(n.texParameteri(F,n.TEXTURE_WRAP_S,K[k.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,K[k.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,K[k.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,se[k.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,se[k.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(k.wrapS!==ln||k.wrapT!==ln)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,P(k.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,P(k.minFilter)),k.minFilter!==En&&k.minFilter!==Wt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,me[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ne=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===En||k.minFilter!==Lu&&k.minFilter!==Ds||k.type===Un&&e.has("OES_texture_float_linear")===!1||o===!1&&k.type===Qn&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||r.get(k).__currentAnisotropy)&&(n.texParameterf(F,Ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy)}}function xe(F,k){let ce=!1;F.__webglInit===void 0&&(F.__webglInit=!0,k.addEventListener("dispose",L));const Ne=k.source;let Ee=p.get(Ne);Ee===void 0&&(Ee={},p.set(Ne,Ee));const Le=J(k);if(Le!==F.__cacheKey){Ee[Le]===void 0&&(Ee[Le]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,ce=!0),Ee[Le].usedTimes++;const nt=Ee[F.__cacheKey];nt!==void 0&&(Ee[F.__cacheKey].usedTimes--,nt.usedTimes===0&&I(k)),F.__cacheKey=Le,F.__webglTexture=Ee[Le].texture}return ce}function ze(F,k,ce){let Ne=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Ne=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Ne=n.TEXTURE_3D);const Ee=xe(F,k),Le=k.source;t.bindTexture(Ne,F.__webglTexture,n.TEXTURE0+ce);const nt=r.get(Le);if(Le.version!==nt.__version||Ee===!0){t.activeTexture(n.TEXTURE0+ce);const He=Xt.getPrimaries(Xt.workingColorSpace),Ke=k.colorSpace===Jr?null:Xt.getPrimaries(k.colorSpace),lt=k.colorSpace===Jr||He===Ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const vt=g(k)&&_(k.image)===!1;let Pe=M(k.image,vt,!1,i.maxTextureSize);Pe=Ye(k,Pe);const Ot=_(Pe)||o,xt=a.convert(k.format,k.colorSpace);let dt=a.convert(k.type),Oe=E(k.internalFormat,xt,dt,k.colorSpace,k.isVideoTexture);ie(Ne,k,Ot);let Qe;const yt=k.mipmaps,C=o&&k.isVideoTexture!==!0&&Oe!==fb,D=nt.__version===void 0||Ee===!0,V=N(k,Pe,Ot);if(k.isDepthTexture)Oe=n.DEPTH_COMPONENT,o?k.type===Un?Oe=n.DEPTH_COMPONENT32F:k.type===oa?Oe=n.DEPTH_COMPONENT24:k.type===As?Oe=n.DEPTH24_STENCIL8:Oe=n.DEPTH_COMPONENT16:k.type===Un&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===Cs&&Oe===n.DEPTH_COMPONENT&&k.type!==bm&&k.type!==oa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=oa,dt=a.convert(k.type)),k.format===Uo&&Oe===n.DEPTH_COMPONENT&&(Oe=n.DEPTH_STENCIL,k.type!==As&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=As,dt=a.convert(k.type))),D&&(C?t.texStorage2D(n.TEXTURE_2D,1,Oe,Pe.width,Pe.height):t.texImage2D(n.TEXTURE_2D,0,Oe,Pe.width,Pe.height,0,xt,dt,null));else if(k.isDataTexture)if(yt.length>0&&Ot){C&&D&&t.texStorage2D(n.TEXTURE_2D,V,Oe,yt[0].width,yt[0].height);for(let W=0,O=yt.length;W<O;W++)Qe=yt[W],C?t.texSubImage2D(n.TEXTURE_2D,W,0,0,Qe.width,Qe.height,xt,dt,Qe.data):t.texImage2D(n.TEXTURE_2D,W,Oe,Qe.width,Qe.height,0,xt,dt,Qe.data);k.generateMipmaps=!1}else C?(D&&t.texStorage2D(n.TEXTURE_2D,V,Oe,Pe.width,Pe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Pe.width,Pe.height,xt,dt,Pe.data)):t.texImage2D(n.TEXTURE_2D,0,Oe,Pe.width,Pe.height,0,xt,dt,Pe.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){C&&D&&t.texStorage3D(n.TEXTURE_2D_ARRAY,V,Oe,yt[0].width,yt[0].height,Pe.depth);for(let W=0,O=yt.length;W<O;W++)Qe=yt[W],k.format!==On?xt!==null?C?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,W,0,0,0,Qe.width,Qe.height,Pe.depth,xt,Qe.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,W,Oe,Qe.width,Qe.height,Pe.depth,0,Qe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?t.texSubImage3D(n.TEXTURE_2D_ARRAY,W,0,0,0,Qe.width,Qe.height,Pe.depth,xt,dt,Qe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,W,Oe,Qe.width,Qe.height,Pe.depth,0,xt,dt,Qe.data)}else{C&&D&&t.texStorage2D(n.TEXTURE_2D,V,Oe,yt[0].width,yt[0].height);for(let W=0,O=yt.length;W<O;W++)Qe=yt[W],k.format!==On?xt!==null?C?t.compressedTexSubImage2D(n.TEXTURE_2D,W,0,0,Qe.width,Qe.height,xt,Qe.data):t.compressedTexImage2D(n.TEXTURE_2D,W,Oe,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?t.texSubImage2D(n.TEXTURE_2D,W,0,0,Qe.width,Qe.height,xt,dt,Qe.data):t.texImage2D(n.TEXTURE_2D,W,Oe,Qe.width,Qe.height,0,xt,dt,Qe.data)}else if(k.isDataArrayTexture)C?(D&&t.texStorage3D(n.TEXTURE_2D_ARRAY,V,Oe,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Pe.width,Pe.height,Pe.depth,xt,dt,Pe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Oe,Pe.width,Pe.height,Pe.depth,0,xt,dt,Pe.data);else if(k.isData3DTexture)C?(D&&t.texStorage3D(n.TEXTURE_3D,V,Oe,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Pe.width,Pe.height,Pe.depth,xt,dt,Pe.data)):t.texImage3D(n.TEXTURE_3D,0,Oe,Pe.width,Pe.height,Pe.depth,0,xt,dt,Pe.data);else if(k.isFramebufferTexture){if(D)if(C)t.texStorage2D(n.TEXTURE_2D,V,Oe,Pe.width,Pe.height);else{let W=Pe.width,O=Pe.height;for(let $=0;$<V;$++)t.texImage2D(n.TEXTURE_2D,$,Oe,W,O,0,xt,dt,null),W>>=1,O>>=1}}else if(yt.length>0&&Ot){C&&D&&t.texStorage2D(n.TEXTURE_2D,V,Oe,yt[0].width,yt[0].height);for(let W=0,O=yt.length;W<O;W++)Qe=yt[W],C?t.texSubImage2D(n.TEXTURE_2D,W,0,0,xt,dt,Qe):t.texImage2D(n.TEXTURE_2D,W,Oe,xt,dt,Qe);k.generateMipmaps=!1}else C?(D&&t.texStorage2D(n.TEXTURE_2D,V,Oe,Pe.width,Pe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,xt,dt,Pe)):t.texImage2D(n.TEXTURE_2D,0,Oe,xt,dt,Pe);S(k,Ot)&&w(Ne),nt.__version=Le.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function De(F,k,ce){if(k.image.length!==6)return;const Ne=xe(F,k),Ee=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+ce);const Le=r.get(Ee);if(Ee.version!==Le.__version||Ne===!0){t.activeTexture(n.TEXTURE0+ce);const nt=Xt.getPrimaries(Xt.workingColorSpace),He=k.colorSpace===Jr?null:Xt.getPrimaries(k.colorSpace),Ke=k.colorSpace===Jr||nt===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);const lt=k.isCompressedTexture||k.image[0].isCompressedTexture,vt=k.image[0]&&k.image[0].isDataTexture,Pe=[];for(let W=0;W<6;W++)!lt&&!vt?Pe[W]=M(k.image[W],!1,!0,i.maxCubemapSize):Pe[W]=vt?k.image[W].image:k.image[W],Pe[W]=Ye(k,Pe[W]);const Ot=Pe[0],xt=_(Ot)||o,dt=a.convert(k.format,k.colorSpace),Oe=a.convert(k.type),Qe=E(k.internalFormat,dt,Oe,k.colorSpace),yt=o&&k.isVideoTexture!==!0,C=Le.__version===void 0||Ne===!0;let D=N(k,Ot,xt);ie(n.TEXTURE_CUBE_MAP,k,xt);let V;if(lt){yt&&C&&t.texStorage2D(n.TEXTURE_CUBE_MAP,D,Qe,Ot.width,Ot.height);for(let W=0;W<6;W++){V=Pe[W].mipmaps;for(let O=0;O<V.length;O++){const $=V[O];k.format!==On?dt!==null?yt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O,0,0,$.width,$.height,dt,$.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O,Qe,$.width,$.height,0,$.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O,0,0,$.width,$.height,dt,Oe,$.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O,Qe,$.width,$.height,0,dt,Oe,$.data)}}}else{V=k.mipmaps,yt&&C&&(V.length>0&&D++,t.texStorage2D(n.TEXTURE_CUBE_MAP,D,Qe,Pe[0].width,Pe[0].height));for(let W=0;W<6;W++)if(vt){yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,0,0,0,Pe[W].width,Pe[W].height,dt,Oe,Pe[W].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,0,Qe,Pe[W].width,Pe[W].height,0,dt,Oe,Pe[W].data);for(let O=0;O<V.length;O++){const $=V[O].image[W].image;yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O+1,0,0,$.width,$.height,dt,Oe,$.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O+1,Qe,$.width,$.height,0,dt,Oe,$.data)}}else{yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,0,0,0,dt,Oe,Pe[W]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,0,Qe,dt,Oe,Pe[W]);for(let O=0;O<V.length;O++){const $=V[O];yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O+1,0,0,dt,Oe,$.image[W]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+W,O+1,Qe,dt,Oe,$.image[W])}}}S(k,xt)&&w(n.TEXTURE_CUBE_MAP),Le.__version=Ee.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Ve(F,k,ce,Ne,Ee,Le){const nt=a.convert(ce.format,ce.colorSpace),He=a.convert(ce.type),Ke=E(ce.internalFormat,nt,He,ce.colorSpace);if(!r.get(k).__hasExternalTextures){const lt=Math.max(1,k.width>>Le),vt=Math.max(1,k.height>>Le);Ee===n.TEXTURE_3D||Ee===n.TEXTURE_2D_ARRAY?t.texImage3D(Ee,Le,Ke,lt,vt,k.depth,0,nt,He,null):t.texImage2D(Ee,Le,Ke,lt,vt,0,nt,He,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),ke(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ne,Ee,r.get(ce).__webglTexture,0,we(k)):(Ee===n.TEXTURE_2D||Ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ne,Ee,r.get(ce).__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ut(F,k,ce){if(n.bindRenderbuffer(n.RENDERBUFFER,F),k.depthBuffer&&!k.stencilBuffer){let Ne=o===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ce||ke(k)){const Ee=k.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===Un?Ne=n.DEPTH_COMPONENT32F:Ee.type===oa&&(Ne=n.DEPTH_COMPONENT24));const Le=we(k);ke(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Le,Ne,k.width,k.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,Ne,k.width,k.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ne,k.width,k.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(k.depthBuffer&&k.stencilBuffer){const Ne=we(k);ce&&ke(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,n.DEPTH24_STENCIL8,k.width,k.height):ke(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,n.DEPTH24_STENCIL8,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const Ne=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let Ee=0;Ee<Ne.length;Ee++){const Le=Ne[Ee],nt=a.convert(Le.format,Le.colorSpace),He=a.convert(Le.type),Ke=E(Le.internalFormat,nt,He,Le.colorSpace),lt=we(k);ce&&ke(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,lt,Ke,k.width,k.height):ke(k)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,lt,Ke,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Ke,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function at(F,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),de(k.depthTexture,0);const ce=r.get(k.depthTexture).__webglTexture,Ne=we(k);if(k.depthTexture.format===Cs)ke(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ce,0,Ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ce,0);else if(k.depthTexture.format===Uo)ke(k)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ce,0,Ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ce,0);else throw new Error("Unknown depthTexture format")}function Ge(F){const k=r.get(F),ce=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!k.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");at(k.__webglFramebuffer,F)}else if(ce){k.__webglDepthbuffer=[];for(let Ne=0;Ne<6;Ne++)t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[Ne]),k.__webglDepthbuffer[Ne]=n.createRenderbuffer(),ut(k.__webglDepthbuffer[Ne],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),ut(k.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ye(F,k,ce){const Ne=r.get(F);k!==void 0&&Ve(Ne.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ce!==void 0&&Ge(F)}function X(F){const k=F.texture,ce=r.get(F),Ne=r.get(k);F.addEventListener("dispose",U),F.isWebGLMultipleRenderTargets!==!0&&(Ne.__webglTexture===void 0&&(Ne.__webglTexture=n.createTexture()),Ne.__version=k.version,s.memory.textures++);const Ee=F.isWebGLCubeRenderTarget===!0,Le=F.isWebGLMultipleRenderTargets===!0,nt=_(F)||o;if(Ee){ce.__webglFramebuffer=[];for(let He=0;He<6;He++)if(o&&k.mipmaps&&k.mipmaps.length>0){ce.__webglFramebuffer[He]=[];for(let Ke=0;Ke<k.mipmaps.length;Ke++)ce.__webglFramebuffer[He][Ke]=n.createFramebuffer()}else ce.__webglFramebuffer[He]=n.createFramebuffer()}else{if(o&&k.mipmaps&&k.mipmaps.length>0){ce.__webglFramebuffer=[];for(let He=0;He<k.mipmaps.length;He++)ce.__webglFramebuffer[He]=n.createFramebuffer()}else ce.__webglFramebuffer=n.createFramebuffer();if(Le)if(i.drawBuffers){const He=F.texture;for(let Ke=0,lt=He.length;Ke<lt;Ke++){const vt=r.get(He[Ke]);vt.__webglTexture===void 0&&(vt.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&F.samples>0&&ke(F)===!1){const He=Le?k:[k];ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let Ke=0;Ke<He.length;Ke++){const lt=He[Ke];ce.__webglColorRenderbuffer[Ke]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ce.__webglColorRenderbuffer[Ke]);const vt=a.convert(lt.format,lt.colorSpace),Pe=a.convert(lt.type),Ot=E(lt.internalFormat,vt,Pe,lt.colorSpace,F.isXRRenderTarget===!0),xt=we(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,Ot,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,ce.__webglColorRenderbuffer[Ke])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),ut(ce.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ee){t.bindTexture(n.TEXTURE_CUBE_MAP,Ne.__webglTexture),ie(n.TEXTURE_CUBE_MAP,k,nt);for(let He=0;He<6;He++)if(o&&k.mipmaps&&k.mipmaps.length>0)for(let Ke=0;Ke<k.mipmaps.length;Ke++)Ve(ce.__webglFramebuffer[He][Ke],F,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,Ke);else Ve(ce.__webglFramebuffer[He],F,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);S(k,nt)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Le){const He=F.texture;for(let Ke=0,lt=He.length;Ke<lt;Ke++){const vt=He[Ke],Pe=r.get(vt);t.bindTexture(n.TEXTURE_2D,Pe.__webglTexture),ie(n.TEXTURE_2D,vt,nt),Ve(ce.__webglFramebuffer,F,vt,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,0),S(vt,nt)&&w(n.TEXTURE_2D)}t.unbindTexture()}else{let He=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(o?He=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(He,Ne.__webglTexture),ie(He,k,nt),o&&k.mipmaps&&k.mipmaps.length>0)for(let Ke=0;Ke<k.mipmaps.length;Ke++)Ve(ce.__webglFramebuffer[Ke],F,k,n.COLOR_ATTACHMENT0,He,Ke);else Ve(ce.__webglFramebuffer,F,k,n.COLOR_ATTACHMENT0,He,0);S(k,nt)&&w(He),t.unbindTexture()}F.depthBuffer&&Ge(F)}function Ue(F){const k=_(F)||o,ce=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Ne=0,Ee=ce.length;Ne<Ee;Ne++){const Le=ce[Ne];if(S(Le,k)){const nt=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,He=r.get(Le).__webglTexture;t.bindTexture(nt,He),w(nt),t.unbindTexture()}}}function Me(F){if(o&&F.samples>0&&ke(F)===!1){const k=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],ce=F.width,Ne=F.height;let Ee=n.COLOR_BUFFER_BIT;const Le=[],nt=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=r.get(F),Ke=F.isWebGLMultipleRenderTargets===!0;if(Ke)for(let lt=0;lt<k.length;lt++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let lt=0;lt<k.length;lt++){Le.push(n.COLOR_ATTACHMENT0+lt),F.depthBuffer&&Le.push(nt);const vt=He.__ignoreDepthValues!==void 0?He.__ignoreDepthValues:!1;if(vt===!1&&(F.depthBuffer&&(Ee|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(Ee|=n.STENCIL_BUFFER_BIT)),Ke&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[lt]),vt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[nt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[nt])),Ke){const Pe=r.get(k[lt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Pe,0)}n.blitFramebuffer(0,0,ce,Ne,0,0,ce,Ne,Ee,n.NEAREST),d&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Le)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ke)for(let lt=0;lt<k.length;lt++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,He.__webglColorRenderbuffer[lt]);const vt=r.get(k[lt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,vt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}}function we(F){return Math.min(i.maxSamples,F.samples)}function ke(F){const k=r.get(F);return o&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function be(F){const k=s.render.frame;h.get(F)!==k&&(h.set(F,k),F.update())}function Ye(F,k){const ce=F.colorSpace,Ne=F.format,Ee=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===$p||ce!==oi&&ce!==Jr&&(Xt.getTransfer(ce)===Jt?o===!1?e.has("EXT_sRGB")===!0&&Ne===On?(F.format=$p,F.minFilter=Wt,F.generateMipmaps=!1):k=xb.sRGBToLinear(k):(Ne!==On||Ee!==ri)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),k}this.allocateTextureUnit=Y,this.resetTextureUnits=pe,this.setTexture2D=de,this.setTexture2DArray=ge,this.setTexture3D=H,this.setTextureCube=q,this.rebindTextures=ye,this.setupRenderTarget=X,this.updateRenderTargetMipmap=Ue,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=Ge,this.setupFrameBufferTexture=Ve,this.useMultisampledRTT=ke}function I3(n,e,t){const r=t.isWebGL2;function i(a,s=Jr){let o;const u=Xt.getTransfer(s);if(a===ri)return n.UNSIGNED_BYTE;if(a===ob)return n.UNSIGNED_SHORT_4_4_4_4;if(a===lb)return n.UNSIGNED_SHORT_5_5_5_1;if(a===ab)return n.BYTE;if(a===sb)return n.SHORT;if(a===bm)return n.UNSIGNED_SHORT;if(a===_m)return n.INT;if(a===oa)return n.UNSIGNED_INT;if(a===Un)return n.FLOAT;if(a===Qn)return r?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===t3)return n.ALPHA;if(a===On)return n.RGBA;if(a===n3)return n.LUMINANCE;if(a===r3)return n.LUMINANCE_ALPHA;if(a===Cs)return n.DEPTH_COMPONENT;if(a===Uo)return n.DEPTH_STENCIL;if(a===$p)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===cb)return n.RED;if(a===ub)return n.RED_INTEGER;if(a===i3)return n.RG;if(a===db)return n.RG_INTEGER;if(a===hb)return n.RGBA_INTEGER;if(a===hp||a===fp||a===pp||a===mp)if(u===Jt)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===hp)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===fp)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===pp)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===mp)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===hp)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===fp)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===pp)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===mp)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===Sx||a===Mx||a===Tx||a===Ex)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===Sx)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===Mx)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===Tx)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===Ex)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===fb)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===Ax||a===Cx)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(a===Ax)return u===Jt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===Cx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===Rx||a===Px||a===Nx||a===Lx||a===Ix||a===kx||a===Dx||a===Ox||a===Ux||a===jx||a===Fx||a===zx||a===Bx||a===Hx)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(a===Rx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===Px)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===Nx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===Lx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===Ix)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===kx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===Dx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===Ox)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===Ux)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===jx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===Fx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===zx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===Bx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===Hx)return u===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===gp||a===Vx||a===Gx)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(a===gp)return u===Jt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===Vx)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===Gx)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===a3||a===Wx||a===Xx||a===qx)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(a===gp)return o.COMPRESSED_RED_RGTC1_EXT;if(a===Wx)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===Xx)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===qx)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===As?r?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[a]!==void 0?n[a]:null}return{convert:i}}class k3 extends Zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ql extends Bt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DU={type:"move"};class Y0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ql,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ql,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ql,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,u=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){s=!0;for(const M of e.hand.values()){const _=t.getJointPose(M,r),g=this._getHandJoint(d,M);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const h=d.joints["index-finger-tip"],f=d.joints["thumb-tip"],p=h.position.distanceTo(f.position),x=.02,y=.005;d.inputState.pinching&&p>x+y?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&p<=x-y&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(DU)))}return o!==null&&(o.visible=i!==null),u!==null&&(u.visible=a!==null),d!==null&&(d.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new ql;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class OU extends Ba{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",u=1,d=null,h=null,f=null,p=null,x=null,y=null;const M=t.getContextAttributes();let _=null,g=null;const S=[],w=[],E=new Te;let N=null;const P=new Zn;P.layers.enable(1),P.viewport=new qt;const L=new Zn;L.layers.enable(2),L.viewport=new qt;const U=[P,L],R=new k3;R.layers.enable(1),R.layers.enable(2);let I=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let xe=S[ie];return xe===void 0&&(xe=new Y0,S[ie]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(ie){let xe=S[ie];return xe===void 0&&(xe=new Y0,S[ie]=xe),xe.getGripSpace()},this.getHand=function(ie){let xe=S[ie];return xe===void 0&&(xe=new Y0,S[ie]=xe),xe.getHandSpace()};function Z(ie){const xe=w.indexOf(ie.inputSource);if(xe===-1)return;const ze=S[xe];ze!==void 0&&(ze.update(ie.inputSource,ie.frame,d||s),ze.dispatchEvent({type:ie.type,data:ie.inputSource}))}function pe(){i.removeEventListener("select",Z),i.removeEventListener("selectstart",Z),i.removeEventListener("selectend",Z),i.removeEventListener("squeeze",Z),i.removeEventListener("squeezestart",Z),i.removeEventListener("squeezeend",Z),i.removeEventListener("end",pe),i.removeEventListener("inputsourceschange",Y);for(let ie=0;ie<S.length;ie++){const xe=w[ie];xe!==null&&(w[ie]=null,S[ie].disconnect(xe))}I=null,G=null,e.setRenderTarget(_),x=null,p=null,f=null,i=null,g=null,me.stop(),r.isPresenting=!1,e.setPixelRatio(N),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){a=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){o=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(ie){d=ie},this.getBaseLayer=function(){return p!==null?p:x},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",Z),i.addEventListener("selectstart",Z),i.addEventListener("selectend",Z),i.addEventListener("squeeze",Z),i.addEventListener("squeezestart",Z),i.addEventListener("squeezeend",Z),i.addEventListener("end",pe),i.addEventListener("inputsourceschange",Y),M.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(E),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const xe={antialias:i.renderState.layers===void 0?M.antialias:!0,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:a};x=new XRWebGLLayer(i,t,xe),i.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),g=new li(x.framebufferWidth,x.framebufferHeight,{format:On,type:ri,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil})}else{let xe=null,ze=null,De=null;M.depth&&(De=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=M.stencil?Uo:Cs,ze=M.stencil?As:oa);const Ve={colorFormat:t.RGBA8,depthFormat:De,scaleFactor:a};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(Ve),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),g=new li(p.textureWidth,p.textureHeight,{format:On,type:ri,depthTexture:new Mb(p.textureWidth,p.textureHeight,ze,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0});const ut=e.properties.get(g);ut.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(u),d=null,s=await i.requestReferenceSpace(o),me.setContext(i),me.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function Y(ie){for(let xe=0;xe<ie.removed.length;xe++){const ze=ie.removed[xe],De=w.indexOf(ze);De>=0&&(w[De]=null,S[De].disconnect(ze))}for(let xe=0;xe<ie.added.length;xe++){const ze=ie.added[xe];let De=w.indexOf(ze);if(De===-1){for(let ut=0;ut<S.length;ut++)if(ut>=w.length){w.push(ze),De=ut;break}else if(w[ut]===null){w[ut]=ze,De=ut;break}if(De===-1)break}const Ve=S[De];Ve&&Ve.connect(ze)}}const J=new z,de=new z;function ge(ie,xe,ze){J.setFromMatrixPosition(xe.matrixWorld),de.setFromMatrixPosition(ze.matrixWorld);const De=J.distanceTo(de),Ve=xe.projectionMatrix.elements,ut=ze.projectionMatrix.elements,at=Ve[14]/(Ve[10]-1),Ge=Ve[14]/(Ve[10]+1),ye=(Ve[9]+1)/Ve[5],X=(Ve[9]-1)/Ve[5],Ue=(Ve[8]-1)/Ve[0],Me=(ut[8]+1)/ut[0],we=at*Ue,ke=at*Me,be=De/(-Ue+Me),Ye=be*-Ue;xe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(Ye),ie.translateZ(be),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert();const F=at+be,k=Ge+be,ce=we-Ye,Ne=ke+(De-Ye),Ee=ye*Ge/k*F,Le=X*Ge/k*F;ie.projectionMatrix.makePerspective(ce,Ne,Ee,Le,F,k),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}function H(ie,xe){xe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(xe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;R.near=L.near=P.near=ie.near,R.far=L.far=P.far=ie.far,(I!==R.near||G!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),I=R.near,G=R.far);const xe=ie.parent,ze=R.cameras;H(R,xe);for(let De=0;De<ze.length;De++)H(ze[De],xe);ze.length===2?ge(R,P,L):R.projectionMatrix.copy(P.projectionMatrix),q(ie,R,xe)};function q(ie,xe,ze){ze===null?ie.matrix.copy(xe.matrixWorld):(ie.matrix.copy(ze.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(xe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(xe.projectionMatrix),ie.projectionMatrixInverse.copy(xe.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=pc*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&x===null))return u},this.setFoveation=function(ie){u=ie,p!==null&&(p.fixedFoveation=ie),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ie)};let K=null;function se(ie,xe){if(h=xe.getViewerPose(d||s),y=xe,h!==null){const ze=h.views;x!==null&&(e.setRenderTargetFramebuffer(g,x.framebuffer),e.setRenderTarget(g));let De=!1;ze.length!==R.cameras.length&&(R.cameras.length=0,De=!0);for(let Ve=0;Ve<ze.length;Ve++){const ut=ze[Ve];let at=null;if(x!==null)at=x.getViewport(ut);else{const ye=f.getViewSubImage(p,ut);at=ye.viewport,Ve===0&&(e.setRenderTargetTextures(g,ye.colorTexture,p.ignoreDepthValues?void 0:ye.depthStencilTexture),e.setRenderTarget(g))}let Ge=U[Ve];Ge===void 0&&(Ge=new Zn,Ge.layers.enable(Ve),Ge.viewport=new qt,U[Ve]=Ge),Ge.matrix.fromArray(ut.transform.matrix),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.projectionMatrix.fromArray(ut.projectionMatrix),Ge.projectionMatrixInverse.copy(Ge.projectionMatrix).invert(),Ge.viewport.set(at.x,at.y,at.width,at.height),Ve===0&&(R.matrix.copy(Ge.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),De===!0&&R.cameras.push(Ge)}}for(let ze=0;ze<S.length;ze++){const De=w[ze],Ve=S[ze];De!==null&&Ve!==void 0&&Ve.update(De,xe,d||s)}K&&K(ie,xe),xe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:xe}),y=null}const me=new A3;me.setAnimationLoop(se),this.setAnimationLoop=function(ie){K=ie},this.dispose=function(){}}}function UU(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,M3(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,S,w,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(_,g):g.isMeshToonMaterial?(a(_,g),f(_,g)):g.isMeshPhongMaterial?(a(_,g),h(_,g)):g.isMeshStandardMaterial?(a(_,g),p(_,g),g.isMeshPhysicalMaterial&&x(_,g,E)):g.isMeshMatcapMaterial?(a(_,g),y(_,g)):g.isMeshDepthMaterial?a(_,g):g.isMeshDistanceMaterial?(a(_,g),M(_,g)):g.isMeshNormalMaterial?a(_,g):g.isLineBasicMaterial?(s(_,g),g.isLineDashedMaterial&&o(_,g)):g.isPointsMaterial?u(_,g,S,w):g.isSpriteMaterial?d(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Ar&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Ar&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const S=e.get(g).envMap;if(S&&(_.envMap.value=S,_.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const w=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*w,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function s(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function o(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function u(_,g,S,w){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*S,_.scale.value=w*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function d(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function h(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function f(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function x(_,g,S){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ar&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,g){g.matcap&&(_.matcap.value=g.matcap)}function M(_,g){const S=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function jU(n,e,t,r){let i={},a={},s=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(S,w){const E=w.program;r.uniformBlockBinding(S,E)}function d(S,w){let E=i[S.id];E===void 0&&(y(S),E=h(S),i[S.id]=E,S.addEventListener("dispose",_));const N=w.program;r.updateUBOMapping(S,N);const P=e.render.frame;a[S.id]!==P&&(p(S),a[S.id]=P)}function h(S){const w=f();S.__bindingPointIndex=w;const E=n.createBuffer(),N=S.__size,P=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,N,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function f(){for(let S=0;S<o;S++)if(s.indexOf(S)===-1)return s.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const w=i[S.id],E=S.uniforms,N=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let P=0,L=E.length;P<L;P++){const U=Array.isArray(E[P])?E[P]:[E[P]];for(let R=0,I=U.length;R<I;R++){const G=U[R];if(x(G,P,R,N)===!0){const Z=G.__offset,pe=Array.isArray(G.value)?G.value:[G.value];let Y=0;for(let J=0;J<pe.length;J++){const de=pe[J],ge=M(de);typeof de=="number"||typeof de=="boolean"?(G.__data[0]=de,n.bufferSubData(n.UNIFORM_BUFFER,Z+Y,G.__data)):de.isMatrix3?(G.__data[0]=de.elements[0],G.__data[1]=de.elements[1],G.__data[2]=de.elements[2],G.__data[3]=0,G.__data[4]=de.elements[3],G.__data[5]=de.elements[4],G.__data[6]=de.elements[5],G.__data[7]=0,G.__data[8]=de.elements[6],G.__data[9]=de.elements[7],G.__data[10]=de.elements[8],G.__data[11]=0):(de.toArray(G.__data,Y),Y+=ge.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,G.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(S,w,E,N){const P=S.value,L=w+"_"+E;if(N[L]===void 0)return typeof P=="number"||typeof P=="boolean"?N[L]=P:N[L]=P.clone(),!0;{const U=N[L];if(typeof P=="number"||typeof P=="boolean"){if(U!==P)return N[L]=P,!0}else if(U.equals(P)===!1)return U.copy(P),!0}return!1}function y(S){const w=S.uniforms;let E=0;const N=16;for(let L=0,U=w.length;L<U;L++){const R=Array.isArray(w[L])?w[L]:[w[L]];for(let I=0,G=R.length;I<G;I++){const Z=R[I],pe=Array.isArray(Z.value)?Z.value:[Z.value];for(let Y=0,J=pe.length;Y<J;Y++){const de=pe[Y],ge=M(de),H=E%N;H!==0&&N-H<ge.boundary&&(E+=N-H),Z.__data=new Float32Array(ge.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=E,E+=ge.storage}}}const P=E%N;return P>0&&(E+=N-P),S.__size=E,S.__cache={},this}function M(S){const w={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function _(S){const w=S.target;w.removeEventListener("dispose",_);const E=s.indexOf(w.__bindingPointIndex);s.splice(E,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete a[w.id]}function g(){for(const S in i)n.deleteBuffer(i[S]);s=[],i={},a={}}return{bind:u,update:d,dispose:g}}class Em{constructor(e={}){const{canvas:t=_3(),context:r=null,depth:i=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=s;const x=new Uint32Array(4),y=new Int32Array(4);let M=null,_=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kn,this._useLegacyLights=!1,this.toneMapping=da,this.toneMappingExposure=1;const w=this;let E=!1,N=0,P=0,L=null,U=-1,R=null;const I=new qt,G=new qt;let Z=null;const pe=new $e(0);let Y=0,J=t.width,de=t.height,ge=1,H=null,q=null;const K=new qt(0,0,J,de),se=new qt(0,0,J,de);let me=!1;const ie=new jd;let xe=!1,ze=!1,De=null;const Ve=new gt,ut=new Te,at=new z,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ye(){return L===null?ge:1}let X=r;function Ue(j,ne){for(let ae=0;ae<j.length;ae++){const le=j[ae],re=t.getContext(le,ne);if(re!==null)return re}return null}try{const j={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ld}`),t.addEventListener("webglcontextlost",W,!1),t.addEventListener("webglcontextrestored",O,!1),t.addEventListener("webglcontextcreationerror",$,!1),X===null){const ne=["webgl2","webgl","experimental-webgl"];if(w.isWebGL1Renderer===!0&&ne.shift(),X=Ue(ne,j),X===null)throw Ue(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&X instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(j){throw console.error("THREE.WebGLRenderer: "+j.message),j}let Me,we,ke,be,Ye,F,k,ce,Ne,Ee,Le,nt,He,Ke,lt,vt,Pe,Ot,xt,dt,Oe,Qe,yt,C;function D(){Me=new QD(X),we=new XD(X,Me,e),Me.init(we),Qe=new I3(X,Me,we),ke=new IU(X,Me,we),be=new tO(X),Ye=new _U,F=new kU(X,Me,ke,Ye,we,Qe,be),k=new YD(w),ce=new ZD(w),Ne=new c4(X,we),yt=new GD(X,Me,Ne,we),Ee=new JD(X,Ne,be,yt),Le=new aO(X,Ee,Ne,be),xt=new iO(X,we,F),vt=new qD(Ye),nt=new bU(w,k,ce,Me,we,yt,vt),He=new UU(w,Ye),Ke=new SU,lt=new RU(Me,we),Ot=new VD(w,k,ce,ke,Le,p,u),Pe=new LU(w,Le,we),C=new jU(X,be,we,ke),dt=new WD(X,Me,be,we),Oe=new eO(X,Me,be,we),be.programs=nt.programs,w.capabilities=we,w.extensions=Me,w.properties=Ye,w.renderLists=Ke,w.shadowMap=Pe,w.state=ke,w.info=be}D();const V=new OU(w,X);this.xr=V,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const j=Me.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=Me.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(j){j!==void 0&&(ge=j,this.setSize(J,de,!1))},this.getSize=function(j){return j.set(J,de)},this.setSize=function(j,ne,ae=!0){if(V.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=j,de=ne,t.width=Math.floor(j*ge),t.height=Math.floor(ne*ge),ae===!0&&(t.style.width=j+"px",t.style.height=ne+"px"),this.setViewport(0,0,j,ne)},this.getDrawingBufferSize=function(j){return j.set(J*ge,de*ge).floor()},this.setDrawingBufferSize=function(j,ne,ae){J=j,de=ne,ge=ae,t.width=Math.floor(j*ae),t.height=Math.floor(ne*ae),this.setViewport(0,0,j,ne)},this.getCurrentViewport=function(j){return j.copy(I)},this.getViewport=function(j){return j.copy(K)},this.setViewport=function(j,ne,ae,le){j.isVector4?K.set(j.x,j.y,j.z,j.w):K.set(j,ne,ae,le),ke.viewport(I.copy(K).multiplyScalar(ge).floor())},this.getScissor=function(j){return j.copy(se)},this.setScissor=function(j,ne,ae,le){j.isVector4?se.set(j.x,j.y,j.z,j.w):se.set(j,ne,ae,le),ke.scissor(G.copy(se).multiplyScalar(ge).floor())},this.getScissorTest=function(){return me},this.setScissorTest=function(j){ke.setScissorTest(me=j)},this.setOpaqueSort=function(j){H=j},this.setTransparentSort=function(j){q=j},this.getClearColor=function(j){return j.copy(Ot.getClearColor())},this.setClearColor=function(){Ot.setClearColor.apply(Ot,arguments)},this.getClearAlpha=function(){return Ot.getClearAlpha()},this.setClearAlpha=function(){Ot.setClearAlpha.apply(Ot,arguments)},this.clear=function(j=!0,ne=!0,ae=!0){let le=0;if(j){let re=!1;if(L!==null){const Ce=L.texture.format;re=Ce===hb||Ce===db||Ce===ub}if(re){const Ce=L.texture.type,Ze=Ce===ri||Ce===oa||Ce===bm||Ce===As||Ce===ob||Ce===lb,it=Ot.getClearColor(),tt=Ot.getClearAlpha(),ft=it.r,_t=it.g,Tt=it.b;Ze?(x[0]=ft,x[1]=_t,x[2]=Tt,x[3]=tt,X.clearBufferuiv(X.COLOR,0,x)):(y[0]=ft,y[1]=_t,y[2]=Tt,y[3]=tt,X.clearBufferiv(X.COLOR,0,y))}else le|=X.COLOR_BUFFER_BIT}ne&&(le|=X.DEPTH_BUFFER_BIT),ae&&(le|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",W,!1),t.removeEventListener("webglcontextrestored",O,!1),t.removeEventListener("webglcontextcreationerror",$,!1),Ke.dispose(),lt.dispose(),Ye.dispose(),k.dispose(),ce.dispose(),Le.dispose(),yt.dispose(),C.dispose(),nt.dispose(),V.dispose(),V.removeEventListener("sessionstart",Mt),V.removeEventListener("sessionend",Fe),De&&(De.dispose(),De=null),qe.stop()};function W(j){j.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function O(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const j=be.autoReset,ne=Pe.enabled,ae=Pe.autoUpdate,le=Pe.needsUpdate,re=Pe.type;D(),be.autoReset=j,Pe.enabled=ne,Pe.autoUpdate=ae,Pe.needsUpdate=le,Pe.type=re}function $(j){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function oe(j){const ne=j.target;ne.removeEventListener("dispose",oe),he(ne)}function he(j){_e(j),Ye.remove(j)}function _e(j){const ne=Ye.get(j).programs;ne!==void 0&&(ne.forEach(function(ae){nt.releaseProgram(ae)}),j.isShaderMaterial&&nt.releaseShaderCache(j))}this.renderBufferDirect=function(j,ne,ae,le,re,Ce){ne===null&&(ne=Ge);const Ze=re.isMesh&&re.matrixWorld.determinant()<0,it=jn(j,ne,ae,le,re);ke.setMaterial(le,Ze);let tt=ae.index,ft=1;if(le.wireframe===!0){if(tt=Ee.getWireframeAttribute(ae),tt===void 0)return;ft=2}const _t=ae.drawRange,Tt=ae.attributes.position;let Cn=_t.start*ft,Qt=(_t.start+_t.count)*ft;Ce!==null&&(Cn=Math.max(Cn,Ce.start*ft),Qt=Math.min(Qt,(Ce.start+Ce.count)*ft)),tt!==null?(Cn=Math.max(Cn,0),Qt=Math.min(Qt,tt.count)):Tt!=null&&(Cn=Math.max(Cn,0),Qt=Math.min(Qt,Tt.count));const wn=Qt-Cn;if(wn<0||wn===1/0)return;yt.setup(re,le,it,ae,tt);let It,pt=dt;if(tt!==null&&(It=Ne.get(tt),pt=Oe,pt.setIndex(It)),re.isMesh)le.wireframe===!0?(ke.setLineWidth(le.wireframeLinewidth*ye()),pt.setMode(X.LINES)):pt.setMode(X.TRIANGLES);else if(re.isLine){let mt=le.linewidth;mt===void 0&&(mt=1),ke.setLineWidth(mt*ye()),re.isLineSegments?pt.setMode(X.LINES):re.isLineLoop?pt.setMode(X.LINE_LOOP):pt.setMode(X.LINE_STRIP)}else re.isPoints?pt.setMode(X.POINTS):re.isSprite&&pt.setMode(X.TRIANGLES);if(re.isBatchedMesh)pt.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else if(re.isInstancedMesh)pt.renderInstances(Cn,wn,re.count);else if(ae.isInstancedBufferGeometry){const mt=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,Rn=Math.min(ae.instanceCount,mt);pt.renderInstances(Cn,wn,Rn)}else pt.render(Cn,wn)};function Se(j,ne,ae){j.transparent===!0&&j.side===zi&&j.forceSinglePass===!1?(j.side=Ar,j.needsUpdate=!0,cn(j,ne,ae),j.side=Fa,j.needsUpdate=!0,cn(j,ne,ae),j.side=zi):cn(j,ne,ae)}this.compile=function(j,ne,ae=null){ae===null&&(ae=j),_=lt.get(ae),_.init(),S.push(_),ae.traverseVisible(function(re){re.isLight&&re.layers.test(ne.layers)&&(_.pushLight(re),re.castShadow&&_.pushShadow(re))}),j!==ae&&j.traverseVisible(function(re){re.isLight&&re.layers.test(ne.layers)&&(_.pushLight(re),re.castShadow&&_.pushShadow(re))}),_.setupLights(w._useLegacyLights);const le=new Set;return j.traverse(function(re){const Ce=re.material;if(Ce)if(Array.isArray(Ce))for(let Ze=0;Ze<Ce.length;Ze++){const it=Ce[Ze];Se(it,ae,re),le.add(it)}else Se(Ce,ae,re),le.add(Ce)}),S.pop(),_=null,le},this.compileAsync=function(j,ne,ae=null){const le=this.compile(j,ne,ae);return new Promise(re=>{function Ce(){if(le.forEach(function(Ze){Ye.get(Ze).currentProgram.isReady()&&le.delete(Ze)}),le.size===0){re(j);return}setTimeout(Ce,10)}Me.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let Re=null;function Ae(j){Re&&Re(j)}function Mt(){qe.stop()}function Fe(){qe.start()}const qe=new A3;qe.setAnimationLoop(Ae),typeof self<"u"&&qe.setContext(self),this.setAnimationLoop=function(j){Re=j,V.setAnimationLoop(j),j===null?qe.stop():qe.start()},V.addEventListener("sessionstart",Mt),V.addEventListener("sessionend",Fe),this.render=function(j,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),V.enabled===!0&&V.isPresenting===!0&&(V.cameraAutoUpdate===!0&&V.updateCamera(ne),ne=V.getCamera()),j.isScene===!0&&j.onBeforeRender(w,j,ne,L),_=lt.get(j,S.length),_.init(),S.push(_),Ve.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),ie.setFromProjectionMatrix(Ve),ze=this.localClippingEnabled,xe=vt.init(this.clippingPlanes,ze),M=Ke.get(j,g.length),M.init(),g.push(M),ct(j,ne,0,w.sortObjects),M.finish(),w.sortObjects===!0&&M.sort(H,q),this.info.render.frame++,xe===!0&&vt.beginShadows();const ae=_.state.shadowsArray;if(Pe.render(ae,j,ne),xe===!0&&vt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ot.render(M,j),_.setupLights(w._useLegacyLights),ne.isArrayCamera){const le=ne.cameras;for(let re=0,Ce=le.length;re<Ce;re++){const Ze=le[re];bt(M,j,Ze,Ze.viewport)}}else bt(M,j,ne);L!==null&&(F.updateMultisampleRenderTarget(L),F.updateRenderTargetMipmap(L)),j.isScene===!0&&j.onAfterRender(w,j,ne),yt.resetDefaultState(),U=-1,R=null,S.pop(),S.length>0?_=S[S.length-1]:_=null,g.pop(),g.length>0?M=g[g.length-1]:M=null};function ct(j,ne,ae,le){if(j.visible===!1)return;if(j.layers.test(ne.layers)){if(j.isGroup)ae=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(ne);else if(j.isLight)_.pushLight(j),j.castShadow&&_.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||ie.intersectsSprite(j)){le&&at.setFromMatrixPosition(j.matrixWorld).applyMatrix4(Ve);const Ce=Le.update(j),Ze=j.material;Ze.visible&&M.push(j,Ce,Ze,ae,at.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(!j.frustumCulled||ie.intersectsObject(j))){const Ce=Le.update(j),Ze=j.material;if(le&&(j.boundingSphere!==void 0?(j.boundingSphere===null&&j.computeBoundingSphere(),at.copy(j.boundingSphere.center)):(Ce.boundingSphere===null&&Ce.computeBoundingSphere(),at.copy(Ce.boundingSphere.center)),at.applyMatrix4(j.matrixWorld).applyMatrix4(Ve)),Array.isArray(Ze)){const it=Ce.groups;for(let tt=0,ft=it.length;tt<ft;tt++){const _t=it[tt],Tt=Ze[_t.materialIndex];Tt&&Tt.visible&&M.push(j,Ce,Tt,ae,at.z,_t)}}else Ze.visible&&M.push(j,Ce,Ze,ae,at.z,null)}}const re=j.children;for(let Ce=0,Ze=re.length;Ce<Ze;Ce++)ct(re[Ce],ne,ae,le)}function bt(j,ne,ae,le){const re=j.opaque,Ce=j.transmissive,Ze=j.transparent;_.setupLightsView(ae),xe===!0&&vt.setGlobalState(w.clippingPlanes,ae),Ce.length>0&&Ht(re,Ce,ne,ae),le&&ke.viewport(I.copy(le)),re.length>0&&Vt(re,ne,ae),Ce.length>0&&Vt(Ce,ne,ae),Ze.length>0&&Vt(Ze,ne,ae),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function Ht(j,ne,ae,le){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;const re=we.isWebGL2;De===null&&(De=new li(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")?Qn:ri,minFilter:Ds,samples:re?4:0})),w.getDrawingBufferSize(ut),re?De.setSize(ut.x,ut.y):De.setSize(Kp(ut.x),Kp(ut.y));const Ce=w.getRenderTarget();w.setRenderTarget(De),w.getClearColor(pe),Y=w.getClearAlpha(),Y<1&&w.setClearColor(16777215,.5),w.clear();const Ze=w.toneMapping;w.toneMapping=da,Vt(j,ae,le),F.updateMultisampleRenderTarget(De),F.updateRenderTargetMipmap(De);let it=!1;for(let tt=0,ft=ne.length;tt<ft;tt++){const _t=ne[tt],Tt=_t.object,Cn=_t.geometry,Qt=_t.material,wn=_t.group;if(Qt.side===zi&&Tt.layers.test(le.layers)){const It=Qt.side;Qt.side=Ar,Qt.needsUpdate=!0,Gt(Tt,ae,le,Cn,Qt,wn),Qt.side=It,Qt.needsUpdate=!0,it=!0}}it===!0&&(F.updateMultisampleRenderTarget(De),F.updateRenderTargetMipmap(De)),w.setRenderTarget(Ce),w.setClearColor(pe,Y),w.toneMapping=Ze}function Vt(j,ne,ae){const le=ne.isScene===!0?ne.overrideMaterial:null;for(let re=0,Ce=j.length;re<Ce;re++){const Ze=j[re],it=Ze.object,tt=Ze.geometry,ft=le===null?Ze.material:le,_t=Ze.group;it.layers.test(ae.layers)&&Gt(it,ne,ae,tt,ft,_t)}}function Gt(j,ne,ae,le,re,Ce){j.onBeforeRender(w,ne,ae,le,re,Ce),j.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),re.onBeforeRender(w,ne,ae,le,j,Ce),re.transparent===!0&&re.side===zi&&re.forceSinglePass===!1?(re.side=Ar,re.needsUpdate=!0,w.renderBufferDirect(ae,ne,le,re,j,Ce),re.side=Fa,re.needsUpdate=!0,w.renderBufferDirect(ae,ne,le,re,j,Ce),re.side=zi):w.renderBufferDirect(ae,ne,le,re,j,Ce),j.onAfterRender(w,ne,ae,le,re,Ce)}function cn(j,ne,ae){ne.isScene!==!0&&(ne=Ge);const le=Ye.get(j),re=_.state.lights,Ce=_.state.shadowsArray,Ze=re.state.version,it=nt.getParameters(j,re.state,Ce,ne,ae),tt=nt.getProgramCacheKey(it);let ft=le.programs;le.environment=j.isMeshStandardMaterial?ne.environment:null,le.fog=ne.fog,le.envMap=(j.isMeshStandardMaterial?ce:k).get(j.envMap||le.environment),ft===void 0&&(j.addEventListener("dispose",oe),ft=new Map,le.programs=ft);let _t=ft.get(tt);if(_t!==void 0){if(le.currentProgram===_t&&le.lightsStateVersion===Ze)return vr(j,it),_t}else it.uniforms=nt.getUniforms(j),j.onBuild(ae,it,w),j.onBeforeCompile(it,w),_t=nt.acquireProgram(it,tt),ft.set(tt,_t),le.uniforms=it.uniforms;const Tt=le.uniforms;return(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(Tt.clippingPlanes=vt.uniform),vr(j,it),le.needsLights=Wr(j),le.lightsStateVersion=Ze,le.needsLights&&(Tt.ambientLightColor.value=re.state.ambient,Tt.lightProbe.value=re.state.probe,Tt.directionalLights.value=re.state.directional,Tt.directionalLightShadows.value=re.state.directionalShadow,Tt.spotLights.value=re.state.spot,Tt.spotLightShadows.value=re.state.spotShadow,Tt.rectAreaLights.value=re.state.rectArea,Tt.ltc_1.value=re.state.rectAreaLTC1,Tt.ltc_2.value=re.state.rectAreaLTC2,Tt.pointLights.value=re.state.point,Tt.pointLightShadows.value=re.state.pointShadow,Tt.hemisphereLights.value=re.state.hemi,Tt.directionalShadowMap.value=re.state.directionalShadowMap,Tt.directionalShadowMatrix.value=re.state.directionalShadowMatrix,Tt.spotShadowMap.value=re.state.spotShadowMap,Tt.spotLightMatrix.value=re.state.spotLightMatrix,Tt.spotLightMap.value=re.state.spotLightMap,Tt.pointShadowMap.value=re.state.pointShadowMap,Tt.pointShadowMatrix.value=re.state.pointShadowMatrix),le.currentProgram=_t,le.uniformsList=null,_t}function Ut(j){if(j.uniformsList===null){const ne=j.currentProgram.getUniforms();j.uniformsList=xp.seqWithValue(ne.seq,j.uniforms)}return j.uniformsList}function vr(j,ne){const ae=Ye.get(j);ae.outputColorSpace=ne.outputColorSpace,ae.batching=ne.batching,ae.instancing=ne.instancing,ae.instancingColor=ne.instancingColor,ae.skinning=ne.skinning,ae.morphTargets=ne.morphTargets,ae.morphNormals=ne.morphNormals,ae.morphColors=ne.morphColors,ae.morphTargetsCount=ne.morphTargetsCount,ae.numClippingPlanes=ne.numClippingPlanes,ae.numIntersection=ne.numClipIntersection,ae.vertexAlphas=ne.vertexAlphas,ae.vertexTangents=ne.vertexTangents,ae.toneMapping=ne.toneMapping}function jn(j,ne,ae,le,re){ne.isScene!==!0&&(ne=Ge),F.resetTextureUnits();const Ce=ne.fog,Ze=le.isMeshStandardMaterial?ne.environment:null,it=L===null?w.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:oi,tt=(le.isMeshStandardMaterial?ce:k).get(le.envMap||Ze),ft=le.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,_t=!!ae.attributes.tangent&&(!!le.normalMap||le.anisotropy>0),Tt=!!ae.morphAttributes.position,Cn=!!ae.morphAttributes.normal,Qt=!!ae.morphAttributes.color;let wn=da;le.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(wn=w.toneMapping);const It=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,pt=It!==void 0?It.length:0,mt=Ye.get(le),Rn=_.state.lights;if(xe===!0&&(ze===!0||j!==R)){const yr=j===R&&le.id===U;vt.setState(le,j,yr)}let Wn=!1;le.version===mt.__version?(mt.needsLights&&mt.lightsStateVersion!==Rn.state.version||mt.outputColorSpace!==it||re.isBatchedMesh&&mt.batching===!1||!re.isBatchedMesh&&mt.batching===!0||re.isInstancedMesh&&mt.instancing===!1||!re.isInstancedMesh&&mt.instancing===!0||re.isSkinnedMesh&&mt.skinning===!1||!re.isSkinnedMesh&&mt.skinning===!0||re.isInstancedMesh&&mt.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&mt.instancingColor===!1&&re.instanceColor!==null||mt.envMap!==tt||le.fog===!0&&mt.fog!==Ce||mt.numClippingPlanes!==void 0&&(mt.numClippingPlanes!==vt.numPlanes||mt.numIntersection!==vt.numIntersection)||mt.vertexAlphas!==ft||mt.vertexTangents!==_t||mt.morphTargets!==Tt||mt.morphNormals!==Cn||mt.morphColors!==Qt||mt.toneMapping!==wn||we.isWebGL2===!0&&mt.morphTargetsCount!==pt)&&(Wn=!0):(Wn=!0,mt.__version=le.version);let xr=mt.currentProgram;Wn===!0&&(xr=cn(le,ne,re));let ma=!1,Pn=!1,Va=!1;const Fn=xr.getUniforms(),qi=mt.uniforms;if(ke.useProgram(xr.program)&&(ma=!0,Pn=!0,Va=!0),le.id!==U&&(U=le.id,Pn=!0),ma||R!==j){Fn.setValue(X,"projectionMatrix",j.projectionMatrix),Fn.setValue(X,"viewMatrix",j.matrixWorldInverse);const yr=Fn.map.cameraPosition;yr!==void 0&&yr.setValue(X,at.setFromMatrixPosition(j.matrixWorld)),we.logarithmicDepthBuffer&&Fn.setValue(X,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&Fn.setValue(X,"isOrthographic",j.isOrthographicCamera===!0),R!==j&&(R=j,Pn=!0,Va=!0)}if(re.isSkinnedMesh){Fn.setOptional(X,re,"bindMatrix"),Fn.setOptional(X,re,"bindMatrixInverse");const yr=re.skeleton;yr&&(we.floatVertexTextures?(yr.boneTexture===null&&yr.computeBoneTexture(),Fn.setValue(X,"boneTexture",yr.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}re.isBatchedMesh&&(Fn.setOptional(X,re,"batchingTexture"),Fn.setValue(X,"batchingTexture",re._matricesTexture,F));const Ga=ae.morphAttributes;if((Ga.position!==void 0||Ga.normal!==void 0||Ga.color!==void 0&&we.isWebGL2===!0)&&xt.update(re,ae,xr),(Pn||mt.receiveShadow!==re.receiveShadow)&&(mt.receiveShadow=re.receiveShadow,Fn.setValue(X,"receiveShadow",re.receiveShadow)),le.isMeshGouraudMaterial&&le.envMap!==null&&(qi.envMap.value=tt,qi.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),Pn&&(Fn.setValue(X,"toneMappingExposure",w.toneMappingExposure),mt.needsLights&&mn(qi,Va),Ce&&le.fog===!0&&He.refreshFogUniforms(qi,Ce),He.refreshMaterialUniforms(qi,le,ge,de,De),xp.upload(X,Ut(mt),qi,F)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(xp.upload(X,Ut(mt),qi,F),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&Fn.setValue(X,"center",re.center),Fn.setValue(X,"modelViewMatrix",re.modelViewMatrix),Fn.setValue(X,"normalMatrix",re.normalMatrix),Fn.setValue(X,"modelMatrix",re.matrixWorld),le.isShaderMaterial||le.isRawShaderMaterial){const yr=le.uniformsGroups;for(let br=0,$m=yr.length;br<$m;br++)if(we.isWebGL2){const qd=yr[br];C.update(qd,xr),C.bind(qd,xr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return xr}function mn(j,ne){j.ambientLightColor.needsUpdate=ne,j.lightProbe.needsUpdate=ne,j.directionalLights.needsUpdate=ne,j.directionalLightShadows.needsUpdate=ne,j.pointLights.needsUpdate=ne,j.pointLightShadows.needsUpdate=ne,j.spotLights.needsUpdate=ne,j.spotLightShadows.needsUpdate=ne,j.rectAreaLights.needsUpdate=ne,j.hemisphereLights.needsUpdate=ne}function Wr(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(j,ne,ae){Ye.get(j.texture).__webglTexture=ne,Ye.get(j.depthTexture).__webglTexture=ae;const le=Ye.get(j);le.__hasExternalTextures=!0,le.__hasExternalTextures&&(le.__autoAllocateDepthBuffer=ae===void 0,le.__autoAllocateDepthBuffer||Me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),le.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(j,ne){const ae=Ye.get(j);ae.__webglFramebuffer=ne,ae.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(j,ne=0,ae=0){L=j,N=ne,P=ae;let le=!0,re=null,Ce=!1,Ze=!1;if(j){const it=Ye.get(j);it.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(X.FRAMEBUFFER,null),le=!1):it.__webglFramebuffer===void 0?F.setupRenderTarget(j):it.__hasExternalTextures&&F.rebindTextures(j,Ye.get(j.texture).__webglTexture,Ye.get(j.depthTexture).__webglTexture);const tt=j.texture;(tt.isData3DTexture||tt.isDataArrayTexture||tt.isCompressedArrayTexture)&&(Ze=!0);const ft=Ye.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Array.isArray(ft[ne])?re=ft[ne][ae]:re=ft[ne],Ce=!0):we.isWebGL2&&j.samples>0&&F.useMultisampledRTT(j)===!1?re=Ye.get(j).__webglMultisampledFramebuffer:Array.isArray(ft)?re=ft[ae]:re=ft,I.copy(j.viewport),G.copy(j.scissor),Z=j.scissorTest}else I.copy(K).multiplyScalar(ge).floor(),G.copy(se).multiplyScalar(ge).floor(),Z=me;if(ke.bindFramebuffer(X.FRAMEBUFFER,re)&&we.drawBuffers&&le&&ke.drawBuffers(j,re),ke.viewport(I),ke.scissor(G),ke.setScissorTest(Z),Ce){const it=Ye.get(j.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+ne,it.__webglTexture,ae)}else if(Ze){const it=Ye.get(j.texture),tt=ne||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,it.__webglTexture,ae||0,tt)}U=-1},this.readRenderTargetPixels=function(j,ne,ae,le,re,Ce,Ze){if(!(j&&j.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let it=Ye.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&Ze!==void 0&&(it=it[Ze]),it){ke.bindFramebuffer(X.FRAMEBUFFER,it);try{const tt=j.texture,ft=tt.format,_t=tt.type;if(ft!==On&&Qe.convert(ft)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Tt=_t===Qn&&(Me.has("EXT_color_buffer_half_float")||we.isWebGL2&&Me.has("EXT_color_buffer_float"));if(_t!==ri&&Qe.convert(_t)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&!(_t===Un&&(we.isWebGL2||Me.has("OES_texture_float")||Me.has("WEBGL_color_buffer_float")))&&!Tt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=j.width-le&&ae>=0&&ae<=j.height-re&&X.readPixels(ne,ae,le,re,Qe.convert(ft),Qe.convert(_t),Ce)}finally{const tt=L!==null?Ye.get(L).__webglFramebuffer:null;ke.bindFramebuffer(X.FRAMEBUFFER,tt)}}},this.copyFramebufferToTexture=function(j,ne,ae=0){const le=Math.pow(2,-ae),re=Math.floor(ne.image.width*le),Ce=Math.floor(ne.image.height*le);F.setTexture2D(ne,0),X.copyTexSubImage2D(X.TEXTURE_2D,ae,0,0,j.x,j.y,re,Ce),ke.unbindTexture()},this.copyTextureToTexture=function(j,ne,ae,le=0){const re=ne.image.width,Ce=ne.image.height,Ze=Qe.convert(ae.format),it=Qe.convert(ae.type);F.setTexture2D(ae,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,ae.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,ae.unpackAlignment),ne.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,le,j.x,j.y,re,Ce,Ze,it,ne.image.data):ne.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,le,j.x,j.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ze,ne.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,le,j.x,j.y,Ze,it,ne.image),le===0&&ae.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(j,ne,ae,le,re=0){if(w.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ce=j.max.x-j.min.x+1,Ze=j.max.y-j.min.y+1,it=j.max.z-j.min.z+1,tt=Qe.convert(le.format),ft=Qe.convert(le.type);let _t;if(le.isData3DTexture)F.setTexture3D(le,0),_t=X.TEXTURE_3D;else if(le.isDataArrayTexture||le.isCompressedArrayTexture)F.setTexture2DArray(le,0),_t=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,le.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,le.unpackAlignment);const Tt=X.getParameter(X.UNPACK_ROW_LENGTH),Cn=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Qt=X.getParameter(X.UNPACK_SKIP_PIXELS),wn=X.getParameter(X.UNPACK_SKIP_ROWS),It=X.getParameter(X.UNPACK_SKIP_IMAGES),pt=ae.isCompressedTexture?ae.mipmaps[re]:ae.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,pt.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,pt.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,j.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,j.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,j.min.z),ae.isDataTexture||ae.isData3DTexture?X.texSubImage3D(_t,re,ne.x,ne.y,ne.z,Ce,Ze,it,tt,ft,pt.data):ae.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(_t,re,ne.x,ne.y,ne.z,Ce,Ze,it,tt,pt.data)):X.texSubImage3D(_t,re,ne.x,ne.y,ne.z,Ce,Ze,it,tt,ft,pt),X.pixelStorei(X.UNPACK_ROW_LENGTH,Tt),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Cn),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Qt),X.pixelStorei(X.UNPACK_SKIP_ROWS,wn),X.pixelStorei(X.UNPACK_SKIP_IMAGES,It),re===0&&le.generateMipmaps&&X.generateMipmap(_t),ke.unbindTexture()},this.initTexture=function(j){j.isCubeTexture?F.setTextureCube(j,0):j.isData3DTexture?F.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?F.setTexture2DArray(j,0):F.setTexture2D(j,0),ke.unbindTexture()},this.resetState=function(){N=0,P=0,L=null,ke.reset(),yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Bi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Sm?"display-p3":"srgb",t.unpackColorSpace=Xt.workingColorSpace===kd?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kn?Rs:mb}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Rs?kn:oi}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class D3 extends Em{}D3.prototype.isWebGL1Renderer=!0;class Am{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new $e(e),this.density=t}clone(){return new Am(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Cm{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new $e(e),this.near=t,this.far=r}clone(){return new Cm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Fd extends Bt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Rm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=fd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ii()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ii()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ii()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Sr=new z;class jo{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.applyMatrix4(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.applyNormalMatrix(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Sr.fromBufferAttribute(this,t),Sr.transformDirection(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fr(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),a=At(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new $t(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ab extends gr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Sl;const su=new z,Ml=new z,Tl=new z,El=new Te,ou=new Te,O3=new gt,Ef=new z,lu=new z,Af=new z,FS=new Te,$0=new Te,zS=new Te;class U3 extends Bt{constructor(e=new Ab){if(super(),this.isSprite=!0,this.type="Sprite",Sl===void 0){Sl=new Pt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Rm(t,5);Sl.setIndex([0,1,2,0,2,3]),Sl.setAttribute("position",new jo(r,3,0,!1)),Sl.setAttribute("uv",new jo(r,2,3,!1))}this.geometry=Sl,this.material=e,this.center=new Te(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ml.setFromMatrixScale(this.matrixWorld),O3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Tl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ml.multiplyScalar(-Tl.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;Cf(Ef.set(-.5,-.5,0),Tl,s,Ml,i,a),Cf(lu.set(.5,-.5,0),Tl,s,Ml,i,a),Cf(Af.set(.5,.5,0),Tl,s,Ml,i,a),FS.set(0,0),$0.set(1,0),zS.set(1,1);let o=e.ray.intersectTriangle(Ef,lu,Af,!1,su);if(o===null&&(Cf(lu.set(-.5,.5,0),Tl,s,Ml,i,a),$0.set(0,1),o=e.ray.intersectTriangle(Ef,Af,lu,!1,su),o===null))return;const u=e.ray.origin.distanceTo(su);u<e.near||u>e.far||t.push({distance:u,point:su.clone(),uv:jr.getInterpolation(su,Ef,lu,Af,FS,$0,zS,new Te),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Cf(n,e,t,r,i,a){El.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(ou.x=a*El.x-i*El.y,ou.y=i*El.x+a*El.y):ou.copy(El),n.copy(e),n.x+=ou.x,n.y+=ou.y,n.applyMatrix4(O3)}const Rf=new z,BS=new z;class j3 extends Bt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),e<a)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Rf.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Rf);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Rf.setFromMatrixPosition(e.matrixWorld),BS.setFromMatrixPosition(this.matrixWorld);const r=Rf.distanceTo(BS)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const HS=new z,VS=new qt,GS=new qt,FU=new z,WS=new gt,Pf=new z,K0=new pr,XS=new gt,Z0=new Mc;class F3 extends bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=_x,this.bindMatrix=new gt,this.bindMatrixInverse=new gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Cr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Pf),this.boundingBox.expandByPoint(Pf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new pr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Pf),this.boundingSphere.expandByPoint(Pf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),K0.copy(this.boundingSphere),K0.applyMatrix4(i),e.ray.intersectsSphere(K0)!==!1&&(XS.copy(i).invert(),Z0.copy(e.ray).applyMatrix4(XS),!(this.boundingBox!==null&&Z0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Z0)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===_x?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===e3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;VS.fromBufferAttribute(i.attributes.skinIndex,e),GS.fromBufferAttribute(i.attributes.skinWeight,e),HS.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=GS.getComponent(a);if(s!==0){const o=VS.getComponent(a);WS.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(FU.copy(HS).applyMatrix4(WS),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Cb extends Bt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ps extends Zt{constructor(e=null,t=1,r=1,i,a,s,o,u,d=En,h=En,f,p){super(null,s,o,u,d,h,i,a,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qS=new gt,zU=new gt;class Pm{constructor(e=[],t=[]){this.uuid=ii(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new gt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:zU;qS.multiplyMatrices(o,t[a]),qS.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Pm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Ps(t,e,e,On,Un);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new Cb),this.bones.push(s),this.boneInverses.push(new gt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class gc extends $t{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Al=new gt,YS=new gt,Nf=[],$S=new Cr,BU=new gt,cu=new bn,uu=new pr;class z3 extends bn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new gc(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,BU)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Cr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Al),$S.copy(e.boundingBox).applyMatrix4(Al),this.boundingBox.union($S)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new pr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Al),uu.copy(e.boundingSphere).applyMatrix4(Al),this.boundingSphere.union(uu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(cu.geometry=this.geometry,cu.material=this.material,cu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uu.copy(this.boundingSphere),uu.applyMatrix4(r),e.ray.intersectsSphere(uu)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,Al),YS.multiplyMatrices(r,Al),cu.matrixWorld=YS,cu.raycast(e,Nf);for(let s=0,o=Nf.length;s<o;s++){const u=Nf[s];u.instanceId=a,u.object=this,t.push(u)}Nf.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new gc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function HU(n,e){return n.z-e.z}function VU(n,e){return e.z-n.z}class GU{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const a=r[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t}reset(){this.list.length=0,this.index=0}}const Cl="batchId",as=new gt,KS=new gt,WU=new gt,ZS=new gt,Q0=new jd,Lf=new Cr,io=new pr,du=new z,J0=new GU,hr=new bn,If=[];function XU(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class B3 extends bn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new Pt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Ps(t,e,e,On,Un);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const u=e.getAttribute(o),{array:d,itemSize:h,normalized:f}=u,p=new d.constructor(r*h),x=new u.constructor(p,h,f);x.setUsage(u.usage),t.setAttribute(o,x)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(a):new Uint16Array(a);t.setIndex(new $t(o,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Cl,new $t(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Cl))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Cl}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Cl)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=t.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cr);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,as),this.getBoundingBoxAt(i,Lf).applyMatrix4(as),t.union(Lf))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,as),this.getBoundingSphereAt(i,io).applyMatrix4(as),t.union(io))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const s=this._reservedRanges,o=this._drawRanges,u=this._bounds;this._geometryCount!==0&&(a=s[s.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const d=e.getIndex(),h=d!==null;if(h&&(r===-1?i.indexCount=d.count:i.indexCount=r,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,x=this._matricesTexture,y=this._matricesTexture.image.data;f.push(!0),p.push(!0);const M=this._geometryCount;this._geometryCount++,WU.toArray(y,M*16),x.needsUpdate=!0,s.push(i),o.push({start:h?i.indexStart:i.vertexStart,count:-1}),u.push({boxInitialized:!1,box:new Cr,sphereInitialized:!1,sphere:new pr});const _=this.geometry.getAttribute(Cl);for(let g=0;g<i.vertexCount;g++)_.setX(i.vertexStart+g,M);return _.needsUpdate=!0,this.setGeometryAt(M,e),M}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=t.getIndex(),o=this._reservedRanges[e];if(i&&s.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const u=o.vertexStart,d=o.vertexCount;for(const x in r.attributes){if(x===Cl)continue;const y=t.getAttribute(x),M=r.getAttribute(x);XU(y,M,u);const _=y.itemSize;for(let g=y.count,S=d;g<S;g++){const w=u+g;for(let E=0;E<_;E++)M.setComponent(w,E,0)}M.needsUpdate=!0}if(i){const x=o.indexStart;for(let y=0;y<s.count;y++)a.setX(x+y,u+s.getX(y));for(let y=s.count,M=o.indexCount;y<M;y++)a.setX(x+y,u);a.needsUpdate=!0}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=i?s.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],i=r.box,a=this.geometry;if(r.boxInitialized===!1){i.makeEmpty();const s=a.index,o=a.attributes.position,u=this._drawRanges[e];for(let d=u.start,h=u.start+u.count;d<h;d++){let f=d;s&&(f=s.getX(f)),i.expandByPoint(du.fromBufferAttribute(o,f))}r.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],i=r.sphere,a=this.geometry;if(r.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,Lf),Lf.getCenter(i.center);const s=a.index,o=a.attributes.position,u=this._drawRanges[e];let d=0;for(let h=u.start,f=u.start+u.count;h<f;h++){let p=h;s&&(p=s.getX(p)),du.fromBufferAttribute(o,p),d=Math.max(d,i.center.distanceToSquared(du))}i.radius=Math.sqrt(d),r.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(t.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,a=this._drawRanges,s=this._geometryCount,o=this.matrixWorld,u=this.geometry;hr.material=this.material,hr.geometry.index=u.index,hr.geometry.attributes=u.attributes,hr.geometry.boundingBox===null&&(hr.geometry.boundingBox=new Cr),hr.geometry.boundingSphere===null&&(hr.geometry.boundingSphere=new pr);for(let d=0;d<s;d++){if(!r[d]||!i[d])continue;const h=a[d];hr.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(d,hr.matrixWorld).premultiply(o),this.getBoundingBoxAt(d,hr.geometry.boundingBox),this.getBoundingSphereAt(d,hr.geometry.boundingSphere),hr.raycast(e,If);for(let f=0,p=If.length;f<p;f++){const x=If[f];x.object=this,x.batchId=d,t.push(x)}If.length=0}hr.material=null,hr.geometry.index=null,hr.geometry.attributes={},hr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,u=this._visibility,d=this._multiDrawStarts,h=this._multiDrawCounts,f=this._drawRanges,p=this.perObjectFrustumCulled;p&&(ZS.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),Q0.setFromProjectionMatrix(ZS,e.isWebGPURenderer?fc:Bi));let x=0;if(this.sortObjects){KS.copy(this.matrixWorld).invert(),du.setFromMatrixPosition(r.matrixWorld).applyMatrix4(KS);for(let _=0,g=u.length;_<g;_++)if(u[_]){this.getMatrixAt(_,as),this.getBoundingSphereAt(_,io).applyMatrix4(as);let S=!1;if(p&&(S=!Q0.intersectsSphere(io)),!S){const w=du.distanceTo(io.center);J0.push(f[_],w)}}const y=J0.list,M=this.customSort;M===null?y.sort(a.transparent?VU:HU):M.call(this,y,r);for(let _=0,g=y.length;_<g;_++){const S=y[_];d[x]=S.start*o,h[x]=S.count,x++}J0.reset()}else for(let y=0,M=u.length;y<M;y++)if(u[y]){let _=!1;if(p&&(this.getMatrixAt(y,as),this.getBoundingSphereAt(y,io).applyMatrix4(as),_=!Q0.intersectsSphere(io)),!_){const g=f[y];d[x]=g.start*o,h[x]=g.count,x++}}this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Nr extends gr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $e(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const QS=new z,JS=new z,eM=new gt,ev=new Mc,kf=new pr;class Os extends Bt{constructor(e=new Pt,t=new Nr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)QS.fromBufferAttribute(t,i-1),JS.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=QS.distanceTo(JS);e.setAttribute("lineDistance",new rt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),kf.copy(r.boundingSphere),kf.applyMatrix4(i),kf.radius+=a,e.ray.intersectsSphere(kf)===!1)return;eM.copy(i).invert(),ev.copy(e.ray).applyMatrix4(eM);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,d=new z,h=new z,f=new z,p=new z,x=this.isLineSegments?2:1,y=r.index,M=r.attributes.position;if(y!==null){const _=Math.max(0,s.start),g=Math.min(y.count,s.start+s.count);for(let S=_,w=g-1;S<w;S+=x){const E=y.getX(S),N=y.getX(S+1);if(d.fromBufferAttribute(M,E),h.fromBufferAttribute(M,N),ev.distanceSqToSegment(d,h,p,f)>u)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||t.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,s.start),g=Math.min(M.count,s.start+s.count);for(let S=_,w=g-1;S<w;S+=x){if(d.fromBufferAttribute(M,S),h.fromBufferAttribute(M,S+1),ev.distanceSqToSegment(d,h,p,f)>u)continue;p.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(p);E<e.near||E>e.far||t.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=r.length;i<a;i++){const s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}}const tM=new z,nM=new z;class pa extends Os{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)tM.fromBufferAttribute(t,i),nM.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+tM.distanceTo(nM);e.setAttribute("lineDistance",new rt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class H3 extends Os{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Rb extends gr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const rM=new gt,Jx=new Mc,Df=new pr,Of=new z;class V3 extends Bt{constructor(e=new Pt,t=new Rb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Df.copy(r.boundingSphere),Df.applyMatrix4(i),Df.radius+=a,e.ray.intersectsSphere(Df)===!1)return;rM.copy(i).invert(),Jx.copy(e.ray).applyMatrix4(rM);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,d=r.index,h=r.attributes.position;if(d!==null){const f=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let x=f,y=p;x<y;x++){const M=d.getX(x);Of.fromBufferAttribute(h,M),iM(Of,M,u,i,e,t,this)}}else{const f=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let x=f,y=p;x<y;x++)Of.fromBufferAttribute(h,x),iM(Of,x,u,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,a=r.length;i<a;i++){const s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}}function iM(n,e,t,r,i,a,s){const o=Jx.distanceSqToPoint(n);if(o<t){const u=new z;Jx.closestPointToPoint(n,u),u.applyMatrix4(r);const d=i.ray.origin.distanceTo(u);if(d<i.near||d>i.far)return;a.push({distance:d,distanceToRay:Math.sqrt(o),point:u,index:e,face:null,object:s})}}class qU extends Zt{constructor(e,t,r,i,a,s,o,u,d){super(e,t,r,i,a,s,o,u,d),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Wt,this.magFilter=a!==void 0?a:Wt,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class YU extends Zt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=En,this.minFilter=En,this.generateMipmaps=!1,this.needsUpdate=!0}}class Nm extends Zt{constructor(e,t,r,i,a,s,o,u,d,h,f,p){super(null,s,o,u,d,h,i,a,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class $U extends Nm{constructor(e,t,r,i,a,s){super(e,t,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ln}}class KU extends Nm{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,fa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ZU extends Zt{constructor(e,t,r,i,a,s,o,u,d){super(e,t,r,i,a,s,o,u,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Wi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,u=a-1,d;for(;o<=u;)if(i=Math.floor(o+(u-o)/2),d=r[i]-s,d<0)o=i+1;else if(d>0)u=i-1;else{u=i;break}if(i=u,r[i]===s)return i/(a-1);const h=r[i],f=r[i+1]-h,p=(s-h)/f;return(i+p)/(a-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),s=this.getPoint(i),o=t||(a.isVector2?new Te:new z);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new z,i=[],a=[],s=[],o=new z,u=new gt;for(let x=0;x<=e;x++){const y=x/e;i[x]=this.getTangentAt(y,new z)}a[0]=new z,s[0]=new z;let d=Number.MAX_VALUE;const h=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=d&&(d=h,r.set(1,0,0)),f<=d&&(d=f,r.set(0,1,0)),p<=d&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let x=1;x<=e;x++){if(a[x]=a[x-1].clone(),s[x]=s[x-1].clone(),o.crossVectors(i[x-1],i[x]),o.length()>Number.EPSILON){o.normalize();const y=Math.acos(yn(i[x-1].dot(i[x]),-1,1));a[x].applyMatrix4(u.makeRotationAxis(o,y))}s[x].crossVectors(i[x],a[x])}if(t===!0){let x=Math.acos(yn(a[0].dot(a[e]),-1,1));x/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(x=-x);for(let y=1;y<=e;y++)a[y].applyMatrix4(u.makeRotationAxis(i[y],x*y)),s[y].crossVectors(i[y],a[y])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Lm extends Wi{constructor(e=0,t=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=u}getPoint(e,t){const r=t||new Te,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let u=this.aX+this.xRadius*Math.cos(o),d=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=u-this.aX,x=d-this.aY;u=p*h-x*f+this.aX,d=p*f+x*h+this.aY}return r.set(u,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class G3 extends Lm{constructor(e,t,r,i,a,s){super(e,t,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function Pb(){let n=0,e=0,t=0,r=0;function i(a,s,o,u){n=a,e=o,t=-3*a+3*s-2*o-u,r=2*a-2*s+o+u}return{initCatmullRom:function(a,s,o,u,d){i(s,o,d*(o-a),d*(u-s))},initNonuniformCatmullRom:function(a,s,o,u,d,h,f){let p=(s-a)/d-(o-a)/(d+h)+(o-s)/h,x=(o-s)/h-(u-s)/(h+f)+(u-o)/f;p*=h,x*=h,i(s,o,p,x)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+r*o}}}const Uf=new z,tv=new Pb,nv=new Pb,rv=new Pb;class W3 extends Wi{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new z){const r=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),u=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:u===0&&o===a-1&&(o=a-2,u=1);let d,h;this.closed||o>0?d=i[(o-1)%a]:(Uf.subVectors(i[0],i[1]).add(i[0]),d=Uf);const f=i[o%a],p=i[(o+1)%a];if(this.closed||o+2<a?h=i[(o+2)%a]:(Uf.subVectors(i[a-1],i[a-2]).add(i[a-1]),h=Uf),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let y=Math.pow(d.distanceToSquared(f),x),M=Math.pow(f.distanceToSquared(p),x),_=Math.pow(p.distanceToSquared(h),x);M<1e-4&&(M=1),y<1e-4&&(y=M),_<1e-4&&(_=M),tv.initNonuniformCatmullRom(d.x,f.x,p.x,h.x,y,M,_),nv.initNonuniformCatmullRom(d.y,f.y,p.y,h.y,y,M,_),rv.initNonuniformCatmullRom(d.z,f.z,p.z,h.z,y,M,_)}else this.curveType==="catmullrom"&&(tv.initCatmullRom(d.x,f.x,p.x,h.x,this.tension),nv.initCatmullRom(d.y,f.y,p.y,h.y,this.tension),rv.initCatmullRom(d.z,f.z,p.z,h.z,this.tension));return r.set(tv.calc(u),nv.calc(u),rv.calc(u)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aM(n,e,t,r,i){const a=(r-e)*.5,s=(i-t)*.5,o=n*n,u=n*o;return(2*t-2*r+a+s)*u+(-3*t+3*r-2*a-s)*o+a*n+t}function QU(n,e){const t=1-n;return t*t*e}function JU(n,e){return 2*(1-n)*n*e}function e5(n,e){return n*n*e}function Du(n,e,t,r){return QU(n,e)+JU(n,t)+e5(n,r)}function t5(n,e){const t=1-n;return t*t*t*e}function n5(n,e){const t=1-n;return 3*t*t*n*e}function r5(n,e){return 3*(1-n)*n*n*e}function i5(n,e){return n*n*n*e}function Ou(n,e,t,r,i){return t5(n,e)+n5(n,t)+r5(n,r)+i5(n,i)}class Nb extends Wi{constructor(e=new Te,t=new Te,r=new Te,i=new Te){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Te){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Ou(e,i.x,a.x,s.x,o.x),Ou(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class X3 extends Wi{constructor(e=new z,t=new z,r=new z,i=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new z){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Ou(e,i.x,a.x,s.x,o.x),Ou(e,i.y,a.y,s.y,o.y),Ou(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lb extends Wi{constructor(e=new Te,t=new Te){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Te){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Te){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class q3 extends Wi{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ib extends Wi{constructor(e=new Te,t=new Te,r=new Te){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Te){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Du(e,i.x,a.x,s.x),Du(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kb extends Wi{constructor(e=new z,t=new z,r=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new z){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Du(e,i.x,a.x,s.x),Du(e,i.y,a.y,s.y),Du(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Db extends Wi{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Te){const r=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,u=i[s===0?s:s-1],d=i[s],h=i[s>i.length-2?i.length-1:s+1],f=i[s>i.length-3?i.length-1:s+2];return r.set(aM(o,u.x,d.x,h.x,f.x),aM(o,u.y,d.y,h.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Te().fromArray(i))}return this}}var Zp=Object.freeze({__proto__:null,ArcCurve:G3,CatmullRomCurve3:W3,CubicBezierCurve:Nb,CubicBezierCurve3:X3,EllipseCurve:Lm,LineCurve:Lb,LineCurve3:q3,QuadraticBezierCurve:Ib,QuadraticBezierCurve3:kb,SplineCurve:Db});class Y3 extends Wi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Zp[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],u=o.getLength(),d=u===0?0:1-s/u;return o.getPointAt(d,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,u=s.getPoints(o);for(let d=0;d<u.length;d++){const h=u[d];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new Zp[i.type]().fromJSON(i))}return this}}class md extends Y3{constructor(e){super(),this.type="Path",this.currentPoint=new Te,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Lb(this.currentPoint.clone(),new Te(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new Ib(this.currentPoint.clone(),new Te(e,t),new Te(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,s){const o=new Nb(this.currentPoint.clone(),new Te(e,t),new Te(r,i),new Te(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Db(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,s){const o=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+o,t+u,r,i,a,s),this}absarc(e,t,r,i,a,s){return this.absellipse(e,t,r,r,i,a,s),this}ellipse(e,t,r,i,a,s,o,u){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+d,t+h,r,i,a,s,o,u),this}absellipse(e,t,r,i,a,s,o,u){const d=new Lm(e,t,r,i,a,s,o,u);if(this.curves.length>0){const f=d.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(d);const h=d.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class zd extends Pt{constructor(e=[new Te(0,-.5),new Te(.5,0),new Te(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=yn(i,0,Math.PI*2);const a=[],s=[],o=[],u=[],d=[],h=1/t,f=new z,p=new Te,x=new z,y=new z,M=new z;let _=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,x.x=g*1,x.y=-_,x.z=g*0,M.copy(x),x.normalize(),u.push(x.x,x.y,x.z);break;case e.length-1:u.push(M.x,M.y,M.z);break;default:_=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,x.x=g*1,x.y=-_,x.z=g*0,y.copy(x),x.x+=M.x,x.y+=M.y,x.z+=M.z,x.normalize(),u.push(x.x,x.y,x.z),M.copy(y)}for(let S=0;S<=t;S++){const w=r+S*h*i,E=Math.sin(w),N=Math.cos(w);for(let P=0;P<=e.length-1;P++){f.x=e[P].x*E,f.y=e[P].y,f.z=e[P].x*N,s.push(f.x,f.y,f.z),p.x=S/t,p.y=P/(e.length-1),o.push(p.x,p.y);const L=u[3*P+0]*E,U=u[3*P+1],R=u[3*P+0]*N;d.push(L,U,R)}}for(let S=0;S<t;S++)for(let w=0;w<e.length-1;w++){const E=w+S*e.length,N=E,P=E+e.length,L=E+e.length+1,U=E+1;a.push(N,P,U),a.push(L,U,P)}this.setIndex(a),this.setAttribute("position",new rt(s,3)),this.setAttribute("uv",new rt(o,2)),this.setAttribute("normal",new rt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zd(e.points,e.segments,e.phiStart,e.phiLength)}}class Im extends zd{constructor(e=1,t=1,r=4,i=8){const a=new md;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Im(e.radius,e.length,e.capSegments,e.radialSegments)}}class km extends Pt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],u=[],d=new z,h=new Te;s.push(0,0,0),o.push(0,0,1),u.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const x=r+f/t*i;d.x=e*Math.cos(x),d.y=e*Math.sin(x),s.push(d.x,d.y,d.z),o.push(0,0,1),h.x=(s[p]/e+1)/2,h.y=(s[p+1]/e+1)/2,u.push(h.x,h.y)}for(let f=1;f<=t;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new rt(s,3)),this.setAttribute("normal",new rt(o,3)),this.setAttribute("uv",new rt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new km(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ac extends Pt{constructor(e=1,t=1,r=1,i=32,a=1,s=!1,o=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:u};const d=this;i=Math.floor(i),a=Math.floor(a);const h=[],f=[],p=[],x=[];let y=0;const M=[],_=r/2;let g=0;S(),s===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(h),this.setAttribute("position",new rt(f,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(x,2));function S(){const E=new z,N=new z;let P=0;const L=(t-e)/r;for(let U=0;U<=a;U++){const R=[],I=U/a,G=I*(t-e)+e;for(let Z=0;Z<=i;Z++){const pe=Z/i,Y=pe*u+o,J=Math.sin(Y),de=Math.cos(Y);N.x=G*J,N.y=-I*r+_,N.z=G*de,f.push(N.x,N.y,N.z),E.set(J,L,de).normalize(),p.push(E.x,E.y,E.z),x.push(pe,1-I),R.push(y++)}M.push(R)}for(let U=0;U<i;U++)for(let R=0;R<a;R++){const I=M[R][U],G=M[R+1][U],Z=M[R+1][U+1],pe=M[R][U+1];h.push(I,G,pe),h.push(G,Z,pe),P+=6}d.addGroup(g,P,0),g+=P}function w(E){const N=y,P=new Te,L=new z;let U=0;const R=E===!0?e:t,I=E===!0?1:-1;for(let Z=1;Z<=i;Z++)f.push(0,_*I,0),p.push(0,I,0),x.push(.5,.5),y++;const G=y;for(let Z=0;Z<=i;Z++){const pe=Z/i*u+o,Y=Math.cos(pe),J=Math.sin(pe);L.x=R*J,L.y=_*I,L.z=R*Y,f.push(L.x,L.y,L.z),p.push(0,I,0),P.x=Y*.5+.5,P.y=J*.5*I+.5,x.push(P.x,P.y),y++}for(let Z=0;Z<i;Z++){const pe=N+Z,Y=G+Z;E===!0?h.push(Y,Y+1,pe):h.push(Y+1,Y,pe),U+=3}d.addGroup(g,U,E===!0?1:2),g+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ac(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dm extends Ac{constructor(e=1,t=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Dm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hs extends Pt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],s=[];o(i),d(r),h(),this.setAttribute("position",new rt(a,3)),this.setAttribute("normal",new rt(a.slice(),3)),this.setAttribute("uv",new rt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const w=new z,E=new z,N=new z;for(let P=0;P<t.length;P+=3)x(t[P+0],w),x(t[P+1],E),x(t[P+2],N),u(w,E,N,S)}function u(S,w,E,N){const P=N+1,L=[];for(let U=0;U<=P;U++){L[U]=[];const R=S.clone().lerp(E,U/P),I=w.clone().lerp(E,U/P),G=P-U;for(let Z=0;Z<=G;Z++)Z===0&&U===P?L[U][Z]=R:L[U][Z]=R.clone().lerp(I,Z/G)}for(let U=0;U<P;U++)for(let R=0;R<2*(P-U)-1;R++){const I=Math.floor(R/2);R%2===0?(p(L[U][I+1]),p(L[U+1][I]),p(L[U][I])):(p(L[U][I+1]),p(L[U+1][I+1]),p(L[U+1][I]))}}function d(S){const w=new z;for(let E=0;E<a.length;E+=3)w.x=a[E+0],w.y=a[E+1],w.z=a[E+2],w.normalize().multiplyScalar(S),a[E+0]=w.x,a[E+1]=w.y,a[E+2]=w.z}function h(){const S=new z;for(let w=0;w<a.length;w+=3){S.x=a[w+0],S.y=a[w+1],S.z=a[w+2];const E=_(S)/2/Math.PI+.5,N=g(S)/Math.PI+.5;s.push(E,1-N)}y(),f()}function f(){for(let S=0;S<s.length;S+=6){const w=s[S+0],E=s[S+2],N=s[S+4],P=Math.max(w,E,N),L=Math.min(w,E,N);P>.9&&L<.1&&(w<.2&&(s[S+0]+=1),E<.2&&(s[S+2]+=1),N<.2&&(s[S+4]+=1))}}function p(S){a.push(S.x,S.y,S.z)}function x(S,w){const E=S*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function y(){const S=new z,w=new z,E=new z,N=new z,P=new Te,L=new Te,U=new Te;for(let R=0,I=0;R<a.length;R+=9,I+=6){S.set(a[R+0],a[R+1],a[R+2]),w.set(a[R+3],a[R+4],a[R+5]),E.set(a[R+6],a[R+7],a[R+8]),P.set(s[I+0],s[I+1]),L.set(s[I+2],s[I+3]),U.set(s[I+4],s[I+5]),N.copy(S).add(w).add(E).divideScalar(3);const G=_(N);M(P,I+0,S,G),M(L,I+2,w,G),M(U,I+4,E,G)}}function M(S,w,E,N){N<0&&S.x===1&&(s[w]=S.x-1),E.x===0&&E.z===0&&(s[w]=N/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hs(e.vertices,e.indices,e.radius,e.details)}}class Om extends Hs{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Om(e.radius,e.detail)}}const jf=new z,Ff=new z,iv=new z,zf=new jr;class $3 extends Pt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),i=Math.cos(Co*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,u=[0,0,0],d=["a","b","c"],h=new Array(3),f={},p=[];for(let x=0;x<o;x+=3){a?(u[0]=a.getX(x),u[1]=a.getX(x+1),u[2]=a.getX(x+2)):(u[0]=x,u[1]=x+1,u[2]=x+2);const{a:y,b:M,c:_}=zf;if(y.fromBufferAttribute(s,u[0]),M.fromBufferAttribute(s,u[1]),_.fromBufferAttribute(s,u[2]),zf.getNormal(iv),h[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,h[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let g=0;g<3;g++){const S=(g+1)%3,w=h[g],E=h[S],N=zf[d[g]],P=zf[d[S]],L=`${w}_${E}`,U=`${E}_${w}`;U in f&&f[U]?(iv.dot(f[U].normal)<=i&&(p.push(N.x,N.y,N.z),p.push(P.x,P.y,P.z)),f[U]=null):L in f||(f[L]={index0:u[g],index1:u[S],normal:iv.clone()})}}for(const x in f)if(f[x]){const{index0:y,index1:M}=f[x];jf.fromBufferAttribute(s,y),Ff.fromBufferAttribute(s,M),p.push(jf.x,jf.y,jf.z),p.push(Ff.x,Ff.y,Ff.z)}this.setAttribute("position",new rt(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Po extends md{constructor(e){super(e),this.uuid=ii(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new md().fromJSON(i))}return this}}const a5={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=K3(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,u,d,h,f,p,x;if(r&&(a=u5(n,e,a,t)),n.length>80*t){o=d=n[0],u=h=n[1];for(let y=t;y<i;y+=t)f=n[y],p=n[y+1],f<o&&(o=f),p<u&&(u=p),f>d&&(d=f),p>h&&(h=p);x=Math.max(d-o,h-u),x=x!==0?32767/x:0}return gd(a,s,t,o,u,x,0),s}};function K3(n,e,t,r,i){let a,s;if(i===_5(n,e,t,r)>0)for(a=e;a<t;a+=r)s=sM(a,n[a],n[a+1],s);else for(a=t-r;a>=e;a-=r)s=sM(a,n[a],n[a+1],s);return s&&Um(s,s.next)&&(xd(s),s=s.next),s}function Fo(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Um(t,t.next)||hn(t.prev,t,t.next)===0)){if(xd(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function gd(n,e,t,r,i,a,s){if(!n)return;!s&&a&&m5(n,r,i,a);let o=n,u,d;for(;n.prev!==n.next;){if(u=n.prev,d=n.next,a?o5(n,r,i,a):s5(n)){e.push(u.i/t|0),e.push(n.i/t|0),e.push(d.i/t|0),xd(n),n=d.next,o=d.next;continue}if(n=d,n===o){s?s===1?(n=l5(Fo(n),e,t),gd(n,e,t,r,i,a,2)):s===2&&c5(n,e,t,r,i,a):gd(Fo(n),e,t,r,i,a,1);break}}}function s5(n){const e=n.prev,t=n,r=n.next;if(hn(e,t,r)>=0)return!1;const i=e.x,a=t.x,s=r.x,o=e.y,u=t.y,d=r.y,h=i<a?i<s?i:s:a<s?a:s,f=o<u?o<d?o:d:u<d?u:d,p=i>a?i>s?i:s:a>s?a:s,x=o>u?o>d?o:d:u>d?u:d;let y=r.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=x&&Yl(i,o,a,u,s,d,y.x,y.y)&&hn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function o5(n,e,t,r){const i=n.prev,a=n,s=n.next;if(hn(i,a,s)>=0)return!1;const o=i.x,u=a.x,d=s.x,h=i.y,f=a.y,p=s.y,x=o<u?o<d?o:d:u<d?u:d,y=h<f?h<p?h:p:f<p?f:p,M=o>u?o>d?o:d:u>d?u:d,_=h>f?h>p?h:p:f>p?f:p,g=ey(x,y,e,t,r),S=ey(M,_,e,t,r);let w=n.prevZ,E=n.nextZ;for(;w&&w.z>=g&&E&&E.z<=S;){if(w.x>=x&&w.x<=M&&w.y>=y&&w.y<=_&&w!==i&&w!==s&&Yl(o,h,u,f,d,p,w.x,w.y)&&hn(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=x&&E.x<=M&&E.y>=y&&E.y<=_&&E!==i&&E!==s&&Yl(o,h,u,f,d,p,E.x,E.y)&&hn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=g;){if(w.x>=x&&w.x<=M&&w.y>=y&&w.y<=_&&w!==i&&w!==s&&Yl(o,h,u,f,d,p,w.x,w.y)&&hn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=S;){if(E.x>=x&&E.x<=M&&E.y>=y&&E.y<=_&&E!==i&&E!==s&&Yl(o,h,u,f,d,p,E.x,E.y)&&hn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function l5(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!Um(i,a)&&Z3(i,r,r.next,a)&&vd(i,a)&&vd(a,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(a.i/t|0),xd(r),xd(r.next),r=n=a),r=r.next}while(r!==n);return Fo(r)}function c5(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&x5(s,o)){let u=Q3(s,o);s=Fo(s,s.next),u=Fo(u,u.next),gd(s,e,t,r,i,a,0),gd(u,e,t,r,i,a,0);return}o=o.next}s=s.next}while(s!==n)}function u5(n,e,t,r){const i=[];let a,s,o,u,d;for(a=0,s=e.length;a<s;a++)o=e[a]*r,u=a<s-1?e[a+1]*r:n.length,d=K3(n,o,u,r,!1),d===d.next&&(d.steiner=!0),i.push(v5(d));for(i.sort(d5),a=0;a<i.length;a++)t=h5(i[a],t);return t}function d5(n,e){return n.x-e.x}function h5(n,e){const t=f5(n,e);if(!t)return e;const r=Q3(t,n);return Fo(r,r.next),Fo(t,t.next)}function f5(n,e){let t=e,r=-1/0,i;const a=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const p=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=a&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===a))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,u=i.x,d=i.y;let h=1/0,f;t=i;do a>=t.x&&t.x>=u&&a!==t.x&&Yl(s<d?a:r,s,u,d,s<d?r:a,s,t.x,t.y)&&(f=Math.abs(s-t.y)/(a-t.x),vd(t,n)&&(f<h||f===h&&(t.x>i.x||t.x===i.x&&p5(i,t)))&&(i=t,h=f)),t=t.next;while(t!==o);return i}function p5(n,e){return hn(n.prev,n,e.prev)<0&&hn(e.next,n,n.next)<0}function m5(n,e,t,r){let i=n;do i.z===0&&(i.z=ey(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,g5(i)}function g5(n){let e,t,r,i,a,s,o,u,d=1;do{for(t=n,n=null,a=null,s=0;t;){for(s++,r=t,o=0,e=0;e<d&&(o++,r=r.nextZ,!!r);e++);for(u=d;o>0||u>0&&r;)o!==0&&(u===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,d*=2}while(s>1);return n}function ey(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function v5(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Yl(n,e,t,r,i,a,s,o){return(i-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(r-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(r-o)}function x5(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!y5(n,e)&&(vd(n,e)&&vd(e,n)&&b5(n,e)&&(hn(n.prev,n,e.prev)||hn(n,e.prev,e))||Um(n,e)&&hn(n.prev,n,n.next)>0&&hn(e.prev,e,e.next)>0)}function hn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Um(n,e){return n.x===e.x&&n.y===e.y}function Z3(n,e,t,r){const i=Hf(hn(n,e,t)),a=Hf(hn(n,e,r)),s=Hf(hn(t,r,n)),o=Hf(hn(t,r,e));return!!(i!==a&&s!==o||i===0&&Bf(n,t,e)||a===0&&Bf(n,r,e)||s===0&&Bf(t,n,r)||o===0&&Bf(t,e,r))}function Bf(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Hf(n){return n>0?1:n<0?-1:0}function y5(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Z3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function vd(n,e){return hn(n.prev,n,n.next)<0?hn(n,e,n.next)>=0&&hn(n,n.prev,e)>=0:hn(n,e,n.prev)<0||hn(n,n.next,e)<0}function b5(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Q3(n,e){const t=new ty(n.i,n.x,n.y),r=new ty(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function sM(n,e,t,r){const i=new ty(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function xd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ty(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _5(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class ha{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return ha.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];oM(e),lM(r,e);let s=e.length;t.forEach(oM);for(let u=0;u<t.length;u++)i.push(s),s+=t[u].length,lM(r,t[u]);const o=a5.triangulate(r,i);for(let u=0;u<o.length;u+=3)a.push(o.slice(u,u+3));return a}}function oM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function lM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class jm extends Pt{constructor(e=new Po([new Te(.5,.5),new Te(-.5,.5),new Te(-.5,-.5),new Te(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,u=e.length;o<u;o++){const d=e[o];s(d)}this.setAttribute("position",new rt(i,3)),this.setAttribute("uv",new rt(a,2)),this.computeVertexNormals();function s(o){const u=[],d=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:x-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:w5;let w,E=!1,N,P,L,U;g&&(w=g.getSpacedPoints(h),E=!0,p=!1,N=g.computeFrenetFrames(h,!1),P=new z,L=new z,U=new z),p||(_=0,x=0,y=0,M=0);const R=o.extractPoints(d);let I=R.shape;const G=R.holes;if(!ha.isClockWise(I)){I=I.reverse();for(let ye=0,X=G.length;ye<X;ye++){const Ue=G[ye];ha.isClockWise(Ue)&&(G[ye]=Ue.reverse())}}const Z=ha.triangulateShape(I,G),pe=I;for(let ye=0,X=G.length;ye<X;ye++){const Ue=G[ye];I=I.concat(Ue)}function Y(ye,X,Ue){return X||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().addScaledVector(X,Ue)}const J=I.length,de=Z.length;function ge(ye,X,Ue){let Me,we,ke;const be=ye.x-X.x,Ye=ye.y-X.y,F=Ue.x-ye.x,k=Ue.y-ye.y,ce=be*be+Ye*Ye,Ne=be*k-Ye*F;if(Math.abs(Ne)>Number.EPSILON){const Ee=Math.sqrt(ce),Le=Math.sqrt(F*F+k*k),nt=X.x-Ye/Ee,He=X.y+be/Ee,Ke=Ue.x-k/Le,lt=Ue.y+F/Le,vt=((Ke-nt)*k-(lt-He)*F)/(be*k-Ye*F);Me=nt+be*vt-ye.x,we=He+Ye*vt-ye.y;const Pe=Me*Me+we*we;if(Pe<=2)return new Te(Me,we);ke=Math.sqrt(Pe/2)}else{let Ee=!1;be>Number.EPSILON?F>Number.EPSILON&&(Ee=!0):be<-Number.EPSILON?F<-Number.EPSILON&&(Ee=!0):Math.sign(Ye)===Math.sign(k)&&(Ee=!0),Ee?(Me=-Ye,we=be,ke=Math.sqrt(ce)):(Me=be,we=Ye,ke=Math.sqrt(ce/2))}return new Te(Me/ke,we/ke)}const H=[];for(let ye=0,X=pe.length,Ue=X-1,Me=ye+1;ye<X;ye++,Ue++,Me++)Ue===X&&(Ue=0),Me===X&&(Me=0),H[ye]=ge(pe[ye],pe[Ue],pe[Me]);const q=[];let K,se=H.concat();for(let ye=0,X=G.length;ye<X;ye++){const Ue=G[ye];K=[];for(let Me=0,we=Ue.length,ke=we-1,be=Me+1;Me<we;Me++,ke++,be++)ke===we&&(ke=0),be===we&&(be=0),K[Me]=ge(Ue[Me],Ue[ke],Ue[be]);q.push(K),se=se.concat(K)}for(let ye=0;ye<_;ye++){const X=ye/_,Ue=x*Math.cos(X*Math.PI/2),Me=y*Math.sin(X*Math.PI/2)+M;for(let we=0,ke=pe.length;we<ke;we++){const be=Y(pe[we],H[we],Me);De(be.x,be.y,-Ue)}for(let we=0,ke=G.length;we<ke;we++){const be=G[we];K=q[we];for(let Ye=0,F=be.length;Ye<F;Ye++){const k=Y(be[Ye],K[Ye],Me);De(k.x,k.y,-Ue)}}}const me=y+M;for(let ye=0;ye<J;ye++){const X=p?Y(I[ye],se[ye],me):I[ye];E?(L.copy(N.normals[0]).multiplyScalar(X.x),P.copy(N.binormals[0]).multiplyScalar(X.y),U.copy(w[0]).add(L).add(P),De(U.x,U.y,U.z)):De(X.x,X.y,0)}for(let ye=1;ye<=h;ye++)for(let X=0;X<J;X++){const Ue=p?Y(I[X],se[X],me):I[X];E?(L.copy(N.normals[ye]).multiplyScalar(Ue.x),P.copy(N.binormals[ye]).multiplyScalar(Ue.y),U.copy(w[ye]).add(L).add(P),De(U.x,U.y,U.z)):De(Ue.x,Ue.y,f/h*ye)}for(let ye=_-1;ye>=0;ye--){const X=ye/_,Ue=x*Math.cos(X*Math.PI/2),Me=y*Math.sin(X*Math.PI/2)+M;for(let we=0,ke=pe.length;we<ke;we++){const be=Y(pe[we],H[we],Me);De(be.x,be.y,f+Ue)}for(let we=0,ke=G.length;we<ke;we++){const be=G[we];K=q[we];for(let Ye=0,F=be.length;Ye<F;Ye++){const k=Y(be[Ye],K[Ye],Me);E?De(k.x,k.y+w[h-1].y,w[h-1].x+Ue):De(k.x,k.y,f+Ue)}}}ie(),xe();function ie(){const ye=i.length/3;if(p){let X=0,Ue=J*X;for(let Me=0;Me<de;Me++){const we=Z[Me];Ve(we[2]+Ue,we[1]+Ue,we[0]+Ue)}X=h+_*2,Ue=J*X;for(let Me=0;Me<de;Me++){const we=Z[Me];Ve(we[0]+Ue,we[1]+Ue,we[2]+Ue)}}else{for(let X=0;X<de;X++){const Ue=Z[X];Ve(Ue[2],Ue[1],Ue[0])}for(let X=0;X<de;X++){const Ue=Z[X];Ve(Ue[0]+J*h,Ue[1]+J*h,Ue[2]+J*h)}}r.addGroup(ye,i.length/3-ye,0)}function xe(){const ye=i.length/3;let X=0;ze(pe,X),X+=pe.length;for(let Ue=0,Me=G.length;Ue<Me;Ue++){const we=G[Ue];ze(we,X),X+=we.length}r.addGroup(ye,i.length/3-ye,1)}function ze(ye,X){let Ue=ye.length;for(;--Ue>=0;){const Me=Ue;let we=Ue-1;we<0&&(we=ye.length-1);for(let ke=0,be=h+_*2;ke<be;ke++){const Ye=J*ke,F=J*(ke+1),k=X+Me+Ye,ce=X+we+Ye,Ne=X+we+F,Ee=X+Me+F;ut(k,ce,Ne,Ee)}}}function De(ye,X,Ue){u.push(ye),u.push(X),u.push(Ue)}function Ve(ye,X,Ue){at(ye),at(X),at(Ue);const Me=i.length/3,we=S.generateTopUV(r,i,Me-3,Me-2,Me-1);Ge(we[0]),Ge(we[1]),Ge(we[2])}function ut(ye,X,Ue,Me){at(ye),at(X),at(Me),at(X),at(Ue),at(Me);const we=i.length/3,ke=S.generateSideWallUV(r,i,we-6,we-3,we-2,we-1);Ge(ke[0]),Ge(ke[1]),Ge(ke[3]),Ge(ke[1]),Ge(ke[2]),Ge(ke[3])}function at(ye){i.push(u[ye*3+0]),i.push(u[ye*3+1]),i.push(u[ye*3+2])}function Ge(ye){a.push(ye.x),a.push(ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return S5(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Zp[i.type]().fromJSON(i)),new jm(r,e.options)}}const w5={generateTopUV:function(n,e,t,r,i){const a=e[t*3],s=e[t*3+1],o=e[r*3],u=e[r*3+1],d=e[i*3],h=e[i*3+1];return[new Te(a,s),new Te(o,u),new Te(d,h)]},generateSideWallUV:function(n,e,t,r,i,a){const s=e[t*3],o=e[t*3+1],u=e[t*3+2],d=e[r*3],h=e[r*3+1],f=e[r*3+2],p=e[i*3],x=e[i*3+1],y=e[i*3+2],M=e[a*3],_=e[a*3+1],g=e[a*3+2];return Math.abs(o-h)<Math.abs(s-d)?[new Te(s,1-u),new Te(d,1-f),new Te(p,1-y),new Te(M,1-g)]:[new Te(o,1-u),new Te(h,1-f),new Te(x,1-y),new Te(_,1-g)]}};function S5(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Bd extends Hs{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bd(e.radius,e.detail)}}class Hd extends Hs{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hd(e.radius,e.detail)}}class Fm extends Pt{constructor(e=.5,t=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],u=[],d=[],h=[];let f=e;const p=(t-e)/i,x=new z,y=new Te;for(let M=0;M<=i;M++){for(let _=0;_<=r;_++){const g=a+_/r*s;x.x=f*Math.cos(g),x.y=f*Math.sin(g),u.push(x.x,x.y,x.z),d.push(0,0,1),y.x=(x.x/t+1)/2,y.y=(x.y/t+1)/2,h.push(y.x,y.y)}f+=p}for(let M=0;M<i;M++){const _=M*(r+1);for(let g=0;g<r;g++){const S=g+_,w=S,E=S+r+1,N=S+r+2,P=S+1;o.push(w,E,P),o.push(E,N,P)}}this.setIndex(o),this.setAttribute("position",new rt(u,3)),this.setAttribute("normal",new rt(d,3)),this.setAttribute("uv",new rt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zm extends Pt{constructor(e=new Po([new Te(0,.5),new Te(-.5,-.5),new Te(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],s=[];let o=0,u=0;if(Array.isArray(e)===!1)d(e);else for(let h=0;h<e.length;h++)d(e[h]),this.addGroup(o,u,h),o+=u,u=0;this.setIndex(r),this.setAttribute("position",new rt(i,3)),this.setAttribute("normal",new rt(a,3)),this.setAttribute("uv",new rt(s,2));function d(h){const f=i.length/3,p=h.extractPoints(t);let x=p.shape;const y=p.holes;ha.isClockWise(x)===!1&&(x=x.reverse());for(let _=0,g=y.length;_<g;_++){const S=y[_];ha.isClockWise(S)===!0&&(y[_]=S.reverse())}const M=ha.triangulateShape(x,y);for(let _=0,g=y.length;_<g;_++){const S=y[_];x=x.concat(S)}for(let _=0,g=x.length;_<g;_++){const S=x[_];i.push(S.x,S.y,0),a.push(0,0,1),s.push(S.x,S.y)}for(let _=0,g=M.length;_<g;_++){const S=M[_],w=S[0]+f,E=S[1]+f,N=S[2]+f;r.push(w,E,N),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return M5(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];r.push(s)}return new zm(r,e.curveSegments)}}function M5(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Vd extends Pt{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const u=Math.min(s+o,Math.PI);let d=0;const h=[],f=new z,p=new z,x=[],y=[],M=[],_=[];for(let g=0;g<=r;g++){const S=[],w=g/r;let E=0;g===0&&s===0?E=.5/t:g===r&&u===Math.PI&&(E=-.5/t);for(let N=0;N<=t;N++){const P=N/t;f.x=-e*Math.cos(i+P*a)*Math.sin(s+w*o),f.y=e*Math.cos(s+w*o),f.z=e*Math.sin(i+P*a)*Math.sin(s+w*o),y.push(f.x,f.y,f.z),p.copy(f).normalize(),M.push(p.x,p.y,p.z),_.push(P+E,1-w),S.push(d++)}h.push(S)}for(let g=0;g<r;g++)for(let S=0;S<t;S++){const w=h[g][S+1],E=h[g][S],N=h[g+1][S],P=h[g+1][S+1];(g!==0||s>0)&&x.push(w,E,P),(g!==r-1||u<Math.PI)&&x.push(E,N,P)}this.setIndex(x),this.setAttribute("position",new rt(y,3)),this.setAttribute("normal",new rt(M,3)),this.setAttribute("uv",new rt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Bm extends Hs{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bm(e.radius,e.detail)}}class Hm extends Pt{constructor(e=1,t=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],u=[],d=[],h=new z,f=new z,p=new z;for(let x=0;x<=r;x++)for(let y=0;y<=i;y++){const M=y/i*a,_=x/r*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(M),f.y=(e+t*Math.cos(_))*Math.sin(M),f.z=t*Math.sin(_),o.push(f.x,f.y,f.z),h.x=e*Math.cos(M),h.y=e*Math.sin(M),p.subVectors(f,h).normalize(),u.push(p.x,p.y,p.z),d.push(y/i),d.push(x/r)}for(let x=1;x<=r;x++)for(let y=1;y<=i;y++){const M=(i+1)*x+y-1,_=(i+1)*(x-1)+y-1,g=(i+1)*(x-1)+y,S=(i+1)*x+y;s.push(M,_,S),s.push(_,g,S)}this.setIndex(s),this.setAttribute("position",new rt(o,3)),this.setAttribute("normal",new rt(u,3)),this.setAttribute("uv",new rt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Vm extends Pt{constructor(e=1,t=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],u=[],d=[],h=[],f=new z,p=new z,x=new z,y=new z,M=new z,_=new z,g=new z;for(let w=0;w<=r;++w){const E=w/r*a*Math.PI*2;S(E,a,s,e,x),S(E+.01,a,s,e,y),_.subVectors(y,x),g.addVectors(y,x),M.crossVectors(_,g),g.crossVectors(M,_),M.normalize(),g.normalize();for(let N=0;N<=i;++N){const P=N/i*Math.PI*2,L=-t*Math.cos(P),U=t*Math.sin(P);f.x=x.x+(L*g.x+U*M.x),f.y=x.y+(L*g.y+U*M.y),f.z=x.z+(L*g.z+U*M.z),u.push(f.x,f.y,f.z),p.subVectors(f,x).normalize(),d.push(p.x,p.y,p.z),h.push(w/r),h.push(N/i)}}for(let w=1;w<=r;w++)for(let E=1;E<=i;E++){const N=(i+1)*(w-1)+(E-1),P=(i+1)*w+(E-1),L=(i+1)*w+E,U=(i+1)*(w-1)+E;o.push(N,P,U),o.push(P,L,U)}this.setIndex(o),this.setAttribute("position",new rt(u,3)),this.setAttribute("normal",new rt(d,3)),this.setAttribute("uv",new rt(h,2));function S(w,E,N,P,L){const U=Math.cos(w),R=Math.sin(w),I=N/E*w,G=Math.cos(I);L.x=P*(2+G)*.5*U,L.y=P*(2+G)*R*.5,L.z=P*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gm extends Pt{constructor(e=new kb(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new z,u=new z,d=new Te;let h=new z;const f=[],p=[],x=[],y=[];M(),this.setIndex(y),this.setAttribute("position",new rt(f,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(x,2));function M(){for(let w=0;w<t;w++)_(w);_(a===!1?t:0),S(),g()}function _(w){h=e.getPointAt(w/t,h);const E=s.normals[w],N=s.binormals[w];for(let P=0;P<=i;P++){const L=P/i*Math.PI*2,U=Math.sin(L),R=-Math.cos(L);u.x=R*E.x+U*N.x,u.y=R*E.y+U*N.y,u.z=R*E.z+U*N.z,u.normalize(),p.push(u.x,u.y,u.z),o.x=h.x+r*u.x,o.y=h.y+r*u.y,o.z=h.z+r*u.z,f.push(o.x,o.y,o.z)}}function g(){for(let w=1;w<=t;w++)for(let E=1;E<=i;E++){const N=(i+1)*(w-1)+(E-1),P=(i+1)*w+(E-1),L=(i+1)*w+E,U=(i+1)*(w-1)+E;y.push(N,P,U),y.push(P,L,U)}}function S(){for(let w=0;w<=t;w++)for(let E=0;E<=i;E++)d.x=w/t,d.y=E/i,x.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gm(new Zp[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class J3 extends Pt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new z,a=new z;if(e.index!==null){const s=e.attributes.position,o=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:o.count,materialIndex:0}]);for(let d=0,h=u.length;d<h;++d){const f=u[d],p=f.start,x=f.count;for(let y=p,M=p+x;y<M;y+=3)for(let _=0;_<3;_++){const g=o.getX(y+_),S=o.getX(y+(_+1)%3);i.fromBufferAttribute(s,g),a.fromBufferAttribute(s,S),cM(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,u=s.count/3;o<u;o++)for(let d=0;d<3;d++){const h=3*o+d,f=3*o+(d+1)%3;i.fromBufferAttribute(s,h),a.fromBufferAttribute(s,f),cM(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new rt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function cM(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var uM=Object.freeze({__proto__:null,BoxGeometry:Go,CapsuleGeometry:Im,CircleGeometry:km,ConeGeometry:Dm,CylinderGeometry:Ac,DodecahedronGeometry:Om,EdgesGeometry:$3,ExtrudeGeometry:jm,IcosahedronGeometry:Bd,LatheGeometry:zd,OctahedronGeometry:Hd,PlaneGeometry:Wo,PolyhedronGeometry:Hs,RingGeometry:Fm,ShapeGeometry:zm,SphereGeometry:Vd,TetrahedronGeometry:Bm,TorusGeometry:Hm,TorusKnotGeometry:Vm,TubeGeometry:Gm,WireframeGeometry:J3});class eA extends gr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class tA extends ci{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ob extends gr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bs,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ub extends Ob{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Te(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nA extends gr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bs,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Id,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rA extends gr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bs,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class iA extends gr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bs,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aA extends gr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bs,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Id,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sA extends gr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bs,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oA extends Nr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function So(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function lA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function cA(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function ny(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let u=0;u!==e;++u)i[s++]=n[o+u]}return i}function jb(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push.apply(t,s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}function T5(n,e,t,r,i=30){const a=n.clone();a.name=e;const s=[];for(let u=0;u<a.tracks.length;++u){const d=a.tracks[u],h=d.getValueSize(),f=[],p=[];for(let x=0;x<d.times.length;++x){const y=d.times[x]*i;if(!(y<t||y>=r)){f.push(d.times[x]);for(let M=0;M<h;++M)p.push(d.values[x*h+M])}}f.length!==0&&(d.times=So(f,d.times.constructor),d.values=So(p,d.values.constructor),s.push(d))}a.tracks=s;let o=1/0;for(let u=0;u<a.tracks.length;++u)o>a.tracks[u].times[0]&&(o=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*o);return a.resetDuration(),a}function E5(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=t.tracks[s],u=o.ValueTypeName;if(u==="bool"||u==="string")continue;const d=n.tracks.find(function(g){return g.name===o.name&&g.ValueTypeName===u});if(d===void 0)continue;let h=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const x=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=x/3);const y=o.times.length-1;let M;if(a<=o.times[0]){const g=h,S=f-h;M=o.values.slice(g,S)}else if(a>=o.times[y]){const g=y*f+h,S=g+f-h;M=o.values.slice(g,S)}else{const g=o.createInterpolant(),S=h,w=f-h;g.evaluate(a),M=g.resultBuffer.slice(S,w)}u==="quaternion"&&new Gr().fromArray(M).normalize().conjugate().toArray(M);const _=d.times.length;for(let g=0;g<_;++g){const S=g*x+p;if(u==="quaternion")Gr.multiplyQuaternionsFlat(d.values,S,M,0,d.values,S);else{const w=x-p*2;for(let E=0;E<w;++E)d.values[S+E]-=M[E]}}}return n.blendMode=pb,n}const A5={convertArray:So,isTypedArray:lA,getKeyframeOrder:cA,sortedArray:ny,flattenJSON:jb,subclip:T5,makeClipAdditive:E5};class Gd{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let u=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===u)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class uA extends Gd{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yo,endingEnd:yo}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],u=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case bo:a=e,o=2*t-r;break;case cd:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(u===void 0)switch(this.getSettings_().endingEnd){case bo:s=e,u=2*r-t;break;case cd:s=1,u=r+i[1]-i[0];break;default:s=e-1,u=t}const d=(r-t)*.5,h=this.valueSize;this._weightPrev=d/(t-o),this._weightNext=d/(u-r),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,d=u-o,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,x=this._weightNext,y=(r-t)/(i-t),M=y*y,_=M*y,g=-p*_+2*p*M-p*y,S=(1+p)*_+(-1.5-2*p)*M+(-.5+p)*y+1,w=(-1-x)*_+(1.5+x)*M+.5*y,E=x*_-x*M;for(let N=0;N!==o;++N)a[N]=g*s[h+N]+S*s[d+N]+w*s[u+N]+E*s[f+N];return a}}class Fb extends Gd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,d=u-o,h=(r-t)/(i-t),f=1-h;for(let p=0;p!==o;++p)a[p]=s[d+p]*f+s[u+p]*h;return a}}class dA extends Gd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Xi{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=So(t,this.TimeBufferType),this.values=So(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:So(e.times,Array),values:So(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new dA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Fb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new uA(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case od:t=this.InterpolantFactoryMethodDiscrete;break;case ld:t=this.InterpolantFactoryMethodLinear;break;case vp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return od;case this.InterpolantFactoryMethodLinear:return ld;case this.InterpolantFactoryMethodSmooth:return vp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const u=r[o];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,u),e=!1;break}if(s!==null&&s>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,u,s),e=!1;break}s=u}if(i!==void 0&&lA(i))for(let o=0,u=i.length;o!==u;++o){const d=i[o];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===vp,a=e.length-1;let s=1;for(let o=1;o<a;++o){let u=!1;const d=e[o],h=e[o+1];if(d!==h&&(o!==1||d!==e[0]))if(i)u=!0;else{const f=o*r,p=f-r,x=f+r;for(let y=0;y!==r;++y){const M=t[f+y];if(M!==t[p+y]||M!==t[x+y]){u=!0;break}}}if(u){if(o!==s){e[s]=e[o];const f=o*r,p=s*r;for(let x=0;x!==r;++x)t[p+x]=t[f+x]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,u=s*r,d=0;d!==r;++d)t[u+d]=t[o+d];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Xi.prototype.TimeBufferType=Float32Array;Xi.prototype.ValueBufferType=Float32Array;Xi.prototype.DefaultInterpolation=ld;class Xo extends Xi{}Xo.prototype.ValueTypeName="bool";Xo.prototype.ValueBufferType=Array;Xo.prototype.DefaultInterpolation=od;Xo.prototype.InterpolantFactoryMethodLinear=void 0;Xo.prototype.InterpolantFactoryMethodSmooth=void 0;class zb extends Xi{}zb.prototype.ValueTypeName="color";class yd extends Xi{}yd.prototype.ValueTypeName="number";class hA extends Gd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=(r-t)/(i-t);let d=e*o;for(let h=d+o;d!==h;d+=4)Gr.slerpFlat(a,0,s,d-o,s,d,u);return a}}class Cc extends Xi{InterpolantFactoryMethodLinear(e){return new hA(this.times,this.values,this.getValueSize(),e)}}Cc.prototype.ValueTypeName="quaternion";Cc.prototype.DefaultInterpolation=ld;Cc.prototype.InterpolantFactoryMethodSmooth=void 0;class qo extends Xi{}qo.prototype.ValueTypeName="string";qo.prototype.ValueBufferType=Array;qo.prototype.DefaultInterpolation=od;qo.prototype.InterpolantFactoryMethodLinear=void 0;qo.prototype.InterpolantFactoryMethodSmooth=void 0;class bd extends Xi{}bd.prototype.ValueTypeName="vector";class _d{constructor(e,t=-1,r,i=wm){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ii(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(R5(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)t.push(Xi.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let u=[],d=[];u.push((o+a-1)%a,o,(o+1)%a),d.push(0,1,0);const h=cA(u);u=ny(u,1,h),d=ny(d,1,h),!i&&u[0]===0&&(u.push(a),d.push(d[0])),s.push(new yd(".morphTargetInfluences["+t[o].name+"]",u,d).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,u=e.length;o<u;o++){const d=e[o],h=d.name.match(a);if(h&&h.length>1){const f=h[1];let p=i[f];p||(i[f]=p=[]),p.push(d)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,p,x,y){if(p.length!==0){const M=[],_=[];jb(p,M,_,x),M.length!==0&&y.push(new h(f,M,_))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let u=e.length||-1;const d=e.hierarchy||[];for(let h=0;h<d.length;h++){const f=d[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let x;for(x=0;x<f.length;x++)if(f[x].morphTargets)for(let y=0;y<f[x].morphTargets.length;y++)p[f[x].morphTargets[y]]=-1;for(const y in p){const M=[],_=[];for(let g=0;g!==f[x].morphTargets.length;++g){const S=f[x];M.push(S.time),_.push(S.morphTarget===y?1:0)}i.push(new yd(".morphTargetInfluence["+y+"]",M,_))}u=p.length*s}else{const p=".bones["+t[h].name+"]";r(bd,p+".position",f,"pos",i),r(Cc,p+".quaternion",f,"rot",i),r(bd,p+".scale",f,"scl",i)}}return i.length===0?null:new this(a,u,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function C5(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yd;case"vector":case"vector2":case"vector3":case"vector4":return bd;case"color":return zb;case"quaternion":return Cc;case"bool":case"boolean":return Xo;case"string":return qo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function R5(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=C5(n.type);if(n.times===void 0){const t=[],r=[];jb(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ia={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Wm{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,u;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){o++,a===!1&&i.onStart!==void 0&&i.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return u?u(h):h},this.setURLModifier=function(h){return u=h,this},this.addHandler=function(h,f){return d.push(h,f),this},this.removeHandler=function(h){const f=d.indexOf(h);return f!==-1&&d.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=d.length;f<p;f+=2){const x=d[f],y=d[f+1];if(x.global&&(x.lastIndex=0),x.test(h))return y}return null}}}const fA=new Wm;class Lr{constructor(e){this.manager=e!==void 0?e:fA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Lr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Aa={};class P5 extends Error{constructor(e,t){super(e),this.response=t}}class ai extends Lr{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Ia.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Aa[e]!==void 0){Aa[e].push({onLoad:t,onProgress:r,onError:i});return}Aa[e]=[],Aa[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,u=this.responseType;fetch(s).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const h=Aa[e],f=d.body.getReader(),p=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),x=p?parseInt(p):0,y=x!==0;let M=0;const _=new ReadableStream({start(g){S();function S(){f.read().then(({done:w,value:E})=>{if(w)g.close();else{M+=E.byteLength;const N=new ProgressEvent("progress",{lengthComputable:y,loaded:M,total:x});for(let P=0,L=h.length;P<L;P++){const U=h[P];U.onProgress&&U.onProgress(N)}g.enqueue(E),S()}})}}});return new Response(_)}else throw new P5(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return d.json();default:if(o===void 0)return d.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),f=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(f);return d.arrayBuffer().then(x=>p.decode(x))}}}).then(d=>{Ia.add(e,d);const h=Aa[e];delete Aa[e];for(let f=0,p=h.length;f<p;f++){const x=h[f];x.onLoad&&x.onLoad(d)}}).catch(d=>{const h=Aa[e];if(h===void 0)throw this.manager.itemError(e),d;delete Aa[e];for(let f=0,p=h.length;f<p;f++){const x=h[f];x.onError&&x.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class N5 extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new ai(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=_d.parse(e[r]);t.push(i)}return t}}class L5 extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=this,s=[],o=new Nm,u=new ai(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let d=0;function h(f){u.load(e[f],function(p){const x=a.parse(p,!0);s[f]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},d+=1,d===6&&(x.mipmapCount===1&&(o.minFilter=Wt),o.image=s,o.format=x.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else u.load(e,function(f){const p=a.parse(f,!0);if(p.isCubemap){const x=p.mipmaps.length/p.mipmapCount;for(let y=0;y<x;y++){s[y]={mipmaps:[]};for(let M=0;M<p.mipmapCount;M++)s[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+M]),s[y].format=p.format,s[y].width=p.width,s[y].height=p.height}o.image=s}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=Wt),o.format=p.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}class wd extends Lr{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Ia.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=pd("img");function u(){h(),Ia.add(e,this),t&&t(this),a.manager.itemEnd(e)}function d(f){h(),i&&i(f),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",u,!1),o.removeEventListener("error",d,!1)}return o.addEventListener("load",u,!1),o.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class pA extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=new Ud;a.colorSpace=kn;const s=new wd(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function u(d){s.load(e[d],function(h){a.images[d]=h,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let d=0;d<e.length;++d)u(d);return a}}class Bb extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Ps,o=new ai(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(u){let d;try{d=a.parse(u)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}d.image!==void 0?s.image=d.image:d.data!==void 0&&(s.image.width=d.width,s.image.height=d.height,s.image.data=d.data),s.wrapS=d.wrapS!==void 0?d.wrapS:ln,s.wrapT=d.wrapT!==void 0?d.wrapT:ln,s.magFilter=d.magFilter!==void 0?d.magFilter:Wt,s.minFilter=d.minFilter!==void 0?d.minFilter:Wt,s.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0?s.colorSpace=d.colorSpace:d.encoding!==void 0&&(s.encoding=d.encoding),d.flipY!==void 0&&(s.flipY=d.flipY),d.format!==void 0&&(s.format=d.format),d.type!==void 0&&(s.type=d.type),d.mipmaps!==void 0&&(s.mipmaps=d.mipmaps,s.minFilter=Ds),d.mipmapCount===1&&(s.minFilter=Wt),d.generateMipmaps!==void 0&&(s.generateMipmaps=d.generateMipmaps),s.needsUpdate=!0,t&&t(s,d)},r,i),s}}class I5 extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=new Zt,s=new wd(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class Vs extends Bt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new $e(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class mA extends Vs{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $e(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const av=new gt,dM=new z,hM=new z;class Hb{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Te(512,512),this.map=null,this.mapPass=null,this.matrix=new gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jd,this._frameExtents=new Te(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;dM.setFromMatrixPosition(e.matrixWorld),t.position.copy(dM),hM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(hM),t.updateMatrixWorld(),av.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(av),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(av)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class k5 extends Hb{constructor(){super(new Zn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=pc*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gA extends Vs{constructor(e,t,r=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bt.DEFAULT_UP),this.updateMatrix(),this.target=new Bt,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new k5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const fM=new gt,hu=new z,sv=new z;class D5 extends Hb{constructor(){super(new Zn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Te(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),hu.setFromMatrixPosition(e.matrixWorld),r.position.copy(hu),sv.copy(r.position),sv.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(sv),r.updateMatrixWorld(),i.makeTranslation(-hu.x,-hu.y,-hu.z),fM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fM)}}class vA extends Vs{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new D5}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class O5 extends Hb{constructor(){super(new Tc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xA extends Vs{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bt.DEFAULT_UP),this.updateMatrix(),this.target=new Bt,this.shadow=new O5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yA extends Vs{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class bA extends Vs{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _A{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(r*a)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*r*a),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class wA extends Vs{constructor(e=new _A,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Xm extends Lr{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,s=new ai(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=Xm.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new $e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new $e().setHex(s.value);break;case"v2":i.uniforms[a].value=new Te().fromArray(s.value);break;case"v3":i.uniforms[a].value=new z().fromArray(s.value);break;case"v4":i.uniforms[a].value=new qt().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Rt().fromArray(s.value);break;case"m4":i.uniforms[a].value=new gt().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new Te().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Te().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:eA,SpriteMaterial:Ab,RawShaderMaterial:tA,ShaderMaterial:ci,PointsMaterial:Rb,MeshPhysicalMaterial:Ub,MeshStandardMaterial:Ob,MeshPhongMaterial:nA,MeshToonMaterial:rA,MeshNormalMaterial:iA,MeshLambertMaterial:aA,MeshDepthMaterial:Tb,MeshDistanceMaterial:Eb,MeshBasicMaterial:Ha,MeshMatcapMaterial:sA,LineDashedMaterial:oA,LineBasicMaterial:Nr,Material:gr};return new t[e]}}class ry{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SA extends Pt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class MA extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new ai(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,x){if(t[x]!==void 0)return t[x];const y=p.interleavedBuffers[x],M=a(p,y.buffer),_=Gl(y.type,M),g=new Rm(_,y.stride);return g.uuid=y.uuid,t[x]=g,g}function a(p,x){if(r[x]!==void 0)return r[x];const y=p.arrayBuffers[x],M=new Uint32Array(y).buffer;return r[x]=M,M}const s=e.isInstancedBufferGeometry?new SA:new Pt,o=e.data.index;if(o!==void 0){const p=Gl(o.type,o.array);s.setIndex(new $t(p,1))}const u=e.data.attributes;for(const p in u){const x=u[p];let y;if(x.isInterleavedBufferAttribute){const M=i(e.data,x.data);y=new jo(M,x.itemSize,x.offset,x.normalized)}else{const M=Gl(x.type,x.array),_=x.isInstancedBufferAttribute?gc:$t;y=new _(M,x.itemSize,x.normalized)}x.name!==void 0&&(y.name=x.name),x.usage!==void 0&&y.setUsage(x.usage),s.setAttribute(p,y)}const d=e.data.morphAttributes;if(d)for(const p in d){const x=d[p],y=[];for(let M=0,_=x.length;M<_;M++){const g=x[M];let S;if(g.isInterleavedBufferAttribute){const w=i(e.data,g.data);S=new jo(w,g.itemSize,g.offset,g.normalized)}else{const w=Gl(g.type,g.array);S=new $t(w,g.itemSize,g.normalized)}g.name!==void 0&&(S.name=g.name),y.push(S)}s.morphAttributes[p]=y}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let p=0,x=h.length;p!==x;++p){const y=h[p];s.addGroup(y.start,y.count,y.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const p=new z;f.center!==void 0&&p.fromArray(f.center),s.boundingSphere=new pr(p,f.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class U5 extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?ry.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ai(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){let d=null;try{d=JSON.parse(u)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=d.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(d,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?ry.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new ai(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),u=o.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(d)}),o=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,o),d=this.parseObject(e.object,a,u,o,r),h=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,h),t!==void 0){let f=!1;for(const p in s)if(s[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),u=this.parseObject(e.object,i,o,s,t),d=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,d),u}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new Po().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new Pm().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new MA;for(let a=0,s=e.length;a<s;a++){let o;const u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(u);break;default:u.type in uM?o=uM[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}o.uuid=u.uuid,u.name!==void 0&&(o.name=u.name),u.userData!==void 0&&(o.userData=u.userData),r[u.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new Xm;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const u=e[s];r[u.uuid]===void 0&&(r[u.uuid]=a.parse(u)),i[u.uuid]=r[u.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=_d.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function s(u){return r.manager.itemStart(u),a.load(u,function(){r.manager.itemEnd(u)},void 0,function(){r.manager.itemError(u),r.manager.itemEnd(u)})}function o(u){if(typeof u=="string"){const d=u,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;return s(h)}else return u.data?{data:Gl(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new Wm(t);a=new wd(u),a.setCrossOrigin(this.crossOrigin);for(let d=0,h=e.length;d<h;d++){const f=e[d],p=f.url;if(Array.isArray(p)){const x=[];for(let y=0,M=p.length;y<M;y++){const _=p[y],g=o(_);g!==null&&(g instanceof HTMLImageElement?x.push(g):x.push(new Ps(g.data,g.width,g.height)))}i[f.uuid]=new _o(x)}else{const x=o(f.url);i[f.uuid]=new _o(x)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(u)}else return s.data?{data:Gl(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new wd(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const u=e[s],d=u.url;if(Array.isArray(d)){const h=[];for(let f=0,p=d.length;f<p;f++){const x=d[f],y=await a(x);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new Ps(y.data,y.width,y.height)))}r[u.uuid]=new _o(h)}else{const h=await a(u.url);r[u.uuid]=new _o(h)}}}return r}parseTextures(e,t){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const u=t[o.image],d=u.data;let h;Array.isArray(d)?(h=new Ud,d.length===6&&(h.needsUpdate=!0)):(d&&d.data?h=new Ps:h=new Zt,d&&(h.needsUpdate=!0)),h.source=u,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=r(o.mapping,j5)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=r(o.wrap[0],pM),h.wrapT=r(o.wrap[1],pM)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.encoding!==void 0&&(h.encoding=o.encoding),o.minFilter!==void 0&&(h.minFilter=r(o.minFilter,mM)),o.magFilter!==void 0&&(h.magFilter=r(o.magFilter,mM)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),i[o.uuid]=h}return i}parseObject(e,t,r,i,a){let s;function o(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function u(p){if(p!==void 0){if(Array.isArray(p)){const x=[];for(let y=0,M=p.length;y<M;y++){const _=p[y];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),x.push(r[_])}return x}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function d(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,f;switch(e.type){case"Scene":s=new Fd,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new $e(e.background):s.background=d(e.background)),e.environment!==void 0&&(s.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Cm(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Am(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new Zn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Tc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new yA(e.color,e.intensity);break;case"DirectionalLight":s=new xA(e.color,e.intensity);break;case"PointLight":s=new vA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new bA(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new gA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new mA(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new wA().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),f=u(e.material),s=new F3(h,f),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),f=u(e.material),s=new bn(h,f);break;case"InstancedMesh":h=o(e.geometry),f=u(e.material);const p=e.count,x=e.instanceMatrix,y=e.instanceColor;s=new z3(h,f,p),s.instanceMatrix=new gc(new Float32Array(x.array),16),y!==void 0&&(s.instanceColor=new gc(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":h=o(e.geometry),f=u(e.material),s=new B3(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(M=>{const _=new Cr;_.min.fromArray(M.boxMin),_.max.fromArray(M.boxMax);const g=new pr;return g.radius=M.sphereRadius,g.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:_,sphereInitialized:M.sphereInitialized,sphere:g}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":s=new j3;break;case"Line":s=new Os(o(e.geometry),u(e.material));break;case"LineLoop":s=new H3(o(e.geometry),u(e.material));break;case"LineSegments":s=new pa(o(e.geometry),u(e.material));break;case"PointCloud":case"Points":s=new V3(o(e.geometry),u(e.material));break;case"Sprite":s=new U3(u(e.material));break;case"Group":s=new ql;break;case"Bone":s=new Cb;break;default:s=new Bt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let x=0;x<p.length;x++)s.add(this.parseObject(p[x],t,r,i,a))}if(e.animations!==void 0){const p=e.animations;for(let x=0;x<p.length;x++){const y=p[x];s.animations.push(a[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const p=e.levels;for(let x=0;x<p.length;x++){const y=p[x],M=s.getObjectByProperty("uuid",y.object);M!==void 0&&s.addLevel(M,y.distance,y.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const j5={UVMapping:Is,CubeReflectionMapping:fa,CubeRefractionMapping:ks,EquirectangularReflectionMapping:hc,EquirectangularRefractionMapping:id,CubeUVReflectionMapping:Sc},pM={RepeatWrapping:ad,ClampToEdgeWrapping:ln,MirroredRepeatWrapping:sd},mM={NearestFilter:En,NearestMipmapNearestFilter:Yp,NearestMipmapLinearFilter:Lu,LinearFilter:Wt,LinearMipmapNearestFilter:ib,LinearMipmapLinearFilter:Ds};class F5 extends Lr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Ia.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(d=>{t&&t(d),a.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const u=fetch(e,o).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(d){return Ia.add(e,d),t&&t(d),a.manager.itemEnd(e),d}).catch(function(d){i&&i(d),Ia.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Ia.add(e,u),a.manager.itemStart(e)}}let Vf;class Vb{static getContext(){return Vf===void 0&&(Vf=new(window.AudioContext||window.webkitAudioContext)),Vf}static setContext(e){Vf=e}}class z5 extends Lr{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new ai(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(u){try{const d=u.slice(0);Vb.getContext().decodeAudioData(d,function(h){t(h)}).catch(o)}catch(d){o(d)}},r,i);function o(u){i?i(u):console.error(u),a.manager.itemError(e)}}}const gM=new gt,vM=new gt,ao=new gt;class B5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ao.copy(e.projectionMatrix);const r=t.eyeSep/2,i=r*t.near/t.focus,a=t.near*Math.tan(Co*t.fov*.5)/t.zoom;let s,o;vM.elements[12]=-r,gM.elements[12]=r,s=-a*t.aspect+i,o=a*t.aspect+i,ao.elements[0]=2*t.near/(o-s),ao.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(ao),s=-a*t.aspect-i,o=a*t.aspect-i,ao.elements[0]=2*t.near/(o-s),ao.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(ao)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(gM)}}class Gb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=xM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=xM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function xM(){return(typeof performance>"u"?Date:performance).now()}const so=new z,yM=new Gr,H5=new z,oo=new z;class V5 extends Bt{constructor(){super(),this.type="AudioListener",this.context=Vb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(so,yM,H5),oo.set(0,0,-1).applyQuaternion(yM),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(so.x,i),t.positionY.linearRampToValueAtTime(so.y,i),t.positionZ.linearRampToValueAtTime(so.z,i),t.forwardX.linearRampToValueAtTime(oo.x,i),t.forwardY.linearRampToValueAtTime(oo.y,i),t.forwardZ.linearRampToValueAtTime(oo.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(so.x,so.y,so.z),t.setOrientation(oo.x,oo.y,oo.z,r.x,r.y,r.z)}}class TA extends Bt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const lo=new z,bM=new Gr,G5=new z,co=new z;class W5 extends TA{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(lo,bM,G5),co.set(0,0,1).applyQuaternion(bM);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(lo.x,r),t.positionY.linearRampToValueAtTime(lo.y,r),t.positionZ.linearRampToValueAtTime(lo.z,r),t.orientationX.linearRampToValueAtTime(co.x,r),t.orientationY.linearRampToValueAtTime(co.y,r),t.orientationZ.linearRampToValueAtTime(co.z,r)}else t.setPosition(lo.x,lo.y,lo.z),t.setOrientation(co.x,co.y,co.z)}}class X5{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class EA{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=t*this._origIndex;this._mixBufferRegion(r,i,u,1-a,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let u=t,d=t+t;u!==d;++u)if(r[u]!==r[u+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,s=i;a!==s;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Gr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const s=this._workIndex*a;Gr.multiplyQuaternionsFlat(e,s,e,t,e,r),Gr.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const u=t+o;e[u]=e[u]*s+e[r+o]*i}}_lerpAdditive(e,t,r,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[r+s]*i}}}const Wb="\\[\\]\\.:\\/",q5=new RegExp("["+Wb+"]","g"),Xb="[^"+Wb+"]",Y5="[^"+Wb.replace("\\.","")+"]",$5=/((?:WC+[\/:])*)/.source.replace("WC",Xb),K5=/(WCOD+)?/.source.replace("WCOD",Y5),Z5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xb),Q5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xb),J5=new RegExp("^"+$5+K5+Z5+Q5+"$"),e6=["material","materials","bones","map"];class t6{constructor(e,t,r){const i=r||kt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class kt{constructor(e,t,r){this.path=t,this.parsedPath=r||kt.parseTrackName(t),this.node=kt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new kt.Composite(e,t,r):new kt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(q5,"")}static parseTrackName(e){const t=J5.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);e6.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const u=r(o.children);if(u)return u}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=kt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===d){d=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const s=e[i];if(s===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kt.Composite=t6;kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kt.prototype.GetterByBindingType=[kt.prototype._getValue_direct,kt.prototype._getValue_array,kt.prototype._getValue_arrayElement,kt.prototype._getValue_toArray];kt.prototype.SetterByBindingTypeAndVersioning=[[kt.prototype._setValue_direct,kt.prototype._setValue_direct_setNeedsUpdate,kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_array,kt.prototype._setValue_array_setNeedsUpdate,kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_arrayElement,kt.prototype._setValue_arrayElement_setNeedsUpdate,kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_fromArray,kt.prototype._setValue_fromArray_setNeedsUpdate,kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class n6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ii(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,u=e.length,d=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],x=p.uuid;let y=t[x];if(y===void 0){y=u++,t[x]=y,e.push(p);for(let M=0,_=s;M!==_;++M)a[M].push(new kt(p,r[M],i[M]))}else if(y<d){o=e[y];const M=--d,_=e[M];t[_.uuid]=y,e[y]=_,t[x]=M,e[M]=p;for(let g=0,S=s;g!==S;++g){const w=a[g],E=w[M];let N=w[y];w[y]=E,N===void 0&&(N=new kt(p,r[g],i[g])),w[M]=N}}else e[y]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const u=arguments[s],d=u.uuid,h=t[d];if(h!==void 0&&h>=a){const f=a++,p=e[f];t[p.uuid]=h,e[h]=p,t[d]=f,e[f]=u;for(let x=0,y=i;x!==y;++x){const M=r[x],_=M[f],g=M[h];M[h]=_,M[f]=g}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,u=arguments.length;o!==u;++o){const d=arguments[o],h=d.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<a){const p=--a,x=e[p],y=--s,M=e[y];t[x.uuid]=f,e[f]=x,t[M.uuid]=p,e[p]=M,e.pop();for(let _=0,g=i;_!==g;++_){const S=r[_],w=S[p],E=S[y];S[f]=w,S[p]=E,S.pop()}}else{const p=--s,x=e[p];p>0&&(t[x.uuid]=f),e[f]=x,e.pop();for(let y=0,M=i;y!==M;++y){const _=r[y];_[f]=_[p],_.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,u=this._objects,d=u.length,h=this.nCachedObjects_,f=new Array(d);i=a.length,r[e]=i,s.push(e),o.push(t),a.push(f);for(let p=h,x=u.length;p!==x;++p){const y=u[p];f[p]=new kt(y,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,u=s[o],d=e[o];t[d]=r,s[r]=u,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class AA{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),u={endingStart:yo,endingEnd:yo};for(let d=0;d!==s;++d){const h=a[d].createInterpolant(null);o[d]=h,h.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=o3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const u=o.parameterPositions,d=o.sampleValues;return u[0]=a,u[1]=a+r,d[0]=e/s,d[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*r;u<0||r===0?t=0:(this._startTime=null,t=r*u)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const u=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case pb:for(let h=0,f=u.length;h!==f;++h)u[h].evaluate(s),d[h].accumulateAdditive(o);break;case wm:default:for(let h=0,f=u.length;h!==f;++h)u[h].evaluate(s),d[h].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===l3;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(r===s3){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const d=e<0;this._setEndings(d,!d,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=bo,i.endingEnd=bo):(e?i.endingStart=this.zeroSlopeAtStart?bo:yo:i.endingStart=cd,t?i.endingEnd=this.zeroSlopeAtEnd?bo:yo:i.endingEnd=cd)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,u=s.sampleValues;return o[0]=a,u[0]=t,o[1]=a+e,u[1]=r,this}}const r6=new Float32Array(1);class i6 extends Ba{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,u=r.uuid,d=this._bindingsByRootAndName;let h=d[u];h===void 0&&(h={},d[u]=h);for(let f=0;f!==a;++f){const p=i[f],x=p.name;let y=h[x];if(y!==void 0)++y.referenceCount,s[f]=y;else{if(y=s[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,u,x));continue}const M=t&&t._propertyBindings[f].binding.parsedPath;y=new EA(kt.create(r,x,M),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,u,x),s[f]=y}o[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],u=o.knownActions,d=u[u.length-1],h=e._byClipCacheIndex;d._byClipCacheIndex=h,u[h]=d,u.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],u.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],u=t[t.length-1],d=e._cacheIndex;u._cacheIndex=d,t[d]=u,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Fb(new Float32Array(2),new Float32Array(2),1,r6),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?_d.findByName(i,e):e;const o=s!==null?s.uuid:e,u=this._actionsByClip[o];let d=null;if(r===void 0&&(s!==null?r=s.blendMode:r=wm),u!==void 0){const f=u.actionByRoot[a];if(f!==void 0&&f.blendMode===r)return f;d=u.knownActions[0],s===null&&(s=d._clip)}if(s===null)return null;const h=new AA(this,s,t,r);return this._bindAction(h,d),this._addInactiveAction(h,o,a),h}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?_d.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let d=0;d!==r;++d)t[d]._update(i,e,a,s);const o=this._bindings,u=this._nActiveBindings;for(let d=0;d!==u;++d)o[d].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,u=s.length;o!==u;++o){const d=s[o];this._deactivateAction(d);const h=d._cacheIndex,f=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,u=o[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class qb{constructor(e){this.value=e}clone(){return new qb(this.value.clone===void 0?this.value:this.value.clone())}}let a6=0;class s6 extends Ba{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:a6++}),this.name="",this.usage=fd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const a=Array.isArray(t[r])?t[r]:[t[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class o6 extends Rm{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class l6{constructor(e,t,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Yb{constructor(e,t,r=0,i=1/0){this.ray=new Mc(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Ro,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return iy(e,this,r,t),r.sort(_M),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)iy(e[i],this,r,t);return r.sort(_M),r}}function _M(n,e){return n.distance-e.distance}function iy(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let a=0,s=i.length;a<s;a++)iy(i[a],e,t,!0)}}class c6{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(yn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class u6{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const wM=new Te;class d6{constructor(e=new Te(1/0,1/0),t=new Te(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=wM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const SM=new z,Gf=new z;class h6{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){SM.subVectors(e,this.start),Gf.subVectors(this.end,this.start);const r=Gf.dot(Gf);let i=Gf.dot(SM)/r;return t&&(i=yn(i,0,1)),i}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const MM=new z;class f6 extends Bt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Pt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,u=32;s<u;s++,o++){const d=s/u*Math.PI*2,h=o/u*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new rt(i,3));const a=new Nr({fog:!1,toneMapped:!1});this.cone=new pa(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),MM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(MM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ss=new z,Wf=new gt,ov=new gt;class p6 extends pa{constructor(e){const t=CA(e),r=new Pt,i=[],a=[],s=new $e(0,0,1),o=new $e(0,1,0);for(let d=0;d<t.length;d++){const h=t[d];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}r.setAttribute("position",new rt(i,3)),r.setAttribute("color",new rt(a,3));const u=new Nr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");ov.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(Wf.multiplyMatrices(ov,o.matrixWorld),ss.setFromMatrixPosition(Wf),i.setXYZ(s,ss.x,ss.y,ss.z),Wf.multiplyMatrices(ov,o.parent.matrixWorld),ss.setFromMatrixPosition(Wf),i.setXYZ(s+1,ss.x,ss.y,ss.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function CA(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,CA(n.children[t]));return e}class m6 extends bn{constructor(e,t,r){const i=new Vd(t,4,2),a=new Ha({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const g6=new z,TM=new $e,EM=new $e;class v6 extends Bt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Hd(t);i.rotateY(Math.PI*.5),this.material=new Ha({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new $t(s,3)),this.add(new bn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");TM.copy(this.light.color),EM.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const a=r<i/2?TM:EM;t.setXYZ(r,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(g6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class x6 extends pa{constructor(e=10,t=10,r=4473924,i=8947848){r=new $e(r),i=new $e(i);const a=t/2,s=e/t,o=e/2,u=[],d=[];for(let p=0,x=0,y=-o;p<=t;p++,y+=s){u.push(-o,0,y,o,0,y),u.push(y,0,-o,y,0,o);const M=p===a?r:i;M.toArray(d,x),x+=3,M.toArray(d,x),x+=3,M.toArray(d,x),x+=3,M.toArray(d,x),x+=3}const h=new Pt;h.setAttribute("position",new rt(u,3)),h.setAttribute("color",new rt(d,3));const f=new Nr({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class y6 extends pa{constructor(e=10,t=16,r=8,i=64,a=4473924,s=8947848){a=new $e(a),s=new $e(s);const o=[],u=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),x=Math.sin(p)*e,y=Math.cos(p)*e;o.push(0,0,0),o.push(x,0,y);const M=f&1?a:s;u.push(M.r,M.g,M.b),u.push(M.r,M.g,M.b)}for(let f=0;f<r;f++){const p=f&1?a:s,x=e-e/r*f;for(let y=0;y<i;y++){let M=y/i*(Math.PI*2),_=Math.sin(M)*x,g=Math.cos(M)*x;o.push(_,0,g),u.push(p.r,p.g,p.b),M=(y+1)/i*(Math.PI*2),_=Math.sin(M)*x,g=Math.cos(M)*x,o.push(_,0,g),u.push(p.r,p.g,p.b)}}const d=new Pt;d.setAttribute("position",new rt(o,3)),d.setAttribute("color",new rt(u,3));const h=new Nr({vertexColors:!0,toneMapped:!1});super(d,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const AM=new z,Xf=new z,CM=new z;class b6 extends Bt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Pt;i.setAttribute("position",new rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Nr({fog:!1,toneMapped:!1});this.lightPlane=new Os(i,a),this.add(this.lightPlane),i=new Pt,i.setAttribute("position",new rt([0,0,0,0,0,1],3)),this.targetLine=new Os(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),AM.setFromMatrixPosition(this.light.matrixWorld),Xf.setFromMatrixPosition(this.light.target.matrixWorld),CM.subVectors(Xf,AM),this.lightPlane.lookAt(Xf),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xf),this.targetLine.scale.z=CM.length()}}const qf=new z,vn=new Od;class _6 extends pa{constructor(e){const t=new Pt,r=new Nr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(y,M){u(y),u(M)}function u(y){i.push(0,0,0),a.push(0,0,0),s[y]===void 0&&(s[y]=[]),s[y].push(i.length/3-1)}t.setAttribute("position",new rt(i,3)),t.setAttribute("color",new rt(a,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const d=new $e(16755200),h=new $e(16711680),f=new $e(43775),p=new $e(16777215),x=new $e(3355443);this.setColors(d,h,f,p,x)}setColors(e,t,r,i,a){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,r.r,r.g,r.b),s.setXYZ(33,r.r,r.g,r.b),s.setXYZ(34,r.r,r.g,r.b),s.setXYZ(35,r.r,r.g,r.b),s.setXYZ(36,r.r,r.g,r.b),s.setXYZ(37,r.r,r.g,r.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,a.r,a.g,a.b),s.setXYZ(41,a.r,a.g,a.b),s.setXYZ(42,a.r,a.g,a.b),s.setXYZ(43,a.r,a.g,a.b),s.setXYZ(44,a.r,a.g,a.b),s.setXYZ(45,a.r,a.g,a.b),s.setXYZ(46,a.r,a.g,a.b),s.setXYZ(47,a.r,a.g,a.b),s.setXYZ(48,a.r,a.g,a.b),s.setXYZ(49,a.r,a.g,a.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;vn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Mn("c",t,e,vn,0,0,-1),Mn("t",t,e,vn,0,0,1),Mn("n1",t,e,vn,-r,-i,-1),Mn("n2",t,e,vn,r,-i,-1),Mn("n3",t,e,vn,-r,i,-1),Mn("n4",t,e,vn,r,i,-1),Mn("f1",t,e,vn,-r,-i,1),Mn("f2",t,e,vn,r,-i,1),Mn("f3",t,e,vn,-r,i,1),Mn("f4",t,e,vn,r,i,1),Mn("u1",t,e,vn,r*.7,i*1.1,-1),Mn("u2",t,e,vn,-r*.7,i*1.1,-1),Mn("u3",t,e,vn,0,i*2,-1),Mn("cf1",t,e,vn,-r,0,1),Mn("cf2",t,e,vn,r,0,1),Mn("cf3",t,e,vn,0,-i,1),Mn("cf4",t,e,vn,0,i,1),Mn("cn1",t,e,vn,-r,0,-1),Mn("cn2",t,e,vn,r,0,-1),Mn("cn3",t,e,vn,0,-i,-1),Mn("cn4",t,e,vn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mn(n,e,t,r,i,a,s){qf.set(i,a,s).unproject(r);const o=e[n];if(o!==void 0){const u=t.getAttribute("position");for(let d=0,h=o.length;d<h;d++)u.setXYZ(o[d],qf.x,qf.y,qf.z)}}const Yf=new Cr;class w6 extends pa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),a=new Pt;a.setIndex(new $t(r,1)),a.setAttribute("position",new $t(i,3)),super(a,new Nr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Yf.setFromObject(this.object),Yf.isEmpty())return;const t=Yf.min,r=Yf.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=t.x,a[4]=r.y,a[5]=r.z,a[6]=t.x,a[7]=t.y,a[8]=r.z,a[9]=r.x,a[10]=t.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=t.z,a[15]=t.x,a[16]=r.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=r.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class S6 extends pa{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Pt;a.setIndex(new $t(r,1)),a.setAttribute("position",new rt(i,3)),super(a,new Nr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class M6 extends Os{constructor(e,t=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Pt;s.setAttribute("position",new rt(a,3)),s.computeBoundingSphere(),super(s,new Nr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Pt;u.setAttribute("position",new rt(o,3)),u.computeBoundingSphere(),this.add(new bn(u,new Ha({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const RM=new z;let $f,lv;class T6 extends Bt{constructor(e=new z(0,0,1),t=new z(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",$f===void 0&&($f=new Pt,$f.setAttribute("position",new rt([0,0,0,0,1,0],3)),lv=new Ac(0,.5,1,5,1),lv.translate(0,-.5,0)),this.position.copy(t),this.line=new Os($f,new Nr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bn(lv,new Ha({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{RM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(RM,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class E6 extends pa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Pt;i.setAttribute("position",new rt(t,3)),i.setAttribute("color",new rt(r,3));const a=new Nr({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new $e,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class A6{constructor(){this.type="ShapePath",this.color=new $e,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new md,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,a,s){return this.currentPath.bezierCurveTo(e,t,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let w=0,E=g.length;w<E;w++){const N=g[w],P=new Po;P.curves=N.curves,S.push(P)}return S}function r(g,S){const w=S.length;let E=!1;for(let N=w-1,P=0;P<w;N=P++){let L=S[N],U=S[P],R=U.x-L.x,I=U.y-L.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(L=S[P],R=-R,U=S[N],I=-I),g.y<L.y||g.y>U.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const G=I*(g.x-L.x)-R*(g.y-L.y);if(G===0)return!0;if(G<0)continue;E=!E}}else{if(g.y!==L.y)continue;if(U.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=U.x)return!0}}return E}const i=ha.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,u;const d=[];if(a.length===1)return o=a[0],u=new Po,u.curves=o.curves,d.push(u),d;let h=!i(a[0].getPoints());h=e?!h:h;const f=[],p=[];let x=[],y=0,M;p[y]=void 0,x[y]=[];for(let g=0,S=a.length;g<S;g++)o=a[g],M=o.getPoints(),s=i(M),s=e?!s:s,s?(!h&&p[y]&&y++,p[y]={s:new Po,p:M},p[y].s.curves=o.curves,h&&y++,x[y]=[]):x[y].push({h:o,p:M[0]});if(!p[0])return t(a);if(p.length>1){let g=!1,S=0;for(let w=0,E=p.length;w<E;w++)f[w]=[];for(let w=0,E=p.length;w<E;w++){const N=x[w];for(let P=0;P<N.length;P++){const L=N[P];let U=!0;for(let R=0;R<p.length;R++)r(L.p,p[R].p)&&(w!==R&&S++,U?(U=!1,f[R].push(L)):g=!0);U&&f[w].push(L)}}S>0&&g===!1&&(x=f)}let _;for(let g=0,S=p.length;g<S;g++){u=p[g].s,d.push(u),_=x[g];for(let w=0,E=_.length;w<E;w++)u.holes.push(_[w].h)}return d}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ld}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ld);const C6=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rb,AddEquation:ps,AddOperation:Y2,AdditiveAnimationBlendMode:pb,AdditiveBlending:gx,AgXToneMapping:J2,AlphaFormat:t3,AlwaysCompare:x3,AlwaysDepth:B2,AlwaysStencilFunc:Yx,AmbientLight:yA,AnimationAction:AA,AnimationClip:_d,AnimationLoader:N5,AnimationMixer:i6,AnimationObjectGroup:n6,AnimationUtils:A5,ArcCurve:G3,ArrayCamera:k3,ArrowHelper:T6,AttachedBindMode:_x,Audio:TA,AudioAnalyser:X5,AudioContext:Vb,AudioListener:V5,AudioLoader:z5,AxesHelper:E6,BackSide:Ar,BasicDepthPacking:c3,BasicShadowMap:S2,BatchedMesh:B3,Bone:Cb,BooleanKeyframeTrack:Xo,Box2:d6,Box3:Cr,Box3Helper:S6,BoxGeometry:Go,BoxHelper:w6,BufferAttribute:$t,BufferGeometry:Pt,BufferGeometryLoader:MA,ByteType:ab,Cache:Ia,Camera:Od,CameraHelper:_6,CanvasTexture:ZU,CapsuleGeometry:Im,CatmullRomCurve3:W3,CineonToneMapping:Z2,CircleGeometry:km,ClampToEdgeWrapping:ln,Clock:Gb,Color:$e,ColorKeyframeTrack:zb,ColorManagement:Xt,CompressedArrayTexture:$U,CompressedCubeTexture:KU,CompressedTexture:Nm,CompressedTextureLoader:L5,ConeGeometry:Dm,ConstantAlphaFactor:j2,ConstantColorFactor:O2,CubeCamera:E3,CubeReflectionMapping:fa,CubeRefractionMapping:ks,CubeTexture:Ud,CubeTextureLoader:pA,CubeUVReflectionMapping:Sc,CubicBezierCurve:Nb,CubicBezierCurve3:X3,CubicInterpolant:uA,CullFaceBack:mx,CullFaceFront:w2,CullFaceFrontBack:BL,CullFaceNone:_2,Curve:Wi,CurvePath:Y3,CustomBlending:M2,CustomToneMapping:Q2,CylinderGeometry:Ac,Cylindrical:u6,Data3DTexture:yb,DataArrayTexture:Mm,DataTexture:Ps,DataTextureLoader:Bb,DataUtils:wo,DecrementStencilOp:QL,DecrementWrapStencilOp:eI,DefaultLoadingManager:fA,DepthFormat:Cs,DepthStencilFormat:Uo,DepthTexture:Mb,DetachedBindMode:e3,DirectionalLight:xA,DirectionalLightHelper:b6,DiscreteInterpolant:dA,DisplayP3ColorSpace:Sm,DodecahedronGeometry:Om,DoubleSide:zi,DstAlphaFactor:N2,DstColorFactor:I2,DynamicCopyUsage:mI,DynamicDrawUsage:cI,DynamicReadUsage:hI,EdgesGeometry:$3,EllipseCurve:Lm,EqualCompare:p3,EqualDepth:V2,EqualStencilFunc:iI,EquirectangularReflectionMapping:hc,EquirectangularRefractionMapping:id,Euler:Dd,EventDispatcher:Ba,ExtrudeGeometry:jm,FileLoader:ai,Float16BufferAttribute:e4,Float32BufferAttribute:rt,Float64BufferAttribute:t4,FloatType:Un,Fog:Cm,FogExp2:Am,FramebufferTexture:YU,FrontSide:Fa,Frustum:jd,GLBufferAttribute:l6,GLSL1:vI,GLSL3:$x,GreaterCompare:m3,GreaterDepth:W2,GreaterEqualCompare:v3,GreaterEqualDepth:G2,GreaterEqualStencilFunc:lI,GreaterStencilFunc:sI,GridHelper:x6,Group:ql,HalfFloatType:Qn,HemisphereLight:mA,HemisphereLightHelper:v6,IcosahedronGeometry:Bd,ImageBitmapLoader:F5,ImageLoader:wd,ImageUtils:xb,IncrementStencilOp:ZL,IncrementWrapStencilOp:JL,InstancedBufferAttribute:gc,InstancedBufferGeometry:SA,InstancedInterleavedBuffer:o6,InstancedMesh:z3,Int16BufferAttribute:QI,Int32BufferAttribute:JI,Int8BufferAttribute:$I,IntType:_m,InterleavedBuffer:Rm,InterleavedBufferAttribute:jo,Interpolant:Gd,InterpolateDiscrete:od,InterpolateLinear:ld,InterpolateSmooth:vp,InvertStencilOp:tI,KeepStencilOp:fo,KeyframeTrack:Xi,LOD:j3,LatheGeometry:zd,Layers:Ro,LessCompare:f3,LessDepth:H2,LessEqualCompare:gb,LessEqualDepth:rd,LessEqualStencilFunc:aI,LessStencilFunc:rI,Light:Vs,LightProbe:wA,Line:Os,Line3:h6,LineBasicMaterial:Nr,LineCurve:Lb,LineCurve3:q3,LineDashedMaterial:oA,LineLoop:H3,LineSegments:pa,LinearDisplayP3ColorSpace:kd,LinearEncoding:mb,LinearFilter:Wt,LinearInterpolant:Fb,LinearMipMapLinearFilter:wx,LinearMipMapNearestFilter:WL,LinearMipmapLinearFilter:Ds,LinearMipmapNearestFilter:ib,LinearSRGBColorSpace:oi,LinearToneMapping:$2,LinearTransfer:ud,Loader:Lr,LoaderUtils:ry,LoadingManager:Wm,LoopOnce:s3,LoopPingPong:l3,LoopRepeat:o3,LuminanceAlphaFormat:r3,LuminanceFormat:n3,MOUSE:FL,Material:gr,MaterialLoader:Xm,MathUtils:y3,Matrix3:Rt,Matrix4:gt,MaxEquation:bx,Mesh:bn,MeshBasicMaterial:Ha,MeshDepthMaterial:Tb,MeshDistanceMaterial:Eb,MeshLambertMaterial:aA,MeshMatcapMaterial:sA,MeshNormalMaterial:iA,MeshPhongMaterial:nA,MeshPhysicalMaterial:Ub,MeshStandardMaterial:Ob,MeshToonMaterial:rA,MinEquation:yx,MirroredRepeatWrapping:sd,MixOperation:q2,MultiplyBlending:xx,MultiplyOperation:Id,NearestFilter:En,NearestMipMapLinearFilter:GL,NearestMipMapNearestFilter:VL,NearestMipmapLinearFilter:Lu,NearestMipmapNearestFilter:Yp,NeverCompare:h3,NeverDepth:z2,NeverStencilFunc:nI,NoBlending:ua,NoColorSpace:Jr,NoToneMapping:da,NormalAnimationBlendMode:wm,NormalBlending:Ao,NotEqualCompare:g3,NotEqualDepth:X2,NotEqualStencilFunc:oI,NumberKeyframeTrack:yd,Object3D:Bt,ObjectLoader:U5,ObjectSpaceNormalMap:d3,OctahedronGeometry:Hd,OneFactor:C2,OneMinusConstantAlphaFactor:F2,OneMinusConstantColorFactor:U2,OneMinusDstAlphaFactor:L2,OneMinusDstColorFactor:k2,OneMinusSrcAlphaFactor:qp,OneMinusSrcColorFactor:P2,OrthographicCamera:Tc,P3Primaries:hd,PCFShadowMap:ym,PCFSoftShadowMap:Nu,PMREMGenerator:Zx,Path:md,PerspectiveCamera:Zn,Plane:us,PlaneGeometry:Wo,PlaneHelper:M6,PointLight:vA,PointLightHelper:m6,Points:V3,PointsMaterial:Rb,PolarGridHelper:y6,PolyhedronGeometry:Hs,PositionalAudio:W5,PropertyBinding:kt,PropertyMixer:EA,QuadraticBezierCurve:Ib,QuadraticBezierCurve3:kb,Quaternion:Gr,QuaternionKeyframeTrack:Cc,QuaternionLinearInterpolant:hA,RED_GREEN_RGTC2_Format:Xx,RED_RGTC1_Format:a3,REVISION:Ld,RGBADepthPacking:u3,RGBAFormat:On,RGBAIntegerFormat:hb,RGBA_ASTC_10x10_Format:zx,RGBA_ASTC_10x5_Format:Ux,RGBA_ASTC_10x6_Format:jx,RGBA_ASTC_10x8_Format:Fx,RGBA_ASTC_12x10_Format:Bx,RGBA_ASTC_12x12_Format:Hx,RGBA_ASTC_4x4_Format:Rx,RGBA_ASTC_5x4_Format:Px,RGBA_ASTC_5x5_Format:Nx,RGBA_ASTC_6x5_Format:Lx,RGBA_ASTC_6x6_Format:Ix,RGBA_ASTC_8x5_Format:kx,RGBA_ASTC_8x6_Format:Dx,RGBA_ASTC_8x8_Format:Ox,RGBA_BPTC_Format:gp,RGBA_ETC2_EAC_Format:Cx,RGBA_PVRTC_2BPPV1_Format:Ex,RGBA_PVRTC_4BPPV1_Format:Tx,RGBA_S3TC_DXT1_Format:fp,RGBA_S3TC_DXT3_Format:pp,RGBA_S3TC_DXT5_Format:mp,RGB_BPTC_SIGNED_Format:Vx,RGB_BPTC_UNSIGNED_Format:Gx,RGB_ETC1_Format:fb,RGB_ETC2_Format:Ax,RGB_PVRTC_2BPPV1_Format:Mx,RGB_PVRTC_4BPPV1_Format:Sx,RGB_S3TC_DXT1_Format:hp,RGFormat:i3,RGIntegerFormat:db,RawShaderMaterial:tA,Ray:Mc,Raycaster:Yb,Rec709Primaries:dd,RectAreaLight:bA,RedFormat:cb,RedIntegerFormat:ub,ReinhardToneMapping:K2,RenderTarget:w3,RepeatWrapping:ad,ReplaceStencilOp:KL,ReverseSubtractEquation:E2,RingGeometry:Fm,SIGNED_RED_GREEN_RGTC2_Format:qx,SIGNED_RED_RGTC1_Format:Wx,SRGBColorSpace:kn,SRGBTransfer:Jt,Scene:Fd,ShaderChunk:Et,ShaderLib:Fi,ShaderMaterial:ci,ShadowMaterial:eA,Shape:Po,ShapeGeometry:zm,ShapePath:A6,ShapeUtils:ha,ShortType:sb,Skeleton:Pm,SkeletonHelper:p6,SkinnedMesh:F3,Source:_o,Sphere:pr,SphereGeometry:Vd,Spherical:c6,SphericalHarmonics3:_A,SplineCurve:Db,SpotLight:gA,SpotLightHelper:f6,Sprite:U3,SpriteMaterial:Ab,SrcAlphaFactor:Xp,SrcAlphaSaturateFactor:D2,SrcColorFactor:R2,StaticCopyUsage:pI,StaticDrawUsage:fd,StaticReadUsage:dI,StereoCamera:B5,StreamCopyUsage:gI,StreamDrawUsage:uI,StreamReadUsage:fI,StringKeyframeTrack:qo,SubtractEquation:T2,SubtractiveBlending:vx,TOUCH:zL,TangentSpaceNormalMap:Bs,TetrahedronGeometry:Bm,Texture:Zt,TextureLoader:I5,TorusGeometry:Hm,TorusKnotGeometry:Vm,Triangle:jr,TriangleFanDrawMode:YL,TriangleStripDrawMode:qL,TrianglesDrawMode:XL,TubeGeometry:Gm,TwoPassDoubleSide:HL,UVMapping:Is,Uint16BufferAttribute:bb,Uint32BufferAttribute:_b,Uint8BufferAttribute:KI,Uint8ClampedBufferAttribute:ZI,Uniform:qb,UniformsGroup:s6,UniformsLib:Be,UniformsUtils:T3,UnsignedByteType:ri,UnsignedInt248Type:As,UnsignedIntType:oa,UnsignedShort4444Type:ob,UnsignedShort5551Type:lb,UnsignedShortType:bm,VSMShadowMap:Oi,Vector2:Te,Vector3:z,Vector4:qt,VectorKeyframeTrack:bd,VideoTexture:qU,WebGL1Renderer:D3,WebGL3DRenderTarget:UI,WebGLArrayRenderTarget:OI,WebGLCoordinateSystem:Bi,WebGLCubeRenderTarget:wb,WebGLMultipleRenderTargets:jI,WebGLRenderTarget:li,WebGLRenderer:Em,WebGLUtils:I3,WebGPUCoordinateSystem:fc,WireframeGeometry:J3,WrapAroundEnding:cd,ZeroCurvatureEnding:yo,ZeroFactor:A2,ZeroSlopeEnding:bo,ZeroStencilOp:$L,_SRGBAFormat:$p,createCanvasElement:_3,sRGBEncoding:Rs},Symbol.toStringTag,{value:"Module"}));var RA={exports:{}},Yo={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Yo.ConcurrentRoot=1;Yo.ContinuousEventPriority=4;Yo.DefaultEventPriority=16;Yo.DiscreteEventPriority=1;Yo.IdleEventPriority=536870912;Yo.LegacyRoot=0;RA.exports=Yo;var $l=RA.exports;function R6(n){let e;const t=new Set,r=(o,u)=>{const d=typeof o=="function"?o(e):o;if(d!==e){const h=e;e=u?d:Object.assign({},e,d),t.forEach(f=>f(e,h))}},i=()=>e,a=(o,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function f(){const p=u(e);if(!d(h,p)){const x=h;o(h=p,x)}}return t.add(f),()=>t.delete(f)},s={setState:r,getState:i,subscribe:(o,u,d)=>u||d?a(o,u,d):(t.add(o),()=>t.delete(o)),destroy:()=>t.clear()};return e=n(r,i,s),s}const P6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),PM=P6?te.useEffect:te.useLayoutEffect;function PA(n){const e=typeof n=="function"?R6(n):n,t=(r=e.getState,i=Object.is)=>{const[,a]=te.useReducer(_=>_+1,0),s=e.getState(),o=te.useRef(s),u=te.useRef(r),d=te.useRef(i),h=te.useRef(!1),f=te.useRef();f.current===void 0&&(f.current=r(s));let p,x=!1;(o.current!==s||u.current!==r||d.current!==i||h.current)&&(p=r(s),x=!i(f.current,p)),PM(()=>{x&&(f.current=p),o.current=s,u.current=r,d.current=i,h.current=!1});const y=te.useRef(s);PM(()=>{const _=()=>{try{const S=e.getState(),w=u.current(S);d.current(f.current,w)||(o.current=S,f.current=w,a())}catch{h.current=!0,a()}},g=e.subscribe(_);return e.getState()!==y.current&&_(),g},[]);const M=x?p:f.current;return te.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const N6=n=>typeof n=="object"&&typeof n.then=="function",Mo=[];function NA(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function LA(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const a of Mo)if(NA(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!t)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=Mo.indexOf(i);a!==-1&&Mo.splice(a,1)},promise:(N6(n)?n:n(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(Mo.push(i),!t)throw i.promise}const L6=(n,e,t)=>LA(n,e,!1,t),I6=(n,e,t)=>void LA(n,e,!0,t),k6=n=>{if(n===void 0||n.length===0)Mo.splice(0,Mo.length);else{const e=Mo.find(t=>NA(n,t.keys,t.equal));e&&e.remove()}};var IA={exports:{}},kA={exports:{}},DA={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(n){function e(H,q){var K=H.length;H.push(q);e:for(;0<K;){var se=K-1>>>1,me=H[se];if(0<i(me,q))H[se]=q,H[K]=me,K=se;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var q=H[0],K=H.pop();if(K!==q){H[0]=K;e:for(var se=0,me=H.length,ie=me>>>1;se<ie;){var xe=2*(se+1)-1,ze=H[xe],De=xe+1,Ve=H[De];if(0>i(ze,K))De<me&&0>i(Ve,ze)?(H[se]=Ve,H[De]=K,se=De):(H[se]=ze,H[xe]=K,se=xe);else if(De<me&&0>i(Ve,K))H[se]=Ve,H[De]=K,se=De;else break e}}return q}function i(H,q){var K=H.sortIndex-q.sortIndex;return K!==0?K:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var u=[],d=[],h=1,f=null,p=3,x=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var q=t(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=H)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(d)}}function E(H){if(M=!1,w(H),!y)if(t(u)!==null)y=!0,de(N);else{var q=t(d);q!==null&&ge(E,q.startTime-H)}}function N(H,q){y=!1,M&&(M=!1,g(U),U=-1),x=!0;var K=p;try{for(w(q),f=t(u);f!==null&&(!(f.expirationTime>q)||H&&!G());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var me=se(f.expirationTime<=q);q=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(u)&&r(u),w(q)}else r(u);f=t(u)}if(f!==null)var ie=!0;else{var xe=t(d);xe!==null&&ge(E,xe.startTime-q),ie=!1}return ie}finally{f=null,p=K,x=!1}}var P=!1,L=null,U=-1,R=5,I=-1;function G(){return!(n.unstable_now()-I<R)}function Z(){if(L!==null){var H=n.unstable_now();I=H;var q=!0;try{q=L(!0,H)}finally{q?pe():(P=!1,L=null)}}else P=!1}var pe;if(typeof S=="function")pe=function(){S(Z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=Z,pe=function(){J.postMessage(null)}}else pe=function(){_(Z,0)};function de(H){L=H,P||(P=!0,pe())}function ge(H,q){U=_(function(){H(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){y||x||(y=!0,de(N))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var K=p;p=q;try{return H()}finally{p=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return q()}finally{p=K}},n.unstable_scheduleCallback=function(H,q,K){var se=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?se+K:se):K=se,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=K+me,H={id:h++,callback:q,priorityLevel:H,startTime:K,expirationTime:me,sortIndex:-1},K>se?(H.sortIndex=K,e(d,H),t(u)===null&&H===t(d)&&(M?(g(U),U=-1):M=!0,ge(E,K-se))):(H.sortIndex=me,e(u,H),y||x||(y=!0,de(N))),H},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(H){var q=p;return function(){var K=p;p=q;try{return H.apply(this,arguments)}finally{p=K}}}})(DA);kA.exports=DA;var ay=kA.exports;/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var D6=function(n){var e={},t=te,r=ay,i=Object.assign;function a(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)c+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,o=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),E=Symbol.iterator;function N(l){return l===null||typeof l!="object"?null:(l=E&&l[E]||l["@@iterator"],typeof l=="function"?l:null)}function P(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case d:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case M:return"Suspense";case _:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case x:return(l.displayName||"Context")+".Consumer";case p:return(l._context.displayName||"Context")+".Provider";case y:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case g:return c=l.displayName||null,c!==null?c:P(l.type)||"Memo";case S:c=l._payload,l=l._init;try{return P(l(c))}catch{}}return null}function L(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(c);case 8:return c===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function U(l){var c=l,v=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(v=c.return),l=c.return;while(l)}return c.tag===3?v:null}function R(l){if(U(l)!==l)throw Error(a(188))}function I(l){var c=l.alternate;if(!c){if(c=U(l),c===null)throw Error(a(188));return c!==l?null:l}for(var v=l,b=c;;){var T=v.return;if(T===null)break;var A=T.alternate;if(A===null){if(b=T.return,b!==null){v=b;continue}break}if(T.child===A.child){for(A=T.child;A;){if(A===v)return R(T),l;if(A===b)return R(T),c;A=A.sibling}throw Error(a(188))}if(v.return!==b.return)v=T,b=A;else{for(var B=!1,Q=T.child;Q;){if(Q===v){B=!0,v=T,b=A;break}if(Q===b){B=!0,b=T,v=A;break}Q=Q.sibling}if(!B){for(Q=A.child;Q;){if(Q===v){B=!0,v=A,b=T;break}if(Q===b){B=!0,b=A,v=T;break}Q=Q.sibling}if(!B)throw Error(a(189))}}if(v.alternate!==b)throw Error(a(190))}if(v.tag!==3)throw Error(a(188));return v.stateNode.current===v?l:c}function G(l){return l=I(l),l!==null?Z(l):null}function Z(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=Z(l);if(c!==null)return c;l=l.sibling}return null}function pe(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var c=pe(l);if(c!==null)return c}l=l.sibling}return null}var Y=Array.isArray,J=n.getPublicInstance,de=n.getRootHostContext,ge=n.getChildHostContext,H=n.prepareForCommit,q=n.resetAfterCommit,K=n.createInstance,se=n.appendInitialChild,me=n.finalizeInitialChildren,ie=n.prepareUpdate,xe=n.shouldSetTextContent,ze=n.createTextInstance,De=n.scheduleTimeout,Ve=n.cancelTimeout,ut=n.noTimeout,at=n.isPrimaryRenderer,Ge=n.supportsMutation,ye=n.supportsPersistence,X=n.supportsHydration,Ue=n.getInstanceFromNode,Me=n.preparePortalMount,we=n.getCurrentEventPriority,ke=n.detachDeletedInstance,be=n.supportsMicrotasks,Ye=n.scheduleMicrotask,F=n.supportsTestSelectors,k=n.findFiberRoot,ce=n.getBoundingRect,Ne=n.getTextContent,Ee=n.isHiddenSubtree,Le=n.matchAccessibilityRole,nt=n.setFocusIfFocusable,He=n.setupIntersectionObserver,Ke=n.appendChild,lt=n.appendChildToContainer,vt=n.commitTextUpdate,Pe=n.commitMount,Ot=n.commitUpdate,xt=n.insertBefore,dt=n.insertInContainerBefore,Oe=n.removeChild,Qe=n.removeChildFromContainer,yt=n.resetTextContent,C=n.hideInstance,D=n.hideTextInstance,V=n.unhideInstance,W=n.unhideTextInstance,O=n.clearContainer,$=n.cloneInstance,oe=n.createContainerChildSet,he=n.appendChildToContainerChildSet,_e=n.finalizeContainerChildren,Se=n.replaceContainerChildren,Re=n.cloneHiddenInstance,Ae=n.cloneHiddenTextInstance,Mt=n.canHydrateInstance,Fe=n.canHydrateTextInstance,qe=n.canHydrateSuspenseInstance,ct=n.isSuspenseInstancePending,bt=n.isSuspenseInstanceFallback,Ht=n.registerSuspenseInstanceRetry,Vt=n.getNextHydratableSibling,Gt=n.getFirstHydratableChild,cn=n.getFirstHydratableChildWithinContainer,Ut=n.getFirstHydratableChildWithinSuspenseInstance,vr=n.hydrateInstance,jn=n.hydrateTextInstance,mn=n.hydrateSuspenseInstance,Wr=n.getNextHydratableInstanceAfterSuspenseInstance,j=n.commitHydratedContainer,ne=n.commitHydratedSuspenseInstance,ae=n.clearSuspenseBoundary,le=n.clearSuspenseBoundaryFromContainer,re=n.shouldDeleteUnhydratedTailInstances,Ce=n.didNotMatchHydratedContainerTextInstance,Ze=n.didNotMatchHydratedTextInstance,it;function tt(l){if(it===void 0)try{throw Error()}catch(v){var c=v.stack.trim().match(/\n( *(at )?)/);it=c&&c[1]||""}return`
`+it+l}var ft=!1;function _t(l,c){if(!l||ft)return"";ft=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(je){var b=je}Reflect.construct(l,[],c)}else{try{c.call()}catch(je){b=je}l.call(c.prototype)}else{try{throw Error()}catch(je){b=je}l()}}catch(je){if(je&&b&&typeof je.stack=="string"){for(var T=je.stack.split(`
`),A=b.stack.split(`
`),B=T.length-1,Q=A.length-1;1<=B&&0<=Q&&T[B]!==A[Q];)Q--;for(;1<=B&&0<=Q;B--,Q--)if(T[B]!==A[Q]){if(B!==1||Q!==1)do if(B--,Q--,0>Q||T[B]!==A[Q]){var ve=`
`+T[B].replace(" at new "," at ");return l.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",l.displayName)),ve}while(1<=B&&0<=Q);break}}}finally{ft=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?tt(l):""}var Tt=Object.prototype.hasOwnProperty,Cn=[],Qt=-1;function wn(l){return{current:l}}function It(l){0>Qt||(l.current=Cn[Qt],Cn[Qt]=null,Qt--)}function pt(l,c){Qt++,Cn[Qt]=l.current,l.current=c}var mt={},Rn=wn(mt),Wn=wn(!1),xr=mt;function ma(l,c){var v=l.type.contextTypes;if(!v)return mt;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===c)return b.__reactInternalMemoizedMaskedChildContext;var T={},A;for(A in v)T[A]=c[A];return b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=T),T}function Pn(l){return l=l.childContextTypes,l!=null}function Va(){It(Wn),It(Rn)}function Fn(l,c,v){if(Rn.current!==mt)throw Error(a(168));pt(Rn,c),pt(Wn,v)}function qi(l,c,v){var b=l.stateNode;if(c=c.childContextTypes,typeof b.getChildContext!="function")return v;b=b.getChildContext();for(var T in b)if(!(T in c))throw Error(a(108,L(l)||"Unknown",T));return i({},v,b)}function Ga(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||mt,xr=Rn.current,pt(Rn,l),pt(Wn,Wn.current),!0}function yr(l,c,v){var b=l.stateNode;if(!b)throw Error(a(169));v?(l=qi(l,c,xr),b.__reactInternalMemoizedMergedChildContext=l,It(Wn),It(Rn),pt(Rn,l)):It(Wn),pt(Wn,v)}var br=Math.clz32?Math.clz32:fC,$m=Math.log,qd=Math.LN2;function fC(l){return l>>>=0,l===0?32:31-($m(l)/qd|0)|0}var Yd=64,$d=4194304;function Rc(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Kd(l,c){var v=l.pendingLanes;if(v===0)return 0;var b=0,T=l.suspendedLanes,A=l.pingedLanes,B=v&268435455;if(B!==0){var Q=B&~T;Q!==0?b=Rc(Q):(A&=B,A!==0&&(b=Rc(A)))}else B=v&~T,B!==0?b=Rc(B):A!==0&&(b=Rc(A));if(b===0)return 0;if(c!==0&&c!==b&&!(c&T)&&(T=b&-b,A=c&-c,T>=A||T===16&&(A&4194240)!==0))return c;if(b&4&&(b|=v&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=b;0<c;)v=31-br(c),T=1<<v,b|=l[v],c&=~T;return b}function pC(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mC(l,c){for(var v=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,A=l.pendingLanes;0<A;){var B=31-br(A),Q=1<<B,ve=T[B];ve===-1?(!(Q&v)||Q&b)&&(T[B]=pC(Q,c)):ve<=c&&(l.expiredLanes|=Q),A&=~Q}}function Km(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Zm(l){for(var c=[],v=0;31>v;v++)c.push(l);return c}function Pc(l,c,v){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-br(c),l[c]=v}function gC(l,c){var v=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var b=l.eventTimes;for(l=l.expirationTimes;0<v;){var T=31-br(v),A=1<<T;c[T]=0,b[T]=-1,l[T]=-1,v&=~A}}function Qm(l,c){var v=l.entangledLanes|=c;for(l=l.entanglements;v;){var b=31-br(v),T=1<<b;T&c|l[b]&c&&(l[b]|=c),v&=~T}}var jt=0;function s_(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Jm=r.unstable_scheduleCallback,o_=r.unstable_cancelCallback,vC=r.unstable_shouldYield,xC=r.unstable_requestPaint,Xn=r.unstable_now,eg=r.unstable_ImmediatePriority,yC=r.unstable_UserBlockingPriority,tg=r.unstable_NormalPriority,bC=r.unstable_IdlePriority,Zd=null,Yi=null;function _C(l){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Zd,l,void 0,(l.current.flags&128)===128)}catch{}}function wC(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var $i=typeof Object.is=="function"?Object.is:wC,ga=null,Qd=!1,ng=!1;function l_(l){ga===null?ga=[l]:ga.push(l)}function SC(l){Qd=!0,l_(l)}function Ki(){if(!ng&&ga!==null){ng=!0;var l=0,c=jt;try{var v=ga;for(jt=1;l<v.length;l++){var b=v[l];do b=b(!0);while(b!==null)}ga=null,Qd=!1}catch(T){throw ga!==null&&(ga=ga.slice(l+1)),Jm(eg,Ki),T}finally{jt=c,ng=!1}}return null}var MC=s.ReactCurrentBatchConfig;function Jd(l,c){if($i(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var v=Object.keys(l),b=Object.keys(c);if(v.length!==b.length)return!1;for(b=0;b<v.length;b++){var T=v[b];if(!Tt.call(c,T)||!$i(l[T],c[T]))return!1}return!0}function TC(l){switch(l.tag){case 5:return tt(l.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 2:case 15:return l=_t(l.type,!1),l;case 11:return l=_t(l.type.render,!1),l;case 1:return l=_t(l.type,!0),l;default:return""}}function Ci(l,c){if(l&&l.defaultProps){c=i({},c),l=l.defaultProps;for(var v in l)c[v]===void 0&&(c[v]=l[v]);return c}return c}var eh=wn(null),th=null,$o=null,rg=null;function ig(){rg=$o=th=null}function c_(l,c,v){at?(pt(eh,c._currentValue),c._currentValue=v):(pt(eh,c._currentValue2),c._currentValue2=v)}function ag(l){var c=eh.current;It(eh),at?l._currentValue=c:l._currentValue2=c}function sg(l,c,v){for(;l!==null;){var b=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,b!==null&&(b.childLanes|=c)):b!==null&&(b.childLanes&c)!==c&&(b.childLanes|=c),l===v)break;l=l.return}}function Ko(l,c){th=l,rg=$o=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&c&&(Yr=!0),l.firstContext=null)}function hi(l){var c=at?l._currentValue:l._currentValue2;if(rg!==l)if(l={context:l,memoizedValue:c,next:null},$o===null){if(th===null)throw Error(a(308));$o=l,th.dependencies={lanes:0,firstContext:l}}else $o=$o.next=l;return c}var Zi=null,Wa=!1;function og(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u_(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function va(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Xa(l,c){var v=l.updateQueue;v!==null&&(v=v.shared,Nn!==null&&l.mode&1&&!(Nt&2)?(l=v.interleaved,l===null?(c.next=c,Zi===null?Zi=[v]:Zi.push(v)):(c.next=l.next,l.next=c),v.interleaved=c):(l=v.pending,l===null?c.next=c:(c.next=l.next,l.next=c),v.pending=c))}function nh(l,c,v){if(c=c.updateQueue,c!==null&&(c=c.shared,(v&4194240)!==0)){var b=c.lanes;b&=l.pendingLanes,v|=b,c.lanes=v,Qm(l,v)}}function d_(l,c){var v=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,v===b)){var T=null,A=null;if(v=v.firstBaseUpdate,v!==null){do{var B={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};A===null?T=A=B:A=A.next=B,v=v.next}while(v!==null);A===null?T=A=c:A=A.next=c}else T=A=c;v={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:A,shared:b.shared,effects:b.effects},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=c:l.next=c,v.lastBaseUpdate=c}function rh(l,c,v,b){var T=l.updateQueue;Wa=!1;var A=T.firstBaseUpdate,B=T.lastBaseUpdate,Q=T.shared.pending;if(Q!==null){T.shared.pending=null;var ve=Q,je=ve.next;ve.next=null,B===null?A=je:B.next=je,B=ve;var et=l.alternate;et!==null&&(et=et.updateQueue,Q=et.lastBaseUpdate,Q!==B&&(Q===null?et.firstBaseUpdate=je:Q.next=je,et.lastBaseUpdate=ve))}if(A!==null){var wt=T.baseState;B=0,et=je=ve=null,Q=A;do{var ht=Q.lane,Kt=Q.eventTime;if((b&ht)===ht){et!==null&&(et=et.next={eventTime:Kt,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var st=l,or=Q;switch(ht=c,Kt=v,or.tag){case 1:if(st=or.payload,typeof st=="function"){wt=st.call(Kt,wt,ht);break e}wt=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=or.payload,ht=typeof st=="function"?st.call(Kt,wt,ht):st,ht==null)break e;wt=i({},wt,ht);break e;case 2:Wa=!0}}Q.callback!==null&&Q.lane!==0&&(l.flags|=64,ht=T.effects,ht===null?T.effects=[Q]:ht.push(Q))}else Kt={eventTime:Kt,lane:ht,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},et===null?(je=et=Kt,ve=wt):et=et.next=Kt,B|=ht;if(Q=Q.next,Q===null){if(Q=T.shared.pending,Q===null)break;ht=Q,Q=ht.next,ht.next=null,T.lastBaseUpdate=ht,T.shared.pending=null}}while(!0);if(et===null&&(ve=wt),T.baseState=ve,T.firstBaseUpdate=je,T.lastBaseUpdate=et,c=T.shared.interleaved,c!==null){T=c;do B|=T.lane,T=T.next;while(T!==c)}else A===null&&(T.shared.lanes=0);al|=B,l.lanes=B,l.memoizedState=wt}}function h_(l,c,v){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var b=l[c],T=b.callback;if(T!==null){if(b.callback=null,b=v,typeof T!="function")throw Error(a(191,T));T.call(b)}}}var f_=new t.Component().refs;function lg(l,c,v,b){c=l.memoizedState,v=v(b,c),v=v==null?c:i({},c,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var ih={isMounted:function(l){return(l=l._reactInternals)?U(l)===l:!1},enqueueSetState:function(l,c,v){l=l._reactInternals;var b=wr(),T=$a(l),A=va(b,T);A.payload=c,v!=null&&(A.callback=v),Xa(l,A),c=vi(l,T,b),c!==null&&nh(c,l,T)},enqueueReplaceState:function(l,c,v){l=l._reactInternals;var b=wr(),T=$a(l),A=va(b,T);A.tag=1,A.payload=c,v!=null&&(A.callback=v),Xa(l,A),c=vi(l,T,b),c!==null&&nh(c,l,T)},enqueueForceUpdate:function(l,c){l=l._reactInternals;var v=wr(),b=$a(l),T=va(v,b);T.tag=2,c!=null&&(T.callback=c),Xa(l,T),c=vi(l,b,v),c!==null&&nh(c,l,b)}};function p_(l,c,v,b,T,A,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,A,B):c.prototype&&c.prototype.isPureReactComponent?!Jd(v,b)||!Jd(T,A):!0}function m_(l,c,v){var b=!1,T=mt,A=c.contextType;return typeof A=="object"&&A!==null?A=hi(A):(T=Pn(c)?xr:Rn.current,b=c.contextTypes,A=(b=b!=null)?ma(l,T):mt),c=new c(v,A),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ih,l.stateNode=c,c._reactInternals=l,b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=T,l.__reactInternalMemoizedMaskedChildContext=A),c}function g_(l,c,v,b){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(v,b),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(v,b),c.state!==l&&ih.enqueueReplaceState(c,c.state,null)}function cg(l,c,v,b){var T=l.stateNode;T.props=v,T.state=l.memoizedState,T.refs=f_,og(l);var A=c.contextType;typeof A=="object"&&A!==null?T.context=hi(A):(A=Pn(c)?xr:Rn.current,T.context=ma(l,A)),T.state=l.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(lg(l,c,A,v),T.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&ih.enqueueReplaceState(T,T.state,null),rh(l,v,T,b),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308)}var Zo=[],Qo=0,ah=null,sh=0,fi=[],pi=0,Gs=null,xa=1,ya="";function Ws(l,c){Zo[Qo++]=sh,Zo[Qo++]=ah,ah=l,sh=c}function v_(l,c,v){fi[pi++]=xa,fi[pi++]=ya,fi[pi++]=Gs,Gs=l;var b=xa;l=ya;var T=32-br(b)-1;b&=~(1<<T),v+=1;var A=32-br(c)+T;if(30<A){var B=T-T%5;A=(b&(1<<B)-1).toString(32),b>>=B,T-=B,xa=1<<32-br(c)+T|v<<T|b,ya=A+l}else xa=1<<A|v<<T|b,ya=l}function ug(l){l.return!==null&&(Ws(l,1),v_(l,1,0))}function dg(l){for(;l===ah;)ah=Zo[--Qo],Zo[Qo]=null,sh=Zo[--Qo],Zo[Qo]=null;for(;l===Gs;)Gs=fi[--pi],fi[pi]=null,ya=fi[--pi],fi[pi]=null,xa=fi[--pi],fi[pi]=null}var Xr=null,qr=null,sn=!1,Nc=!1,Ri=null;function x_(l,c){var v=xi(5,null,null,0);v.elementType="DELETED",v.stateNode=c,v.return=l,c=l.deletions,c===null?(l.deletions=[v],l.flags|=16):c.push(v)}function y_(l,c){switch(l.tag){case 5:return c=Mt(c,l.type,l.pendingProps),c!==null?(l.stateNode=c,Xr=l,qr=Gt(c),!0):!1;case 6:return c=Fe(c,l.pendingProps),c!==null?(l.stateNode=c,Xr=l,qr=null,!0):!1;case 13:if(c=qe(c),c!==null){var v=Gs!==null?{id:xa,overflow:ya}:null;return l.memoizedState={dehydrated:c,treeContext:v,retryLane:1073741824},v=xi(18,null,null,0),v.stateNode=c,v.return=l,l.child=v,Xr=l,qr=null,!0}return!1;default:return!1}}function hg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function fg(l){if(sn){var c=qr;if(c){var v=c;if(!y_(l,c)){if(hg(l))throw Error(a(418));c=Vt(v);var b=Xr;c&&y_(l,c)?x_(b,v):(l.flags=l.flags&-4097|2,sn=!1,Xr=l)}}else{if(hg(l))throw Error(a(418));l.flags=l.flags&-4097|2,sn=!1,Xr=l}}}function b_(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Xr=l}function Lc(l){if(!X||l!==Xr)return!1;if(!sn)return b_(l),sn=!0,!1;if(l.tag!==3&&(l.tag!==5||re(l.type)&&!xe(l.type,l.memoizedProps))){var c=qr;if(c){if(hg(l)){for(l=qr;l;)l=Vt(l);throw Error(a(418))}for(;c;)x_(l,c),c=Vt(c)}}if(b_(l),l.tag===13){if(!X)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));qr=Wr(l)}else qr=Xr?Vt(l.stateNode):null;return!0}function Jo(){X&&(qr=Xr=null,Nc=sn=!1)}function pg(l){Ri===null?Ri=[l]:Ri.push(l)}function Ic(l,c,v){if(l=v.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(a(309));var b=v.stateNode}if(!b)throw Error(a(147,l));var T=b,A=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(B){var Q=T.refs;Q===f_&&(Q=T.refs={}),B===null?delete Q[A]:Q[A]=B},c._stringRef=A,c)}if(typeof l!="string")throw Error(a(284));if(!v._owner)throw Error(a(290,l))}return l}function oh(l,c){throw l=Object.prototype.toString.call(c),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function __(l){var c=l._init;return c(l._payload)}function w_(l){function c(ue,ee){if(l){var fe=ue.deletions;fe===null?(ue.deletions=[ee],ue.flags|=16):fe.push(ee)}}function v(ue,ee){if(!l)return null;for(;ee!==null;)c(ue,ee),ee=ee.sibling;return null}function b(ue,ee){for(ue=new Map;ee!==null;)ee.key!==null?ue.set(ee.key,ee):ue.set(ee.index,ee),ee=ee.sibling;return ue}function T(ue,ee){return ue=Za(ue,ee),ue.index=0,ue.sibling=null,ue}function A(ue,ee,fe){return ue.index=fe,l?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<ee?(ue.flags|=2,ee):fe):(ue.flags|=2,ee)):(ue.flags|=1048576,ee)}function B(ue){return l&&ue.alternate===null&&(ue.flags|=2),ue}function Q(ue,ee,fe,Xe){return ee===null||ee.tag!==6?(ee=Kg(fe,ue.mode,Xe),ee.return=ue,ee):(ee=T(ee,fe),ee.return=ue,ee)}function ve(ue,ee,fe,Xe){var ot=fe.type;return ot===d?et(ue,ee,fe.props.children,Xe,fe.key):ee!==null&&(ee.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&__(ot)===ee.type)?(Xe=T(ee,fe.props),Xe.ref=Ic(ue,ee,fe),Xe.return=ue,Xe):(Xe=jh(fe.type,fe.key,fe.props,null,ue.mode,Xe),Xe.ref=Ic(ue,ee,fe),Xe.return=ue,Xe)}function je(ue,ee,fe,Xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==fe.containerInfo||ee.stateNode.implementation!==fe.implementation?(ee=Zg(fe,ue.mode,Xe),ee.return=ue,ee):(ee=T(ee,fe.children||[]),ee.return=ue,ee)}function et(ue,ee,fe,Xe,ot){return ee===null||ee.tag!==7?(ee=Qs(fe,ue.mode,Xe,ot),ee.return=ue,ee):(ee=T(ee,fe),ee.return=ue,ee)}function wt(ue,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Kg(""+ee,ue.mode,fe),ee.return=ue,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case o:return fe=jh(ee.type,ee.key,ee.props,null,ue.mode,fe),fe.ref=Ic(ue,null,ee),fe.return=ue,fe;case u:return ee=Zg(ee,ue.mode,fe),ee.return=ue,ee;case S:var Xe=ee._init;return wt(ue,Xe(ee._payload),fe)}if(Y(ee)||N(ee))return ee=Qs(ee,ue.mode,fe,null),ee.return=ue,ee;oh(ue,ee)}return null}function ht(ue,ee,fe,Xe){var ot=ee!==null?ee.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ot!==null?null:Q(ue,ee,""+fe,Xe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case o:return fe.key===ot?ve(ue,ee,fe,Xe):null;case u:return fe.key===ot?je(ue,ee,fe,Xe):null;case S:return ot=fe._init,ht(ue,ee,ot(fe._payload),Xe)}if(Y(fe)||N(fe))return ot!==null?null:et(ue,ee,fe,Xe,null);oh(ue,fe)}return null}function Kt(ue,ee,fe,Xe,ot){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return ue=ue.get(fe)||null,Q(ee,ue,""+Xe,ot);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case o:return ue=ue.get(Xe.key===null?fe:Xe.key)||null,ve(ee,ue,Xe,ot);case u:return ue=ue.get(Xe.key===null?fe:Xe.key)||null,je(ee,ue,Xe,ot);case S:var Ct=Xe._init;return Kt(ue,ee,fe,Ct(Xe._payload),ot)}if(Y(Xe)||N(Xe))return ue=ue.get(fe)||null,et(ee,ue,Xe,ot,null);oh(ee,Xe)}return null}function st(ue,ee,fe,Xe){for(var ot=null,Ct=null,St=ee,Ft=ee=0,Yn=null;St!==null&&Ft<fe.length;Ft++){St.index>Ft?(Yn=St,St=null):Yn=St.sibling;var zt=ht(ue,St,fe[Ft],Xe);if(zt===null){St===null&&(St=Yn);break}l&&St&&zt.alternate===null&&c(ue,St),ee=A(zt,ee,Ft),Ct===null?ot=zt:Ct.sibling=zt,Ct=zt,St=Yn}if(Ft===fe.length)return v(ue,St),sn&&Ws(ue,Ft),ot;if(St===null){for(;Ft<fe.length;Ft++)St=wt(ue,fe[Ft],Xe),St!==null&&(ee=A(St,ee,Ft),Ct===null?ot=St:Ct.sibling=St,Ct=St);return sn&&Ws(ue,Ft),ot}for(St=b(ue,St);Ft<fe.length;Ft++)Yn=Kt(St,ue,Ft,fe[Ft],Xe),Yn!==null&&(l&&Yn.alternate!==null&&St.delete(Yn.key===null?Ft:Yn.key),ee=A(Yn,ee,Ft),Ct===null?ot=Yn:Ct.sibling=Yn,Ct=Yn);return l&&St.forEach(function(Qa){return c(ue,Qa)}),sn&&Ws(ue,Ft),ot}function or(ue,ee,fe,Xe){var ot=N(fe);if(typeof ot!="function")throw Error(a(150));if(fe=ot.call(fe),fe==null)throw Error(a(151));for(var Ct=ot=null,St=ee,Ft=ee=0,Yn=null,zt=fe.next();St!==null&&!zt.done;Ft++,zt=fe.next()){St.index>Ft?(Yn=St,St=null):Yn=St.sibling;var Qa=ht(ue,St,zt.value,Xe);if(Qa===null){St===null&&(St=Yn);break}l&&St&&Qa.alternate===null&&c(ue,St),ee=A(Qa,ee,Ft),Ct===null?ot=Qa:Ct.sibling=Qa,Ct=Qa,St=Yn}if(zt.done)return v(ue,St),sn&&Ws(ue,Ft),ot;if(St===null){for(;!zt.done;Ft++,zt=fe.next())zt=wt(ue,zt.value,Xe),zt!==null&&(ee=A(zt,ee,Ft),Ct===null?ot=zt:Ct.sibling=zt,Ct=zt);return sn&&Ws(ue,Ft),ot}for(St=b(ue,St);!zt.done;Ft++,zt=fe.next())zt=Kt(St,ue,Ft,zt.value,Xe),zt!==null&&(l&&zt.alternate!==null&&St.delete(zt.key===null?Ft:zt.key),ee=A(zt,ee,Ft),Ct===null?ot=zt:Ct.sibling=zt,Ct=zt);return l&&St.forEach(function(tR){return c(ue,tR)}),sn&&Ws(ue,Ft),ot}function yi(ue,ee,fe,Xe){if(typeof fe=="object"&&fe!==null&&fe.type===d&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case o:e:{for(var ot=fe.key,Ct=ee;Ct!==null;){if(Ct.key===ot){if(ot=fe.type,ot===d){if(Ct.tag===7){v(ue,Ct.sibling),ee=T(Ct,fe.props.children),ee.return=ue,ue=ee;break e}}else if(Ct.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&__(ot)===Ct.type){v(ue,Ct.sibling),ee=T(Ct,fe.props),ee.ref=Ic(ue,Ct,fe),ee.return=ue,ue=ee;break e}v(ue,Ct);break}else c(ue,Ct);Ct=Ct.sibling}fe.type===d?(ee=Qs(fe.props.children,ue.mode,Xe,fe.key),ee.return=ue,ue=ee):(Xe=jh(fe.type,fe.key,fe.props,null,ue.mode,Xe),Xe.ref=Ic(ue,ee,fe),Xe.return=ue,ue=Xe)}return B(ue);case u:e:{for(Ct=fe.key;ee!==null;){if(ee.key===Ct)if(ee.tag===4&&ee.stateNode.containerInfo===fe.containerInfo&&ee.stateNode.implementation===fe.implementation){v(ue,ee.sibling),ee=T(ee,fe.children||[]),ee.return=ue,ue=ee;break e}else{v(ue,ee);break}else c(ue,ee);ee=ee.sibling}ee=Zg(fe,ue.mode,Xe),ee.return=ue,ue=ee}return B(ue);case S:return Ct=fe._init,yi(ue,ee,Ct(fe._payload),Xe)}if(Y(fe))return st(ue,ee,fe,Xe);if(N(fe))return or(ue,ee,fe,Xe);oh(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ee!==null&&ee.tag===6?(v(ue,ee.sibling),ee=T(ee,fe),ee.return=ue,ue=ee):(v(ue,ee),ee=Kg(fe,ue.mode,Xe),ee.return=ue,ue=ee),B(ue)):v(ue,ee)}return yi}var el=w_(!0),S_=w_(!1),kc={},mi=wn(kc),Dc=wn(kc),tl=wn(kc);function Qi(l){if(l===kc)throw Error(a(174));return l}function mg(l,c){pt(tl,c),pt(Dc,l),pt(mi,kc),l=de(c),It(mi),pt(mi,l)}function nl(){It(mi),It(Dc),It(tl)}function M_(l){var c=Qi(tl.current),v=Qi(mi.current);c=ge(v,l.type,c),v!==c&&(pt(Dc,l),pt(mi,c))}function gg(l){Dc.current===l&&(It(mi),It(Dc))}var un=wn(0);function lh(l){for(var c=l;c!==null;){if(c.tag===13){var v=c.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||ct(v)||bt(v)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var vg=[];function xg(){for(var l=0;l<vg.length;l++){var c=vg[l];at?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}vg.length=0}var ch=s.ReactCurrentDispatcher,gi=s.ReactCurrentBatchConfig,rl=0,gn=null,ir=null,qn=null,uh=!1,Oc=!1,Uc=0,EC=0;function ar(){throw Error(a(321))}function yg(l,c){if(c===null)return!1;for(var v=0;v<c.length&&v<l.length;v++)if(!$i(l[v],c[v]))return!1;return!0}function bg(l,c,v,b,T,A){if(rl=A,gn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ch.current=l===null||l.memoizedState===null?PC:NC,l=v(b,T),Oc){A=0;do{if(Oc=!1,Uc=0,25<=A)throw Error(a(301));A+=1,qn=ir=null,c.updateQueue=null,ch.current=LC,l=v(b,T)}while(Oc)}if(ch.current=mh,c=ir!==null&&ir.next!==null,rl=0,qn=ir=gn=null,uh=!1,c)throw Error(a(300));return l}function _g(){var l=Uc!==0;return Uc=0,l}function ba(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?gn.memoizedState=qn=l:qn=qn.next=l,qn}function Ji(){if(ir===null){var l=gn.alternate;l=l!==null?l.memoizedState:null}else l=ir.next;var c=qn===null?gn.memoizedState:qn.next;if(c!==null)qn=c,ir=l;else{if(l===null)throw Error(a(310));ir=l,l={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},qn===null?gn.memoizedState=qn=l:qn=qn.next=l}return qn}function Xs(l,c){return typeof c=="function"?c(l):c}function dh(l){var c=Ji(),v=c.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=l;var b=ir,T=b.baseQueue,A=v.pending;if(A!==null){if(T!==null){var B=T.next;T.next=A.next,A.next=B}b.baseQueue=T=A,v.pending=null}if(T!==null){A=T.next,b=b.baseState;var Q=B=null,ve=null,je=A;do{var et=je.lane;if((rl&et)===et)ve!==null&&(ve=ve.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),b=je.hasEagerState?je.eagerState:l(b,je.action);else{var wt={lane:et,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};ve===null?(Q=ve=wt,B=b):ve=ve.next=wt,gn.lanes|=et,al|=et}je=je.next}while(je!==null&&je!==A);ve===null?B=b:ve.next=Q,$i(b,c.memoizedState)||(Yr=!0),c.memoizedState=b,c.baseState=B,c.baseQueue=ve,v.lastRenderedState=b}if(l=v.interleaved,l!==null){T=l;do A=T.lane,gn.lanes|=A,al|=A,T=T.next;while(T!==l)}else T===null&&(v.lanes=0);return[c.memoizedState,v.dispatch]}function hh(l){var c=Ji(),v=c.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=l;var b=v.dispatch,T=v.pending,A=c.memoizedState;if(T!==null){v.pending=null;var B=T=T.next;do A=l(A,B.action),B=B.next;while(B!==T);$i(A,c.memoizedState)||(Yr=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),v.lastRenderedState=A}return[A,b]}function T_(){}function E_(l,c){var v=gn,b=Ji(),T=c(),A=!$i(b.memoizedState,T);if(A&&(b.memoizedState=T,Yr=!0),b=b.queue,Fc(R_.bind(null,v,b,l),[l]),b.getSnapshot!==c||A||qn!==null&&qn.memoizedState.tag&1){if(v.flags|=2048,jc(9,C_.bind(null,v,b,T,c),void 0,null),Nn===null)throw Error(a(349));rl&30||A_(v,c,T)}return T}function A_(l,c,v){l.flags|=16384,l={getSnapshot:c,value:v},c=gn.updateQueue,c===null?(c={lastEffect:null,stores:null},gn.updateQueue=c,c.stores=[l]):(v=c.stores,v===null?c.stores=[l]:v.push(l))}function C_(l,c,v,b){c.value=v,c.getSnapshot=b,P_(c)&&vi(l,1,-1)}function R_(l,c,v){return v(function(){P_(c)&&vi(l,1,-1)})}function P_(l){var c=l.getSnapshot;l=l.value;try{var v=c();return!$i(l,v)}catch{return!0}}function wg(l){var c=ba();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:l},c.queue=l,l=l.dispatch=RC.bind(null,gn,l),[c.memoizedState,l]}function jc(l,c,v,b){return l={tag:l,create:c,destroy:v,deps:b,next:null},c=gn.updateQueue,c===null?(c={lastEffect:null,stores:null},gn.updateQueue=c,c.lastEffect=l.next=l):(v=c.lastEffect,v===null?c.lastEffect=l.next=l:(b=v.next,v.next=l,l.next=b,c.lastEffect=l)),l}function N_(){return Ji().memoizedState}function fh(l,c,v,b){var T=ba();gn.flags|=l,T.memoizedState=jc(1|c,v,void 0,b===void 0?null:b)}function ph(l,c,v,b){var T=Ji();b=b===void 0?null:b;var A=void 0;if(ir!==null){var B=ir.memoizedState;if(A=B.destroy,b!==null&&yg(b,B.deps)){T.memoizedState=jc(c,v,A,b);return}}gn.flags|=l,T.memoizedState=jc(1|c,v,A,b)}function Sg(l,c){return fh(8390656,8,l,c)}function Fc(l,c){return ph(2048,8,l,c)}function L_(l,c){return ph(4,2,l,c)}function I_(l,c){return ph(4,4,l,c)}function k_(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function D_(l,c,v){return v=v!=null?v.concat([l]):null,ph(4,4,k_.bind(null,c,l),v)}function Mg(){}function O_(l,c){var v=Ji();c=c===void 0?null:c;var b=v.memoizedState;return b!==null&&c!==null&&yg(c,b[1])?b[0]:(v.memoizedState=[l,c],l)}function U_(l,c){var v=Ji();c=c===void 0?null:c;var b=v.memoizedState;return b!==null&&c!==null&&yg(c,b[1])?b[0]:(l=l(),v.memoizedState=[l,c],l)}function AC(l,c){var v=jt;jt=v!==0&&4>v?v:4,l(!0);var b=gi.transition;gi.transition={};try{l(!1),c()}finally{jt=v,gi.transition=b}}function j_(){return Ji().memoizedState}function CC(l,c,v){var b=$a(l);v={lane:b,action:v,hasEagerState:!1,eagerState:null,next:null},F_(l)?z_(c,v):(B_(l,c,v),v=wr(),l=vi(l,b,v),l!==null&&H_(l,c,b))}function RC(l,c,v){var b=$a(l),T={lane:b,action:v,hasEagerState:!1,eagerState:null,next:null};if(F_(l))z_(c,T);else{B_(l,c,T);var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var B=c.lastRenderedState,Q=A(B,v);if(T.hasEagerState=!0,T.eagerState=Q,$i(Q,B))return}catch{}finally{}v=wr(),l=vi(l,b,v),l!==null&&H_(l,c,b)}}function F_(l){var c=l.alternate;return l===gn||c!==null&&c===gn}function z_(l,c){Oc=uh=!0;var v=l.pending;v===null?c.next=c:(c.next=v.next,v.next=c),l.pending=c}function B_(l,c,v){Nn!==null&&l.mode&1&&!(Nt&2)?(l=c.interleaved,l===null?(v.next=v,Zi===null?Zi=[c]:Zi.push(c)):(v.next=l.next,l.next=v),c.interleaved=v):(l=c.pending,l===null?v.next=v:(v.next=l.next,l.next=v),c.pending=v)}function H_(l,c,v){if(v&4194240){var b=c.lanes;b&=l.pendingLanes,v|=b,c.lanes=v,Qm(l,v)}}var mh={readContext:hi,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},PC={readContext:hi,useCallback:function(l,c){return ba().memoizedState=[l,c===void 0?null:c],l},useContext:hi,useEffect:Sg,useImperativeHandle:function(l,c,v){return v=v!=null?v.concat([l]):null,fh(4194308,4,k_.bind(null,c,l),v)},useLayoutEffect:function(l,c){return fh(4194308,4,l,c)},useInsertionEffect:function(l,c){return fh(4,2,l,c)},useMemo:function(l,c){var v=ba();return c=c===void 0?null:c,l=l(),v.memoizedState=[l,c],l},useReducer:function(l,c,v){var b=ba();return c=v!==void 0?v(c):c,b.memoizedState=b.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},b.queue=l,l=l.dispatch=CC.bind(null,gn,l),[b.memoizedState,l]},useRef:function(l){var c=ba();return l={current:l},c.memoizedState=l},useState:wg,useDebugValue:Mg,useDeferredValue:function(l){var c=wg(l),v=c[0],b=c[1];return Sg(function(){var T=gi.transition;gi.transition={};try{b(l)}finally{gi.transition=T}},[l]),v},useTransition:function(){var l=wg(!1),c=l[0];return l=AC.bind(null,l[1]),ba().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,v){var b=gn,T=ba();if(sn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=c(),Nn===null)throw Error(a(349));rl&30||A_(b,c,v)}T.memoizedState=v;var A={value:v,getSnapshot:c};return T.queue=A,Sg(R_.bind(null,b,A,l),[l]),b.flags|=2048,jc(9,C_.bind(null,b,A,v,c),void 0,null),v},useId:function(){var l=ba(),c=Nn.identifierPrefix;if(sn){var v=ya,b=xa;v=(b&~(1<<32-br(b)-1)).toString(32)+v,c=":"+c+"R"+v,v=Uc++,0<v&&(c+="H"+v.toString(32)),c+=":"}else v=EC++,c=":"+c+"r"+v.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},NC={readContext:hi,useCallback:O_,useContext:hi,useEffect:Fc,useImperativeHandle:D_,useInsertionEffect:L_,useLayoutEffect:I_,useMemo:U_,useReducer:dh,useRef:N_,useState:function(){return dh(Xs)},useDebugValue:Mg,useDeferredValue:function(l){var c=dh(Xs),v=c[0],b=c[1];return Fc(function(){var T=gi.transition;gi.transition={};try{b(l)}finally{gi.transition=T}},[l]),v},useTransition:function(){var l=dh(Xs)[0],c=Ji().memoizedState;return[l,c]},useMutableSource:T_,useSyncExternalStore:E_,useId:j_,unstable_isNewReconciler:!1},LC={readContext:hi,useCallback:O_,useContext:hi,useEffect:Fc,useImperativeHandle:D_,useInsertionEffect:L_,useLayoutEffect:I_,useMemo:U_,useReducer:hh,useRef:N_,useState:function(){return hh(Xs)},useDebugValue:Mg,useDeferredValue:function(l){var c=hh(Xs),v=c[0],b=c[1];return Fc(function(){var T=gi.transition;gi.transition={};try{b(l)}finally{gi.transition=T}},[l]),v},useTransition:function(){var l=hh(Xs)[0],c=Ji().memoizedState;return[l,c]},useMutableSource:T_,useSyncExternalStore:E_,useId:j_,unstable_isNewReconciler:!1};function Tg(l,c){try{var v="",b=c;do v+=TC(b),b=b.return;while(b);var T=v}catch(A){T=`
Error generating stack: `+A.message+`
`+A.stack}return{value:l,source:c,stack:T}}function Eg(l,c){try{console.error(c.value)}catch(v){setTimeout(function(){throw v})}}var IC=typeof WeakMap=="function"?WeakMap:Map;function V_(l,c,v){v=va(-1,v),v.tag=3,v.payload={element:null};var b=c.value;return v.callback=function(){Nh||(Nh=!0,Vg=b),Eg(l,c)},v}function G_(l,c,v){v=va(-1,v),v.tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var T=c.value;v.payload=function(){return b(T)},v.callback=function(){Eg(l,c)}}var A=l.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(v.callback=function(){Eg(l,c),typeof b!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var B=c.stack;this.componentDidCatch(c.value,{componentStack:B!==null?B:""})}),v}function W_(l,c,v){var b=l.pingCache;if(b===null){b=l.pingCache=new IC;var T=new Set;b.set(c,T)}else T=b.get(c),T===void 0&&(T=new Set,b.set(c,T));T.has(v)||(T.add(v),l=qC.bind(null,l,c,v),c.then(l,l))}function X_(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function q_(l,c,v,b,T){return l.mode&1?(l.flags|=65536,l.lanes=T,l):(l===c?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(c=va(-1,1),c.tag=2,Xa(v,c))),v.lanes|=1),l)}function ea(l){l.flags|=4}function Y_(l,c){if(l!==null&&l.child===c.child)return!0;if(c.flags&16)return!1;for(l=c.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var zc,Bc,gh,vh;if(Ge)zc=function(l,c){for(var v=c.child;v!==null;){if(v.tag===5||v.tag===6)se(l,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Bc=function(){},gh=function(l,c,v,b,T){if(l=l.memoizedProps,l!==b){var A=c.stateNode,B=Qi(mi.current);v=ie(A,v,l,b,T,B),(c.updateQueue=v)&&ea(c)}},vh=function(l,c,v,b){v!==b&&ea(c)};else if(ye){zc=function(l,c,v,b){for(var T=c.child;T!==null;){if(T.tag===5){var A=T.stateNode;v&&b&&(A=Re(A,T.type,T.memoizedProps,T)),se(l,A)}else if(T.tag===6)A=T.stateNode,v&&b&&(A=Ae(A,T.memoizedProps,T)),se(l,A);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)A=T.child,A!==null&&(A.return=T),zc(l,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var $_=function(l,c,v,b){for(var T=c.child;T!==null;){if(T.tag===5){var A=T.stateNode;v&&b&&(A=Re(A,T.type,T.memoizedProps,T)),he(l,A)}else if(T.tag===6)A=T.stateNode,v&&b&&(A=Ae(A,T.memoizedProps,T)),he(l,A);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)A=T.child,A!==null&&(A.return=T),$_(l,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Bc=function(l,c){var v=c.stateNode;if(!Y_(l,c)){l=v.containerInfo;var b=oe(l);$_(b,c,!1,!1),v.pendingChildren=b,ea(c),_e(l,b)}},gh=function(l,c,v,b,T){var A=l.stateNode,B=l.memoizedProps;if((l=Y_(l,c))&&B===b)c.stateNode=A;else{var Q=c.stateNode,ve=Qi(mi.current),je=null;B!==b&&(je=ie(Q,v,B,b,T,ve)),l&&je===null?c.stateNode=A:(A=$(A,je,v,B,b,c,l,Q),me(A,v,b,T,ve)&&ea(c),c.stateNode=A,l?ea(c):zc(A,c,!1,!1))}},vh=function(l,c,v,b){v!==b?(l=Qi(tl.current),v=Qi(mi.current),c.stateNode=ze(b,l,v,c),ea(c)):c.stateNode=l.stateNode}}else Bc=function(){},gh=function(){},vh=function(){};function Hc(l,c){if(!sn)switch(l.tailMode){case"hidden":c=l.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var b=null;v!==null;)v.alternate!==null&&(b=v),v=v.sibling;b===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function sr(l){var c=l.alternate!==null&&l.alternate.child===l.child,v=0,b=0;if(c)for(var T=l.child;T!==null;)v|=T.lanes|T.childLanes,b|=T.subtreeFlags&14680064,b|=T.flags&14680064,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)v|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=v,c}function kC(l,c,v){var b=c.pendingProps;switch(dg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(c),null;case 1:return Pn(c.type)&&Va(),sr(c),null;case 3:return b=c.stateNode,nl(),It(Wn),It(Rn),xg(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(l===null||l.child===null)&&(Lc(c)?ea(c):l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Ri!==null&&(Xg(Ri),Ri=null))),Bc(l,c),sr(c),null;case 5:gg(c),v=Qi(tl.current);var T=c.type;if(l!==null&&c.stateNode!=null)gh(l,c,T,b,v),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!b){if(c.stateNode===null)throw Error(a(166));return sr(c),null}if(l=Qi(mi.current),Lc(c)){if(!X)throw Error(a(175));l=vr(c.stateNode,c.type,c.memoizedProps,v,l,c,!Nc),c.updateQueue=l,l!==null&&ea(c)}else{var A=K(T,b,v,l,c);zc(A,c,!1,!1),c.stateNode=A,me(A,T,b,v,l)&&ea(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return sr(c),null;case 6:if(l&&c.stateNode!=null)vh(l,c,l.memoizedProps,b);else{if(typeof b!="string"&&c.stateNode===null)throw Error(a(166));if(l=Qi(tl.current),v=Qi(mi.current),Lc(c)){if(!X)throw Error(a(176));if(l=c.stateNode,b=c.memoizedProps,(v=jn(l,b,c,!Nc))&&(T=Xr,T!==null))switch(A=(T.mode&1)!==0,T.tag){case 3:Ce(T.stateNode.containerInfo,l,b,A);break;case 5:Ze(T.type,T.memoizedProps,T.stateNode,l,b,A)}v&&ea(c)}else c.stateNode=ze(b,l,v,c)}return sr(c),null;case 13:if(It(un),b=c.memoizedState,sn&&qr!==null&&c.mode&1&&!(c.flags&128)){for(l=qr;l;)l=Vt(l);return Jo(),c.flags|=98560,c}if(b!==null&&b.dehydrated!==null){if(b=Lc(c),l===null){if(!b)throw Error(a(318));if(!X)throw Error(a(344));if(l=c.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));mn(l,c)}else Jo(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return sr(c),null}return Ri!==null&&(Xg(Ri),Ri=null),c.flags&128?(c.lanes=v,c):(b=b!==null,v=!1,l===null?Lc(c):v=l.memoizedState!==null,b&&!v&&(c.child.flags|=8192,c.mode&1&&(l===null||un.current&1?zn===0&&(zn=3):Yg())),c.updateQueue!==null&&(c.flags|=4),sr(c),null);case 4:return nl(),Bc(l,c),l===null&&Me(c.stateNode.containerInfo),sr(c),null;case 10:return ag(c.type._context),sr(c),null;case 17:return Pn(c.type)&&Va(),sr(c),null;case 19:if(It(un),T=c.memoizedState,T===null)return sr(c),null;if(b=(c.flags&128)!==0,A=T.rendering,A===null)if(b)Hc(T,!1);else{if(zn!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(A=lh(l),A!==null){for(c.flags|=128,Hc(T,!1),l=A.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),c.subtreeFlags=0,l=v,b=c.child;b!==null;)v=b,T=l,v.flags&=14680066,A=v.alternate,A===null?(v.childLanes=0,v.lanes=T,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,v.type=A.type,T=A.dependencies,v.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),b=b.sibling;return pt(un,un.current&1|2),c.child}l=l.sibling}T.tail!==null&&Xn()>Hg&&(c.flags|=128,b=!0,Hc(T,!1),c.lanes=4194304)}else{if(!b)if(l=lh(A),l!==null){if(c.flags|=128,b=!0,l=l.updateQueue,l!==null&&(c.updateQueue=l,c.flags|=4),Hc(T,!0),T.tail===null&&T.tailMode==="hidden"&&!A.alternate&&!sn)return sr(c),null}else 2*Xn()-T.renderingStartTime>Hg&&v!==1073741824&&(c.flags|=128,b=!0,Hc(T,!1),c.lanes=4194304);T.isBackwards?(A.sibling=c.child,c.child=A):(l=T.last,l!==null?l.sibling=A:c.child=A,T.last=A)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=Xn(),c.sibling=null,l=un.current,pt(un,b?l&1|2:l&1),c):(sr(c),null);case 22:case 23:return qg(),b=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==b&&(c.flags|=8192),b&&c.mode&1?$r&1073741824&&(sr(c),Ge&&c.subtreeFlags&6&&(c.flags|=8192)):sr(c),null;case 24:return null;case 25:return null}throw Error(a(156,c.tag))}var DC=s.ReactCurrentOwner,Yr=!1;function _r(l,c,v,b){c.child=l===null?S_(c,null,v,b):el(c,l.child,v,b)}function K_(l,c,v,b,T){v=v.render;var A=c.ref;return Ko(c,T),b=bg(l,c,v,b,A,T),v=_g(),l!==null&&!Yr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,_a(l,c,T)):(sn&&v&&ug(c),c.flags|=1,_r(l,c,b,T),c.child)}function Z_(l,c,v,b,T){if(l===null){var A=v.type;return typeof A=="function"&&!$g(A)&&A.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(c.tag=15,c.type=A,Q_(l,c,A,b,T)):(l=jh(v.type,null,b,c,c.mode,T),l.ref=c.ref,l.return=c,c.child=l)}if(A=l.child,!(l.lanes&T)){var B=A.memoizedProps;if(v=v.compare,v=v!==null?v:Jd,v(B,b)&&l.ref===c.ref)return _a(l,c,T)}return c.flags|=1,l=Za(A,b),l.ref=c.ref,l.return=c,c.child=l}function Q_(l,c,v,b,T){if(l!==null&&Jd(l.memoizedProps,b)&&l.ref===c.ref)if(Yr=!1,(l.lanes&T)!==0)l.flags&131072&&(Yr=!0);else return c.lanes=l.lanes,_a(l,c,T);return Ag(l,c,v,b,T)}function J_(l,c,v){var b=c.pendingProps,T=b.children,A=l!==null?l.memoizedState:null;if(b.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},pt(il,$r),$r|=v;else if(v&1073741824)c.memoizedState={baseLanes:0,cachePool:null},b=A!==null?A.baseLanes:v,pt(il,$r),$r|=b;else return l=A!==null?A.baseLanes|v:v,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null},c.updateQueue=null,pt(il,$r),$r|=l,null;else A!==null?(b=A.baseLanes|v,c.memoizedState=null):b=v,pt(il,$r),$r|=b;return _r(l,c,T,v),c.child}function e1(l,c){var v=c.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(c.flags|=512,c.flags|=2097152)}function Ag(l,c,v,b,T){var A=Pn(v)?xr:Rn.current;return A=ma(c,A),Ko(c,T),v=bg(l,c,v,b,A,T),b=_g(),l!==null&&!Yr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,_a(l,c,T)):(sn&&b&&ug(c),c.flags|=1,_r(l,c,v,T),c.child)}function t1(l,c,v,b,T){if(Pn(v)){var A=!0;Ga(c)}else A=!1;if(Ko(c,T),c.stateNode===null)l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),m_(c,v,b),cg(c,v,b,T),b=!0;else if(l===null){var B=c.stateNode,Q=c.memoizedProps;B.props=Q;var ve=B.context,je=v.contextType;typeof je=="object"&&je!==null?je=hi(je):(je=Pn(v)?xr:Rn.current,je=ma(c,je));var et=v.getDerivedStateFromProps,wt=typeof et=="function"||typeof B.getSnapshotBeforeUpdate=="function";wt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==b||ve!==je)&&g_(c,B,b,je),Wa=!1;var ht=c.memoizedState;B.state=ht,rh(c,b,B,T),ve=c.memoizedState,Q!==b||ht!==ve||Wn.current||Wa?(typeof et=="function"&&(lg(c,v,et,b),ve=c.memoizedState),(Q=Wa||p_(c,v,Q,b,ht,ve,je))?(wt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(c.flags|=4194308)):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=b,c.memoizedState=ve),B.props=b,B.state=ve,B.context=je,b=Q):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),b=!1)}else{B=c.stateNode,u_(l,c),Q=c.memoizedProps,je=c.type===c.elementType?Q:Ci(c.type,Q),B.props=je,wt=c.pendingProps,ht=B.context,ve=v.contextType,typeof ve=="object"&&ve!==null?ve=hi(ve):(ve=Pn(v)?xr:Rn.current,ve=ma(c,ve));var Kt=v.getDerivedStateFromProps;(et=typeof Kt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==wt||ht!==ve)&&g_(c,B,b,ve),Wa=!1,ht=c.memoizedState,B.state=ht,rh(c,b,B,T);var st=c.memoizedState;Q!==wt||ht!==st||Wn.current||Wa?(typeof Kt=="function"&&(lg(c,v,Kt,b),st=c.memoizedState),(je=Wa||p_(c,v,je,b,ht,st,ve)||!1)?(et||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(b,st,ve),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(b,st,ve)),typeof B.componentDidUpdate=="function"&&(c.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof B.componentDidUpdate!="function"||Q===l.memoizedProps&&ht===l.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&ht===l.memoizedState||(c.flags|=1024),c.memoizedProps=b,c.memoizedState=st),B.props=b,B.state=st,B.context=ve,b=je):(typeof B.componentDidUpdate!="function"||Q===l.memoizedProps&&ht===l.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&ht===l.memoizedState||(c.flags|=1024),b=!1)}return Cg(l,c,v,b,A,T)}function Cg(l,c,v,b,T,A){e1(l,c);var B=(c.flags&128)!==0;if(!b&&!B)return T&&yr(c,v,!1),_a(l,c,A);b=c.stateNode,DC.current=c;var Q=B&&typeof v.getDerivedStateFromError!="function"?null:b.render();return c.flags|=1,l!==null&&B?(c.child=el(c,l.child,null,A),c.child=el(c,null,Q,A)):_r(l,c,Q,A),c.memoizedState=b.state,T&&yr(c,v,!0),c.child}function n1(l){var c=l.stateNode;c.pendingContext?Fn(l,c.pendingContext,c.pendingContext!==c.context):c.context&&Fn(l,c.context,!1),mg(l,c.containerInfo)}function r1(l,c,v,b,T){return Jo(),pg(T),c.flags|=256,_r(l,c,v,b),c.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function yh(l){return{baseLanes:l,cachePool:null}}function i1(l,c,v){var b=c.pendingProps,T=un.current,A=!1,B=(c.flags&128)!==0,Q;if((Q=B)||(Q=l!==null&&l.memoizedState===null?!1:(T&2)!==0),Q?(A=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(T|=1),pt(un,T&1),l===null)return fg(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(c.mode&1?bt(l)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(T=b.children,l=b.fallback,A?(b=c.mode,A=c.child,T={mode:"hidden",children:T},!(b&1)&&A!==null?(A.childLanes=0,A.pendingProps=T):A=Fh(T,b,0,null),l=Qs(l,b,v,null),A.return=c,l.return=c,A.sibling=l,c.child=A,c.child.memoizedState=yh(v),c.memoizedState=xh,l):Rg(c,T));if(T=l.memoizedState,T!==null){if(Q=T.dehydrated,Q!==null){if(B)return c.flags&256?(c.flags&=-257,bh(l,c,v,Error(a(422)))):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(A=b.fallback,T=c.mode,b=Fh({mode:"visible",children:b.children},T,0,null),A=Qs(A,T,v,null),A.flags|=2,b.return=c,A.return=c,b.sibling=A,c.child=b,c.mode&1&&el(c,l.child,null,v),c.child.memoizedState=yh(v),c.memoizedState=xh,A);if(!(c.mode&1))c=bh(l,c,v,null);else if(bt(Q))c=bh(l,c,v,Error(a(419)));else if(b=(v&l.childLanes)!==0,Yr||b){if(b=Nn,b!==null){switch(v&-v){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}b=A&(b.suspendedLanes|v)?0:A,b!==0&&b!==T.retryLane&&(T.retryLane=b,vi(l,b,-1))}Yg(),c=bh(l,c,v,Error(a(421)))}else ct(Q)?(c.flags|=128,c.child=l.child,c=YC.bind(null,l),Ht(Q,c),c=null):(v=T.treeContext,X&&(qr=Ut(Q),Xr=c,sn=!0,Ri=null,Nc=!1,v!==null&&(fi[pi++]=xa,fi[pi++]=ya,fi[pi++]=Gs,xa=v.id,ya=v.overflow,Gs=c)),c=Rg(c,c.pendingProps.children),c.flags|=4096);return c}return A?(b=s1(l,c,b.children,b.fallback,v),A=c.child,T=l.child.memoizedState,A.memoizedState=T===null?yh(v):{baseLanes:T.baseLanes|v,cachePool:null},A.childLanes=l.childLanes&~v,c.memoizedState=xh,b):(v=a1(l,c,b.children,v),c.memoizedState=null,v)}return A?(b=s1(l,c,b.children,b.fallback,v),A=c.child,T=l.child.memoizedState,A.memoizedState=T===null?yh(v):{baseLanes:T.baseLanes|v,cachePool:null},A.childLanes=l.childLanes&~v,c.memoizedState=xh,b):(v=a1(l,c,b.children,v),c.memoizedState=null,v)}function Rg(l,c){return c=Fh({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function a1(l,c,v,b){var T=l.child;return l=T.sibling,v=Za(T,{mode:"visible",children:v}),!(c.mode&1)&&(v.lanes=b),v.return=c,v.sibling=null,l!==null&&(b=c.deletions,b===null?(c.deletions=[l],c.flags|=16):b.push(l)),c.child=v}function s1(l,c,v,b,T){var A=c.mode;l=l.child;var B=l.sibling,Q={mode:"hidden",children:v};return!(A&1)&&c.child!==l?(v=c.child,v.childLanes=0,v.pendingProps=Q,c.deletions=null):(v=Za(l,Q),v.subtreeFlags=l.subtreeFlags&14680064),B!==null?b=Za(B,b):(b=Qs(b,A,T,null),b.flags|=2),b.return=c,v.return=c,v.sibling=b,c.child=v,b}function bh(l,c,v,b){return b!==null&&pg(b),el(c,l.child,null,v),l=Rg(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function o1(l,c,v){l.lanes|=c;var b=l.alternate;b!==null&&(b.lanes|=c),sg(l.return,c,v)}function Pg(l,c,v,b,T){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:b,tail:v,tailMode:T}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=b,A.tail=v,A.tailMode=T)}function l1(l,c,v){var b=c.pendingProps,T=b.revealOrder,A=b.tail;if(_r(l,c,b.children,v),b=un.current,b&2)b=b&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&o1(l,v,c);else if(l.tag===19)o1(l,v,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(pt(un,b),!(c.mode&1))c.memoizedState=null;else switch(T){case"forwards":for(v=c.child,T=null;v!==null;)l=v.alternate,l!==null&&lh(l)===null&&(T=v),v=v.sibling;v=T,v===null?(T=c.child,c.child=null):(T=v.sibling,v.sibling=null),Pg(c,!1,T,v,A);break;case"backwards":for(v=null,T=c.child,c.child=null;T!==null;){if(l=T.alternate,l!==null&&lh(l)===null){c.child=T;break}l=T.sibling,T.sibling=v,v=T,T=l}Pg(c,!0,v,null,A);break;case"together":Pg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function _a(l,c,v){if(l!==null&&(c.dependencies=l.dependencies),al|=c.lanes,!(v&c.childLanes))return null;if(l!==null&&c.child!==l.child)throw Error(a(153));if(c.child!==null){for(l=c.child,v=Za(l,l.pendingProps),c.child=v,v.return=c;l.sibling!==null;)l=l.sibling,v=v.sibling=Za(l,l.pendingProps),v.return=c;v.sibling=null}return c.child}function OC(l,c,v){switch(c.tag){case 3:n1(c),Jo();break;case 5:M_(c);break;case 1:Pn(c.type)&&Ga(c);break;case 4:mg(c,c.stateNode.containerInfo);break;case 10:c_(c,c.type._context,c.memoizedProps.value);break;case 13:var b=c.memoizedState;if(b!==null)return b.dehydrated!==null?(pt(un,un.current&1),c.flags|=128,null):v&c.child.childLanes?i1(l,c,v):(pt(un,un.current&1),l=_a(l,c,v),l!==null?l.sibling:null);pt(un,un.current&1);break;case 19:if(b=(v&c.childLanes)!==0,l.flags&128){if(b)return l1(l,c,v);c.flags|=128}var T=c.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),pt(un,un.current),b)break;return null;case 22:case 23:return c.lanes=0,J_(l,c,v)}return _a(l,c,v)}function UC(l,c){switch(dg(c),c.tag){case 1:return Pn(c.type)&&Va(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return nl(),It(Wn),It(Rn),xg(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 5:return gg(c),null;case 13:if(It(un),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(a(340));Jo()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return It(un),null;case 4:return nl(),null;case 10:return ag(c.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var _h=!1,qs=!1,jC=typeof WeakSet=="function"?WeakSet:Set,We=null;function wh(l,c){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(b){Dr(l,c,b)}else v.current=null}function c1(l,c,v){try{v()}catch(b){Dr(l,c,b)}}var u1=!1;function FC(l,c){for(H(l.containerInfo),We=c;We!==null;)if(l=We,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,We=c;else for(;We!==null;){l=We;try{var v=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,T=v.memoizedState,A=l.stateNode,B=A.getSnapshotBeforeUpdate(l.elementType===l.type?b:Ci(l.type,b),T);A.__reactInternalSnapshotBeforeUpdate=B}break;case 3:Ge&&O(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Q){Dr(l,l.return,Q)}if(c=l.sibling,c!==null){c.return=l.return,We=c;break}We=l.return}return v=u1,u1=!1,v}function Ys(l,c,v){var b=c.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var T=b=b.next;do{if((T.tag&l)===l){var A=T.destroy;T.destroy=void 0,A!==void 0&&c1(c,v,A)}T=T.next}while(T!==b)}}function Vc(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var v=c=c.next;do{if((v.tag&l)===l){var b=v.create;v.destroy=b()}v=v.next}while(v!==c)}}function Ng(l){var c=l.ref;if(c!==null){var v=l.stateNode;switch(l.tag){case 5:l=J(v);break;default:l=v}typeof c=="function"?c(l):c.current=l}}function d1(l,c,v){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Zd,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(l=c.updateQueue,l!==null&&(l=l.lastEffect,l!==null)){var b=l=l.next;do{var T=b,A=T.destroy;T=T.tag,A!==void 0&&(T&2||T&4)&&c1(c,v,A),b=b.next}while(b!==l)}break;case 1:if(wh(c,v),l=c.stateNode,typeof l.componentWillUnmount=="function")try{l.props=c.memoizedProps,l.state=c.memoizedState,l.componentWillUnmount()}catch(B){Dr(c,v,B)}break;case 5:wh(c,v);break;case 4:Ge?v1(l,c,v):ye&&ye&&(c=c.stateNode.containerInfo,v=oe(c),Se(c,v))}}function h1(l,c,v){for(var b=c;;)if(d1(l,b,v),b.child===null||Ge&&b.tag===4){if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function f1(l){var c=l.alternate;c!==null&&(l.alternate=null,f1(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&ke(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function p1(l){return l.tag===5||l.tag===3||l.tag===4}function m1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||p1(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function g1(l){if(Ge){e:{for(var c=l.return;c!==null;){if(p1(c))break e;c=c.return}throw Error(a(160))}var v=c;switch(v.tag){case 5:c=v.stateNode,v.flags&32&&(yt(c),v.flags&=-33),v=m1(l),Ig(l,v,c);break;case 3:case 4:c=v.stateNode.containerInfo,v=m1(l),Lg(l,v,c);break;default:throw Error(a(161))}}}function Lg(l,c,v){var b=l.tag;if(b===5||b===6)l=l.stateNode,c?dt(v,l,c):lt(v,l);else if(b!==4&&(l=l.child,l!==null))for(Lg(l,c,v),l=l.sibling;l!==null;)Lg(l,c,v),l=l.sibling}function Ig(l,c,v){var b=l.tag;if(b===5||b===6)l=l.stateNode,c?xt(v,l,c):Ke(v,l);else if(b!==4&&(l=l.child,l!==null))for(Ig(l,c,v),l=l.sibling;l!==null;)Ig(l,c,v),l=l.sibling}function v1(l,c,v){for(var b=c,T=!1,A,B;;){if(!T){T=b.return;e:for(;;){if(T===null)throw Error(a(160));switch(A=T.stateNode,T.tag){case 5:B=!1;break e;case 3:A=A.containerInfo,B=!0;break e;case 4:A=A.containerInfo,B=!0;break e}T=T.return}T=!0}if(b.tag===5||b.tag===6)h1(l,b,v),B?Qe(A,b.stateNode):Oe(A,b.stateNode);else if(b.tag===18)B?le(A,b.stateNode):ae(A,b.stateNode);else if(b.tag===4){if(b.child!==null){A=b.stateNode.containerInfo,B=!0,b.child.return=b,b=b.child;continue}}else if(d1(l,b,v),b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return,b.tag===4&&(T=!1)}b.sibling.return=b.return,b=b.sibling}}function kg(l,c){if(Ge){switch(c.tag){case 0:case 11:case 14:case 15:Ys(3,c,c.return),Vc(3,c),Ys(5,c,c.return);return;case 1:return;case 5:var v=c.stateNode;if(v!=null){var b=c.memoizedProps;l=l!==null?l.memoizedProps:b;var T=c.type,A=c.updateQueue;c.updateQueue=null,A!==null&&Ot(v,A,T,l,b,c)}return;case 6:if(c.stateNode===null)throw Error(a(162));v=c.memoizedProps,vt(c.stateNode,l!==null?l.memoizedProps:v,v);return;case 3:X&&l!==null&&l.memoizedState.isDehydrated&&j(c.stateNode.containerInfo);return;case 12:return;case 13:Sh(c);return;case 19:Sh(c);return;case 17:return}throw Error(a(163))}switch(c.tag){case 0:case 11:case 14:case 15:Ys(3,c,c.return),Vc(3,c),Ys(5,c,c.return);return;case 12:return;case 13:Sh(c);return;case 19:Sh(c);return;case 3:X&&l!==null&&l.memoizedState.isDehydrated&&j(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(ye){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,Se(c.containerInfo,c.pendingChildren);break e}throw Error(a(163))}}function Sh(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new jC),c.forEach(function(b){var T=$C.bind(null,l,b);v.has(b)||(v.add(b),b.then(T,T))})}}function zC(l,c){for(We=c;We!==null;){c=We;var v=c.deletions;if(v!==null)for(var b=0;b<v.length;b++){var T=v[b];try{var A=l;Ge?v1(A,T,c):h1(A,T,c);var B=T.alternate;B!==null&&(B.return=null),T.return=null}catch(ot){Dr(T,c,ot)}}if(v=c.child,c.subtreeFlags&12854&&v!==null)v.return=c,We=v;else for(;We!==null;){c=We;try{var Q=c.flags;if(Q&32&&Ge&&yt(c.stateNode),Q&512){var ve=c.alternate;if(ve!==null){var je=ve.ref;je!==null&&(typeof je=="function"?je(null):je.current=null)}}if(Q&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var et=c.alternate;(et===null||et.memoizedState===null)&&(Bg=Xn())}break;case 22:var wt=c.memoizedState!==null,ht=c.alternate,Kt=ht!==null&&ht.memoizedState!==null;if(v=c,Ge){e:if(b=v,T=wt,A=null,Ge)for(var st=b;;){if(st.tag===5){if(A===null){A=st;var or=st.stateNode;T?C(or):V(st.stateNode,st.memoizedProps)}}else if(st.tag===6){if(A===null){var yi=st.stateNode;T?D(yi):W(yi,st.memoizedProps)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===b)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===b)break;for(;st.sibling===null;){if(st.return===null||st.return===b)break e;A===st&&(A=null),st=st.return}A===st&&(A=null),st.sibling.return=st.return,st=st.sibling}}if(wt&&!Kt&&v.mode&1){We=v;for(var ue=v.child;ue!==null;){for(v=We=ue;We!==null;){b=We;var ee=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Ys(4,b,b.return);break;case 1:wh(b,b.return);var fe=b.stateNode;if(typeof fe.componentWillUnmount=="function"){var Xe=b.return;try{fe.props=b.memoizedProps,fe.state=b.memoizedState,fe.componentWillUnmount()}catch(ot){Dr(b,Xe,ot)}}break;case 5:wh(b,b.return);break;case 22:if(b.memoizedState!==null){b1(v);continue}}ee!==null?(ee.return=b,We=ee):b1(v)}ue=ue.sibling}}}switch(Q&4102){case 2:g1(c),c.flags&=-3;break;case 6:g1(c),c.flags&=-3,kg(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,kg(c.alternate,c);break;case 4:kg(c.alternate,c)}}catch(ot){Dr(c,c.return,ot)}if(v=c.sibling,v!==null){v.return=c.return,We=v;break}We=c.return}}}function BC(l,c,v){We=l,x1(l)}function x1(l,c,v){for(var b=(l.mode&1)!==0;We!==null;){var T=We,A=T.child;if(T.tag===22&&b){var B=T.memoizedState!==null||_h;if(!B){var Q=T.alternate,ve=Q!==null&&Q.memoizedState!==null||qs;Q=_h;var je=qs;if(_h=B,(qs=ve)&&!je)for(We=T;We!==null;)B=We,ve=B.child,B.tag===22&&B.memoizedState!==null?_1(T):ve!==null?(ve.return=B,We=ve):_1(T);for(;A!==null;)We=A,x1(A),A=A.sibling;We=T,_h=Q,qs=je}y1(l)}else T.subtreeFlags&8772&&A!==null?(A.return=T,We=A):y1(l)}}function y1(l){for(;We!==null;){var c=We;if(c.flags&8772){var v=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:qs||Vc(5,c);break;case 1:var b=c.stateNode;if(c.flags&4&&!qs)if(v===null)b.componentDidMount();else{var T=c.elementType===c.type?v.memoizedProps:Ci(c.type,v.memoizedProps);b.componentDidUpdate(T,v.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&h_(c,A,b);break;case 3:var B=c.updateQueue;if(B!==null){if(v=null,c.child!==null)switch(c.child.tag){case 5:v=J(c.child.stateNode);break;case 1:v=c.child.stateNode}h_(c,B,v)}break;case 5:var Q=c.stateNode;v===null&&c.flags&4&&Pe(Q,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(X&&c.memoizedState===null){var ve=c.alternate;if(ve!==null){var je=ve.memoizedState;if(je!==null){var et=je.dehydrated;et!==null&&ne(et)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}qs||c.flags&512&&Ng(c)}catch(wt){Dr(c,c.return,wt)}}if(c===l){We=null;break}if(v=c.sibling,v!==null){v.return=c.return,We=v;break}We=c.return}}function b1(l){for(;We!==null;){var c=We;if(c===l){We=null;break}var v=c.sibling;if(v!==null){v.return=c.return,We=v;break}We=c.return}}function _1(l){for(;We!==null;){var c=We;try{switch(c.tag){case 0:case 11:case 15:var v=c.return;try{Vc(4,c)}catch(ve){Dr(c,v,ve)}break;case 1:var b=c.stateNode;if(typeof b.componentDidMount=="function"){var T=c.return;try{b.componentDidMount()}catch(ve){Dr(c,T,ve)}}var A=c.return;try{Ng(c)}catch(ve){Dr(c,A,ve)}break;case 5:var B=c.return;try{Ng(c)}catch(ve){Dr(c,B,ve)}}}catch(ve){Dr(c,c.return,ve)}if(c===l){We=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,We=Q;break}We=c.return}}var Mh=0,Th=1,Eh=2,Ah=3,Ch=4;if(typeof Symbol=="function"&&Symbol.for){var Gc=Symbol.for;Mh=Gc("selector.component"),Th=Gc("selector.has_pseudo_class"),Eh=Gc("selector.role"),Ah=Gc("selector.test_id"),Ch=Gc("selector.text")}function Dg(l){var c=Ue(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(l=k(l),l===null)throw Error(a(362));return l.stateNode.current}function Og(l,c){switch(c.$$typeof){case Mh:if(l.type===c.value)return!0;break;case Th:e:{c=c.value,l=[l,0];for(var v=0;v<l.length;){var b=l[v++],T=l[v++],A=c[T];if(b.tag!==5||!Ee(b)){for(;A!=null&&Og(b,A);)T++,A=c[T];if(T===c.length){c=!0;break e}else for(b=b.child;b!==null;)l.push(b,T),b=b.sibling}}c=!1}return c;case Eh:if(l.tag===5&&Le(l.stateNode,c.value))return!0;break;case Ch:if((l.tag===5||l.tag===6)&&(l=Ne(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case Ah:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Ug(l){switch(l.$$typeof){case Mh:return"<"+(P(l.value)||"Unknown")+">";case Th:return":has("+(Ug(l)||"")+")";case Eh:return'[role="'+l.value+'"]';case Ch:return'"'+l.value+'"';case Ah:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function w1(l,c){var v=[];l=[l,0];for(var b=0;b<l.length;){var T=l[b++],A=l[b++],B=c[A];if(T.tag!==5||!Ee(T)){for(;B!=null&&Og(T,B);)A++,B=c[A];if(A===c.length)v.push(T);else for(T=T.child;T!==null;)l.push(T,A),T=T.sibling}}return v}function jg(l,c){if(!F)throw Error(a(363));l=Dg(l),l=w1(l,c),c=[],l=Array.from(l);for(var v=0;v<l.length;){var b=l[v++];if(b.tag===5)Ee(b)||c.push(b.stateNode);else for(b=b.child;b!==null;)l.push(b),b=b.sibling}return c}var HC=Math.ceil,Rh=s.ReactCurrentDispatcher,Fg=s.ReactCurrentOwner,Sn=s.ReactCurrentBatchConfig,Nt=0,Nn=null,Ln=null,er=0,$r=0,il=wn(0),zn=0,Wc=null,al=0,Ph=0,zg=0,Xc=null,Ir=null,Bg=0,Hg=1/0;function sl(){Hg=Xn()+500}var Nh=!1,Vg=null,qa=null,Lh=!1,Ya=null,Ih=0,qc=0,Gg=null,kh=-1,Dh=0;function wr(){return Nt&6?Xn():kh!==-1?kh:kh=Xn()}function $a(l){return l.mode&1?Nt&2&&er!==0?er&-er:MC.transition!==null?(Dh===0&&(l=Yd,Yd<<=1,!(Yd&4194240)&&(Yd=64),Dh=l),Dh):(l=jt,l!==0?l:we()):1}function vi(l,c,v){if(50<qc)throw qc=0,Gg=null,Error(a(185));var b=Oh(l,c);return b===null?null:(Pc(b,c,v),(!(Nt&2)||b!==Nn)&&(b===Nn&&(!(Nt&2)&&(Ph|=c),zn===4&&Ka(b,er)),kr(b,v),c===1&&Nt===0&&!(l.mode&1)&&(sl(),Qd&&Ki())),b)}function Oh(l,c){l.lanes|=c;var v=l.alternate;for(v!==null&&(v.lanes|=c),v=l,l=l.return;l!==null;)l.childLanes|=c,v=l.alternate,v!==null&&(v.childLanes|=c),v=l,l=l.return;return v.tag===3?v.stateNode:null}function kr(l,c){var v=l.callbackNode;mC(l,c);var b=Kd(l,l===Nn?er:0);if(b===0)v!==null&&o_(v),l.callbackNode=null,l.callbackPriority=0;else if(c=b&-b,l.callbackPriority!==c){if(v!=null&&o_(v),c===1)l.tag===0?SC(M1.bind(null,l)):l_(M1.bind(null,l)),be?Ye(function(){Nt===0&&Ki()}):Jm(eg,Ki),v=null;else{switch(s_(b)){case 1:v=eg;break;case 4:v=yC;break;case 16:v=tg;break;case 536870912:v=bC;break;default:v=tg}v=I1(v,S1.bind(null,l))}l.callbackPriority=c,l.callbackNode=v}}function S1(l,c){if(kh=-1,Dh=0,Nt&6)throw Error(a(327));var v=l.callbackNode;if(Zs()&&l.callbackNode!==v)return null;var b=Kd(l,l===Nn?er:0);if(b===0)return null;if(b&30||b&l.expiredLanes||c)c=Uh(l,b);else{c=b;var T=Nt;Nt|=2;var A=A1();(Nn!==l||er!==c)&&(sl(),$s(l,c));do try{WC();break}catch(Q){E1(l,Q)}while(!0);ig(),Rh.current=A,Nt=T,Ln!==null?c=0:(Nn=null,er=0,c=zn)}if(c!==0){if(c===2&&(T=Km(l),T!==0&&(b=T,c=Wg(l,T))),c===1)throw v=Wc,$s(l,0),Ka(l,b),kr(l,Xn()),v;if(c===6)Ka(l,b);else{if(T=l.current.alternate,!(b&30)&&!VC(T)&&(c=Uh(l,b),c===2&&(A=Km(l),A!==0&&(b=A,c=Wg(l,A))),c===1))throw v=Wc,$s(l,0),Ka(l,b),kr(l,Xn()),v;switch(l.finishedWork=T,l.finishedLanes=b,c){case 0:case 1:throw Error(a(345));case 2:Ks(l,Ir);break;case 3:if(Ka(l,b),(b&130023424)===b&&(c=Bg+500-Xn(),10<c)){if(Kd(l,0)!==0)break;if(T=l.suspendedLanes,(T&b)!==b){wr(),l.pingedLanes|=l.suspendedLanes&T;break}l.timeoutHandle=De(Ks.bind(null,l,Ir),c);break}Ks(l,Ir);break;case 4:if(Ka(l,b),(b&4194240)===b)break;for(c=l.eventTimes,T=-1;0<b;){var B=31-br(b);A=1<<B,B=c[B],B>T&&(T=B),b&=~A}if(b=T,b=Xn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*HC(b/1960))-b,10<b){l.timeoutHandle=De(Ks.bind(null,l,Ir),b);break}Ks(l,Ir);break;case 5:Ks(l,Ir);break;default:throw Error(a(329))}}}return kr(l,Xn()),l.callbackNode===v?S1.bind(null,l):null}function Wg(l,c){var v=Xc;return l.current.memoizedState.isDehydrated&&($s(l,c).flags|=256),l=Uh(l,c),l!==2&&(c=Ir,Ir=v,c!==null&&Xg(c)),l}function Xg(l){Ir===null?Ir=l:Ir.push.apply(Ir,l)}function VC(l){for(var c=l;;){if(c.flags&16384){var v=c.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var b=0;b<v.length;b++){var T=v[b],A=T.getSnapshot;T=T.value;try{if(!$i(A(),T))return!1}catch{return!1}}}if(v=c.child,c.subtreeFlags&16384&&v!==null)v.return=c,c=v;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ka(l,c){for(c&=~zg,c&=~Ph,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var v=31-br(c),b=1<<v;l[v]=-1,c&=~b}}function M1(l){if(Nt&6)throw Error(a(327));Zs();var c=Kd(l,0);if(!(c&1))return kr(l,Xn()),null;var v=Uh(l,c);if(l.tag!==0&&v===2){var b=Km(l);b!==0&&(c=b,v=Wg(l,b))}if(v===1)throw v=Wc,$s(l,0),Ka(l,c),kr(l,Xn()),v;if(v===6)throw Error(a(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Ks(l,Ir),kr(l,Xn()),null}function T1(l){Ya!==null&&Ya.tag===0&&!(Nt&6)&&Zs();var c=Nt;Nt|=1;var v=Sn.transition,b=jt;try{if(Sn.transition=null,jt=1,l)return l()}finally{jt=b,Sn.transition=v,Nt=c,!(Nt&6)&&Ki()}}function qg(){$r=il.current,It(il)}function $s(l,c){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==ut&&(l.timeoutHandle=ut,Ve(v)),Ln!==null)for(v=Ln.return;v!==null;){var b=v;switch(dg(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Va();break;case 3:nl(),It(Wn),It(Rn),xg();break;case 5:gg(b);break;case 4:nl();break;case 13:It(un);break;case 19:It(un);break;case 10:ag(b.type._context);break;case 22:case 23:qg()}v=v.return}if(Nn=l,Ln=l=Za(l.current,null),er=$r=c,zn=0,Wc=null,zg=Ph=al=0,Ir=Xc=null,Zi!==null){for(c=0;c<Zi.length;c++)if(v=Zi[c],b=v.interleaved,b!==null){v.interleaved=null;var T=b.next,A=v.pending;if(A!==null){var B=A.next;A.next=T,b.next=B}v.pending=b}Zi=null}return l}function E1(l,c){do{var v=Ln;try{if(ig(),ch.current=mh,uh){for(var b=gn.memoizedState;b!==null;){var T=b.queue;T!==null&&(T.pending=null),b=b.next}uh=!1}if(rl=0,qn=ir=gn=null,Oc=!1,Uc=0,Fg.current=null,v===null||v.return===null){zn=1,Wc=c,Ln=null;break}e:{var A=l,B=v.return,Q=v,ve=c;if(c=er,Q.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var je=ve,et=Q,wt=et.tag;if(!(et.mode&1)&&(wt===0||wt===11||wt===15)){var ht=et.alternate;ht?(et.updateQueue=ht.updateQueue,et.memoizedState=ht.memoizedState,et.lanes=ht.lanes):(et.updateQueue=null,et.memoizedState=null)}var Kt=X_(B);if(Kt!==null){Kt.flags&=-257,q_(Kt,B,Q,A,c),Kt.mode&1&&W_(A,je,c),c=Kt,ve=je;var st=c.updateQueue;if(st===null){var or=new Set;or.add(ve),c.updateQueue=or}else st.add(ve);break e}else{if(!(c&1)){W_(A,je,c),Yg();break e}ve=Error(a(426))}}else if(sn&&Q.mode&1){var yi=X_(B);if(yi!==null){!(yi.flags&65536)&&(yi.flags|=256),q_(yi,B,Q,A,c),pg(ve);break e}}A=ve,zn!==4&&(zn=2),Xc===null?Xc=[A]:Xc.push(A),ve=Tg(ve,Q),Q=B;do{switch(Q.tag){case 3:Q.flags|=65536,c&=-c,Q.lanes|=c;var ue=V_(Q,ve,c);d_(Q,ue);break e;case 1:A=ve;var ee=Q.type,fe=Q.stateNode;if(!(Q.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(qa===null||!qa.has(fe)))){Q.flags|=65536,c&=-c,Q.lanes|=c;var Xe=G_(Q,A,c);d_(Q,Xe);break e}}Q=Q.return}while(Q!==null)}R1(v)}catch(ot){c=ot,Ln===v&&v!==null&&(Ln=v=v.return);continue}break}while(!0)}function A1(){var l=Rh.current;return Rh.current=mh,l===null?mh:l}function Yg(){(zn===0||zn===3||zn===2)&&(zn=4),Nn===null||!(al&268435455)&&!(Ph&268435455)||Ka(Nn,er)}function Uh(l,c){var v=Nt;Nt|=2;var b=A1();Nn===l&&er===c||$s(l,c);do try{GC();break}catch(T){E1(l,T)}while(!0);if(ig(),Nt=v,Rh.current=b,Ln!==null)throw Error(a(261));return Nn=null,er=0,zn}function GC(){for(;Ln!==null;)C1(Ln)}function WC(){for(;Ln!==null&&!vC();)C1(Ln)}function C1(l){var c=L1(l.alternate,l,$r);l.memoizedProps=l.pendingProps,c===null?R1(l):Ln=c,Fg.current=null}function R1(l){var c=l;do{var v=c.alternate;if(l=c.return,c.flags&32768){if(v=UC(v,c),v!==null){v.flags&=32767,Ln=v;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{zn=6,Ln=null;return}}else if(v=kC(v,c,$r),v!==null){Ln=v;return}if(c=c.sibling,c!==null){Ln=c;return}Ln=c=l}while(c!==null);zn===0&&(zn=5)}function Ks(l,c){var v=jt,b=Sn.transition;try{Sn.transition=null,jt=1,XC(l,c,v)}finally{Sn.transition=b,jt=v}return null}function XC(l,c,v){do Zs();while(Ya!==null);if(Nt&6)throw Error(a(327));var b=l.finishedWork,T=l.finishedLanes;if(b===null)return null;if(l.finishedWork=null,l.finishedLanes=0,b===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0;var A=b.lanes|b.childLanes;if(gC(l,A),l===Nn&&(Ln=Nn=null,er=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||Lh||(Lh=!0,I1(tg,function(){return Zs(),null})),A=(b.flags&15990)!==0,b.subtreeFlags&15990||A){A=Sn.transition,Sn.transition=null;var B=jt;jt=1;var Q=Nt;Nt|=4,Fg.current=null,FC(l,b),zC(l,b),q(l.containerInfo),l.current=b,BC(b),xC(),Nt=Q,jt=B,Sn.transition=A}else l.current=b;if(Lh&&(Lh=!1,Ya=l,Ih=T),A=l.pendingLanes,A===0&&(qa=null),_C(b.stateNode),kr(l,Xn()),c!==null)for(v=l.onRecoverableError,b=0;b<c.length;b++)v(c[b]);if(Nh)throw Nh=!1,l=Vg,Vg=null,l;return Ih&1&&l.tag!==0&&Zs(),A=l.pendingLanes,A&1?l===Gg?qc++:(qc=0,Gg=l):qc=0,Ki(),null}function Zs(){if(Ya!==null){var l=s_(Ih),c=Sn.transition,v=jt;try{if(Sn.transition=null,jt=16>l?16:l,Ya===null)var b=!1;else{if(l=Ya,Ya=null,Ih=0,Nt&6)throw Error(a(331));var T=Nt;for(Nt|=4,We=l.current;We!==null;){var A=We,B=A.child;if(We.flags&16){var Q=A.deletions;if(Q!==null){for(var ve=0;ve<Q.length;ve++){var je=Q[ve];for(We=je;We!==null;){var et=We;switch(et.tag){case 0:case 11:case 15:Ys(8,et,A)}var wt=et.child;if(wt!==null)wt.return=et,We=wt;else for(;We!==null;){et=We;var ht=et.sibling,Kt=et.return;if(f1(et),et===je){We=null;break}if(ht!==null){ht.return=Kt,We=ht;break}We=Kt}}}var st=A.alternate;if(st!==null){var or=st.child;if(or!==null){st.child=null;do{var yi=or.sibling;or.sibling=null,or=yi}while(or!==null)}}We=A}}if(A.subtreeFlags&2064&&B!==null)B.return=A,We=B;else e:for(;We!==null;){if(A=We,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Ys(9,A,A.return)}var ue=A.sibling;if(ue!==null){ue.return=A.return,We=ue;break e}We=A.return}}var ee=l.current;for(We=ee;We!==null;){B=We;var fe=B.child;if(B.subtreeFlags&2064&&fe!==null)fe.return=B,We=fe;else e:for(B=ee;We!==null;){if(Q=We,Q.flags&2048)try{switch(Q.tag){case 0:case 11:case 15:Vc(9,Q)}}catch(ot){Dr(Q,Q.return,ot)}if(Q===B){We=null;break e}var Xe=Q.sibling;if(Xe!==null){Xe.return=Q.return,We=Xe;break e}We=Q.return}}if(Nt=T,Ki(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Zd,l)}catch{}b=!0}return b}finally{jt=v,Sn.transition=c}}return!1}function P1(l,c,v){c=Tg(v,c),c=V_(l,c,1),Xa(l,c),c=wr(),l=Oh(l,1),l!==null&&(Pc(l,1,c),kr(l,c))}function Dr(l,c,v){if(l.tag===3)P1(l,l,v);else for(;c!==null;){if(c.tag===3){P1(c,l,v);break}else if(c.tag===1){var b=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(qa===null||!qa.has(b))){l=Tg(v,l),l=G_(c,l,1),Xa(c,l),l=wr(),c=Oh(c,1),c!==null&&(Pc(c,1,l),kr(c,l));break}}c=c.return}}function qC(l,c,v){var b=l.pingCache;b!==null&&b.delete(c),c=wr(),l.pingedLanes|=l.suspendedLanes&v,Nn===l&&(er&v)===v&&(zn===4||zn===3&&(er&130023424)===er&&500>Xn()-Bg?$s(l,0):zg|=v),kr(l,c)}function N1(l,c){c===0&&(l.mode&1?(c=$d,$d<<=1,!($d&130023424)&&($d=4194304)):c=1);var v=wr();l=Oh(l,c),l!==null&&(Pc(l,c,v),kr(l,v))}function YC(l){var c=l.memoizedState,v=0;c!==null&&(v=c.retryLane),N1(l,v)}function $C(l,c){var v=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(v=T.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(a(314))}b!==null&&b.delete(c),N1(l,v)}var L1;L1=function(l,c,v){if(l!==null)if(l.memoizedProps!==c.pendingProps||Wn.current)Yr=!0;else{if(!(l.lanes&v)&&!(c.flags&128))return Yr=!1,OC(l,c,v);Yr=!!(l.flags&131072)}else Yr=!1,sn&&c.flags&1048576&&v_(c,sh,c.index);switch(c.lanes=0,c.tag){case 2:var b=c.type;l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),l=c.pendingProps;var T=ma(c,Rn.current);Ko(c,v),T=bg(null,c,b,l,T,v);var A=_g();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Pn(b)?(A=!0,Ga(c)):A=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,og(c),T.updater=ih,c.stateNode=T,T._reactInternals=c,cg(c,b,l,v),c=Cg(null,c,b,!0,A,v)):(c.tag=0,sn&&A&&ug(c),_r(null,c,T,v),c=c.child),c;case 16:b=c.elementType;e:{switch(l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),l=c.pendingProps,T=b._init,b=T(b._payload),c.type=b,T=c.tag=ZC(b),l=Ci(b,l),T){case 0:c=Ag(null,c,b,l,v);break e;case 1:c=t1(null,c,b,l,v);break e;case 11:c=K_(null,c,b,l,v);break e;case 14:c=Z_(null,c,b,Ci(b.type,l),v);break e}throw Error(a(306,b,""))}return c;case 0:return b=c.type,T=c.pendingProps,T=c.elementType===b?T:Ci(b,T),Ag(l,c,b,T,v);case 1:return b=c.type,T=c.pendingProps,T=c.elementType===b?T:Ci(b,T),t1(l,c,b,T,v);case 3:e:{if(n1(c),l===null)throw Error(a(387));b=c.pendingProps,A=c.memoizedState,T=A.element,u_(l,c),rh(c,b,null,v);var B=c.memoizedState;if(b=B.element,X&&A.isDehydrated)if(A={element:b,isDehydrated:!1,cache:B.cache,transitions:B.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){T=Error(a(423)),c=r1(l,c,b,v,T);break e}else if(b!==T){T=Error(a(424)),c=r1(l,c,b,v,T);break e}else for(X&&(qr=cn(c.stateNode.containerInfo),Xr=c,sn=!0,Ri=null,Nc=!1),v=S_(c,null,b,v),c.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Jo(),b===T){c=_a(l,c,v);break e}_r(l,c,b,v)}c=c.child}return c;case 5:return M_(c),l===null&&fg(c),b=c.type,T=c.pendingProps,A=l!==null?l.memoizedProps:null,B=T.children,xe(b,T)?B=null:A!==null&&xe(b,A)&&(c.flags|=32),e1(l,c),_r(l,c,B,v),c.child;case 6:return l===null&&fg(c),null;case 13:return i1(l,c,v);case 4:return mg(c,c.stateNode.containerInfo),b=c.pendingProps,l===null?c.child=el(c,null,b,v):_r(l,c,b,v),c.child;case 11:return b=c.type,T=c.pendingProps,T=c.elementType===b?T:Ci(b,T),K_(l,c,b,T,v);case 7:return _r(l,c,c.pendingProps,v),c.child;case 8:return _r(l,c,c.pendingProps.children,v),c.child;case 12:return _r(l,c,c.pendingProps.children,v),c.child;case 10:e:{if(b=c.type._context,T=c.pendingProps,A=c.memoizedProps,B=T.value,c_(c,b,B),A!==null)if($i(A.value,B)){if(A.children===T.children&&!Wn.current){c=_a(l,c,v);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var Q=A.dependencies;if(Q!==null){B=A.child;for(var ve=Q.firstContext;ve!==null;){if(ve.context===b){if(A.tag===1){ve=va(-1,v&-v),ve.tag=2;var je=A.updateQueue;if(je!==null){je=je.shared;var et=je.pending;et===null?ve.next=ve:(ve.next=et.next,et.next=ve),je.pending=ve}}A.lanes|=v,ve=A.alternate,ve!==null&&(ve.lanes|=v),sg(A.return,v,c),Q.lanes|=v;break}ve=ve.next}}else if(A.tag===10)B=A.type===c.type?null:A.child;else if(A.tag===18){if(B=A.return,B===null)throw Error(a(341));B.lanes|=v,Q=B.alternate,Q!==null&&(Q.lanes|=v),sg(B,v,c),B=A.sibling}else B=A.child;if(B!==null)B.return=A;else for(B=A;B!==null;){if(B===c){B=null;break}if(A=B.sibling,A!==null){A.return=B.return,B=A;break}B=B.return}A=B}_r(l,c,T.children,v),c=c.child}return c;case 9:return T=c.type,b=c.pendingProps.children,Ko(c,v),T=hi(T),b=b(T),c.flags|=1,_r(l,c,b,v),c.child;case 14:return b=c.type,T=Ci(b,c.pendingProps),T=Ci(b.type,T),Z_(l,c,b,T,v);case 15:return Q_(l,c,c.type,c.pendingProps,v);case 17:return b=c.type,T=c.pendingProps,T=c.elementType===b?T:Ci(b,T),l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Pn(b)?(l=!0,Ga(c)):l=!1,Ko(c,v),m_(c,b,T),cg(c,b,T,v),Cg(null,c,b,!0,l,v);case 19:return l1(l,c,v);case 22:return J_(l,c,v)}throw Error(a(156,c.tag))};function I1(l,c){return Jm(l,c)}function KC(l,c,v,b){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(l,c,v,b){return new KC(l,c,v,b)}function $g(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ZC(l){if(typeof l=="function")return $g(l)?1:0;if(l!=null){if(l=l.$$typeof,l===y)return 11;if(l===g)return 14}return 2}function Za(l,c){var v=l.alternate;return v===null?(v=xi(l.tag,c,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=c,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&14680064,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,c=l.dependencies,v.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function jh(l,c,v,b,T,A){var B=2;if(b=l,typeof l=="function")$g(l)&&(B=1);else if(typeof l=="string")B=5;else e:switch(l){case d:return Qs(v.children,T,A,c);case h:B=8,T|=8;break;case f:return l=xi(12,v,c,T|2),l.elementType=f,l.lanes=A,l;case M:return l=xi(13,v,c,T),l.elementType=M,l.lanes=A,l;case _:return l=xi(19,v,c,T),l.elementType=_,l.lanes=A,l;case w:return Fh(v,T,A,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case p:B=10;break e;case x:B=9;break e;case y:B=11;break e;case g:B=14;break e;case S:B=16,b=null;break e}throw Error(a(130,l==null?l:typeof l,""))}return c=xi(B,v,c,T),c.elementType=l,c.type=b,c.lanes=A,c}function Qs(l,c,v,b){return l=xi(7,l,b,c),l.lanes=v,l}function Fh(l,c,v,b){return l=xi(22,l,b,c),l.elementType=w,l.lanes=v,l.stateNode={},l}function Kg(l,c,v){return l=xi(6,l,null,c),l.lanes=v,l}function Zg(l,c,v){return c=xi(4,l.children!==null?l.children:[],l.key,c),c.lanes=v,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function QC(l,c,v,b,T){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ut,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zm(0),this.expirationTimes=Zm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zm(0),this.identifierPrefix=b,this.onRecoverableError=T,X&&(this.mutableSourceEagerHydrationData=null)}function k1(l,c,v,b,T,A,B,Q,ve){return l=new QC(l,c,v,Q,ve),c===1?(c=1,A===!0&&(c|=8)):c=0,A=xi(3,null,null,c),l.current=A,A.stateNode=l,A.memoizedState={element:b,isDehydrated:v,cache:null,transitions:null},og(A),l}function D1(l){if(!l)return mt;l=l._reactInternals;e:{if(U(l)!==l||l.tag!==1)throw Error(a(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Pn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(a(171))}if(l.tag===1){var v=l.type;if(Pn(v))return qi(l,v,c)}return c}function O1(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=G(c),l===null?null:l.stateNode}function U1(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<c?v:c}}function Qg(l,c){U1(l,c),(l=l.alternate)&&U1(l,c)}function JC(l){return l=G(l),l===null?null:l.stateNode}function eR(){return null}return e.attemptContinuousHydration=function(l){if(l.tag===13){var c=wr();vi(l,134217728,c),Qg(l,134217728)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=wr(),v=$a(l);vi(l,v,c),Qg(l,v)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var v=Rc(c.pendingLanes);v!==0&&(Qm(c,v|1),kr(c,Xn()),!(Nt&6)&&(sl(),Ki()))}break;case 13:var b=wr();T1(function(){return vi(l,1,b)}),Qg(l,1)}},e.batchedUpdates=function(l,c){var v=Nt;Nt|=1;try{return l(c)}finally{Nt=v,Nt===0&&(sl(),Qd&&Ki())}},e.createComponentSelector=function(l){return{$$typeof:Mh,value:l}},e.createContainer=function(l,c,v,b,T,A,B){return k1(l,c,!1,null,v,b,T,A,B)},e.createHasPseudoClassSelector=function(l){return{$$typeof:Th,value:l}},e.createHydrationContainer=function(l,c,v,b,T,A,B,Q,ve){return l=k1(v,b,!0,l,T,A,B,Q,ve),l.context=D1(null),v=l.current,b=wr(),T=$a(v),A=va(b,T),A.callback=c??null,Xa(v,A),l.current.lanes=T,Pc(l,T,b),kr(l,b),l},e.createPortal=function(l,c,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:l,containerInfo:c,implementation:v}},e.createRoleSelector=function(l){return{$$typeof:Eh,value:l}},e.createTestNameSelector=function(l){return{$$typeof:Ah,value:l}},e.createTextSelector=function(l){return{$$typeof:Ch,value:l}},e.deferredUpdates=function(l){var c=jt,v=Sn.transition;try{return Sn.transition=null,jt=16,l()}finally{jt=c,Sn.transition=v}},e.discreteUpdates=function(l,c,v,b,T){var A=jt,B=Sn.transition;try{return Sn.transition=null,jt=1,l(c,v,b,T)}finally{jt=A,Sn.transition=B,Nt===0&&sl()}},e.findAllNodes=jg,e.findBoundingRects=function(l,c){if(!F)throw Error(a(363));c=jg(l,c),l=[];for(var v=0;v<c.length;v++)l.push(ce(c[v]));for(c=l.length-1;0<c;c--){v=l[c];for(var b=v.x,T=b+v.width,A=v.y,B=A+v.height,Q=c-1;0<=Q;Q--)if(c!==Q){var ve=l[Q],je=ve.x,et=je+ve.width,wt=ve.y,ht=wt+ve.height;if(b>=je&&A>=wt&&T<=et&&B<=ht){l.splice(c,1);break}else if(b!==je||v.width!==ve.width||ht<A||wt>B){if(!(A!==wt||v.height!==ve.height||et<b||je>T)){je>b&&(ve.width+=je-b,ve.x=b),et<T&&(ve.width=T-je),l.splice(c,1);break}}else{wt>A&&(ve.height+=wt-A,ve.y=A),ht<B&&(ve.height=B-wt),l.splice(c,1);break}}}return l},e.findHostInstance=O1,e.findHostInstanceWithNoPortals=function(l){return l=I(l),l=l!==null?pe(l):null,l===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return O1(l)},e.flushControlled=function(l){var c=Nt;Nt|=1;var v=Sn.transition,b=jt;try{Sn.transition=null,jt=1,l()}finally{jt=b,Sn.transition=v,Nt=c,Nt===0&&(sl(),Ki())}},e.flushPassiveEffects=Zs,e.flushSync=T1,e.focusWithin=function(l,c){if(!F)throw Error(a(363));for(l=Dg(l),c=w1(l,c),c=Array.from(c),l=0;l<c.length;){var v=c[l++];if(!Ee(v)){if(v.tag===5&&nt(v.stateNode))return!0;for(v=v.child;v!==null;)c.push(v),v=v.sibling}}return!1},e.getCurrentUpdatePriority=function(){return jt},e.getFindAllNodesFailureDescription=function(l,c){if(!F)throw Error(a(363));var v=0,b=[];l=[Dg(l),0];for(var T=0;T<l.length;){var A=l[T++],B=l[T++],Q=c[B];if((A.tag!==5||!Ee(A))&&(Og(A,Q)&&(b.push(Ug(Q)),B++,B>v&&(v=B)),B<c.length))for(A=A.child;A!==null;)l.push(A,B),A=A.sibling}if(v<c.length){for(l=[];v<c.length;v++)l.push(Ug(c[v]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},e.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return J(l.child.stateNode);default:return l.child.stateNode}},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:JC,findFiberByHostInstance:l.findFiberByHostInstance||eR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{Zd=c.inject(l),Yi=c}catch{}l=!!c.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,c,v,b){if(!F)throw Error(a(363));l=jg(l,c);var T=He(l,v,b).disconnect;return{disconnect:function(){T()}}},e.registerMutableSourceForHydration=function(l,c){var v=c._getVersion;v=v(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,v]:l.mutableSourceEagerHydrationData.push(c,v)},e.runWithPriority=function(l,c){var v=jt;try{return jt=l,c()}finally{jt=v}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,c,v,b){var T=c.current,A=wr(),B=$a(T);return v=D1(v),c.context===null?c.context=v:c.pendingContext=v,c=va(A,B),c.payload={element:l},b=b===void 0?null:b,b!==null&&(c.callback=b),Xa(T,c),l=vi(T,B,A),l!==null&&nh(l,T,B),B},e};IA.exports=D6;var O6=IA.exports;const U6=YM(O6),$b={},OA=n=>void Object.assign($b,n);function j6(n,e){function t(d,{args:h=[],attach:f,...p},x){let y=`${d[0].toUpperCase()}${d.slice(1)}`,M;if(d==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=p.object;M=Pl(_,{type:d,root:x,attach:f,primitive:!0})}else{const _=$b[y];if(!_)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");M=Pl(new _(...h),{type:d,root:x,attach:f,memoizedProps:{args:h}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),y!=="inject"&&dv(M,p),M}function r(d,h){let f=!1;if(h){var p,x;(p=h.__r3f)!=null&&p.attach?uv(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),f=!0),f||(x=d.__r3f)==null||x.objects.push(h),h.__r3f||Pl(h,{}),h.__r3f.parent=d,oy(h),Nl(h)}}function i(d,h,f){let p=!1;if(h){var x,y;if((x=h.__r3f)!=null&&x.attach)uv(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:h});const M=d.children.filter(g=>g!==h),_=M.indexOf(f);d.children=[...M.slice(0,_),h,...M.slice(_)],p=!0}p||(y=d.__r3f)==null||y.objects.push(h),h.__r3f||Pl(h,{}),h.__r3f.parent=d,oy(h),Nl(h)}}function a(d,h,f=!1){d&&[...d].forEach(p=>s(h,p,f))}function s(d,h,f){if(h){var p,x,y;if(h.__r3f&&(h.__r3f.parent=null),(p=d.__r3f)!=null&&p.objects&&(d.__r3f.objects=d.__r3f.objects.filter(w=>w!==h)),(x=h.__r3f)!=null&&x.attach)DM(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var M;d.remove(h),(M=h.__r3f)!=null&&M.root&&W6(yp(h),h)}const g=(y=h.__r3f)==null?void 0:y.primitive,S=!g&&(f===void 0?h.dispose!==null:f);if(!g){var _;a((_=h.__r3f)==null?void 0:_.objects,h,S),a(h.children,h,S)}if(delete h.__r3f,S&&h.dispose&&h.type!=="Scene"){const w=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ay.unstable_scheduleCallback(ay.unstable_IdlePriority,w):w()}Nl(d)}}function o(d,h,f,p){var x;const y=(x=d.__r3f)==null?void 0:x.parent;if(!y)return;const M=t(h,f,d.__r3f.root);if(d.children){for(const _ of d.children)_.__r3f&&r(M,_);d.children=d.children.filter(_=>!_.__r3f)}d.__r3f.objects.forEach(_=>r(M,_)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||s(y,d),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),r(y,M),M.raycast&&M.__r3f.eventCount&&yp(M).getState().internal.interaction.push(M),[p,p.alternate].forEach(_=>{_!==null&&(_.stateNode=M,_.ref&&(typeof _.ref=="function"?_.ref(M):_.ref.current=M))})}const u=()=>{};return{reconciler:U6({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const f=d.getState().scene;f.__r3f&&(f.__r3f.root=d,r(f,h))},removeChildFromContainer:(d,h)=>{h&&s(d.getState().scene,h)},insertInContainerBefore:(d,h,f)=>{if(!h||!f)return;const p=d.getState().scene;p.__r3f&&i(p,h,f)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,f,p){var x;if(((x=d==null?void 0:d.__r3f)!=null?x:{}).primitive&&p.object&&p.object!==d)return[!0];{const{args:y=[],children:M,..._}=p,{args:g=[],children:S,...w}=f;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((N,P)=>N!==g[P]))return[!0];const E=VA(d,_,w,!0);return E.changes.length?[!1,E]:null}},commitUpdate(d,[h,f],p,x,y,M){h?o(d,p,y,M):dv(d,f)},commitMount(d,h,f,p){var x;const y=(x=d.__r3f)!=null?x:{};d.raycast&&y.handlers&&y.eventCount&&yp(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Pl(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:f,parent:p}=(h=d.__r3f)!=null?h:{};f&&p&&DM(p,d,f),d.isObject3D&&(d.visible=!1),Nl(d)},unhideInstance(d,h){var f;const{attach:p,parent:x}=(f=d.__r3f)!=null?f:{};p&&x&&uv(x,d,p),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),Nl(d)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():$l.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&en.fun(performance.now)?performance.now:en.fun(Date.now)?Date.now:()=>0,scheduleTimeout:en.fun(setTimeout)?setTimeout:void 0,cancelTimeout:en.fun(clearTimeout)?clearTimeout:void 0}),applyProps:dv}}var NM,LM;const cv=n=>"colorSpace"in n||"outputColorSpace"in n,UA=()=>{var n;return(n=$b.ColorManagement)!=null?n:null},jA=n=>n&&n.isOrthographicCamera,F6=n=>n&&n.hasOwnProperty("current"),Wd=typeof window<"u"&&((NM=window.document)!=null&&NM.createElement||((LM=window.navigator)==null?void 0:LM.product)==="ReactNative")?te.useLayoutEffect:te.useEffect;function FA(n){const e=te.useRef(n);return Wd(()=>void(e.current=n),[n]),e}function z6({set:n}){return Wd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class zA extends te.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}zA.getDerivedStateFromError=()=>({error:!0});const BA="__default",IM=new Map,B6=n=>n&&!!n.memoized&&!!n.changes;function HA(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const fu=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function yp(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const en={obj:n=>n===Object(n)&&!en.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(en.str(n)||en.num(n)||en.boo(n))return n===e;const a=en.obj(n);if(a&&r==="reference")return n===e;const s=en.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&r==="shallow"){for(o in i?e:n)if(!en.equ(n[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:n)if(n[o]!==e[o])return!1;if(en.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function H6(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function V6(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Pl(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function sy(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((a,s)=>a[s],n),{target:t,key:i}}else return{target:t,key:e}}const kM=/-\d+$/;function uv(n,e,t){if(en.str(t)){if(kM.test(t)){const a=t.replace(kM,""),{target:s,key:o}=sy(n,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=sy(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function DM(n,e,t){var r,i;if(en.str(t)){const{target:a,key:s}=sy(n,t),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function VA(n,{children:e,key:t,ref:r,...i},{children:a,key:s,ref:o,...u}={},d=!1){const h=n.__r3f,f=Object.entries(i),p=[];if(d){const y=Object.keys(u);for(let M=0;M<y.length;M++)i.hasOwnProperty(y[M])||f.unshift([y[M],BA+"remove"])}f.forEach(([y,M])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&y==="object"||en.equ(M,u[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,M,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,M,!1,g]);for(const S in i){const w=i[S];S.startsWith(`${y}-`)&&p.push([S,w,!1,S.split("-")])}});const x={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(x.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(x.attach=h.memoizedProps.attach),{memoized:x,changes:p}}function dv(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,a=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:o}=B6(e)?e:VA(n,e),u=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=s);for(let f=0;f<o.length;f++){let[p,x,y,M]=o[f];if(cv(n)){const S="srgb",w="srgb-linear";p==="encoding"?(p="colorSpace",x=x===3001?S:w):p==="outputEncoding"&&(p="outputColorSpace",x=x===3001?S:w)}let _=n,g=_[p];if(M.length&&(g=M.reduce((S,w)=>S[w],n),!(g&&g.set))){const[S,...w]=M.reverse();_=w.reverse().reduce((E,N)=>E[N],n),p=S}if(x===BA+"remove")if(_.constructor){let S=IM.get(_.constructor);S||(S=new _.constructor,IM.set(_.constructor,S)),x=S[p]}else x=0;if(y&&r)x?r.handlers[p]=x:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(g&&g.set&&(g.copy||g instanceof Ro)){if(Array.isArray(x))g.fromArray?g.fromArray(x):g.set(...x);else if(g.copy&&x&&x.constructor&&g.constructor===x.constructor)g.copy(x);else if(x!==void 0){var d;const S=(d=g)==null?void 0:d.isColor;!S&&g.setScalar?g.setScalar(x):g instanceof Ro&&x instanceof Ro?g.mask=x.mask:g.set(x),!UA()&&a&&!a.linear&&S&&g.convertSRGBToLinear()}}else{var h;if(_[p]=x,(h=_[p])!=null&&h.isTexture&&_[p].format===On&&_[p].type===ri&&a){const S=_[p];cv(S)&&cv(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}}Nl(n)}if(r&&r.parent&&n.raycast&&u!==r.eventCount){const f=yp(n).getState().internal,p=f.interaction.indexOf(n);p>-1&&f.interaction.splice(p,1),r.eventCount&&f.interaction.push(n)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=n.__r3f)!=null&&t.parent&&oy(n),n}function Nl(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function oy(n){n.onUpdate==null||n.onUpdate(n)}function GA(n,e){n.manual||(jA(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Kf(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function G6(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return $l.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $l.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $l.ContinuousEventPriority;default:return $l.DefaultEventPriority}}function WA(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function W6(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{WA(t.capturedMap,e,r,i)})}function X6(n){function e(u){const{internal:d}=n.getState(),h=u.offsetX-d.initialClick[0],f=u.offsetY-d.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(u){return u.filter(d=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=d.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function r(u,d){const h=n.getState(),f=new Set,p=[],x=d?d(h.internal.interaction):h.internal.interaction;for(let g=0;g<x.length;g++){const S=fu(x[g]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(u,h);function y(g){const S=fu(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var w;S.events.compute==null||S.events.compute(u,S,(w=S.previousRoot)==null?void 0:w.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let M=x.flatMap(y).sort((g,S)=>{const w=fu(g.object),E=fu(S.object);return!w||!E?g.distance-S.distance:E.events.priority-w.events.priority||g.distance-S.distance}).filter(g=>{const S=Kf(g);return f.has(S)?!1:(f.add(S),!0)});h.events.filter&&(M=h.events.filter(M,h));for(const g of M){let S=g.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in u&&h.internal.capturedMap.has(u.pointerId))for(let g of h.internal.capturedMap.get(u.pointerId).values())f.has(Kf(g.intersection))||p.push(g.intersection);return p}function i(u,d,h,f){const p=n.getState();if(u.length){const x={stopped:!1};for(const y of u){const M=fu(y.object)||p,{raycaster:_,pointer:g,camera:S,internal:w}=M,E=new z(g.x,g.y,0).unproject(S),N=I=>{var G,Z;return(G=(Z=w.capturedMap.get(I))==null?void 0:Z.has(y.eventObject))!=null?G:!1},P=I=>{const G={intersection:y,target:d.target};w.capturedMap.has(I)?w.capturedMap.get(I).set(y.eventObject,G):w.capturedMap.set(I,new Map([[y.eventObject,G]])),d.target.setPointerCapture(I)},L=I=>{const G=w.capturedMap.get(I);G&&WA(w.capturedMap,y.eventObject,G,I)};let U={};for(let I in d){let G=d[I];typeof G!="function"&&(U[I]=G)}let R={...y,...U,pointer:g,intersections:u,stopped:x.stopped,delta:h,unprojectedPoint:E,ray:_.ray,camera:S,stopPropagation(){const I="pointerId"in d&&w.capturedMap.get(d.pointerId);if((!I||I.has(y.eventObject))&&(R.stopped=x.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(G=>G.eventObject===y.eventObject))){const G=u.slice(0,u.indexOf(y));a([...G,y])}},target:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:L},currentTarget:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:L},nativeEvent:d};if(f(R),x.stopped===!0)break}}return u}function a(u){const{internal:d}=n.getState();for(const h of d.hovered.values())if(!u.length||!u.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const f=h.eventObject.__r3f,p=f==null?void 0:f.handlers;if(d.hovered.delete(Kf(h)),f!=null&&f.eventCount){const x={...h,intersections:u};p.onPointerOut==null||p.onPointerOut(x),p.onPointerLeave==null||p.onPointerLeave(x)}}}function s(u,d){for(let h=0;h<d.length;h++){const f=d[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(u)}}function o(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return d=>{const{internal:h}=n.getState();"pointerId"in d&&h.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(d.pointerId)&&(h.capturedMap.delete(d.pointerId),a([]))})}}return function(d){const{onPointerMissed:h,internal:f}=n.getState();f.lastEvent.current=d;const p=u==="onPointerMove",x=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",y=r(d,p?t:void 0),M=x?e(d):0;u==="onPointerDown"&&(f.initialClick=[d.offsetX,d.offsetY],f.initialHits=y.map(g=>g.eventObject)),x&&!y.length&&M<=2&&(s(d,f.interaction),h&&h(d)),p&&a(y);function _(g){const S=g.eventObject,w=S.__r3f,E=w==null?void 0:w.handlers;if(w!=null&&w.eventCount)if(p){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const N=Kf(g),P=f.hovered.get(N);P?P.stopped&&g.stopPropagation():(f.hovered.set(N,g),E.onPointerOver==null||E.onPointerOver(g),E.onPointerEnter==null||E.onPointerEnter(g))}E.onPointerMove==null||E.onPointerMove(g)}else{const N=E[u];N?(!x||f.initialHits.includes(S))&&(s(d,f.interaction.filter(P=>!f.initialHits.includes(P))),N(g)):x&&f.initialHits.includes(S)&&s(d,f.interaction.filter(P=>!f.initialHits.includes(P)))}}i(y,d,M,_)}}return{handlePointer:o}}const q6=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],XA=n=>!!(n!=null&&n.render),Kb=te.createContext(null),Y6=(n,e)=>{const t=PA((o,u)=>{const d=new z,h=new z,f=new z;function p(_=u().camera,g=h,S=u().size){const{width:w,height:E,top:N,left:P}=S,L=w/E;g.isVector3?f.copy(g):f.set(...g);const U=_.getWorldPosition(d).distanceTo(f);if(jA(_))return{width:w/_.zoom,height:E/_.zoom,top:N,left:P,factor:1,distance:U,aspect:L};{const R=_.fov*Math.PI/180,I=2*Math.tan(R/2)*U,G=I*(w/E);return{width:G,height:I,top:N,left:P,factor:w/G,distance:U,aspect:L}}}let x;const y=_=>o(g=>({performance:{...g.performance,current:_}})),M=new Te;return{set:o,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(u(),_),advance:(_,g)=>e(_,g,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Gb,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=u();x&&clearTimeout(x),_.performance.current!==_.performance.min&&y(_.performance.min),x=setTimeout(()=>y(u().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:_=>o(g=>({...g,events:{...g.events,..._}})),setSize:(_,g,S,w,E)=>{const N=u().camera,P={width:_,height:g,top:w||0,left:E||0,updateStyle:S};o(L=>({size:P,viewport:{...L.viewport,...p(N,h,P)}}))},setDpr:_=>o(g=>{const S=HA(_);return{viewport:{...g.viewport,dpr:S,initialDpr:g.viewport.initialDpr||S}}}),setFrameloop:(_="always")=>{const g=u().clock;g.stop(),g.elapsedTime=0,_!=="never"&&(g.start(),g.elapsedTime=0),o(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:te.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,g,S)=>{const w=u().internal;return w.priority=w.priority+(g>0?1:0),w.subscribers.push({ref:_,priority:g,store:S}),w.subscribers=w.subscribers.sort((E,N)=>E.priority-N.priority),()=>{const E=u().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(g>0?1:0),E.subscribers=E.subscribers.filter(N=>N.ref!==_))}}}}}),r=t.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:o,size:u,viewport:d,gl:h,set:f}=t.getState();if(u.width!==i.width||u.height!==i.height||d.dpr!==a){var p;i=u,a=d.dpr,GA(o,u),h.setPixelRatio(d.dpr);const x=(p=u.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(u.width,u.height,x)}o!==s&&(s=o,f(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};let Zf,$6=new Set,K6=new Set,Z6=new Set;function hv(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function pu(n,e){switch(n){case"before":return hv($6,e);case"after":return hv(K6,e);case"tail":return hv(Z6,e)}}let fv,pv;function mv(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),fv=e.internal.subscribers,Zf=0;Zf<fv.length;Zf++)pv=fv[Zf],pv.ref.current(pv.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Q6(n){let e=!1,t=!1,r,i,a;function s(d){i=requestAnimationFrame(s),e=!0,r=0,pu("before",d),t=!0;for(const f of n.values()){var h;a=f.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((h=a.gl.xr)!=null&&h.isPresenting)&&(r+=mv(d,a))}if(t=!1,pu("after",d),r===0)return pu("tail",d),e=!1,cancelAnimationFrame(i)}function o(d,h=1){var f;if(!d)return n.forEach(p=>o(p.store.getState(),h));(f=d.gl.xr)!=null&&f.isPresenting||!d.internal.active||d.frameloop==="never"||(h>1?d.internal.frames=Math.min(60,d.internal.frames+h):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function u(d,h=!0,f,p){if(h&&pu("before",d),f)mv(d,f,p);else for(const x of n.values())mv(d,x.store.getState());h&&pu("after",d)}return{loop:s,invalidate:o,advance:u}}function Zb(){const n=te.useContext(Kb);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Sd(n=t=>t,e){return Zb()(n,e)}function qm(n,e=0){const t=Zb(),r=t.getState().internal.subscribe,i=FA(n);return Wd(()=>r(i,e,t),[e,r,t]),null}const OM=new WeakMap;function qA(n,e){return function(t,...r){let i=OM.get(t);return i||(i=new t,OM.set(t,i)),n&&n(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,u=>{u.scene&&Object.assign(u,H6(u.scene)),s(u)},e,u=>o(new Error(`Could not load ${a}: ${u==null?void 0:u.message}`))))))}}function vc(n,e,t,r){const i=Array.isArray(e)?e:[e],a=L6(qA(t,r),[n,...i],{equal:en.equ});return Array.isArray(e)?a:a[0]}vc.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return I6(qA(t),[n,...r])};vc.clear=function(n,e){const t=Array.isArray(e)?e:[e];return k6([n,...t])};const xc=new Map,{invalidate:UM,advance:jM}=Q6(xc),{reconciler:Md,applyProps:ds}=j6(xc,G6),Rl={objects:"shallow",strict:!1},J6=(n,e)=>{const t=typeof n=="function"?n(e):n;return XA(t)?t:new Em({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function ej(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=t}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function tj(n){const e=xc.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||Y6(UM,jM),s=t||Md.createContainer(a,$l.ConcurrentRoot,null,!1,null,"",i,null);e||xc.set(n,{fiber:s,store:a});let o,u=!1,d;return{configure(h={}){let{gl:f,size:p,scene:x,events:y,onCreated:M,shadows:_=!1,linear:g=!1,flat:S=!1,legacy:w=!1,orthographic:E=!1,frameloop:N="always",dpr:P=[1,2],performance:L,raycaster:U,camera:R,onPointerMissed:I}=h,G=a.getState(),Z=G.gl;G.gl||G.set({gl:Z=J6(f,n)});let pe=G.raycaster;pe||G.set({raycaster:pe=new Yb});const{params:Y,...J}=U||{};if(en.equ(J,pe,Rl)||ds(pe,{...J}),en.equ(Y,pe.params,Rl)||ds(pe,{params:{...pe.params,...Y}}),!G.camera||G.camera===d&&!en.equ(d,R,Rl)){d=R;const K=R instanceof Od,se=K?R:E?new Tc(0,0,0,0,.1,1e3):new Zn(75,0,.1,1e3);K||(se.position.z=5,R&&(ds(se,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(se.manual=!0,se.updateProjectionMatrix())),!G.camera&&!(R!=null&&R.rotation)&&se.lookAt(0,0,0)),G.set({camera:se}),pe.camera=se}if(!G.scene){let K;x!=null&&x.isScene?K=x:(K=new Fd,x&&ds(K,x)),G.set({scene:Pl(K)})}if(!G.xr){var de;const K=(ie,xe)=>{const ze=a.getState();ze.frameloop!=="never"&&jM(ie,!0,ze,xe)},se=()=>{const ie=a.getState();ie.gl.xr.enabled=ie.gl.xr.isPresenting,ie.gl.xr.setAnimationLoop(ie.gl.xr.isPresenting?K:null),ie.gl.xr.isPresenting||UM(ie)},me={connect(){const ie=a.getState().gl;ie.xr.addEventListener("sessionstart",se),ie.xr.addEventListener("sessionend",se)},disconnect(){const ie=a.getState().gl;ie.xr.removeEventListener("sessionstart",se),ie.xr.removeEventListener("sessionend",se)}};typeof((de=Z.xr)==null?void 0:de.addEventListener)=="function"&&me.connect(),G.set({xr:me})}if(Z.shadowMap){const K=Z.shadowMap.enabled,se=Z.shadowMap.type;if(Z.shadowMap.enabled=!!_,en.boo(_))Z.shadowMap.type=Nu;else if(en.str(_)){var ge;const me={basic:S2,percentage:ym,soft:Nu,variance:Oi};Z.shadowMap.type=(ge=me[_])!=null?ge:Nu}else en.obj(_)&&Object.assign(Z.shadowMap,_);(K!==Z.shadowMap.enabled||se!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const H=UA();H&&("enabled"in H?H.enabled=!w:"legacyMode"in H&&(H.legacyMode=w)),u||ds(Z,{outputEncoding:g?3e3:3001,toneMapping:S?da:rb}),G.legacy!==w&&G.set(()=>({legacy:w})),G.linear!==g&&G.set(()=>({linear:g})),G.flat!==S&&G.set(()=>({flat:S})),f&&!en.fun(f)&&!XA(f)&&!en.equ(f,Z,Rl)&&ds(Z,f),y&&!G.events.handlers&&G.set({events:y(a)});const q=ej(n,p);return en.equ(q,G.size,Rl)||G.setSize(q.width,q.height,q.updateStyle,q.top,q.left),P&&G.viewport.dpr!==HA(P)&&G.setDpr(P),G.frameloop!==N&&G.setFrameloop(N),G.onPointerMissed||G.set({onPointerMissed:I}),L&&!en.equ(L,G.performance,Rl)&&G.set(K=>({performance:{...K.performance,...L}})),o=M,u=!0,this},render(h){return u||this.configure(),Md.updateContainer(m.jsx(nj,{store:a,children:h,onCreated:o,rootElement:n}),s,null,()=>{}),a},unmount(){YA(n)}}}function nj({store:n,children:e,onCreated:t,rootElement:r}){return Wd(()=>{const i=n.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),m.jsx(Kb.Provider,{value:n,children:e})}function YA(n,e){const t=xc.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Md.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,u;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(u=i.gl)!=null&&u.xr&&i.xr.disconnect(),V6(i),xc.delete(n)}catch{}},500)})}}function rj(n,e,t){return m.jsx(ij,{children:n,container:e,state:t},e.uuid)}function ij({state:n={},children:e,container:t}){const{events:r,size:i,...a}=n,s=Zb(),[o]=te.useState(()=>new Yb),[u]=te.useState(()=>new Te),d=te.useCallback((f,p)=>{const x={...f};Object.keys(f).forEach(M=>{(q6.includes(M)||f[M]!==p[M]&&p[M])&&delete x[M]});let y;if(p&&i){const M=p.camera;y=f.viewport.getCurrentViewport(M,new z,i),M!==f.camera&&GA(M,i)}return{...x,scene:t,raycaster:o,pointer:u,mouse:u,previousRoot:s,events:{...f.events,...p==null?void 0:p.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...y},...a}},[n]),[h]=te.useState(()=>{const f=s.getState();return PA((p,x)=>({...f,scene:t,raycaster:o,pointer:u,mouse:u,previousRoot:s,events:{...f.events,...r},size:{...f.size,...i},...a,set:p,get:x,setEvents:y=>p(M=>({...M,events:{...M.events,...y}}))}))});return te.useEffect(()=>{const f=s.subscribe(p=>h.setState(x=>d(p,x)));return()=>{f()}},[d]),te.useEffect(()=>{h.setState(f=>d(s.getState(),f))},[d]),te.useEffect(()=>()=>{h.destroy()},[]),m.jsx(m.Fragment,{children:Md.createPortal(m.jsx(Kb.Provider,{value:h,children:e}),h,null)})}Md.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:te.version});const gv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function aj(n){const{handlePointer:e}=X6(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(gv).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:a}=n.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[u,d]=gv[s];t.addEventListener(u,o,{passive:d})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=gv[a];r.connected.removeEventListener(o,s)}}),t(a=>({events:{...a.events,connected:void 0}}))}}}}function FM(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function sj({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=te.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=te.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,d=n?typeof n=="number"?n:n.resize:null,h=te.useRef(!1);te.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,x]=te.useMemo(()=>{const g=()=>{if(!o.current.element)return;const{left:S,top:w,width:E,height:N,bottom:P,right:L,x:U,y:R}=o.current.element.getBoundingClientRect(),I={left:S,top:w,width:E,height:N,bottom:P,right:L,x:U,y:R};o.current.element instanceof HTMLElement&&r&&(I.height=o.current.element.offsetHeight,I.width=o.current.element.offsetWidth),Object.freeze(I),h.current&&!uj(o.current.lastBounds,I)&&s(o.current.lastBounds=I)};return[g,d?FM(g,d):g,u?FM(g,u):g]},[s,r,u,d]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",x,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function M(){o.current.element&&(o.current.resizeObserver=new i(x),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(g=>g.addEventListener("scroll",x,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const _=g=>{!g||g===o.current.element||(y(),o.current.element=g,o.current.scrollContainers=$A(g),M())};return lj(x,!!e),oj(p),te.useEffect(()=>{y(),M()},[e,x,p]),te.useEffect(()=>y,[]),[_,a,f]}function oj(n){te.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function lj(n,e){te.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function $A(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...$A(n.parentElement)]}const cj=["x","y","top","bottom","left","right","width","height"],uj=(n,e)=>cj.every(t=>n[t]===e[t]);var dj=Object.defineProperty,hj=Object.defineProperties,fj=Object.getOwnPropertyDescriptors,zM=Object.getOwnPropertySymbols,pj=Object.prototype.hasOwnProperty,mj=Object.prototype.propertyIsEnumerable,BM=(n,e,t)=>e in n?dj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,HM=(n,e)=>{for(var t in e||(e={}))pj.call(e,t)&&BM(n,t,e[t]);if(zM)for(var t of zM(e))mj.call(e,t)&&BM(n,t,e[t]);return n},gj=(n,e)=>hj(n,fj(e)),VM,GM;typeof window<"u"&&((VM=window.document)!=null&&VM.createElement||((GM=window.navigator)==null?void 0:GM.product)==="ReactNative")?te.useLayoutEffect:te.useEffect;function KA(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=KA(r,e,t);if(i)return i;r=r.sibling}}function ZA(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const WM=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=WM;return}return WM.apply(this,arguments)};const Qb=ZA(te.createContext(null));class QA extends te.Component{render(){return te.createElement(Qb.Provider,{value:this._reactInternals},this.props.children)}}function vj(){const n=te.useContext(Qb);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=te.useId();return te.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const r=KA(t,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function xj(){const n=vj(),[e]=te.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Qb&&!e.has(r)&&e.set(r,te.useContext(ZA(r)))}t=t.return}return e}function yj(){const n=xj();return te.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>te.createElement(e,null,te.createElement(t.Provider,gj(HM({},r),{value:n.get(t)}))),e=>te.createElement(QA,HM({},e))),[n])}const bj=te.forwardRef(function({children:n,fallback:e,resize:t,style:r,gl:i,events:a=aj,eventSource:s,eventPrefix:o,shadows:u,linear:d,flat:h,legacy:f,orthographic:p,frameloop:x,dpr:y,performance:M,raycaster:_,camera:g,scene:S,onPointerMissed:w,onCreated:E,...N},P){te.useMemo(()=>OA(C6),[]);const L=yj(),[U,R]=sj({scroll:!0,debounce:{scroll:50,resize:0},...t}),I=te.useRef(null),G=te.useRef(null);te.useImperativeHandle(P,()=>I.current);const Z=FA(w),[pe,Y]=te.useState(!1),[J,de]=te.useState(!1);if(pe)throw pe;if(J)throw J;const ge=te.useRef(null);Wd(()=>{const q=I.current;R.width>0&&R.height>0&&q&&(ge.current||(ge.current=tj(q)),ge.current.configure({gl:i,events:a,shadows:u,linear:d,flat:h,legacy:f,orthographic:p,frameloop:x,dpr:y,performance:M,raycaster:_,camera:g,scene:S,size:R,onPointerMissed:(...K)=>Z.current==null?void 0:Z.current(...K),onCreated:K=>{K.events.connect==null||K.events.connect(s?F6(s)?s.current:s:G.current),o&&K.setEvents({compute:(se,me)=>{const ie=se[o+"X"],xe=se[o+"Y"];me.pointer.set(ie/me.size.width*2-1,-(xe/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),E==null||E(K)}}),ge.current.render(m.jsx(L,{children:m.jsx(zA,{set:de,children:m.jsx(te.Suspense,{fallback:m.jsx(z6,{set:Y}),children:n??null})})})))}),te.useEffect(()=>{const q=I.current;if(q)return()=>YA(q)},[]);const H=s?"none":"auto";return m.jsx("div",{ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...r},...N,children:m.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:m.jsx("canvas",{ref:I,style:{display:"block"},children:e})})})}),_j=te.forwardRef(function(n,e){return m.jsx(QA,{children:m.jsx(bj,{...n,ref:e})})});function Qp(){return Qp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qp.apply(null,arguments)}const JA=parseInt(Ld.replace(/\D+/g,""));var Si=Uint8Array,No=Uint16Array,ly=Uint32Array,eC=new Si([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tC=new Si([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wj=new Si([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nC=function(n,e){for(var t=new No(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new ly(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return[t,i]},rC=nC(eC,2),iC=rC[0],Sj=rC[1];iC[28]=258,Sj[258]=28;var Mj=nC(tC,0),Tj=Mj[0],aC=new No(32768);for(var rn=0;rn<32768;++rn){var os=(rn&43690)>>>1|(rn&21845)<<1;os=(os&52428)>>>2|(os&13107)<<2,os=(os&61680)>>>4|(os&3855)<<4,aC[rn]=((os&65280)>>>8|(os&255)<<8)>>>1}var Uu=function(n,e,t){for(var r=n.length,i=0,a=new No(e);i<r;++i)++a[n[i]-1];var s=new No(e);for(i=0;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;{o=new No(1<<e);var u=15-e;for(i=0;i<r;++i)if(n[i])for(var d=i<<4|n[i],h=e-n[i],f=s[n[i]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)o[aC[f]>>>u]=d}return o},Xd=new Si(288);for(var rn=0;rn<144;++rn)Xd[rn]=8;for(var rn=144;rn<256;++rn)Xd[rn]=9;for(var rn=256;rn<280;++rn)Xd[rn]=7;for(var rn=280;rn<288;++rn)Xd[rn]=8;var sC=new Si(32);for(var rn=0;rn<32;++rn)sC[rn]=5;var Ej=Uu(Xd,9),Aj=Uu(sC,5),vv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ki=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},xv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Cj=function(n){return(n/8|0)+(n&7&&1)},Rj=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof No?No:n instanceof ly?ly:Si)(t-e);return r.set(n.subarray(e,t)),r},Pj=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Si(0);var i=!e||t,a=!t||t.i;t||(t={}),e||(e=new Si(r*3));var s=function(De){var Ve=e.length;if(De>Ve){var ut=new Si(Math.max(Ve*2,De));ut.set(e),e=ut}},o=t.f||0,u=t.p||0,d=t.b||0,h=t.l,f=t.d,p=t.m,x=t.n,y=r*8;do{if(!h){t.f=o=ki(n,u,1);var M=ki(n,u+1,3);if(u+=3,M)if(M==1)h=Ej,f=Aj,p=9,x=5;else if(M==2){var _=ki(n,u,31)+257,g=ki(n,u+10,15)+4,S=_+ki(n,u+5,31)+1;u+=14;for(var w=new Si(S),E=new Si(19),N=0;N<g;++N)E[wj[N]]=ki(n,u+N*3,7);u+=g*3;for(var P=vv(E),L=(1<<P)-1,U=Uu(E,P),N=0;N<S;){var R=U[ki(n,u,L)];u+=R&15;var I=R>>>4;if(I<16)w[N++]=I;else{var G=0,Z=0;for(I==16?(Z=3+ki(n,u,3),u+=2,G=w[N-1]):I==17?(Z=3+ki(n,u,7),u+=3):I==18&&(Z=11+ki(n,u,127),u+=7);Z--;)w[N++]=G}}var pe=w.subarray(0,_),Y=w.subarray(_);p=vv(pe),x=vv(Y),h=Uu(pe,p),f=Uu(Y,x)}else throw"invalid block type";else{var I=Cj(u)+4,J=n[I-4]|n[I-3]<<8,de=I+J;if(de>r){if(a)throw"unexpected EOF";break}i&&s(d+J),e.set(n.subarray(I,de),d),t.b=d+=J,t.p=u=de*8;continue}if(u>y){if(a)throw"unexpected EOF";break}}i&&s(d+131072);for(var ge=(1<<p)-1,H=(1<<x)-1,q=u;;q=u){var G=h[xv(n,u)&ge],K=G>>>4;if(u+=G&15,u>y){if(a)throw"unexpected EOF";break}if(!G)throw"invalid length/literal";if(K<256)e[d++]=K;else if(K==256){q=u,h=null;break}else{var se=K-254;if(K>264){var N=K-257,me=eC[N];se=ki(n,u,(1<<me)-1)+iC[N],u+=me}var ie=f[xv(n,u)&H],xe=ie>>>4;if(!ie)throw"invalid distance";u+=ie&15;var Y=Tj[xe];if(xe>3){var me=tC[xe];Y+=xv(n,u)&(1<<me)-1,u+=me}if(u>y){if(a)throw"unexpected EOF";break}i&&s(d+131072);for(var ze=d+se;d<ze;d+=4)e[d]=e[d-Y],e[d+1]=e[d+1-Y],e[d+2]=e[d+2-Y],e[d+3]=e[d+3-Y];d=ze}}t.l=h,t.p=q,t.b=d,h&&(o=1,t.m=p,t.d=f,t.n=x)}while(!o);return d==e.length?e:Rj(e,0,d)},Nj=new Si(0),Lj=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Qf(n,e){return Pj((Lj(n),n.subarray(2,-4)),e)}var Ij=typeof TextDecoder<"u"&&new TextDecoder,kj=0;try{Ij.decode(Nj,{stream:!0}),kj=1}catch{}const Dj=n=>n&&n.isCubeTexture;class Oj extends bn{constructor(e,t){var r,i;const a=Dj(e),s=((i=a?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,o=Math.floor(Math.log2(s)),u=Math.pow(2,o),d=3*Math.max(u,16*7),h=4*u,f=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${o}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,x=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${JA>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},M=new Bd(1,16),_=new ci({uniforms:y,fragmentShader:x,vertexShader:p,side:zi});super(M,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class Uj extends Bb{constructor(e){super(e),this.type=Qn}parse(e){const t=function(g,S){switch(g){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(S||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(S||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(S||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(S||""))}},r=`
`,i=function(g,S,w){S=S||1024;let E=g.pos,N=-1,P=0,L="",U=String.fromCharCode.apply(null,new Uint16Array(g.subarray(E,E+128)));for(;0>(N=U.indexOf(r))&&P<S&&E<g.byteLength;)L+=U,P+=U.length,E+=128,U+=String.fromCharCode.apply(null,new Uint16Array(g.subarray(E,E+128)));return-1<N?(g.pos+=P+N+1,L+U.slice(0,N)):!1},a=function(g){const S=/^#\?(\S+)/,w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,N=/^\s*FORMAT=(\S+)\s*$/,P=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,L={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let U,R;for((g.pos>=g.byteLength||!(U=i(g)))&&t(1,"no header found"),(R=U.match(S))||t(3,"bad initial token"),L.valid|=1,L.programtype=R[1],L.string+=U+`
`;U=i(g),U!==!1;){if(L.string+=U+`
`,U.charAt(0)==="#"){L.comments+=U+`
`;continue}if((R=U.match(w))&&(L.gamma=parseFloat(R[1])),(R=U.match(E))&&(L.exposure=parseFloat(R[1])),(R=U.match(N))&&(L.valid|=2,L.format=R[1]),(R=U.match(P))&&(L.valid|=4,L.height=parseInt(R[1],10),L.width=parseInt(R[2],10)),L.valid&2&&L.valid&4)break}return L.valid&2||t(3,"missing format specifier"),L.valid&4||t(3,"missing image size specifier"),L},s=function(g,S,w){const E=S;if(E<8||E>32767||g[0]!==2||g[1]!==2||g[2]&128)return new Uint8Array(g);E!==(g[2]<<8|g[3])&&t(3,"wrong scanline width");const N=new Uint8Array(4*S*w);N.length||t(4,"unable to allocate buffer space");let P=0,L=0;const U=4*E,R=new Uint8Array(4),I=new Uint8Array(U);let G=w;for(;G>0&&L<g.byteLength;){L+4>g.byteLength&&t(1),R[0]=g[L++],R[1]=g[L++],R[2]=g[L++],R[3]=g[L++],(R[0]!=2||R[1]!=2||(R[2]<<8|R[3])!=E)&&t(3,"bad rgbe scanline format");let Z=0,pe;for(;Z<U&&L<g.byteLength;){pe=g[L++];const J=pe>128;if(J&&(pe-=128),(pe===0||Z+pe>U)&&t(3,"bad scanline data"),J){const de=g[L++];for(let ge=0;ge<pe;ge++)I[Z++]=de}else I.set(g.subarray(L,L+pe),Z),Z+=pe,L+=pe}const Y=E;for(let J=0;J<Y;J++){let de=0;N[P]=I[J+de],de+=E,N[P+1]=I[J+de],de+=E,N[P+2]=I[J+de],de+=E,N[P+3]=I[J+de],P+=4}G--}return N},o=function(g,S,w,E){const N=g[S+3],P=Math.pow(2,N-128)/255;w[E+0]=g[S+0]*P,w[E+1]=g[S+1]*P,w[E+2]=g[S+2]*P,w[E+3]=1},u=function(g,S,w,E){const N=g[S+3],P=Math.pow(2,N-128)/255;w[E+0]=wo.toHalfFloat(Math.min(g[S+0]*P,65504)),w[E+1]=wo.toHalfFloat(Math.min(g[S+1]*P,65504)),w[E+2]=wo.toHalfFloat(Math.min(g[S+2]*P,65504)),w[E+3]=wo.toHalfFloat(1)},d=new Uint8Array(e);d.pos=0;const h=a(d),f=h.width,p=h.height,x=s(d.subarray(d.pos),f,p);let y,M,_;switch(this.type){case Un:_=x.length/4;const g=new Float32Array(_*4);for(let w=0;w<_;w++)o(x,w*4,g,w*4);y=g,M=Un;break;case Qn:_=x.length/4;const S=new Uint16Array(_*4);for(let w=0;w<_;w++)u(x,w*4,S,w*4);y=S,M=Qn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:f,height:p,data:y,header:h.string,gamma:h.gamma,exposure:h.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,t,r,i){function a(s,o){switch(s.type){case Un:case Qn:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Wt,s.magFilter=Wt,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,o)}return super.load(e,a,r,i)}}const mu=JA>=152;class jj extends Bb{constructor(e){super(e),this.type=Qn}parse(e){const t=Math.pow(2.7182818,2.2);function r(C,D){for(var V=0,W=0;W<65536;++W)(W==0||C[W>>3]&1<<(W&7))&&(D[V++]=W);for(var O=V-1;V<65536;)D[V++]=0;return O}function i(C){for(var D=0;D<16384;D++)C[D]={},C[D].len=0,C[D].lit=0,C[D].p=null}const a={l:0,c:0,lc:0};function s(C,D,V,W,O){for(;V<C;)D=D<<8|X(W,O),V+=8;V-=C,a.l=D>>V&(1<<C)-1,a.c=D,a.lc=V}const o=new Array(59);function u(C){for(var D=0;D<=58;++D)o[D]=0;for(var D=0;D<65537;++D)o[C[D]]+=1;for(var V=0,D=58;D>0;--D){var W=V+o[D]>>1;o[D]=V,V=W}for(var D=0;D<65537;++D){var O=C[D];O>0&&(C[D]=O|o[O]++<<6)}}function d(C,D,V,W,O,$,oe){for(var he=V,_e=0,Se=0;O<=$;O++){if(he.value-V.value>W)return!1;s(6,_e,Se,C,he);var Re=a.l;if(_e=a.c,Se=a.lc,oe[O]=Re,Re==63){if(he.value-V.value>W)throw"Something wrong with hufUnpackEncTable";s(8,_e,Se,C,he);var Ae=a.l+6;if(_e=a.c,Se=a.lc,O+Ae>$+1)throw"Something wrong with hufUnpackEncTable";for(;Ae--;)oe[O++]=0;O--}else if(Re>=59){var Ae=Re-59+2;if(O+Ae>$+1)throw"Something wrong with hufUnpackEncTable";for(;Ae--;)oe[O++]=0;O--}}u(oe)}function h(C){return C&63}function f(C){return C>>6}function p(C,D,V,W){for(;D<=V;D++){var O=f(C[D]),$=h(C[D]);if(O>>$)throw"Invalid table entry";if($>14){var oe=W[O>>$-14];if(oe.len)throw"Invalid table entry";if(oe.lit++,oe.p){var he=oe.p;oe.p=new Array(oe.lit);for(var _e=0;_e<oe.lit-1;++_e)oe.p[_e]=he[_e]}else oe.p=new Array(1);oe.p[oe.lit-1]=D}else if($)for(var Se=0,_e=1<<14-$;_e>0;_e--){var oe=W[(O<<14-$)+Se];if(oe.len||oe.p)throw"Invalid table entry";oe.len=$,oe.lit=D,Se++}}return!0}const x={c:0,lc:0};function y(C,D,V,W){C=C<<8|X(V,W),D+=8,x.c=C,x.lc=D}const M={c:0,lc:0};function _(C,D,V,W,O,$,oe,he,_e,Se){if(C==D){W<8&&(y(V,W,O,oe),V=x.c,W=x.lc),W-=8;var Re=V>>W,Re=new Uint8Array([Re])[0];if(_e.value+Re>Se)return!1;for(var Ae=he[_e.value-1];Re-- >0;)he[_e.value++]=Ae}else if(_e.value<Se)he[_e.value++]=C;else return!1;M.c=V,M.lc=W}function g(C){return C&65535}function S(C){var D=g(C);return D>32767?D-65536:D}const w={a:0,b:0};function E(C,D){var V=S(C),W=S(D),O=W,$=V+(O&1)+(O>>1),oe=$,he=$-O;w.a=oe,w.b=he}function N(C,D){var V=g(C),W=g(D),O=V-(W>>1)&65535,$=W+O-32768&65535;w.a=$,w.b=O}function P(C,D,V,W,O,$,oe){for(var he=oe<16384,_e=V>O?O:V,Se=1,Re;Se<=_e;)Se<<=1;for(Se>>=1,Re=Se,Se>>=1;Se>=1;){for(var Ae=0,Mt=Ae+$*(O-Re),Fe=$*Se,qe=$*Re,ct=W*Se,bt=W*Re,Ht,Vt,Gt,cn;Ae<=Mt;Ae+=qe){for(var Ut=Ae,vr=Ae+W*(V-Re);Ut<=vr;Ut+=bt){var jn=Ut+ct,mn=Ut+Fe,Wr=mn+ct;he?(E(C[Ut+D],C[mn+D]),Ht=w.a,Gt=w.b,E(C[jn+D],C[Wr+D]),Vt=w.a,cn=w.b,E(Ht,Vt),C[Ut+D]=w.a,C[jn+D]=w.b,E(Gt,cn),C[mn+D]=w.a,C[Wr+D]=w.b):(N(C[Ut+D],C[mn+D]),Ht=w.a,Gt=w.b,N(C[jn+D],C[Wr+D]),Vt=w.a,cn=w.b,N(Ht,Vt),C[Ut+D]=w.a,C[jn+D]=w.b,N(Gt,cn),C[mn+D]=w.a,C[Wr+D]=w.b)}if(V&Se){var mn=Ut+Fe;he?E(C[Ut+D],C[mn+D]):N(C[Ut+D],C[mn+D]),Ht=w.a,C[mn+D]=w.b,C[Ut+D]=Ht}}if(O&Se)for(var Ut=Ae,vr=Ae+W*(V-Re);Ut<=vr;Ut+=bt){var jn=Ut+ct;he?E(C[Ut+D],C[jn+D]):N(C[Ut+D],C[jn+D]),Ht=w.a,C[jn+D]=w.b,C[Ut+D]=Ht}Re=Se,Se>>=1}return Ae}function L(C,D,V,W,O,$,oe,he,_e,Se){for(var Re=0,Ae=0,Mt=he,Fe=Math.trunc(O.value+($+7)/8);O.value<Fe;)for(y(Re,Ae,V,O),Re=x.c,Ae=x.lc;Ae>=14;){var qe=Re>>Ae-14&16383,ct=D[qe];if(ct.len)Ae-=ct.len,_(ct.lit,oe,Re,Ae,V,W,O,_e,Se,Mt),Re=M.c,Ae=M.lc;else{if(!ct.p)throw"hufDecode issues";var bt;for(bt=0;bt<ct.lit;bt++){for(var Ht=h(C[ct.p[bt]]);Ae<Ht&&O.value<Fe;)y(Re,Ae,V,O),Re=x.c,Ae=x.lc;if(Ae>=Ht&&f(C[ct.p[bt]])==(Re>>Ae-Ht&(1<<Ht)-1)){Ae-=Ht,_(ct.p[bt],oe,Re,Ae,V,W,O,_e,Se,Mt),Re=M.c,Ae=M.lc;break}}if(bt==ct.lit)throw"hufDecode issues"}}var Vt=8-$&7;for(Re>>=Vt,Ae-=Vt;Ae>0;){var ct=D[Re<<14-Ae&16383];if(ct.len)Ae-=ct.len,_(ct.lit,oe,Re,Ae,V,W,O,_e,Se,Mt),Re=M.c,Ae=M.lc;else throw"hufDecode issues"}return!0}function U(C,D,V,W,O,$){var oe={value:0},he=V.value,_e=ye(D,V),Se=ye(D,V);V.value+=4;var Re=ye(D,V);if(V.value+=4,_e<0||_e>=65537||Se<0||Se>=65537)throw"Something wrong with HUF_ENCSIZE";var Ae=new Array(65537),Mt=new Array(16384);i(Mt);var Fe=W-(V.value-he);if(d(C,D,V,Fe,_e,Se,Ae),Re>8*(W-(V.value-he)))throw"Something wrong with hufUncompress";p(Ae,_e,Se,Mt),L(Ae,Mt,C,D,V,Re,Se,$,O,oe)}function R(C,D,V){for(var W=0;W<V;++W)D[W]=C[D[W]]}function I(C){for(var D=1;D<C.length;D++){var V=C[D-1]+C[D]-128;C[D]=V}}function G(C,D){for(var V=0,W=Math.floor((C.length+1)/2),O=0,$=C.length-1;!(O>$||(D[O++]=C[V++],O>$));)D[O++]=C[W++]}function Z(C){for(var D=C.byteLength,V=new Array,W=0,O=new DataView(C);D>0;){var $=O.getInt8(W++);if($<0){var oe=-$;D-=oe+1;for(var he=0;he<oe;he++)V.push(O.getUint8(W++))}else{var oe=$;D-=2;for(var _e=O.getUint8(W++),he=0;he<oe+1;he++)V.push(_e)}}return V}function pe(C,D,V,W,O,$){var oe=new DataView($.buffer),he=V[C.idx[0]].width,_e=V[C.idx[0]].height,Se=3,Re=Math.floor(he/8),Ae=Math.ceil(he/8),Mt=Math.ceil(_e/8),Fe=he-(Ae-1)*8,qe=_e-(Mt-1)*8,ct={value:0},bt=new Array(Se),Ht=new Array(Se),Vt=new Array(Se),Gt=new Array(Se),cn=new Array(Se);for(let ae=0;ae<Se;++ae)cn[ae]=D[C.idx[ae]],bt[ae]=ae<1?0:bt[ae-1]+Ae*Mt,Ht[ae]=new Float32Array(64),Vt[ae]=new Uint16Array(64),Gt[ae]=new Uint16Array(Ae*64);for(let ae=0;ae<Mt;++ae){var Ut=8;ae==Mt-1&&(Ut=qe);var vr=8;for(let re=0;re<Ae;++re){re==Ae-1&&(vr=Fe);for(let Ce=0;Ce<Se;++Ce)Vt[Ce].fill(0),Vt[Ce][0]=O[bt[Ce]++],Y(ct,W,Vt[Ce]),J(Vt[Ce],Ht[Ce]),de(Ht[Ce]);ge(Ht);for(let Ce=0;Ce<Se;++Ce)H(Ht[Ce],Gt[Ce],re*64)}let le=0;for(let re=0;re<Se;++re){const Ce=V[C.idx[re]].type;for(let Ze=8*ae;Ze<8*ae+Ut;++Ze){le=cn[re][Ze];for(let it=0;it<Re;++it){const tt=it*64+(Ze&7)*8;oe.setUint16(le+0*2*Ce,Gt[re][tt+0],!0),oe.setUint16(le+1*2*Ce,Gt[re][tt+1],!0),oe.setUint16(le+2*2*Ce,Gt[re][tt+2],!0),oe.setUint16(le+3*2*Ce,Gt[re][tt+3],!0),oe.setUint16(le+4*2*Ce,Gt[re][tt+4],!0),oe.setUint16(le+5*2*Ce,Gt[re][tt+5],!0),oe.setUint16(le+6*2*Ce,Gt[re][tt+6],!0),oe.setUint16(le+7*2*Ce,Gt[re][tt+7],!0),le+=8*2*Ce}}if(Re!=Ae)for(let Ze=8*ae;Ze<8*ae+Ut;++Ze){const it=cn[re][Ze]+8*Re*2*Ce,tt=Re*64+(Ze&7)*8;for(let ft=0;ft<vr;++ft)oe.setUint16(it+ft*2*Ce,Gt[re][tt+ft],!0)}}}for(var jn=new Uint16Array(he),oe=new DataView($.buffer),mn=0;mn<Se;++mn){V[C.idx[mn]].decoded=!0;var Wr=V[C.idx[mn]].type;if(V[mn].type==2)for(var j=0;j<_e;++j){const le=cn[mn][j];for(var ne=0;ne<he;++ne)jn[ne]=oe.getUint16(le+ne*2*Wr,!0);for(var ne=0;ne<he;++ne)oe.setFloat32(le+ne*2*Wr,be(jn[ne]),!0)}}}function Y(C,D,V){for(var W,O=1;O<64;)W=D[C.value],W==65280?O=64:W>>8==255?O+=W&255:(V[O]=W,O++),C.value++}function J(C,D){D[0]=be(C[0]),D[1]=be(C[1]),D[2]=be(C[5]),D[3]=be(C[6]),D[4]=be(C[14]),D[5]=be(C[15]),D[6]=be(C[27]),D[7]=be(C[28]),D[8]=be(C[2]),D[9]=be(C[4]),D[10]=be(C[7]),D[11]=be(C[13]),D[12]=be(C[16]),D[13]=be(C[26]),D[14]=be(C[29]),D[15]=be(C[42]),D[16]=be(C[3]),D[17]=be(C[8]),D[18]=be(C[12]),D[19]=be(C[17]),D[20]=be(C[25]),D[21]=be(C[30]),D[22]=be(C[41]),D[23]=be(C[43]),D[24]=be(C[9]),D[25]=be(C[11]),D[26]=be(C[18]),D[27]=be(C[24]),D[28]=be(C[31]),D[29]=be(C[40]),D[30]=be(C[44]),D[31]=be(C[53]),D[32]=be(C[10]),D[33]=be(C[19]),D[34]=be(C[23]),D[35]=be(C[32]),D[36]=be(C[39]),D[37]=be(C[45]),D[38]=be(C[52]),D[39]=be(C[54]),D[40]=be(C[20]),D[41]=be(C[22]),D[42]=be(C[33]),D[43]=be(C[38]),D[44]=be(C[46]),D[45]=be(C[51]),D[46]=be(C[55]),D[47]=be(C[60]),D[48]=be(C[21]),D[49]=be(C[34]),D[50]=be(C[37]),D[51]=be(C[47]),D[52]=be(C[50]),D[53]=be(C[56]),D[54]=be(C[59]),D[55]=be(C[61]),D[56]=be(C[35]),D[57]=be(C[36]),D[58]=be(C[48]),D[59]=be(C[49]),D[60]=be(C[57]),D[61]=be(C[58]),D[62]=be(C[62]),D[63]=be(C[63])}function de(C){const D=.5*Math.cos(.7853975),V=.5*Math.cos(3.14159/16),W=.5*Math.cos(3.14159/8),O=.5*Math.cos(3*3.14159/16),$=.5*Math.cos(5*3.14159/16),oe=.5*Math.cos(3*3.14159/8),he=.5*Math.cos(7*3.14159/16);for(var _e=new Array(4),Se=new Array(4),Re=new Array(4),Ae=new Array(4),Mt=0;Mt<8;++Mt){var Fe=Mt*8;_e[0]=W*C[Fe+2],_e[1]=oe*C[Fe+2],_e[2]=W*C[Fe+6],_e[3]=oe*C[Fe+6],Se[0]=V*C[Fe+1]+O*C[Fe+3]+$*C[Fe+5]+he*C[Fe+7],Se[1]=O*C[Fe+1]-he*C[Fe+3]-V*C[Fe+5]-$*C[Fe+7],Se[2]=$*C[Fe+1]-V*C[Fe+3]+he*C[Fe+5]+O*C[Fe+7],Se[3]=he*C[Fe+1]-$*C[Fe+3]+O*C[Fe+5]-V*C[Fe+7],Re[0]=D*(C[Fe+0]+C[Fe+4]),Re[3]=D*(C[Fe+0]-C[Fe+4]),Re[1]=_e[0]+_e[3],Re[2]=_e[1]-_e[2],Ae[0]=Re[0]+Re[1],Ae[1]=Re[3]+Re[2],Ae[2]=Re[3]-Re[2],Ae[3]=Re[0]-Re[1],C[Fe+0]=Ae[0]+Se[0],C[Fe+1]=Ae[1]+Se[1],C[Fe+2]=Ae[2]+Se[2],C[Fe+3]=Ae[3]+Se[3],C[Fe+4]=Ae[3]-Se[3],C[Fe+5]=Ae[2]-Se[2],C[Fe+6]=Ae[1]-Se[1],C[Fe+7]=Ae[0]-Se[0]}for(var qe=0;qe<8;++qe)_e[0]=W*C[16+qe],_e[1]=oe*C[16+qe],_e[2]=W*C[48+qe],_e[3]=oe*C[48+qe],Se[0]=V*C[8+qe]+O*C[24+qe]+$*C[40+qe]+he*C[56+qe],Se[1]=O*C[8+qe]-he*C[24+qe]-V*C[40+qe]-$*C[56+qe],Se[2]=$*C[8+qe]-V*C[24+qe]+he*C[40+qe]+O*C[56+qe],Se[3]=he*C[8+qe]-$*C[24+qe]+O*C[40+qe]-V*C[56+qe],Re[0]=D*(C[qe]+C[32+qe]),Re[3]=D*(C[qe]-C[32+qe]),Re[1]=_e[0]+_e[3],Re[2]=_e[1]-_e[2],Ae[0]=Re[0]+Re[1],Ae[1]=Re[3]+Re[2],Ae[2]=Re[3]-Re[2],Ae[3]=Re[0]-Re[1],C[0+qe]=Ae[0]+Se[0],C[8+qe]=Ae[1]+Se[1],C[16+qe]=Ae[2]+Se[2],C[24+qe]=Ae[3]+Se[3],C[32+qe]=Ae[3]-Se[3],C[40+qe]=Ae[2]-Se[2],C[48+qe]=Ae[1]-Se[1],C[56+qe]=Ae[0]-Se[0]}function ge(C){for(var D=0;D<64;++D){var V=C[0][D],W=C[1][D],O=C[2][D];C[0][D]=V+1.5747*O,C[1][D]=V-.1873*W-.4682*O,C[2][D]=V+1.8556*W}}function H(C,D,V){for(var W=0;W<64;++W)D[V+W]=wo.toHalfFloat(q(C[W]))}function q(C){return C<=1?Math.sign(C)*Math.pow(Math.abs(C),2.2):Math.sign(C)*Math.pow(t,Math.abs(C)-1)}function K(C){return new DataView(C.array.buffer,C.offset.value,C.size)}function se(C){var D=C.viewer.buffer.slice(C.offset.value,C.offset.value+C.size),V=new Uint8Array(Z(D)),W=new Uint8Array(V.length);return I(V),G(V,W),new DataView(W.buffer)}function me(C){var D=C.array.slice(C.offset.value,C.offset.value+C.size),V=Qf(D),W=new Uint8Array(V.length);return I(V),G(V,W),new DataView(W.buffer)}function ie(C){for(var D=C.viewer,V={value:C.offset.value},W=new Uint16Array(C.width*C.scanlineBlockSize*(C.channels*C.type)),O=new Uint8Array(8192),$=0,oe=new Array(C.channels),he=0;he<C.channels;he++)oe[he]={},oe[he].start=$,oe[he].end=oe[he].start,oe[he].nx=C.width,oe[he].ny=C.lines,oe[he].size=C.type,$+=oe[he].nx*oe[he].ny*oe[he].size;var _e=Ye(D,V),Se=Ye(D,V);if(Se>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(_e<=Se)for(var he=0;he<Se-_e+1;he++)O[he+_e]=Ue(D,V);var Re=new Uint16Array(65536),Ae=r(O,Re),Mt=ye(D,V);U(C.array,D,V,Mt,W,$);for(var he=0;he<C.channels;++he)for(var Fe=oe[he],qe=0;qe<oe[he].size;++qe)P(W,Fe.start+qe,Fe.nx,Fe.size,Fe.ny,Fe.nx*Fe.size,Ae);R(Re,W,$);for(var ct=0,bt=new Uint8Array(W.buffer.byteLength),Ht=0;Ht<C.lines;Ht++)for(var Vt=0;Vt<C.channels;Vt++){var Fe=oe[Vt],Gt=Fe.nx*Fe.size,cn=new Uint8Array(W.buffer,Fe.end*2,Gt*2);bt.set(cn,ct),ct+=Gt*2,Fe.end+=Gt}return new DataView(bt.buffer)}function xe(C){var D=C.array.slice(C.offset.value,C.offset.value+C.size),V=Qf(D);const W=C.lines*C.channels*C.width,O=C.type==1?new Uint16Array(W):new Uint32Array(W);let $=0,oe=0;const he=new Array(4);for(let _e=0;_e<C.lines;_e++)for(let Se=0;Se<C.channels;Se++){let Re=0;switch(C.type){case 1:he[0]=$,he[1]=he[0]+C.width,$=he[1]+C.width;for(let Ae=0;Ae<C.width;++Ae){const Mt=V[he[0]++]<<8|V[he[1]++];Re+=Mt,O[oe]=Re,oe++}break;case 2:he[0]=$,he[1]=he[0]+C.width,he[2]=he[1]+C.width,$=he[2]+C.width;for(let Ae=0;Ae<C.width;++Ae){const Mt=V[he[0]++]<<24|V[he[1]++]<<16|V[he[2]++]<<8;Re+=Mt,O[oe]=Re,oe++}break}}return new DataView(O.buffer)}function ze(C){var D=C.viewer,V={value:C.offset.value},W=new Uint8Array(C.width*C.lines*(C.channels*C.type*2)),O={version:Me(D,V),unknownUncompressedSize:Me(D,V),unknownCompressedSize:Me(D,V),acCompressedSize:Me(D,V),dcCompressedSize:Me(D,V),rleCompressedSize:Me(D,V),rleUncompressedSize:Me(D,V),rleRawSize:Me(D,V),totalAcUncompressedCount:Me(D,V),totalDcUncompressedCount:Me(D,V),acCompression:Me(D,V)};if(O.version<2)throw"EXRLoader.parse: "+dt.compression+" version "+O.version+" is unsupported";for(var $=new Array,oe=Ye(D,V)-2;oe>0;){var he=De(D.buffer,V),_e=Ue(D,V),Se=_e>>2&3,Re=(_e>>4)-1,Ae=new Int8Array([Re])[0],Mt=Ue(D,V);$.push({name:he,index:Ae,type:Mt,compression:Se}),oe-=he.length+3}for(var Fe=dt.channels,qe=new Array(C.channels),ct=0;ct<C.channels;++ct){var bt=qe[ct]={},Ht=Fe[ct];bt.name=Ht.name,bt.compression=0,bt.decoded=!1,bt.type=Ht.pixelType,bt.pLinear=Ht.pLinear,bt.width=C.width,bt.height=C.lines}for(var Vt={idx:new Array(3)},Gt=0;Gt<C.channels;++Gt)for(var bt=qe[Gt],ct=0;ct<$.length;++ct){var cn=$[ct];bt.name==cn.name&&(bt.compression=cn.compression,cn.index>=0&&(Vt.idx[cn.index]=Gt),bt.offset=Gt)}if(O.acCompressedSize>0)switch(O.acCompression){case 0:var jn=new Uint16Array(O.totalAcUncompressedCount);U(C.array,D,V,O.acCompressedSize,jn,O.totalAcUncompressedCount);break;case 1:var Ut=C.array.slice(V.value,V.value+O.totalAcUncompressedCount),vr=Qf(Ut),jn=new Uint16Array(vr.buffer);V.value+=O.totalAcUncompressedCount;break}if(O.dcCompressedSize>0){var mn={array:C.array,offset:V,size:O.dcCompressedSize},Wr=new Uint16Array(me(mn).buffer);V.value+=O.dcCompressedSize}if(O.rleRawSize>0){var Ut=C.array.slice(V.value,V.value+O.rleCompressedSize),vr=Qf(Ut),j=Z(vr.buffer);V.value+=O.rleCompressedSize}for(var ne=0,ae=new Array(qe.length),ct=0;ct<ae.length;++ct)ae[ct]=new Array;for(var le=0;le<C.lines;++le)for(var re=0;re<qe.length;++re)ae[re].push(ne),ne+=qe[re].width*C.type*2;pe(Vt,ae,qe,jn,Wr,W);for(var ct=0;ct<qe.length;++ct){var bt=qe[ct];if(!bt.decoded)switch(bt.compression){case 2:for(var Ce=0,Ze=0,le=0;le<C.lines;++le){for(var it=ae[ct][Ce],tt=0;tt<bt.width;++tt){for(var ft=0;ft<2*bt.type;++ft)W[it++]=j[Ze+ft*bt.width*bt.height];Ze++}Ce++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(W.buffer)}function De(C,D){for(var V=new Uint8Array(C),W=0;V[D.value+W]!=0;)W+=1;var O=new TextDecoder().decode(V.slice(D.value,D.value+W));return D.value=D.value+W+1,O}function Ve(C,D,V){var W=new TextDecoder().decode(new Uint8Array(C).slice(D.value,D.value+V));return D.value=D.value+V,W}function ut(C,D){var V=Ge(C,D),W=ye(C,D);return[V,W]}function at(C,D){var V=ye(C,D),W=ye(C,D);return[V,W]}function Ge(C,D){var V=C.getInt32(D.value,!0);return D.value=D.value+4,V}function ye(C,D){var V=C.getUint32(D.value,!0);return D.value=D.value+4,V}function X(C,D){var V=C[D.value];return D.value=D.value+1,V}function Ue(C,D){var V=C.getUint8(D.value);return D.value=D.value+1,V}const Me=function(C,D){let V;return"getBigInt64"in DataView.prototype?V=Number(C.getBigInt64(D.value,!0)):V=C.getUint32(D.value+4,!0)+Number(C.getUint32(D.value,!0)<<32),D.value+=8,V};function we(C,D){var V=C.getFloat32(D.value,!0);return D.value+=4,V}function ke(C,D){return wo.toHalfFloat(we(C,D))}function be(C){var D=(C&31744)>>10,V=C&1023;return(C>>15?-1:1)*(D?D===31?V?NaN:1/0:Math.pow(2,D-15)*(1+V/1024):6103515625e-14*(V/1024))}function Ye(C,D){var V=C.getUint16(D.value,!0);return D.value+=2,V}function F(C,D){return be(Ye(C,D))}function k(C,D,V,W){for(var O=V.value,$=[];V.value<O+W-1;){var oe=De(D,V),he=Ge(C,V),_e=Ue(C,V);V.value+=3;var Se=Ge(C,V),Re=Ge(C,V);$.push({name:oe,pixelType:he,pLinear:_e,xSampling:Se,ySampling:Re})}return V.value+=1,$}function ce(C,D){var V=we(C,D),W=we(C,D),O=we(C,D),$=we(C,D),oe=we(C,D),he=we(C,D),_e=we(C,D),Se=we(C,D);return{redX:V,redY:W,greenX:O,greenY:$,blueX:oe,blueY:he,whiteX:_e,whiteY:Se}}function Ne(C,D){var V=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],W=Ue(C,D);return V[W]}function Ee(C,D){var V=ye(C,D),W=ye(C,D),O=ye(C,D),$=ye(C,D);return{xMin:V,yMin:W,xMax:O,yMax:$}}function Le(C,D){var V=["INCREASING_Y"],W=Ue(C,D);return V[W]}function nt(C,D){var V=we(C,D),W=we(C,D);return[V,W]}function He(C,D){var V=we(C,D),W=we(C,D),O=we(C,D);return[V,W,O]}function Ke(C,D,V,W,O){if(W==="string"||W==="stringvector"||W==="iccProfile")return Ve(D,V,O);if(W==="chlist")return k(C,D,V,O);if(W==="chromaticities")return ce(C,V);if(W==="compression")return Ne(C,V);if(W==="box2i")return Ee(C,V);if(W==="lineOrder")return Le(C,V);if(W==="float")return we(C,V);if(W==="v2f")return nt(C,V);if(W==="v3f")return He(C,V);if(W==="int")return Ge(C,V);if(W==="rational")return ut(C,V);if(W==="timecode")return at(C,V);if(W==="preview")return V.value+=O,"skipped";V.value+=O}function lt(C,D,V){const W={};if(C.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";W.version=C.getUint8(4);const O=C.getUint8(5);W.spec={singleTile:!!(O&2),longName:!!(O&4),deepFormat:!!(O&8),multiPart:!!(O&16)},V.value=8;for(var $=!0;$;){var oe=De(D,V);if(oe==0)$=!1;else{var he=De(D,V),_e=ye(C,V),Se=Ke(C,D,V,he,_e);Se===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${he}'.`):W[oe]=Se}}if(O&-5)throw console.error("EXRHeader:",W),"THREE.EXRLoader: provided file is currently unsupported.";return W}function vt(C,D,V,W,O){const $={size:0,viewer:D,array:V,offset:W,width:C.dataWindow.xMax-C.dataWindow.xMin+1,height:C.dataWindow.yMax-C.dataWindow.yMin+1,channels:C.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:C.channels[0].pixelType,uncompress:null,getter:null,format:null,[mu?"colorSpace":"encoding"]:null};switch(C.compression){case"NO_COMPRESSION":$.lines=1,$.uncompress=K;break;case"RLE_COMPRESSION":$.lines=1,$.uncompress=se;break;case"ZIPS_COMPRESSION":$.lines=1,$.uncompress=me;break;case"ZIP_COMPRESSION":$.lines=16,$.uncompress=me;break;case"PIZ_COMPRESSION":$.lines=32,$.uncompress=ie;break;case"PXR24_COMPRESSION":$.lines=16,$.uncompress=xe;break;case"DWAA_COMPRESSION":$.lines=32,$.uncompress=ze;break;case"DWAB_COMPRESSION":$.lines=256,$.uncompress=ze;break;default:throw"EXRLoader.parse: "+C.compression+" is unsupported"}if($.scanlineBlockSize=$.lines,$.type==1)switch(O){case Un:$.getter=F,$.inputSize=2;break;case Qn:$.getter=Ye,$.inputSize=2;break}else if($.type==2)switch(O){case Un:$.getter=we,$.inputSize=4;break;case Qn:$.getter=ke,$.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+$.type+" for "+C.compression+".";$.blockCount=(C.dataWindow.yMax+1)/$.scanlineBlockSize;for(var oe=0;oe<$.blockCount;oe++)Me(D,W);$.outputChannels=$.channels==3?4:$.channels;const he=$.width*$.height*$.outputChannels;switch(O){case Un:$.byteArray=new Float32Array(he),$.channels<$.outputChannels&&$.byteArray.fill(1,0,he);break;case Qn:$.byteArray=new Uint16Array(he),$.channels<$.outputChannels&&$.byteArray.fill(15360,0,he);break;default:console.error("THREE.EXRLoader: unsupported type: ",O);break}return $.bytesPerLine=$.width*$.inputSize*$.channels,$.outputChannels==4?$.format=On:$.format=cb,mu?$.colorSpace="srgb-linear":$.encoding=3e3,$}const Pe=new DataView(e),Ot=new Uint8Array(e),xt={value:0},dt=lt(Pe,e,xt),Oe=vt(dt,Pe,Ot,xt,this.type),Qe={value:0},yt={R:0,G:1,B:2,A:3,Y:0};for(let C=0;C<Oe.height/Oe.scanlineBlockSize;C++){const D=ye(Pe,xt);Oe.size=ye(Pe,xt),Oe.lines=D+Oe.scanlineBlockSize>Oe.height?Oe.height-D:Oe.scanlineBlockSize;const V=Oe.size<Oe.lines*Oe.bytesPerLine?Oe.uncompress(Oe):K(Oe);xt.value+=Oe.size;for(let W=0;W<Oe.scanlineBlockSize;W++){const O=W+C*Oe.scanlineBlockSize;if(O>=Oe.height)break;for(let $=0;$<Oe.channels;$++){const oe=yt[dt.channels[$].name];for(let he=0;he<Oe.width;he++){Qe.value=(W*(Oe.channels*Oe.width)+$*Oe.width+he)*Oe.inputSize;const _e=(Oe.height-1-O)*(Oe.width*Oe.outputChannels)+he*Oe.outputChannels+oe;Oe.byteArray[_e]=Oe.getter(V,Qe)}}}}return{header:dt,width:Oe.width,height:Oe.height,data:Oe.byteArray,format:Oe.format,[mu?"colorSpace":"encoding"]:Oe[mu?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function a(s,o){mu?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Wt,s.magFilter=Wt,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,o)}return super.load(e,a,r,i)}}const Fj=3e3,zj=3001;var Bj=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Hj extends Ub{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${Bj}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const XM=te.forwardRef(({speed:n=1,...e},t)=>{const[r]=te.useState(()=>new Hj);return qm(i=>r&&(r.time=i.clock.elapsedTime*n)),te.createElement("primitive",Qp({object:r,ref:t,attach:"material"},e))}),na=te.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...o},u)=>{const d=te.useRef(null);te.useImperativeHandle(u,()=>d.current,[]);const h=te.useRef(Math.random()*1e4);return qm(f=>{var p,x;if(!e||t===0)return;s&&f.invalidate();const y=h.current+f.clock.elapsedTime;d.current.rotation.x=Math.cos(y/4*t)/8*r,d.current.rotation.y=Math.sin(y/4*t)/8*r,d.current.rotation.z=Math.sin(y/4*t)/20*r;let M=Math.sin(y/4*t)/10;M=y3.mapLinear(M,-.1,.1,(p=a==null?void 0:a[0])!==null&&p!==void 0?p:-.1,(x=a==null?void 0:a[1])!==null&&x!==void 0?x:.1),d.current.position.y=M*i,d.current.updateMatrix()}),te.createElement("group",o,te.createElement("group",{ref:d,matrixAutoUpdate:!1},n))}),oC=(n,e,t)=>{let r;switch(n){case ri:r=new Uint8ClampedArray(e*t*4);break;case Qn:r=new Uint16Array(e*t*4);break;case oa:r=new Uint32Array(e*t*4);break;case ab:r=new Int8Array(e*t*4);break;case sb:r=new Int16Array(e*t*4);break;case _m:r=new Int32Array(e*t*4);break;case Un:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let Jf;const Vj=(n,e,t,r)=>{if(Jf!==void 0)return Jf;const i=new li(1,1,r);e.setRenderTarget(i);const a=new bn(new Wo,new Ha({color:16777215}));e.render(a,t),e.setRenderTarget(null);const s=oC(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,s),i.dispose(),a.geometry.dispose(),a.material.dispose(),Jf=s[0]!==0,Jf};class Jb{constructor(e){Tn(this,"_renderer"),Tn(this,"_rendererIsDisposable",!1),Tn(this,"_material"),Tn(this,"_scene"),Tn(this,"_camera"),Tn(this,"_quad"),Tn(this,"_renderTarget"),Tn(this,"_width"),Tn(this,"_height"),Tn(this,"_type"),Tn(this,"_colorSpace"),Tn(this,"_supportsReadPixels",!0),Tn(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(w){throw this._renderer.setRenderTarget(null),w}this._renderer.setRenderTarget(null)});var t,r,i,a,s,o,u,d,h,f,p,x,y,M,_,g;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const S={format:On,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)==null?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)==null?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)==null?void 0:i.generateMipmaps)!==void 0?(a=e.renderTargetOptions)==null?void 0:a.generateMipmaps:!1,magFilter:((s=e.renderTargetOptions)==null?void 0:s.magFilter)!==void 0?(o=e.renderTargetOptions)==null?void 0:o.magFilter:Wt,minFilter:((u=e.renderTargetOptions)==null?void 0:u.minFilter)!==void 0?(d=e.renderTargetOptions)==null?void 0:d.minFilter:Wt,samples:((h=e.renderTargetOptions)==null?void 0:h.samples)!==void 0?(f=e.renderTargetOptions)==null?void 0:f.samples:void 0,wrapS:((p=e.renderTargetOptions)==null?void 0:p.wrapS)!==void 0?(x=e.renderTargetOptions)==null?void 0:x.wrapS:ln,wrapT:((y=e.renderTargetOptions)==null?void 0:y.wrapT)!==void 0?(M=e.renderTargetOptions)==null?void 0:M.wrapT:ln};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Jb.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Fd,this._camera=new Tc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Vj(this._type,this._renderer,this._camera,S)){let w;switch(this._type){case Qn:w=this._renderer.extensions.has("EXT_color_buffer_float")?Un:void 0;break}w!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Un}`),this._type=w):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new bn(new Wo,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new li(this.width,this.height,S),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)==null?void 0:_.mapping)!==void 0?(g=e.renderTargetOptions)==null?void 0:g.mapping:Is}static instantiateRenderer(){const e=new Em;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=oC(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Ps(this.toArray(),this.width,this.height,On,this._type,(e==null?void 0:e.mapping)||Is,(e==null?void 0:e.wrapS)||ln,(e==null?void 0:e.wrapT)||ln,(e==null?void 0:e.magFilter)||Wt,(e==null?void 0:e.minFilter)||Wt,(e==null?void 0:e.anisotropy)||1,oi);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ci&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Zt&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Zt&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class lC extends Error{}class cC extends Error{}const gu=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const a=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Gj=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const a=gu(i,"hdrgm:GainMapMin","0"),s=gu(i,"hdrgm:GainMapMax"),o=gu(i,"hdrgm:Gamma","1"),u=gu(i,"hdrgm:OffsetSDR","0.015625"),d=gu(i,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),f=h?h[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!p)throw new Error("Incomplete gainmap metadata");const x=p[1];return{gainMapMin:Array.isArray(a)?a.map(y=>parseFloat(y)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(y=>parseFloat(y)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(y=>parseFloat(y)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(u)?u.map(y=>parseFloat(y)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetHdr:Array.isArray(d)?d.map(y=>parseFloat(y)):[parseFloat(d),parseFloat(d),parseFloat(d)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class Wj{constructor(e){Tn(this,"options"),this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,u=0,d;for(;o<s;){if(++u>250){r(new Error(`Found no marker after ${u} loops `));return}if(a.getUint8(o)!==255){r(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(d=a.getUint8(o+1),i&&console.log(`Marker: ${d.toString(16)}`),d===226){i&&console.log("Found APP2 marker (0xffe2)");const h=o+4;if(a.getUint32(h)===1297106432){const f=h+4;let p;if(a.getUint16(f)===18761)p=!1;else if(a.getUint16(f)===19789)p=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(f+2,!p)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=a.getUint32(f+4,!p);if(x<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const y=f+x,M=a.getUint16(y,!p),_=y+2;let g=0;for(let E=_;E<_+12*M;E+=12)a.getUint16(E,!p)===45057&&(g=a.getUint32(E+8,!p));const S=y+2+M*12+4,w=[];for(let E=S;E<S+g*16;E+=16){const N={MPType:a.getUint32(E,!p),size:a.getUint32(E+4,!p),dataOffset:a.getUint32(E+8,!p),dependantImages:a.getUint32(E+12,!p),start:-1,end:-1,isFII:!1};N.dataOffset?(N.start=f+N.dataOffset,N.isFII=!1):(N.start=0,N.isFII=!0),N.end=N.start+N.size,w.push(N)}if(this.options.extractNonFII&&w.length){const E=new Blob([a]),N=[];for(const P of w){if(P.isFII&&!this.options.extractFII)continue;const L=E.slice(P.start,P.end+1,"image/jpeg");N.push(L)}t(N)}}}o+=2+a.getUint16(o+2)}})}}const Xj=async n=>{const e=Gj(n);if(!e)throw new cC("Gain map XMP metadata not found");const t=await new Wj({extractFII:!0,extractNonFII:!0}).extract(n);if(t.length!==2)throw new lC("Gain map recovery image not found");return{sdr:new Uint8Array(await t[0].arrayBuffer()),gainMap:new Uint8Array(await t[1].arrayBuffer()),metadata:e}},qM=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class qj extends Lr{constructor(e,t){super(t),Tn(this,"_renderer"),Tn(this,"_renderTargetOptions"),Tn(this,"_internalLoadingManager"),Tn(this,"_config"),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new Wm}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Zt,sdr:new Zt});return this._config.createQuadRenderer({width:16,height:16,type:Qn,colorSpace:oi,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,r){const i=t?new Blob([t],{type:"image/jpeg"}):void 0,a=new Blob([e],{type:"image/jpeg"});let s,o,u=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([i?qM(i):Promise.resolve(void 0),qM(a)]);o=d[0],s=d[1],u=r==="flipY"}else{const d=await Promise.all([i?createImageBitmap(i,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:r||"flipY"})]);o=d[0],s=d[1]}return{sdrImage:s,gainMapImage:o,needsFlip:u}}createTextures(e,t,r){const i=new Zt(t||new ImageData(2,2),Is,ln,ln,Wt,wx,On,ri,1,oi);i.flipY=r,i.needsUpdate=!0;const a=new Zt(e,Is,ln,ln,Wt,wx,On,ri,1,kn);return a.flipY=r,a.needsUpdate=!0,{gainMap:i,sdr:a}}updateQuadRenderer(e,t,r,i,a){e.width=t.width,e.height=t.height,e.material.gainMap=r,e.material.sdr=i,e.material.gainMapMin=a.gainMapMin,e.material.gainMapMax=a.gainMapMax,e.material.offsetHdr=a.offsetHdr,e.material.offsetSdr=a.offsetSdr,e.material.gamma=a.gamma,e.material.hdrCapacityMin=a.hdrCapacityMin,e.material.hdrCapacityMax=a.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),e.material.needsUpdate=!0}}const Yj=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,$j=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Kj extends ci{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:o,hdrCapacityMax:u,sdr:d,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:Yj,fragmentShader:$j,uniforms:{sdr:{value:d},gainMap:{value:h},gamma:{value:new z(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new z().fromArray(t)},offsetSdr:{value:new z().fromArray(r)},gainMapMin:{value:new z().fromArray(i)},gainMapMax:{value:new z().fromArray(a)},weightFactor:{value:(Math.log2(s)-o)/(u-o)}},blending:ua,depthTest:!1,depthWrite:!1}),Tn(this,"_maxDisplayBoost"),Tn(this,"_hdrCapacityMin"),Tn(this,"_hdrCapacityMax"),this._maxDisplayBoost=s,this._hdrCapacityMin=o,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class uC extends qj{constructor(e,t){super({renderer:e,createMaterial:r=>new Kj(r),createQuadRenderer:r=>new Jb(r)},t)}async render(e,t,r,i){const{sdrImage:a,gainMapImage:s,needsFlip:o}=await this.processImages(r,i,"flipY"),{gainMap:u,sdr:d}=this.createTextures(a,s,o);this.updateQuadRenderer(e,a,u,d,t),e.render()}}class Zj extends uC{load([e,t,r],i,a,s){const o=this.prepareQuadRenderer();let u,d,h;const f=async()=>{if(u&&d&&h){try{await this.render(o,h,u,d)}catch(R){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof s=="function"&&s(R),o.disposeOnDemandRenderer();return}typeof i=="function"&&i(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),o.disposeOnDemandRenderer()}};let p=!0,x=0,y=0,M=!0,_=0,g=0,S=!0,w=0,E=0;const N=()=>{if(typeof a=="function"){const R=x+_+w,I=y+g+E,G=p&&M&&S;a(new ProgressEvent("progress",{lengthComputable:G,loaded:I,total:R}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const P=new ai(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(e,async R=>{if(typeof R=="string")throw new Error("Invalid sdr buffer");u=R,await f()},R=>{p=R.lengthComputable,y=R.loaded,x=R.total,N()},R=>{this.manager.itemError(e),typeof s=="function"&&s(R)});const L=new ai(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async R=>{if(typeof R=="string")throw new Error("Invalid gainmap buffer");d=R,await f()},R=>{M=R.lengthComputable,g=R.loaded,_=R.total,N()},R=>{this.manager.itemError(t),typeof s=="function"&&s(R)});const U=new ai(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(r,async R=>{if(typeof R!="string")throw new Error("Invalid metadata string");h=JSON.parse(R),await f()},R=>{S=R.lengthComputable,E=R.loaded,w=R.total,N()},R=>{this.manager.itemError(r),typeof s=="function"&&s(R)}),o}}class Qj extends uC{load(e,t,r,i){const a=this.prepareQuadRenderer(),s=new ai(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const u=new Uint8Array(o);let d,h,f;try{const p=await Xj(u);d=p.sdr,h=p.gainMap,f=p.metadata}catch(p){if(p instanceof cC||p instanceof lC)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},d=u;else throw p}try{await this.render(a,f,d.buffer,h==null?void 0:h.buffer)}catch(p){this.manager.itemError(e),typeof i=="function"&&i(p),a.disposeOnDemandRenderer();return}typeof t=="function"&&t(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},r,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),a}}const Td={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},dC="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",rc=n=>Array.isArray(n),e_=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Ym({files:n=e_,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let a=null,s=!1;t&&(t_(t),n=Td[t],e=dC),s=rc(n);const{extension:o,isCubemap:u}=n_(n);if(a=r_(o),!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);const d=Sd(x=>x.gl);te.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function x(){vc.clear(a,s?[n]:n)}d.domElement.addEventListener("webglcontextlost",x,{once:!0})},[n,d.domElement]);const h=vc(a,s?[n]:n,x=>{(o==="webp"||o==="jpg"||o==="jpeg")&&x.setRenderer(d),x.setPath==null||x.setPath(e),i&&i(x)});let f=s?h[0]:h;if(o==="jpg"||o==="jpeg"||o==="webp"){var p;f=(p=f.renderTarget)==null?void 0:p.texture}return f.mapping=u?fa:hc,"colorSpace"in f?f.colorSpace=r??u?"srgb":"srgb-linear":f.encoding=r??u?zj:Fj,f}const Jj={files:e_,path:"",preset:void 0,extensions:void 0};Ym.preload=n=>{const e={...Jj,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:a}=e;i&&(t_(i),t=Td[i],r=dC);const{extension:s}=n_(t);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=r_(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);vc.preload(o,rc(t)?[t]:t,u=>{u.setPath==null||u.setPath(r),a&&a(u)})};const eF={files:e_,preset:void 0};Ym.clear=n=>{const e={...eF,...n};let{files:t}=e;const{preset:r}=e;r&&(t_(r),t=Td[r]);const{extension:i}=n_(t),a=r_(i);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);vc.clear(a,rc(t)?[t]:t)};function t_(n){if(!(n in Td))throw new Error("Preset must be one of: "+Object.keys(Td).join(", "))}function n_(n){var e;const t=rc(n)&&n.length===6,r=rc(n)&&n.length===3&&n.some(a=>a.endsWith("json")),i=rc(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function r_(n){return n==="cube"?pA:n==="hdr"?Uj:n==="exr"?jj:n==="jpg"||n==="jpeg"?Qj:n==="webp"?Zj:null}const tF=n=>n.current&&n.current.isScene,nF=n=>tF(n)?n.current:n;function i_(n,e,t,r,i={}){var a,s,o,u;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const d=nF(e||t),h=d.background,f=d.environment,p={backgroundBlurriness:d.backgroundBlurriness,backgroundIntensity:d.backgroundIntensity,backgroundRotation:(a=(s=d.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:d.environmentIntensity,environmentRotation:(o=(u=d.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&o!==void 0?o:[0,0,0]};return n!=="only"&&(d.environment=r),n&&(d.background=r),ds(d,i),()=>{n!=="only"&&(d.environment=f),n&&(d.background=h),ds(d,p)}}function a_({scene:n,background:e=!1,map:t,...r}){const i=Sd(a=>a.scene);return te.useLayoutEffect(()=>{if(t)return i_(e,n,i,t,r)}),null}function hC({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...u}){const d=Ym(u),h=Sd(f=>f.scene);return te.useLayoutEffect(()=>i_(n,e,h,d,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),te.useEffect(()=>()=>{d.dispose()},[d]),null}function rF({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:o,backgroundBlurriness:u,backgroundIntensity:d,backgroundRotation:h,environmentIntensity:f,environmentRotation:p,scene:x,files:y,path:M,preset:_=void 0,extensions:g}){const S=Sd(U=>U.gl),w=Sd(U=>U.scene),E=te.useRef(null),[N]=te.useState(()=>new Fd),P=te.useMemo(()=>{const U=new wb(r);return U.texture.type=Qn,U},[r]);te.useEffect(()=>()=>{P.dispose()},[P]),te.useLayoutEffect(()=>{if(i===1){const U=S.autoClear;S.autoClear=!0,E.current.update(S,N),S.autoClear=U}return i_(s,x,w,P.texture,{backgroundBlurriness:o??u,backgroundIntensity:d,backgroundRotation:h,environmentIntensity:f,environmentRotation:p})},[n,N,P.texture,x,w,s,i,S]);let L=1;return qm(()=>{if(i===1/0||L<i){const U=S.autoClear;S.autoClear=!0,E.current.update(S,N),S.autoClear=U,L++}}),te.createElement(te.Fragment,null,rj(te.createElement(te.Fragment,null,n,te.createElement("cubeCamera",{ref:E,args:[e,t,P]}),y||_?te.createElement(hC,{background:!0,files:y,preset:_,path:M,extensions:g}):a?te.createElement(a_,{background:!0,map:a,extensions:g}):null),N))}function iF(n){var e,t,r,i;const a=Ym(n),s=n.map||a;te.useMemo(()=>OA({GroundProjectedEnvImpl:Oj}),[]),te.useEffect(()=>()=>{a.dispose()},[a]);const o=te.useMemo(()=>[s],[s]),u=(e=n.ground)==null?void 0:e.height,d=(t=n.ground)==null?void 0:t.radius,h=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return te.createElement(te.Fragment,null,te.createElement(a_,Qp({},n,{map:s})),te.createElement("groundProjectedEnvImpl",{args:o,scale:h,height:u,radius:d}))}function aF(n){return n.ground?te.createElement(iF,n):n.map?te.createElement(a_,n):n.children?te.createElement(rF,n):te.createElement(hC,n)}const ra=({position:n,color:e,scale:t,rotationSpeed:r=1})=>{const i=te.useRef();return te.useRef(),te.useRef(),qm(a=>{if(i.current){const s=a.clock.getElapsedTime();i.current.position.y=n[1]+Math.sin(s*2+n[0])*.4,i.current.rotation.x=s*r*.5,i.current.rotation.z=s*r*.3}}),m.jsxs("group",{ref:i,position:n,scale:t,children:[m.jsxs("mesh",{position:[0,0,0],children:[m.jsx("cylinderGeometry",{args:[.73,.73,.08,32]}),m.jsx(XM,{color:e,envMapIntensity:.9,clearcoat:1,clearcoatRoughness:.1,metalness:.5,roughness:.2,distort:.08,speed:1.5})]}),m.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[m.jsx("torusGeometry",{args:[.85,.12,16,48]}),m.jsx(XM,{color:e,envMapIntensity:.8,clearcoat:1,clearcoatRoughness:.2,metalness:.4,roughness:.3,distort:.08,speed:1.5})]})]})},sF=()=>m.jsx("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",children:m.jsxs(_j,{camera:{position:[0,0,9],fov:55},children:[m.jsx("ambientLight",{intensity:.6}),m.jsx("pointLight",{position:[10,10,10],intensity:1.2}),m.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),m.jsxs("group",{position:[0,-.5,0],children:[m.jsx(na,{speed:1.5,rotationIntensity:.3,floatIntensity:.8,children:m.jsx(ra,{position:[-6,2.5,-3],color:"#C9A668",scale:1.2,rotationSpeed:.8})}),m.jsx(na,{speed:2.3,rotationIntensity:.5,floatIntensity:1.1,children:m.jsx(ra,{position:[7.5,-.5,-4],color:"#7c3aed",scale:1,rotationSpeed:-1.4})}),m.jsx(na,{speed:2.7,rotationIntensity:.7,floatIntensity:1.5,children:m.jsx(ra,{position:[-4,-3.5,-5],color:"#f59e0b",scale:1.1,rotationSpeed:-.7})}),m.jsx(na,{speed:1.6,rotationIntensity:.3,floatIntensity:.7,children:m.jsx(ra,{position:[6,1.5,-3.5],color:"#78716c",scale:.95,rotationSpeed:1.3})}),m.jsx(na,{speed:2.4,rotationIntensity:.6,floatIntensity:1.4,children:m.jsx(ra,{position:[3.5,-2,-2],color:"#ec4899",scale:.85,rotationSpeed:-1.6})}),m.jsx(na,{speed:1.4,rotationIntensity:.4,floatIntensity:.9,children:m.jsx(ra,{position:[-7.5,.5,-3.5],color:"#10b981",scale:1.05,rotationSpeed:.85})}),m.jsx(na,{speed:2.1,rotationIntensity:.8,floatIntensity:1.3,children:m.jsx(ra,{position:[0,-4,-4.5],color:"#ef4444",scale:.8,rotationSpeed:-1.1})}),m.jsx(na,{speed:2.9,rotationIntensity:.9,floatIntensity:1.6,children:m.jsx(ra,{position:[-9,-2.5,-4],color:"#8b5cf6",scale:.9,rotationSpeed:-1.8})}),m.jsx(na,{speed:1.9,rotationIntensity:.5,floatIntensity:1,children:m.jsx(ra,{position:[5,3.5,-3],color:"#fbbf24",scale:1,rotationSpeed:1.5})}),m.jsx(na,{speed:2.5,rotationIntensity:.4,floatIntensity:1.2,children:m.jsx(ra,{position:[-2.5,-1.5,-3.5],color:"#14b8a6",scale:.95,rotationSpeed:-.9})})]}),m.jsx(aF,{preset:"city"})]})});function oF(){const n=e=>{e.preventDefault();const t=document.getElementById("features");if(t){const r=t.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:r,behavior:"smooth"})}};return m.jsxs("div",{children:[m.jsxs("header",{className:"relative h-[110vh] flex items-center justify-center overflow-hidden -mt-16",children:[m.jsx(sF,{}),m.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none bg-[radial-gradient(circle_at_center,rgba(249,248,244,0.7)_0%,rgba(249,248,244,0.3)_50%,rgba(249,248,244,0.1)_100%)]"}),m.jsxs("div",{className:"relative z-20 container mx-auto px-6 flex flex-col justify-between h-full pt-32 pb-8",children:[m.jsxs("div",{className:"text-center flex-grow flex flex-col justify-center",children:[m.jsx("h1",{className:"font-serif text-6xl md:text-7xl lg:text-8xl font-bold leading-tight mb-6 text-stone-900 drop-shadow-sm animate-fade-in-up",style:{animationDelay:"0s"},children:"Disc Golf Disc Cleaner"}),m.jsx("p",{className:"font-serif italic text-3xl md:text-4xl lg:text-5xl text-stone-600 font-light mb-8 animate-fade-in-up",style:{animationDelay:"0.1s"},children:"Automated Cleaning Station"}),m.jsx("p",{className:"max-w-3xl mx-auto text-lg md:text-xl text-stone-700 font-light leading-relaxed animate-fade-in-up",style:{animationDelay:"0.2s"},children:"A fully automated, Raspberry Pi-powered station that combines smart load sensing with precision mechanics to detect, clamp, and clean discs with consistent reliability."})]}),m.jsx("div",{className:"flex justify-center animate-fade-in-up",style:{animationDelay:"0.3s"},children:m.jsxs("a",{href:"#features",onClick:n,className:"group flex flex-col items-center gap-3 text-sm font-medium text-stone-500 hover:text-stone-900 transition-colors cursor-pointer",children:[m.jsx("span",{className:"tracking-[0.2em] uppercase",children:"Discover"}),m.jsx("span",{className:"p-3 border-2 border-stone-300 rounded-full group-hover:border-stone-900 transition-all bg-white/60 backdrop-blur-sm group-hover:bg-white",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})})]})]}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[m.jsx("div",{id:"features",className:"mb-20",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-16 items-start",children:[m.jsx("div",{className:"lg:col-span-5 sticky top-24",children:m.jsx("div",{className:"aspect-square bg-stone-100 rounded-2xl overflow-hidden shadow-lg border border-stone-200",children:m.jsx("img",{src:"https://placehold.co/600x600/C9A668/ffffff?text=Final+Product",alt:"Automated Disc Cleaner",className:"w-full h-full object-cover"})})}),m.jsxs("div",{className:"lg:col-span-7",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:"CORE FEATURES"}),m.jsx("h2",{className:"font-serif text-4xl mb-6 text-stone-900",children:"Automated Disc Cleaning Station"}),m.jsx("p",{className:"text-lg text-stone-600 leading-relaxed mb-10",children:"A complete electromechanical system that autonomously detects, secures, and cleans disc golf discs. Our solution integrates advanced load sensing, precision motor control, and computer vision to ensure a perfect clean every cycle."}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-4 mt-2.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-stone-900 font-semibold text-lg",children:"Intelligent Control System"}),m.jsx("p",{className:"text-stone-600",children:"Raspberry Pi 5 orchestrates all sensors, motors, and AI vision logic."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-4 mt-2.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-stone-900 font-semibold text-lg",children:"Smart Load Sensing"}),m.jsx("p",{className:"text-stone-600",children:"Rotary encoder detects disc presence by monitoring motor RPM changes."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-4 mt-2.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-stone-900 font-semibold text-lg",children:"Secure 3-Jaw Chuck"}),m.jsx("p",{className:"text-stone-600",children:"Custom-designed mechanism safely clamps and rotates discs during cleaning."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-4 mt-2.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-stone-900 font-semibold text-lg",children:"Automated Deep Clean"}),m.jsx("p",{className:"text-stone-600",children:"Servo-actuated brushes scrub both sides while pneumatics remove debris."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-4 mt-2.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-stone-900 font-semibold text-lg",children:"AI Quality Verification"}),m.jsx("p",{className:"text-stone-600",children:"Integrated Pi Camera with ML model confirms cleanliness in real-time."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-4 mt-2.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-stone-900 font-semibold text-lg",children:"Interactive Interface"}),m.jsx("p",{className:"text-stone-600",children:"Polished touchscreen GUI combined with physical controls for intuitive operation."})]})]})]})]})]})}),m.jsx("div",{className:"mb-20 bg-white border-t border-stone-200 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-20",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Media"}),m.jsx("h2",{className:"font-serif text-4xl md:text-5xl mb-4 text-stone-900",children:"Gallery & Demo"})]}),m.jsxs("div",{className:"mb-16 max-w-4xl mx-auto",children:[m.jsx("h3",{className:"font-serif text-2xl font-semibold text-stone-900 mb-6 text-center",children:"Final Demo Video"}),m.jsx("div",{className:"aspect-video bg-stone-50 rounded-2xl overflow-hidden shadow-lg flex items-center justify-center border border-stone-200",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("svg",{className:"mx-auto h-24 w-24 text-stone-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("p",{className:"text-stone-500 text-lg",children:"Demo Video Coming Soon"})]})})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-serif text-2xl font-semibold text-stone-900 mb-6 text-center",children:"Project Photos"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>m.jsx("div",{className:"rounded-xl overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all transform hover:scale-105 hover:shadow-md",children:m.jsx("img",{src:`https://placehold.co/400x300/C9A668/ffffff?text=Photo+${e}`,alt:`Project photo ${e}`,className:"w-full h-auto object-cover"})},e))})]})]})})]})]})}function lF(){const n=[{name:"Connor Hoang",role:"Electrical & Computer Systems (EE/CS)",learningGoal:"Gain hands-on experience with component specification and system integration. Learn how to properly spec electrical components for real-world applications and work with the Raspberry Pi in a complex system with multiple sensors and actuators.",reflection:""},{name:"Hong Zhang",role:"Electrical & Computer Systems (EE/CS)",learningGoal:"Develop expertise in full-stack embedded systems development, from hardware specification to software implementation. Learn to properly spec, wire, and program the Raspberry Pi to integrate all electrical components with mechanical systems. Additionally, learn how to train and implement a machine learning model for real-world applications like dirt detection.",reflection:""},{name:"Henry Tejada Deras",role:"Electrical & Computer Systems (EE/CS)",learningGoal:"Gain experience speccing out and designing a complete mechanical system, then fabricating it using shop tools. Learn proper fabrication techniques and understand how design decisions affect manufacturability.",reflection:""},{name:"Mateo Otero-Diaz",role:"Mechanical Engineering (ME)",learningGoal:"Design a viable, well-scoped system that demonstrates tangible mechanical engineering skills through the complete design lifecycle: from concept and CAD design through fabrication and testing.",reflection:""},{name:"Emily Boyd",role:"Mechanical Engineering (ME)",learningGoal:"Design a more complex mechanism with multiple interacting parts, including the custom chuck, motor integration, and brush actuation system.",reflection:""}];return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase animate-fade-in-up",style:{animationDelay:"0s"},children:"Our People"}),m.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-stone-900 mb-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:"Team & Reflections"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mx-auto mb-6 animate-fade-in-up",style:{animationDelay:"0.2s"}}),m.jsx("p",{className:"text-stone-600 text-lg max-w-2xl mx-auto font-light animate-fade-in-up",style:{animationDelay:"0.3s"},children:"Meet our team and learn about their individual learning goals and reflections from this project."})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 animate-fade-in-up",style:{animationDelay:"0.1s"},children:n.slice(0,3).map((e,t)=>m.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-stone-200 hover:shadow-lg transition-all duration-300 hover:transform hover:-translate-y-1 hover:border-nobel-gold group",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-stone-100 flex items-center justify-center text-nobel-gold font-serif font-bold text-2xl mx-auto mb-5 border border-stone-200 group-hover:border-nobel-gold transition-colors shadow-inner",children:e.name.split(" ").map(r=>r[0]).join("")}),m.jsx("h3",{className:"font-serif text-xl font-bold text-stone-900 mb-2",children:e.name}),m.jsx("p",{className:"text-stone-500 text-sm font-medium uppercase tracking-wider",children:e.role})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-2"}),"Initial Goal"]}),m.jsx("p",{className:"text-stone-600 leading-relaxed text-sm",children:e.learningGoal})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-stone-400 mr-2"}),"Reflection"]}),m.jsx("p",{className:"text-stone-600 leading-relaxed text-sm italic",children:e.reflection||"Coming soon..."})]})]},t))}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto animate-fade-in-up",style:{animationDelay:"0.1s"},children:n.slice(3,5).map((e,t)=>m.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-stone-200 hover:shadow-lg transition-all duration-300 hover:transform hover:-translate-y-1 hover:border-nobel-gold group",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-stone-100 flex items-center justify-center text-nobel-gold font-serif font-bold text-2xl mx-auto mb-5 border border-stone-200 group-hover:border-nobel-gold transition-colors shadow-inner",children:e.name.split(" ").map(r=>r[0]).join("")}),m.jsx("h3",{className:"font-serif text-xl font-bold text-stone-900 mb-2",children:e.name}),m.jsx("p",{className:"text-stone-500 text-sm font-medium uppercase tracking-wider",children:e.role})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-nobel-gold mr-2"}),"Initial Goal"]}),m.jsx("p",{className:"text-stone-600 leading-relaxed text-sm",children:e.learningGoal})]}),m.jsxs("div",{children:[m.jsxs("h4",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-3 flex items-center",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-stone-400 mr-2"}),"Reflection"]}),m.jsx("p",{className:"text-stone-600 leading-relaxed text-sm italic",children:e.reflection||"Coming soon..."})]})]},t+3))})]})}function cF(){const[n,e]=te.useState(!1),[t,r]=te.useState({x:0,y:0}),[i,a]=te.useState(0),[s,o]=te.useState(0),u=te.useRef(null),d=_=>{u.current&&(e(!0),r({x:_.pageX-u.current.offsetLeft,y:_.pageY-u.current.offsetTop}),a(u.current.scrollLeft),o(u.current.scrollTop),_.preventDefault())},h=_=>{if(!n||!u.current)return;_.preventDefault();const g=_.pageX-u.current.offsetLeft,S=_.pageY-u.current.offsetTop,w=(g-t.x)*2,E=(S-t.y)*2;u.current.scrollLeft=i-w,u.current.scrollTop=s-E},f=()=>{e(!1)},p=()=>{e(!1)},x=_=>{u.current&&_.touches.length===1&&(e(!0),r({x:_.touches[0].pageX-u.current.offsetLeft,y:_.touches[0].pageY-u.current.offsetTop}),a(u.current.scrollLeft),o(u.current.scrollTop))},y=_=>{if(!n||!u.current||_.touches.length!==1)return;_.preventDefault();const g=_.touches[0].pageX-u.current.offsetLeft,S=_.touches[0].pageY-u.current.offsetTop,w=(g-t.x)*2,E=(S-t.y)*2;u.current.scrollLeft=i-w,u.current.scrollTop=s-E},M=()=>{e(!1)};return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase animate-fade-in-up",style:{animationDelay:"0s"},children:"Technical Specifications"}),m.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-stone-900 mb-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:"System Design"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mx-auto mb-6 animate-fade-in-up",style:{animationDelay:"0.2s"}})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.1s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"System Architecture"}),m.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:"The Disc Golf Disc Cleaner integrates mechanical, electrical, and software subsystems. The block diagram below shows all major components and how they connect to each other, including the Raspberry Pi controller, motor drivers, sensors, and user interface elements."}),m.jsx("div",{className:"rounded-lg overflow-hidden shadow-lg border border-stone-200",children:m.jsx("img",{src:"https://placehold.co/900x600/C9A668/ffffff?text=System+Architecture+Block+Diagram",alt:"System Architecture Block Diagram",className:"w-full h-auto"})})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"Data & Energy Flow"}),m.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:"This diagram illustrates how information and power move through the system. Data flow includes sensor readings, button inputs, and control signals. Energy flow shows power distribution from the supply through the fuse box to motors, the Raspberry Pi, and peripheral devices."}),m.jsx("div",{className:"rounded-lg overflow-hidden shadow-lg border border-stone-200",children:m.jsx("img",{src:"https://placehold.co/900x600/C9A668/ffffff?text=Data+%26+Energy+Flow+Diagram",alt:"Data and Energy Flow Diagram",className:"w-full h-auto"})})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.3s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"Enclosure Design"}),m.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:"The enclosure uses a dual-enclosure design inspired by microwave ovens: an outer enclosure for structure and aesthetics, and an inner enclosure designed for easy cleaning of dust and debris."}),m.jsxs("div",{className:"bg-[#F5F4F0] rounded-lg p-6 mb-8 border-l-4 border-nobel-gold",children:[m.jsx("h3",{className:"text-lg font-semibold text-stone-900 mb-3",children:"Design Philosophy"}),m.jsxs("ul",{className:"text-stone-600 space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Outer Enclosure:"})," Encapsulates the entire machine and provides structural support. The base plate is the only load-bearing component; walls are primarily aesthetic."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Inner Enclosure:"})," Catches all dust and debris during cleaning. Connected to the outer enclosure via a wooden frame (inner enclosure supports) that also holds the central motor."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Electronics Placement:"})," Mounted on top of the inner enclosure for shorter wire runs to the front control panel."]})]})]}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Bracket System (No Adhesives)"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:"We avoided adhesives entirely, opting for mechanical brackets instead. Glue would not be sufficient for our load-bearing supports and is less reliable than properly fastened brackets."}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-2 ml-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"L-Brackets:"})," Used for general connections. Note: only one hole per side is used to avoid screw interference."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"C-Brackets:"})," Used near the front to connect both the top structure and base to the pillars, replacing two L-brackets that interfered with the dust tray placement."]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Material Selection"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-white p-4 rounded-lg border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Euca Board (Outer Enclosure)"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Selected for laser cutting compatibility. Available in the Olin shop and easy to manufacture precise parts from."})]}),m.jsxs("div",{className:"bg-white p-4 rounded-lg border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Plywood (Base)"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Strong enough to support the entire structure including motors and components. Found a piece matching our required dimensions."})]}),m.jsxs("div",{className:"bg-white p-4 rounded-lg border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Wood (Supports)"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Used for inner enclosure supports and motor mounts. Versatile for modifications and strong enough to handle motor torque loads."})]}),m.jsxs("div",{className:"bg-white p-4 rounded-lg border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Sheet Metal (Inner Enclosure)"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Dust doesn't easily attach to metal surfaces, making cleanup easier. Chosen over acrylic for easier modification (drilling holes) and to fulfill fabrication learning goals."})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Dust Tray"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"Designed for easy insertion and removal. Dimensions cover all open space under the inner enclosure. Manufacturing was deferred to the end as it's less critical than structural components."}),m.jsx("p",{className:"text-stone-500 text-sm italic mt-2",children:"Future improvement: Add side guards to catch dust falling at angles and prevent debris from entering other open spaces."})]}),m.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[m.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"Lessons Learned"}),m.jsxs("ul",{className:"text-amber-800 text-sm space-y-1",children:[m.jsx("li",{children:"The front wall should have been designed to bear loads from users pressing the E-Stop."}),m.jsx("li",{children:"An insulating material should be placed between the conductive metal inner enclosure and electrical components to prevent shorts."})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-8",children:[m.jsxs("div",{className:"rounded-lg overflow-hidden shadow-sm border border-stone-200",children:[m.jsx("img",{src:"https://placehold.co/500x350/C9A668/ffffff?text=Enclosure+CAD",alt:"Enclosure CAD Rendering",className:"w-full h-auto"}),m.jsx("div",{className:"p-3 bg-white",children:m.jsx("p",{className:"text-stone-600 text-sm",children:"Enclosure CAD model showing dual-enclosure design"})})]}),m.jsxs("div",{className:"rounded-lg overflow-hidden shadow-sm border border-stone-200",children:[m.jsx("img",{src:"https://placehold.co/500x350/C9A668/ffffff?text=Inner+Enclosure+Supports",alt:"Inner Enclosure Supports",className:"w-full h-auto"}),m.jsx("div",{className:"p-3 bg-white",children:m.jsx("p",{className:"text-stone-600 text-sm",children:"Wooden frame connecting inner and outer enclosures"})})]})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"3-Jaw Chuck Design"}),m.jsx("p",{className:"text-stone-600 mb-6 leading-relaxed",children:"The chuck holds the disc golf disc in place during spinning and is based on a three-jaw lathe chuck design. This mechanism allows the chuck tightening to be controlled separately from the spinning motion, enabling the disc to be securely clamped before cleaning begins."}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[m.jsx("div",{className:"md:w-1/3",children:m.jsx("div",{className:"rounded-lg overflow-hidden shadow-sm border border-stone-200",children:m.jsx("img",{src:"./dist/assets/images/initial_chuck.jpg",alt:"First Chuck Prototype - Yellow 3D printed chuck from Thingiverse",className:"w-full h-auto object-cover"})})}),m.jsxs("div",{className:"md:w-2/3",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Prototype 1: Feasibility Test"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"The first prototype was downloaded from Thingiverse as a small three-jaw chuck to test if the mechanism would be feasible for our application. This helped us understand the basic mechanics before investing time in custom design."})]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[m.jsx("div",{className:"md:w-1/3",children:m.jsx("div",{className:"rounded-lg overflow-hidden shadow-sm border border-stone-200",children:m.jsx("img",{src:"./dist/assets/images/50%_chuck.jpeg",alt:"50% Scale Chuck Prototype - Black 3D printed chuck on cutting mat",className:"w-full h-auto object-cover"})})}),m.jsxs("div",{className:"md:w-2/3",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Prototype 2: Custom Design at 50% Scale"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"After deciding on the three-jaw chuck mechanism, we recreated the design in OnShape with modifications to size, tolerances, and mounting mechanisms. The second prototype was printed at 50% scale to verify tolerancing and the new clamp shapes before committing to full-scale production."}),m.jsx("p",{className:"text-stone-600 leading-relaxed mt-2",children:"During this phase, we determined that a slip ring would be needed to allow the chuck tightening function to work while still enabling the full chuck to spin for cleaning."})]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[m.jsx("div",{className:"md:w-1/3",children:m.jsx("div",{className:"rounded-lg overflow-hidden shadow-sm border border-stone-200",children:m.jsx("img",{src:"./dist/assets/images/final_chuck_assembly.png",alt:"Final Chuck Assembly - CAD render showing full-scale chuck with gear train",className:"w-full h-auto object-cover"})})}),m.jsxs("div",{className:"md:w-2/3",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Final Version: Full-Scale with Gear Train"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"After adjusting the scroll plate height, the final version was printed. Key features include:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 mt-2 space-y-1 ml-2",children:[m.jsx("li",{children:"Motor mounted to the slip ring for independent tightening control"}),m.jsx("li",{children:"Spur gear drives a crown gear attached to the scroll plate"}),m.jsx("li",{children:"Scroll plate motion causes jaws to clamp onto the disc"}),m.jsx("li",{children:"Entire chuck mounts to an 8mm motor shaft for rotation"})]})]})]})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.45s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"Motor Systems"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white p-6 rounded-lg border border-stone-200 shadow-sm",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Central Motor"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"HP C6409-60004 motor rotates the chuck and disc at controlled speeds for thorough cleaning. Mounted to the wooden inner enclosure supports which handle the torque loads."})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg border border-stone-200 shadow-sm",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Brush Motor"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:'Servo motor acts as a "wrist" to actuate the brush and position it across the disc surface in pre-programmed patterns for complete coverage.'})]})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.5s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"Electrical Design"}),m.jsxs("div",{className:"space-y-6 mb-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Control System"}),m.jsxs("p",{className:"text-stone-600 leading-relaxed",children:[m.jsx("strong",{className:"text-stone-800",children:"Raspberry Pi 5 (8GB):"})," The main controller, upgraded from our initial Arduino Uno plan to handle more complex processing requirements including potential AI/ML workloads and multi-threaded control logic."]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Motor Control"}),m.jsxs("p",{className:"text-stone-600 leading-relaxed",children:[m.jsx("strong",{className:"text-stone-800",children:"TB6600 Motor Driver (4.0A):"})," Upgraded from the Adafruit Motorshield V2 (1.2A) to properly handle the Nema 23 motor's 4.0A current draw. Provides precise stepper control with microstepping capability."]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Sensing & Input"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-2 ml-2",children:[m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"Rotary Encoder:"}),' Performs "load sensing" by measuring motor RPM to detect disc presence. Distinguishes between fast "No-Load" speed and slower "Loaded" speed. This replaced our original flawed plan of using 3 IR distance sensors.']}),m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"Pi Camera:"})," For AI/ML-based mud detection and cleanliness verification"]}),m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"Physical Button Panel:"})," START, RESET, and STOP buttons for manual control"]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-2",children:"Power Management"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"Power supply system designed to handle simultaneous high current draw from multiple motors while maintaining stable voltage for the Raspberry Pi and sensors."})]})]}),m.jsxs("div",{className:"rounded-lg overflow-hidden shadow-lg border border-stone-200 bg-white",children:[m.jsx("div",{ref:u,className:"relative w-full overflow-auto bg-stone-50 select-none",style:{maxHeight:"80vh",cursor:n?"grabbing":"grab",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onMouseDown:d,onMouseMove:h,onMouseUp:f,onMouseLeave:p,onTouchStart:x,onTouchMove:y,onTouchEnd:M,children:m.jsx("div",{className:"min-w-full p-4",children:m.jsx("img",{src:"./dist/assets/images/circuit_diagram.svg",alt:"Circuit Diagram - KiCad Schematic",className:"w-full h-auto block mx-auto pointer-events-none",style:{minWidth:"100%",maxWidth:"none"},draggable:"false"})})}),m.jsx("div",{className:"bg-stone-50 px-4 py-2 border-t border-stone-200",children:m.jsxs("p",{className:"text-xs text-stone-500 text-center",children:[m.jsx("span",{className:"hidden sm:inline",children:"Click and drag to pan  "}),"Use browser zoom (Cmd/Ctrl +) or pinch to zoom for details"]})})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.6s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-4",children:"Software & Control Logic"}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"System Architecture"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"Our software implements a state machine that orchestrates the entire cleaning process. The system continuously monitors inputs from buttons, rotary encoder, and camera, then controls outputs to motors, servos, and the LCD display based on the current operational state."}),m.jsx("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:m.jsxs("p",{className:"text-stone-700 text-sm font-mono",children:[m.jsx("strong",{children:"Inputs:"})," Button presses (START/STOP), Rotary encoder (chuck motor RPM), Camera feed",m.jsx("br",{}),m.jsx("strong",{children:"Outputs:"})," Chuck motor relay, Central motor relay, Brush servo position, LCD display messages"]})})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"rounded-lg overflow-hidden shadow-lg border border-stone-200",children:m.jsx("img",{src:"./dist/assets/images/software_architecture.png",alt:"Software Architecture & Data Flow Diagram",className:"w-full h-auto"})}),m.jsx("p",{className:"text-stone-600 leading-relaxed mt-4",children:"The software architecture follows a centralized control model, where a single Python-based state machine orchestrates all robot operations. To maintain modularity, hardware interactions are abstracted into logical blocks:"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[m.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:[m.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Input Layer (Green)"}),m.jsx("p",{className:"text-green-800 text-sm",children:"Handles raw signals from the button interface, rotary encoder, and camera feed. This layer debounces mechanical switches and buffers video frames to prevent blocking the main loop."})]}),m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[m.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Logic Core (Blue)"}),m.jsx("p",{className:"text-blue-800 text-sm",children:"The Main State Controller processes these inputs to make real-time decisions, such as detecting a stall condition or triggering a cleaning cycle. It also manages the API communication with the Roboflow cloud for defect detection."})]}),m.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:[m.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Output Layer (Red)"}),m.jsx("p",{className:"text-red-800 text-sm",children:"Translates high-level commands into physical actions, managing GPIO states for the relay modules and generating PWM signals for the brush servo and LCD interface."})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Camera Stream Architecture"}),m.jsxs("p",{className:"text-stone-600 leading-relaxed mb-4",children:["To ensure low-latency image capture without blocking the main control loop, the system utilizes a split-process architecture. A dedicated video streaming service runs in a separate terminal instance using ",m.jsx("code",{className:"bg-stone-100 px-1 rounded",children:"libcamera-vid"}),". This service interfaces directly with the camera hardware and broadcasts a raw MJPEG stream over a local TCP socket (port 8888)."]}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"The main Python control script connects to this stream only when an image is required. This decoupling prevents the camera's initialization delay from slowing down the robot's real-time cleaning operations and allows for easier debugging of the video feed independent of the robot's logic."}),m.jsx("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:m.jsxs("p",{className:"text-stone-700 text-sm font-mono",children:[m.jsx("strong",{children:"Video Stream:"})," libcamera-vid  TCP socket (port 8888)  OpenCV VideoCapture  Base64 encoding  Roboflow API"]})})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"State Machine Operation"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"The cleaning cycle operates through four distinct states, each handling a specific phase of the process:"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"border-l-4 border-nobel-gold pl-4",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-1",children:"1. IDLE  WAIT_FOR_LOAD"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"When START is pressed, the chuck motor opens for 3 seconds to allow disc insertion. The system then waits for the user to place the disc and press START again."})]}),m.jsxs("div",{className:"border-l-4 border-nobel-gold pl-4",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-1",children:"2. WAIT_FOR_LOAD  CLEANING"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"The chuck motor activates to clamp the disc. The rotary encoder monitors motor RPM, detecting when the motor stalls (indicating the disc is gripped). If no stall is detected within 5 seconds, the system returns to IDLE with an error message."}),m.jsx("div",{className:"bg-stone-50 rounded p-3 mt-2 border border-stone-200",children:m.jsxs("p",{className:"text-stone-700 text-xs font-mono",children:[m.jsx("strong",{children:"Stall Detection:"})," Monitors encoder ticks. If the count remains unchanged for 20 consecutive loops (0.2s), the disc is considered clamped."]})})]}),m.jsxs("div",{className:"border-l-4 border-nobel-gold pl-4",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-1",children:"3. CLEANING Cycle"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"The brush servo lowers to the scrubbing position, and the central motor rotates the disc for 30 seconds. The LCD updates every 5 seconds showing remaining time. After cleaning, the brush retracts and the AI vision system analyzes the disc."})]}),m.jsxs("div",{className:"border-l-4 border-nobel-gold pl-4",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-1",children:"4. CLEANING  FINISHED"}),m.jsx("p",{className:"text-stone-600 text-sm",children:'If the AI detects no dirt, the system moves to FINISHED state and displays "Clean Complete!" If dirt is still detected, the system loops back to CLEANING for another wash cycle.'})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Machine Learning Dirt Detection"}),m.jsxs("p",{className:"text-stone-600 leading-relaxed mb-4",children:["We trained a custom AI model using ",m.jsx("strong",{className:"text-stone-800",children:"Roboflow"}),", a web platform that automates AI-powered image analysis. The model was trained on a dataset of 25 clean disc images and 25 images with visible dirt, enabling it to accurately detect dirt presence on disc surfaces."]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-3",children:"Model Performance Visualization"}),m.jsx("p",{className:"text-stone-600 text-sm leading-relaxed mb-4",children:"The trained model demonstrates robust dirt detection capabilities, accurately identifying dirt particles and debris while ignoring disc features such as color, logos, and printed graphics. This selective detection is crucial for reliable operation across different disc designs and colors."}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm border border-stone-200",children:[m.jsxs("div",{className:"bg-stone-50 px-4 py-2 border-b border-stone-200",children:[m.jsx("p",{className:"text-sm font-semibold text-stone-700",children:"Camera Input"}),m.jsx("p",{className:"text-xs text-stone-500",children:"Raw image captured by Pi Camera"})]}),m.jsx("img",{src:"./dist/assets/images/dirty_disc.png",alt:"Dirty disc as seen by camera",className:"w-full h-auto"})]}),m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm border border-stone-200",children:[m.jsxs("div",{className:"bg-stone-50 px-4 py-2 border-b border-stone-200",children:[m.jsx("p",{className:"text-sm font-semibold text-stone-700",children:"ML Model Detection"}),m.jsx("p",{className:"text-xs text-stone-500",children:"Dirt regions identified by AI (blue bounding boxes)"})]}),m.jsx("img",{src:"./dist/assets/images/dirt_detection.png",alt:"ML model dirt detection with bounding boxes",className:"w-full h-auto"})]})]}),m.jsx("p",{className:"text-stone-600 text-sm leading-relaxed mt-4",children:"As shown in the comparison above, the model successfully identifies individual dirt particles and debris clusters (highlighted with blue bounding boxes) while completely ignoring the disc's pink color, black logo artwork, and printed text. This demonstrates the model's ability to distinguish between actual dirt contamination and the disc's inherent design features, ensuring accurate cleanliness verification regardless of disc appearance."})]}),m.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-4 border-l-4 border-blue-500",children:[m.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Roboflow Workflow"}),m.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mb-3",children:"Our Roboflow workflow processes images through an automated pipeline:"}),m.jsxs("ol",{className:"list-decimal list-inside text-blue-800 text-sm space-y-1 ml-2 mb-4",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Input:"})," Receives an image from the Raspberry Pi camera"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Detection:"})," Runs a segmentation model (SAM3) to identify and segment dirt regions"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Visualization:"})," Draws bounding boxes on detected dirt areas"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Notification:"})," Sends results via webhook for logging"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Data Upload:"})," Saves image and results to dataset for review/retraining"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Boolean Output:"}),' Returns "true" if dirt detected, "false" if clean']})]}),m.jsxs("p",{className:"text-blue-800 text-sm",children:[m.jsx("strong",{children:"Explore the workflow:"})," ",m.jsx("a",{href:"https://app.roboflow.com/workflows/embed/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ3b3JrZmxvd0lkIjoiZ2k0azZzeDFscWxwc1J1ZVd1YkIiLCJ3b3Jrc3BhY2VJZCI6IlFrWWFXQmI5NzNQWTNLN2pkYnlhVlBFMVV6eTIiLCJ1c2VySWQiOiJRa1lhV0JiOTczUFkzSzdqZGJ5YVZQRTFVenkyIiwiaWF0IjoxNzY2MDQ1MzY0fQ.kjzo9iuPqUFK4MCBv9G_rBWBhPuV9UrvZTv3FDnYCrU",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Roboflow Workflow"})]})]}),m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Integration in Software"}),m.jsxs("p",{className:"text-stone-700 text-sm leading-relaxed mb-3",children:["The ",m.jsx("code",{className:"bg-white px-1 rounded text-stone-800",children:"check_dirt_with_ai()"})," function captures an image from the camera, encodes it as base64, and sends it to the Roboflow workflow API:"]}),m.jsx("pre",{className:"bg-white rounded p-3 text-xs overflow-x-auto border border-stone-200",children:`# Capture image from camera
cap = cv2.VideoCapture("tcp://127.0.0.1:8888")
ret, frame = cap.read()

# Encode and send to Roboflow
img_base64 = base64.b64encode(img_encoded).decode("utf-8")
response = requests.post(WORKFLOW_URL, json={
    "api_key": API_KEY,
    "inputs": {"image": {"type": "base64", "value": img_base64}}
})

# Extract boolean result
is_dirty = result.get("outputs", [{}])[0].get("boolean", 0)
return is_dirty == 1`}),m.jsxs("p",{className:"text-stone-600 text-xs mt-2 italic",children:["The function returns ",m.jsx("code",{className:"bg-white px-1 rounded",children:"True"})," if dirt is detected, triggering another cleaning cycle. Otherwise, the disc is considered clean and the process completes."]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"Safety & Error Handling"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:"The system includes multiple safety mechanisms:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-2 ml-2 mb-6",children:[m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"Emergency Stop:"})," The STOP button immediately halts all motors and returns the brush to home position, regardless of current state"]}),m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"Stall Timeout:"})," If the chuck fails to grip the disc within 5 seconds, the system safely returns to IDLE with an error message"]}),m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"AI Failure Handling:"})," If the Roboflow API call fails or times out, the system defaults to assuming the disc is clean to prevent infinite cleaning loops"]}),m.jsxs("li",{children:[m.jsx("strong",{className:"text-stone-800",children:"LCD Feedback:"})," Real-time status messages guide the user through each phase of the cleaning process"]})]}),m.jsxs("div",{className:"bg-amber-50 rounded-lg p-6 border-l-4 border-amber-500",children:[m.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"Active Servo Stabilization (Brownout Protection)"}),m.jsxs("p",{className:"text-amber-800 text-sm leading-relaxed mb-3",children:["During the high-load cleaning phase, the central motor draws significant current, creating momentary voltage drops (brownouts) and electrical noise that can cause the brush servo to lose holding torque and drift upward. To counteract this, the software implements an ",m.jsx("strong",{children:"active holding loop"}),"."]}),m.jsx("p",{className:"text-amber-800 text-sm leading-relaxed",children:'Instead of sending a single position command, the control loop re-asserts the "brush down" PWM signal at a frequency of 1Hz (once per second) throughout the entire wash cycle. This constant software reinforcement forces the servo to maintain pressure on the disc despite electrical fluctuations and mechanical vibrations, ensuring a consistent scrub.'}),m.jsx("div",{className:"bg-white rounded p-3 mt-3 border border-amber-200",children:m.jsxs("p",{className:"text-amber-900 text-xs font-mono",children:[m.jsx("strong",{children:"Implementation:"})," During 30-second wash cycle, brush_servo.value = BRUSH_DOWN_POS is called every 1 second (within the loop), providing continuous position reinforcement"]})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-800 mb-3",children:"External Software Dependencies"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"The software relies on the following external libraries and services:"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Operating System"}),m.jsx("ul",{className:"text-stone-600 text-sm space-y-1",children:m.jsxs("li",{children:[" ",m.jsx("strong",{children:"Raspberry Pi OS"})," - Linux-based OS for Raspberry Pi hardware"]})})]}),m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Programming Language"}),m.jsx("ul",{className:"text-stone-600 text-sm space-y-1",children:m.jsxs("li",{children:[" ",m.jsx("strong",{children:"Python 3"})," - Primary programming language"]})})]}),m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Computer Vision"}),m.jsxs("ul",{className:"text-stone-600 text-sm space-y-1",children:[m.jsxs("li",{children:[" ",m.jsx("strong",{children:"OpenCV (cv2)"})," - Image capture and processing"]}),m.jsxs("li",{children:[" ",m.jsx("strong",{children:"libcamera-vid"})," - Video streaming service for camera feed"]})]})]}),m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Hardware Control"}),m.jsxs("ul",{className:"text-stone-600 text-sm space-y-1",children:[m.jsxs("li",{children:[" ",m.jsx("strong",{children:"gpiozero"})," - GPIO pin control for motors and buttons"]}),m.jsxs("li",{children:[" ",m.jsx("strong",{children:"RPi.GPIO"})," - Low-level GPIO access"]}),m.jsxs("li",{children:[" ",m.jsx("strong",{children:"RPLCD"})," - LCD display control library"]})]})]}),m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Network & API"}),m.jsx("ul",{className:"text-stone-600 text-sm space-y-1",children:m.jsxs("li",{children:[" ",m.jsx("strong",{children:"requests"})," - HTTP library for Roboflow API calls"]})})]}),m.jsxs("div",{className:"bg-stone-50 rounded-lg p-4 border border-stone-200",children:[m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Cloud Services"}),m.jsx("ul",{className:"text-stone-600 text-sm space-y-1",children:m.jsxs("li",{children:[" ",m.jsx("strong",{children:"Roboflow"})," - Cloud-based ML model inference service"]})})]})]}),m.jsx("p",{className:"text-stone-600 text-sm mt-4 italic",children:"Note: Standard Python libraries (time, base64, os, threading) are also used but are included with Python by default."})]}),m.jsxs("div",{className:"bg-[#F5F4F0] rounded-lg p-6 border-l-4 border-nobel-gold",children:[m.jsx("h3",{className:"text-lg font-serif font-bold text-stone-900 mb-2",children:"Source Code"}),m.jsx("p",{className:"text-stone-600 mb-3",children:"The complete software implementation, including the state machine, AI integration, and hardware control logic, is available in our GitHub repository:"}),m.jsxs("a",{href:"https://github.com/ConnorHoang/Disk-Golf-Cleaner",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-nobel-gold hover:text-stone-900 font-semibold transition-colors",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View on GitHub"]})]})]})]})]})}function uF(){return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase animate-fade-in-up",style:{animationDelay:"0s"},children:"Development Journey"}),m.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-stone-900 mb-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:"Design Process & Rationale"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mx-auto mb-6 animate-fade-in-up",style:{animationDelay:"0.2s"}}),m.jsx("p",{className:"text-stone-600 text-lg mb-16 text-center max-w-3xl mx-auto leading-relaxed animate-fade-in-up",style:{animationDelay:"0.3s"},children:"Follow our journey through three sprints of iterative design, prototyping, and integration. Click on any sprint to explore the details."})]}),m.jsxs("div",{className:"relative max-w-6xl mx-auto mb-16 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[m.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-stone-400 transform -translate-x-1/2"}),m.jsxs("div",{className:"space-y-32",children:[m.jsxs("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[m.jsx("div",{className:"absolute left-1/2 top-1/2 w-4 h-4 bg-white rounded-full border-4 border-stone-400 shadow-sm z-20 transform -translate-x-1/2 -translate-y-1/2"}),m.jsx("div",{className:"hidden md:block absolute left-1/2 top-1/2 w-8 h-px bg-stone-400 z-10 transform -translate-x-full -translate-y-1/2"}),m.jsx("div",{className:"md:order-1 order-2 flex justify-end",children:m.jsx(ni,{to:"/process/sprint1",className:"group block w-full",children:m.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-stone-200 group-hover:shadow-lg group-hover:border-nobel-gold group-hover:-translate-y-1 transition-all duration-300",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:"w-12 h-12 bg-stone-50 rounded-lg flex items-center justify-center text-nobel-gold font-serif font-bold text-xl mr-4 border border-stone-100",children:"01"}),m.jsx("h3",{className:"font-serif text-2xl font-bold text-stone-900",children:"Sprint 1: Ideation"})]}),m.jsx("p",{className:"text-stone-600 mb-4 leading-relaxed",children:"Concept development, initial prototyping, and feasibility analysis"}),m.jsxs("div",{className:"flex items-center text-stone-500 font-semibold text-sm uppercase tracking-wider group-hover:text-nobel-gold transition-colors",children:[m.jsx("span",{children:"Explore Details"}),m.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}),m.jsx("div",{className:"hidden md:block md:order-2"})]}),m.jsxs("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[m.jsx("div",{className:"absolute left-1/2 top-1/2 w-4 h-4 bg-white rounded-full border-4 border-nobel-gold shadow-sm z-20 transform -translate-x-1/2 -translate-y-1/2"}),m.jsx("div",{className:"hidden md:block absolute left-1/2 top-1/2 w-8 h-px bg-stone-400 z-10 transform -translate-y-1/2"}),m.jsx("div",{className:"hidden md:block md:order-1"}),m.jsx("div",{className:"md:order-2 order-2 flex justify-start",children:m.jsx(ni,{to:"/process/sprint2",className:"group block w-full",children:m.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-stone-200 group-hover:shadow-lg group-hover:border-nobel-gold group-hover:-translate-y-1 transition-all duration-300",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:"w-12 h-12 bg-stone-50 rounded-lg flex items-center justify-center text-nobel-gold font-serif font-bold text-xl mr-4 border border-stone-100",children:"02"}),m.jsx("h3",{className:"font-serif text-2xl font-bold text-stone-900",children:"Sprint 2: Prototyping"})]}),m.jsx("p",{className:"text-stone-600 mb-4 leading-relaxed",children:"Subsystem development, testing, and component integration"}),m.jsxs("div",{className:"flex items-center text-stone-500 font-semibold text-sm uppercase tracking-wider group-hover:text-nobel-gold transition-colors",children:[m.jsx("span",{children:"Explore Details"}),m.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})})]}),m.jsxs("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[m.jsx("div",{className:"absolute left-1/2 top-1/2 w-4 h-4 bg-white rounded-full border-4 border-stone-900 shadow-sm z-20 transform -translate-x-1/2 -translate-y-1/2"}),m.jsx("div",{className:"hidden md:block absolute left-1/2 top-1/2 w-8 h-px bg-stone-400 z-10 transform -translate-x-full -translate-y-1/2"}),m.jsx("div",{className:"md:order-1 order-2 flex justify-end",children:m.jsx(ni,{to:"/process/sprint3",className:"group block w-full",children:m.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-stone-200 group-hover:shadow-lg group-hover:border-nobel-gold group-hover:-translate-y-1 transition-all duration-300",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:"w-12 h-12 bg-stone-50 rounded-lg flex items-center justify-center text-nobel-gold font-serif font-bold text-xl mr-4 border border-stone-100",children:"03"}),m.jsx("h3",{className:"font-serif text-2xl font-bold text-stone-900",children:"Sprint 3: Integration"})]}),m.jsx("p",{className:"text-stone-600 mb-4 leading-relaxed",children:"System integration, comprehensive testing, and MVP delivery"}),m.jsxs("div",{className:"flex items-center text-stone-500 font-semibold text-sm uppercase tracking-wider group-hover:text-nobel-gold transition-colors",children:[m.jsx("span",{children:"Explore Details"}),m.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}),m.jsx("div",{className:"hidden md:block md:order-2"})]})]})]})]})}function dF(){return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs(ni,{to:"/process",className:"inline-flex items-center text-nobel-gold hover:text-stone-900 mb-8 font-medium transition-colors",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Process"]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Development Phase 1"}),m.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-stone-900 mb-4",children:"Sprint 1: Benchtop Prototypes"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mb-6"}),m.jsx("p",{className:"text-stone-600 text-lg leading-relaxed max-w-3xl",children:"Our goal for Sprint 1 was to build benchtop-level functional prototypes of all sub-assemblies. We focused on proving out each subsystem individually before integration."})]}),m.jsxs("div",{className:"mb-12 bg-[#F5F4F0] rounded-lg p-8 border-l-4 border-nobel-gold",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-3",children:"Sprint 1 Goal"}),m.jsx("p",{className:"text-stone-700",children:"Build benchtop-model functional prototypes of all sub-assemblies (excluding pneumatics). Demonstrate an integrated prototype that implements functional electronics, firmware, and mechanical systems."})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-8",children:"What We Built"}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Enclosure"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"We built an initial cardboard prototype to establish the basic form factor and space claims. This allowed us to test disc insertion and understand the spatial requirements for the chuck, motors, and electronics before committing to final materials."})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Custom 3-Jaw Chuck"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"We started with a small physical prototype, taking inspiration from lathe chuck mechanisms as our foundation. During this sprint, we worked on understanding how to upscale and adapt the system, designing new clamps and a differential system for secure disc clamping."})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Central Motor System"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"We set up our motor control system with a StepperOnline Nema 23 stepper motor, Raspberry Pi 5 (8GB), and TB6600 motor driver. We initially tried using an Adafruit Motor Shield V2 with an Arduino Uno, but discovered it couldn't handle our motor's 4.0A current draw (the shield only supports 1.2A)."}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"We pivoted to the TB6600 driver, an industry standard that properly handles the Nema 23's requirements and connects directly to the Raspberry Pi."})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Brush Mechanism"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:'We built a mock brush on a servo "wrist" that actuates to reach the approximate location above the disc. We used actual brush weight in our prototype to ensure our servo could handle the real load.'})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Physical Controls"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:"We implemented a physical button panel with three operation modes:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-1 ml-2",children:[m.jsxs("li",{children:[m.jsx("span",{className:"text-stone-800 font-medium",children:"START:"})," Moves the central motor and after 3 seconds, moves the brush in place"]}),m.jsxs("li",{children:[m.jsx("span",{className:"text-stone-800 font-medium",children:"RESET:"})," Stops the central motor and resets the brush motor"]}),m.jsxs("li",{children:[m.jsx("span",{className:"text-stone-800 font-medium",children:"STOP:"})," Stops all movement immediately"]})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Sensing Research"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:'We researched and selected our sensing approach using a rotary encoder for "load sensing":'}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-1 ml-2",children:[m.jsx("li",{children:'No Disc = No Load: Motor spins at a high, fast "No-Load" speed'}),m.jsx("li",{children:`Disc = Load: The disc's weight slows the motor to a lower "Loaded" speed`}),m.jsx("li",{children:"This method is immune to dirt/water and can detect motor jams or disc slips for safety"})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Vision Detection Research"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:'We began researching AI-based mud detection using the Raspberry Pi Camera. Our approach involves taking photos of the stopped disc and feeding them into an AI model trained to distinguish "mud" from "clean plastic."'})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Major Pivot: Disc Detection"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[m.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:" Original Plan"}),m.jsx("p",{className:"text-red-800",children:"Use 3 IR distance sensors to detect when a disc is present."}),m.jsx("p",{className:"text-red-700 text-sm mt-2 italic",children:"Problem: The morphology of different discs doesn't have large enough differences for IR sensors to reliably detect."})]}),m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[m.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:" New Plan"}),m.jsx("p",{className:"text-green-800",children:'Use a rotary encoder for "load sensing" by measuring motor RPM.'}),m.jsx("p",{className:"text-green-700 text-sm mt-2 italic",children:"This approach is more robust and also provides safety benefits like detecting jams."})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Challenges We Faced"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0 w-3 h-3 bg-nobel-gold rounded-full mt-2 mr-4"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-stone-900 mb-1",children:"Schedule Delay"}),m.jsx("p",{className:"text-stone-600 mb-1",children:"Half the team was at the SHPE conference, putting us slightly behind schedule."}),m.jsx("p",{className:"text-stone-500 text-sm italic",children:"Solution: We held additional team meetings and work sessions to catch up."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0 w-3 h-3 bg-nobel-gold rounded-full mt-2 mr-4"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-stone-900 mb-1",children:"Integration Risk"}),m.jsx("p",{className:"text-stone-600 mb-1",children:"Developing mechanical, electrical, and software systems in parallel risked major failures when combining them."}),m.jsx("p",{className:"text-stone-500 text-sm italic",children:"Solution: We de-risked this by building a benchtop prototype (Pi, motor drivers, encoder) to solve integration issues early."})]})]})]})]}),m.jsxs("div",{className:"mb-12 bg-[#F5F4F0] rounded-lg p-8",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-4",children:"Goals for Sprint 2"}),m.jsxs("ul",{className:"space-y-2 text-stone-700",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Full-scale model with all sensors and components mounted"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Pneumatics system assembled (if parts arrive)"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Inner enclosure assembled with chuck and central motors"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Motor encoder detecting when disc is tightened"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Central motors wired to Raspberry Pi"]})]})]}),m.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-stone-200",children:[m.jsx(ni,{to:"/process",className:"text-stone-600 hover:text-stone-900 font-medium transition-colors",children:" Back to Process"}),m.jsx(ni,{to:"/process/sprint2",className:"bg-nobel-gold text-white px-6 py-3 rounded-lg font-semibold hover:bg-stone-800 transition-colors",children:"Next: Sprint 2 "})]})]})}function hF(){return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs(ni,{to:"/process",className:"inline-flex items-center text-nobel-gold hover:text-stone-900 mb-8 font-medium transition-colors",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Process"]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Development Phase 2"}),m.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-stone-900 mb-4",children:"Sprint 2: Scaling Up & Integration"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mb-6"}),m.jsx("p",{className:"text-stone-600 text-lg leading-relaxed max-w-3xl",children:"During Sprint 2, we transitioned from benchtop prototypes to full-scale components. We focused on finalizing materials, fabricating all components, and improving our team organization."})]}),m.jsxs("div",{className:"mb-12 bg-[#F5F4F0] rounded-lg p-8 border-l-4 border-nobel-gold",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-3",children:"Sprint 2 Goal"}),m.jsx("p",{className:"text-stone-700",children:"Scale up from benchtop prototypes to full-scale components. Finalize materials and approaches, and fabricate all components for integration."})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"How We Improved Our Process"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[m.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:" What Worked Well"}),m.jsxs("ul",{className:"text-green-800 space-y-2",children:[m.jsx("li",{children:" Very productive co-working hours"}),m.jsx("li",{children:" Improved team communication"}),m.jsx("li",{children:" Everyone committed throughout"})]})]}),m.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[m.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:" What We Changed"}),m.jsxs("ul",{className:"text-amber-800 space-y-2",children:[m.jsx("li",{children:" We weren't organized before"}),m.jsx("li",{children:" Tasks were getting lost"}),m.jsx("li",{children:" Unclear who was working on what"})]})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"New Approach: Ad Hoc Task Management"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:'In Sprint 1, we were in "scrambling" mode, still finalizing core design pivots while half our team was at the SHPE conference. For Sprint 2, we adopted a more organized structure:'}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-2 ml-2",children:[m.jsx("li",{children:"We delegate tasks based on who has time and which tasks align with personal learning goals"}),m.jsx("li",{children:"We use a central task spreadsheet to hold everyone accountable"}),m.jsx("li",{children:"The spreadsheet tracks deadlines and keeps everyone working in sync"})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-8",children:"What We Built"}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Enclosure"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"We completed the external enclosure CAD design and laser cut the internal enclosure. The enclosure now has a front door for disc insertion and a dustpan at the bottom for waste collection. We also determined the central motor location."})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Frisbee Chuck"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:"We created full-scale CAD for the chuck and made a 50% scale version to test tolerances and offsets. We also worked on:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-1 ml-2",children:[m.jsx("li",{children:"Testing different clamp shapes for optimal grip"}),m.jsx("li",{children:"Redesigning the clamps for better frisbee compatibility"}),m.jsx("li",{children:"Integrating the chuck with the central motor"})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Custom Rotary Encoder Setup"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:'We finished building a custom housing for the rotary encoder and got the load sensing system working. The encoder can now detect when a disc is present by measuring the difference between "no-load" and "loaded" motor speeds.'})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Brush Assembly"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:'We continued developing the brush mechanism, working on the servo-controlled "wrist" that positions the brush across the disc surface.'})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Circuit Diagram"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"We started creating a complete circuit diagram showing all electrical connections including power distribution. This helps ensure proper wiring during final assembly."})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Camera Vision Progress"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:'We set up the camera with the Raspberry Pi and began working on grime detection. The disc will be considered "clean" when our ML model no longer detects any mud spots.'})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Pneumatics Research"}),m.jsx("p",{className:"text-stone-600 leading-relaxed",children:"We found the pneumatic system connection points. Pneumatics are likely but not required for the final product. It's a nice-to-have feature."})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Key Tasks Completed"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Pi peripherals and monitor setup"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Camera connected to Raspberry Pi"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Rotary encoder housing completed"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Central motor location determined"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"External enclosure CAD completed"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Internal enclosure laser cut"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Clamps redesigned for frisbee"})]}),m.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg border border-stone-200",children:[m.jsx("span",{className:"text-green-600 mr-3",children:""}),m.jsx("span",{className:"text-stone-700",children:"Stepper motor software figured out"})]})]})]}),m.jsxs("div",{className:"mb-12 bg-[#F5F4F0] rounded-lg p-8",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-4",children:"Final Goals: Unchanged"}),m.jsx("p",{className:"text-stone-700 mb-4",children:"Given our skills, progress, and projected effort, we felt confident we could reach our original goal. Our final machine will include:"}),m.jsxs("ul",{className:"space-y-2 text-stone-700",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Enclosure with door and dustpan for waste collection"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Disc detection via rotary encoder load sensing"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Custom chuck for secure disc rotation"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Two-sided cleaning with user flip prompt"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"AI vision detection to confirm cleanliness"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"GUI for status and instructions"]})]})]}),m.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-stone-200",children:[m.jsx(ni,{to:"/process/sprint1",className:"text-stone-600 hover:text-stone-900 font-medium transition-colors",children:" Previous: Sprint 1"}),m.jsx(ni,{to:"/process/sprint3",className:"bg-nobel-gold text-white px-6 py-3 rounded-lg font-semibold hover:bg-stone-800 transition-colors",children:"Next: Sprint 3 "})]})]})}function fF(){return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs(ni,{to:"/process",className:"inline-flex items-center text-nobel-gold hover:text-stone-900 mb-8 font-medium transition-colors",children:[m.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Process"]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase",children:"Development Phase 3"}),m.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-stone-900 mb-4",children:"Sprint 3: Fabrication & Integration"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mb-6"}),m.jsx("p",{className:"text-stone-600 text-lg leading-relaxed max-w-3xl",children:"During Sprint 3, we focused on full fabrication of all components and final system integration. We overcame major hardware failures and successfully got our machine learning model working with over 98% accuracy."})]}),m.jsxs("div",{className:"mb-12 bg-[#F5F4F0] rounded-lg p-8 border-l-4 border-nobel-gold",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-3",children:"Sprint 3 Goal"}),m.jsx("p",{className:"text-stone-700",children:"Complete fabrication of all components, resolve space claims within the enclosure, and achieve full system integration with working software."})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Major Pivots This Sprint"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[m.jsxs("h3",{className:"font-semibold text-red-900 mb-2 flex items-center",children:[m.jsx("span",{className:"mr-2",children:""})," Raspberry Pi 5 Failure"]}),m.jsx("p",{className:"text-red-800 mb-3",children:"Our Raspberry Pi 5 fried unexpectedly, forcing us to migrate our entire system to a Raspberry Pi 4."}),m.jsxs("div",{className:"bg-white rounded p-4 border border-red-100",children:[m.jsxs("p",{className:"text-stone-700 text-sm mb-2",children:[m.jsx("span",{className:"font-medium",children:"The Risk:"})," The Pi 4 has significantly less processing power. We anticipated the full-fidelity AI model could oversaturate the older CPU, causing inference latency."]}),m.jsxs("p",{className:"text-stone-700 text-sm",children:[m.jsx("span",{className:"font-medium",children:"Our Solution:"})," We used Roboflow's cloud-based inference instead of running the model locally, which works perfectly with the Pi 4's capabilities."]})]})]}),m.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[m.jsxs("h3",{className:"font-semibold text-amber-900 mb-2 flex items-center",children:[m.jsx("span",{className:"mr-2",children:""})," Central Motor Failure"]}),m.jsxs("p",{className:"text-amber-800 mb-3",children:["Our original central motor broke during testing. We pivoted to using an",m.jsx("span",{className:"font-medium",children:" HP C6409-60004 Motor"})," as a replacement, which we successfully integrated with our existing motor mount and control system."]})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Our Biggest Challenge & How We Overcame It"}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Resolving Conflicting Space Claims"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:'We had conflicting space claims within the inner enclosure between the chuck, slip ring, brush assembly, and central motor. The vertical "stack-up" height was critical. If the central motor was mounted too high or low, it would interfere with the slip ring assembly or the enclosure lid.'}),m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Steps to Resolution:"}),m.jsxs("ol",{className:"list-decimal list-inside text-stone-600 space-y-2 ml-2",children:[m.jsxs("li",{children:[m.jsx("span",{className:"font-medium",children:"Component Isolation:"})," We measured the absolute Z-height requirements of the slip ring and brush assembly individually"]}),m.jsxs("li",{children:[m.jsx("span",{className:"font-medium",children:"Calculated Stack-up:"})," Performed hand calculations to determine the exact necessary clearance for the central motor relative to the chuck"]}),m.jsxs("li",{children:[m.jsx("span",{className:"font-medium",children:"Derived Fabrication Specs:"})," Used these calculations to define the motor mounting height before finalizing CAD/cuts, ensuring the physical assembly would fit on the first attempt"]})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-8",children:"What We Built"}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsxs("div",{className:"flex items-center mb-3",children:[m.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2.5 py-1 rounded mr-3",children:"98%+ ACCURACY"}),m.jsx("h3",{className:"text-xl font-semibold text-stone-900",children:"Machine Learning Dirt Detection"})]}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"We set up our machine learning model on Roboflow and got it working on the Raspberry Pi with over 98% accuracy. The workflow is:"}),m.jsxs("ol",{className:"list-decimal list-inside text-stone-600 space-y-2 ml-2",children:[m.jsx("li",{children:"The Pi camera takes an image of the disc"}),m.jsx("li",{children:"The image is sent to Roboflow via their workflow API"}),m.jsx("li",{children:"Roboflow returns a binary value indicating whether dirt is detected"}),m.jsx("li",{children:"The system decides whether to continue cleaning or mark the disc as clean"})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"CAD Updates"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"Chuck:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-1 text-sm",children:[m.jsx("li",{children:"Final motor mount design"}),m.jsx("li",{children:"Crown gear on scroll plate"}),m.jsx("li",{children:"Spur gear integration with motor shaft"})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"Enclosure:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-1 text-sm",children:[m.jsx("li",{children:"Final mechanical drawings for base plate"}),m.jsx("li",{children:"Inner enclosure supports finalized"}),m.jsx("li",{children:"Screw hole locations determined"}),m.jsx("li",{children:"Motor mount supports completed"})]})]})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Fabrication"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"Laser Cutter:"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Outer enclosure walls"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"Plasma Cutter:"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Inner enclosure walls, sheet metal grate"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"ShopBot:"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Wood grate"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"3D Printers:"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Chuck, jaws, gear train housing, brush assembly"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"Sheet Metal Tools:"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Brackets, inner enclosure walls"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-stone-800 mb-2",children:"Hand Tools:"}),m.jsx("p",{className:"text-stone-600 text-sm",children:"Full assembly of all enclosures"})]})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Electrical System"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:"We completed the full electrical wiring and created detailed schematics in KiCAD. Our approach to fidelity:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-1 ml-2",children:[m.jsx("li",{children:"Used WAGO nuts to test electrical systems, allowing wire length to match mechanical constraints"}),m.jsx("li",{children:"Color-mapped wires on breadboards for easy debugging"}),m.jsx("li",{children:"Created professional schematics in KiCAD for documentation"})]})]}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white hover:border-nobel-gold transition-colors",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Software Architecture"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-3",children:"We organized our software into clear modules:"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"bg-green-50 rounded p-4",children:[m.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Inputs (Sensors)"}),m.jsx("p",{className:"text-green-700 text-sm",children:'Handle raw electrical signals and send info like "Button Pressed" or "RPM is 300" to the main controller'})]}),m.jsxs("div",{className:"bg-blue-50 rounded p-4",children:[m.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Logic (Controller)"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"AI work runs in its own file so heavy image processing doesn't freeze the main loop"})]}),m.jsxs("div",{className:"bg-red-50 rounded p-4",children:[m.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Outputs (Motors)"}),m.jsx("p",{className:"text-red-700 text-sm",children:"Controller sends commands to drivers, which handle spinning motors and updating the screen"})]})]})]})]})]}),m.jsxs("div",{className:"mb-16",children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Additional Challenge: Camera Placement"}),m.jsxs("div",{className:"border border-stone-200 rounded-lg p-6 bg-white",children:[m.jsx("h3",{className:"text-xl font-semibold text-stone-900 mb-3",children:"Disc Too High for Camera View"}),m.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:"We discovered that the placement of our disc was too high relative to the camera, which meant the camera couldn't see as much of the disc surface as we needed for accurate dirt detection."}),m.jsx("h4",{className:"font-semibold text-stone-800 mb-2",children:"Our Solution:"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-2 ml-2",children:[m.jsx("li",{children:"Purchased a new Arducam with a wider 120 field of view to capture more of the disc"}),m.jsx("li",{children:"Currently exploring ways to bring the disc lower, either by cutting down the shaft or other mechanical adjustments"})]})]})]}),m.jsxs("div",{className:"mb-12 bg-[#F5F4F0] rounded-lg p-8",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-4",children:"Current Status"}),m.jsx("p",{className:"text-stone-700 mb-4",children:"Our desired goal was to have MVP done by 12/14/2025 to leave room for pneumatic integration as a mini-sprint if time permits."}),m.jsxs("ul",{className:"space-y-2 text-stone-700",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-green-600 mr-2",children:""}),"Machine learning dirt detection working with 98%+ accuracy"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-green-600 mr-2",children:""}),"Full enclosure fabricated and assembled"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-green-600 mr-2",children:""}),"Electrical system wired and documented"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-green-600 mr-2",children:""}),"New 120 Arducam purchased to fix camera view issue"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Full system integration (in progress)"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-nobel-gold mr-2",children:""}),"Pneumatics integration (stretch goal)"]})]})]}),m.jsxs("div",{className:"mb-12 bg-amber-50 border border-amber-200 rounded-lg p-8",children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-amber-900 mb-4",children:"Next Steps"}),m.jsxs("ul",{className:"space-y-2 text-amber-800",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"mr-2",children:""}),"Get everything fully integrated into a working system"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"mr-2",children:""}),"Resolve disc height issue (cut shaft or mechanical adjustment)"]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"mr-2",children:""}),"Complete final testing and validation"]})]})]}),m.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-stone-200",children:[m.jsx(ni,{to:"/process/sprint2",className:"text-stone-600 hover:text-stone-900 font-medium transition-colors",children:" Previous: Sprint 2"}),m.jsx(ni,{to:"/process",className:"text-nobel-gold hover:text-stone-900 font-medium transition-colors",children:"Back to Process "})]})]})}function pF(){const n=[{component:"Wooden Brush for Cleaning",quantity:1,unitCost:9.99,totalCost:9.99,notes:"Standard cleaning brush"},{component:"24 V DC Planet Gear Motor with Controller",quantity:1,unitCost:44.99,totalCost:44.99,notes:"Central Motor (Core System)"},{component:"8mm 5A 6 wire Slip Ring",quantity:1,unitCost:68.57,totalCost:68.57,notes:"For power transmission to rotating chuck"},{component:"Electronic Gas Valve",quantity:1,unitCost:15.99,totalCost:15.99,notes:'1/4" NPT Solenoid Valve'},{component:"Pneumatic Tubing",quantity:1,unitCost:15.99,totalCost:15.99,notes:'1/4" OD PU Air Hose Kit'},{component:"Pneumatic System Pressure Sensor",quantity:1,unitCost:15.79,totalCost:15.79,notes:"0-150 PSI Sensor"},{component:"Pressure Sensor Push to Connect Fitting",quantity:1,unitCost:3.96,totalCost:3.96,notes:'1/4" Tube OD x 1/4" NPT Female'},{component:"22 Pin - 22 Pin Ribbon Cable",quantity:1,unitCost:6.69,totalCost:6.69,notes:"For Pi Camera connection"},{component:"Rotary Encoder",quantity:1,unitCost:8.99,totalCost:8.99,notes:"Speed sensor module"},{component:"22 Gauge Mild Steel Sheet Metal",quantity:1,unitCost:136,totalCost:136,notes:"Enclosure material"},{component:"4 ft by 8 ft 3/16 Euca Board",quantity:1,unitCost:22,totalCost:22,notes:"Enclosure/structural panels"},{component:"6 Way Fuse Box with Fuses",quantity:1,unitCost:9.99,totalCost:9.99,notes:"Power distribution safety"},{component:"2 pack of 8mm by 150 mm Linear Motion Rods",quantity:1,unitCost:6.59,totalCost:6.59,notes:"Linear guide rails"},{component:"Arducam for Raspberry Pi Camera Module 3 Wide",quantity:1,unitCost:36,totalCost:36,notes:"120 IMX708 with M12 Lens"}],e=[{component:"Inland 1.75mm PLA 1 kg",quantity:1,unitCost:14.99,totalCost:14.99,notes:"3D printing filament"},{component:"M3 Heat Set Inserts",quantity:3,unitCost:.03,totalCost:.1,notes:"For secure threading"},{component:"10 mm M3 Socket Head Screws",quantity:3,unitCost:.11,totalCost:.33,notes:"Mounting hardware"},{component:"3 mm 18 by 24 MDF Draft Board",quantity:1,unitCost:4.45,totalCost:4.45,notes:"Structural material"},{component:"Cabinet Grade Plywood",quantity:1,unitCost:15,totalCost:15,notes:"Partial sheet used"},{component:"2x4 Lumber",quantity:1,unitCost:.75,totalCost:.75,notes:"Framing material"},{component:"22 Gauge Solid Core Wire",quantity:1,unitCost:9.57,totalCost:9.57,notes:"Electrical wiring"},{component:"Lever Nut Wago Connectors",quantity:2,unitCost:.75,totalCost:1.5,notes:"Wire connections"},{component:"Perforated PCB Prototyping Board",quantity:1,unitCost:4,totalCost:4,notes:"Electronics mounting"},{component:"Raspberry Pi 4 Model B 4 GB RAM",quantity:1,unitCost:55,totalCost:55,notes:"Main controller"},{component:"Emergency Stop Button",quantity:1,unitCost:3.56,totalCost:3.56,notes:"Safety system"},{component:"16mm Round Momentary Switch",quantity:2,unitCost:.7,totalCost:1.4,notes:"User interface"},{component:"Screws",quantity:1,unitCost:5,totalCost:5,notes:"Assorted hardware"},{component:"Fasteners",quantity:1,unitCost:10,totalCost:10,notes:"Mounting hardware"},{component:"Screen",quantity:1,unitCost:5.5,totalCost:5.5,notes:"Display interface"},{component:"DC Motor (chuck)",quantity:1,unitCost:7,totalCost:7,notes:"Disc rotation"},{component:"Servo Motor (brush)",quantity:1,unitCost:4,totalCost:4,notes:"Brush positioning"},{component:"Wires/Wire Connectors",quantity:1,unitCost:0,totalCost:0,notes:"Electrical connections"}],t=n.reduce((i,a)=>i+a.totalCost,0),r=e.reduce((i,a)=>i+a.totalCost,0);return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase animate-fade-in-up",style:{animationDelay:"0s"},children:"Project Economics"}),m.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-stone-900 mb-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:"Bill of Materials (BOM)"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mx-auto mb-6 animate-fade-in-up",style:{animationDelay:"0.2s"}}),m.jsx("p",{className:"text-stone-600 text-lg mb-12 text-center max-w-2xl mx-auto animate-fade-in-up",style:{animationDelay:"0.3s"},children:"Detailed breakdown of all components used in the Disc Golf Disc Cleaner."})]}),m.jsx("div",{className:"text-center mb-8 animate-fade-in-up",style:{animationDelay:"0.4s"},children:m.jsx("h2",{className:"font-serif text-2xl md:text-3xl font-bold text-stone-900 mb-6",children:"Purchased Materials"})}),m.jsx("div",{className:"overflow-hidden shadow-lg rounded-lg border border-stone-200 animate-fade-in-up mb-16",style:{animationDelay:"0.5s"},children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full divide-y divide-stone-200",children:[m.jsx("thead",{className:"bg-stone-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Component"}),m.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Qty"}),m.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Unit Cost"}),m.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Total Cost"}),m.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Notes"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-stone-200",children:n.map((i,a)=>m.jsxs("tr",{className:a%2===0?"bg-white":"bg-[#F9F8F4]",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900",children:i.component}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-stone-600 text-center",children:i.quantity}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-stone-600 text-right",children:["$",i.unitCost.toFixed(2)]}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-stone-900 text-right",children:["$",i.totalCost.toFixed(2)]}),m.jsx("td",{className:"px-6 py-4 text-sm text-stone-500 italic",children:i.notes})]},a))}),m.jsx("tfoot",{className:"bg-stone-50 border-t border-stone-200",children:m.jsxs("tr",{children:[m.jsx("td",{colSpan:"3",className:"px-6 py-4 text-base font-bold text-stone-900 text-right",children:"Total Purchased Cost:"}),m.jsxs("td",{className:"px-6 py-4 text-base font-bold text-nobel-gold text-right",children:["$",t.toFixed(2)]}),m.jsx("td",{className:"px-6 py-4"})]})})]})})}),m.jsx("div",{className:"text-center mb-8 animate-fade-in-up",style:{animationDelay:"0.6s"},children:m.jsx("h2",{className:"font-serif text-2xl md:text-3xl font-bold text-stone-900 mb-6",children:"Scavenged & Found Materials"})}),m.jsx("div",{className:"overflow-hidden shadow-lg rounded-lg border border-stone-200 animate-fade-in-up mb-8",style:{animationDelay:"0.7s"},children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full divide-y divide-stone-200",children:[m.jsx("thead",{className:"bg-stone-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Item"}),m.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Qty"}),m.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Est. Unit Value"}),m.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Est. Total Value"}),m.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Note"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-stone-200",children:e.map((i,a)=>m.jsxs("tr",{className:a%2===0?"bg-white":"bg-[#F9F8F4]",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900",children:i.component}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-stone-600 text-center",children:i.quantity}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-stone-600 text-right",children:i.unitCost===0?"Negligible":`$${i.unitCost.toFixed(2)}`}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-stone-900 text-right",children:i.totalCost===0?"Negligible":`$${i.totalCost.toFixed(2)}`}),m.jsx("td",{className:"px-6 py-4 text-sm text-stone-500 italic",children:i.notes})]},a))}),m.jsx("tfoot",{className:"bg-stone-50 border-t border-stone-200",children:m.jsxs("tr",{children:[m.jsx("td",{colSpan:"3",className:"px-6 py-4 text-base font-bold text-stone-900 text-right",children:"Total Scavenged/Found Value:"}),m.jsxs("td",{className:"px-6 py-4 text-base font-bold text-nobel-gold text-right",children:["$",r.toFixed(2)]}),m.jsx("td",{className:"px-6 py-4"})]})})]})})}),m.jsxs("div",{className:"mt-8 bg-[#F5F4F0] rounded-lg p-8 border-l-4 border-nobel-gold animate-fade-in-up",style:{animationDelay:"0.8s"},children:[m.jsx("h2",{className:"font-serif text-xl font-bold text-stone-900 mb-4",children:"Budget Notes"}),m.jsxs("ul",{className:"list-disc list-inside text-stone-600 space-y-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Purchased Materials:"})," Items specifically bought for this project using the allocated budget."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Scavenged & Found Materials:"})," Items recovered from other devices, waste streams, or obtained from existing stock. Costs are estimated for replication purposes."]}),m.jsxs("li",{children:["Total Estimated Value (Purchased + Scavenged/Found): ",m.jsxs("strong",{className:"text-stone-800",children:["$",(t+r).toFixed(2)]})]})]})]})]})}function mF(){return m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-16",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"inline-block mb-3 text-xs font-bold tracking-widest text-stone-500 uppercase animate-fade-in-up",style:{animationDelay:"0s"},children:"Project Resources"}),m.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-stone-900 mb-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:"Documentation & Photos"}),m.jsx("div",{className:"w-20 h-1 bg-nobel-gold mx-auto mb-6 animate-fade-in-up",style:{animationDelay:"0.2s"}}),m.jsx("p",{className:"text-stone-600 text-lg max-w-2xl mx-auto animate-fade-in-up",style:{animationDelay:"0.3s"},children:"Additional documentation, build photos, and resources."})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.4s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Mechanical"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Mechanical+1",alt:"Mechanical Photo 1",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Mechanical+2",alt:"Mechanical Photo 2",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Mechanical+3",alt:"Mechanical Photo 3",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.5s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"CAD & 3D Models"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=CAD+1",alt:"CAD Photo 1",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=CAD+2",alt:"CAD Photo 2",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=CAD+3",alt:"CAD Photo 3",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.6s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Wiring & Electrical"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Wiring+1",alt:"Wiring Photo 1",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Wiring+2",alt:"Wiring Photo 2",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Wiring+3",alt:"Wiring Photo 3",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]})]})]}),m.jsxs("div",{className:"mb-16 pb-8 border-b border-stone-200 animate-fade-in-up",style:{animationDelay:"0.7s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Assembly & Build Process"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Assembly+1",alt:"Assembly Photo 1",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Assembly+2",alt:"Assembly Photo 2",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Assembly+3",alt:"Assembly Photo 3",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]})]})]}),m.jsxs("div",{className:"mb-16 animate-fade-in-up",style:{animationDelay:"0.8s"},children:[m.jsx("h2",{className:"font-serif text-2xl font-bold text-stone-900 mb-6",children:"Testing & Final Product"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Testing+1",alt:"Testing Photo 1",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Testing+2",alt:"Testing Photo 2",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]}),m.jsxs("div",{className:"group rounded-lg overflow-hidden shadow-sm border border-stone-200 hover:border-nobel-gold transition-all hover:shadow-lg",children:[m.jsx("img",{src:"https://placehold.co/400x300/C9A668/ffffff?text=Testing+3",alt:"Testing Photo 3",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),m.jsxs("div",{className:"p-4 bg-white",children:[m.jsx("h3",{className:"font-semibold text-stone-900",children:"Photo Title"}),m.jsx("p",{className:"text-stone-500 text-sm mt-1",children:"Description of this photo"})]})]})]})]})]})}function gF(){return m.jsxs(PL,{children:[m.jsx(OL,{}),m.jsxs("div",{className:"min-h-screen flex flex-col bg-[#F9F8F4] text-stone-800",children:[m.jsx(UL,{}),m.jsx("main",{className:"flex-grow",children:m.jsxs(wL,{children:[m.jsx(ia,{path:"/",element:m.jsx(oF,{})}),m.jsx(ia,{path:"/team",element:m.jsx(lF,{})}),m.jsx(ia,{path:"/design",element:m.jsx(cF,{})}),m.jsx(ia,{path:"/process",element:m.jsx(uF,{})}),m.jsx(ia,{path:"/process/sprint1",element:m.jsx(dF,{})}),m.jsx(ia,{path:"/process/sprint2",element:m.jsx(hF,{})}),m.jsx(ia,{path:"/process/sprint3",element:m.jsx(fF,{})}),m.jsx(ia,{path:"/budget",element:m.jsx(pF,{})}),m.jsx(ia,{path:"/code",element:m.jsx(mF,{})})]})}),m.jsx(jL,{})]})]})}yv.createRoot(document.getElementById("root")).render(m.jsx(aT.StrictMode,{children:m.jsx(gF,{})}));
